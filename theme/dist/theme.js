"use strict";(()=>{var se=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,i)=>(typeof require<"u"?require:t)[i]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var Vt={identifier:"en-US",UI_OK:"OK",UI_CANCEL:"Cancel",UI_APPLY:"Apply",UI_RESET:"Reset",UI_AUTO:"Auto",UI_CUSTOM:"Custom",UI_CLICK_HERE:"click here",MAIN_MSG_ERROR_OLD_SPOTIFY:"Your Spotify version is too old for WMPotify! Please update to Spotify 1.2.45 or newer.",MAIN_MSG_ERROR_LOAD_FAIL:"Theme loading failed. Please check the console for more information. Click OK to reload and try again.",MAIN_MSG_ERROR_LOAD_FAIL_GLOBALNAV:'Theme loading failed. Please check the console for more information. Make sure that the "Show Global nav bar with home button, search input and user avatar" option in the experimental features is set to "home-next-to-search". Click OK to reload and try again.',MAIN_MSG_ERROR_INIT:"An error occurred during initialization. Please check the console for more information.",MAIN_MSG_ERROR_INCOMPAT_EXT:"Incompatible extension %s detected! Some features of WMPotify will be disabled.",TAB_NOW_PLAYING:"Now Playing",TAB_LIBRARY:"Library",TAB_RESET_ORDER:"Reset Tab Order",PB_BTN_MINI_MODE:"Mini mode",PB_BTN_FULLSCREEN:"Full screen",LIBX_SIDEBAR_ROOT:"Library",LIBX_HEADER_ROOT:"Music",QUEUE_CURRENT_PLAYLIST_PLACEHOLDER:"Now Playing",MENU_CONF:"WMPotify Properties",CONF_COLOR_TITLE:"Color Chooser",CONF_COLOR_HUE:"Hue",CONF_COLOR_SAT:"Saturation",CONF_COLOR_TINTPB:"Apply color to the now playing bar buttons",CONF_GENERAL_TITLE:"General",CONF_GENERAL_STYLE:"Style",CONF_GENERAL_BASIC_CUSTOM_DLG_TITLE:"Set custom Basic colors",CONF_GENERAL_BASIC_CUSTOM_ACTIVE_MSG:"Enter a background color for an active window",CONF_GENERAL_BASIC_CUSTOM_INACTIVE_MSG:"Enter a background color for an inactive window",CONF_GENERAL_BASIC_CUSTOM_TEXT_MSG:"Enter a text color",CONF_GENERAL_BASIC_CUSTOM_PLACEHOLDER:"Enter as a CSS color",CONF_GENERAL_TITLE_STYLE:"Title style",CONF_GENERAL_TITLE_STYLE_NATIVE:"Native",CONF_GENERAL_TITLE_STYLE_CUSTOM:"Custom",CONF_GENERAL_TITLE_STYLE_KEEPMENU:"Keep Menu",CONF_GENERAL_APPLY:"Apply (reload required)",CONF_GENERAL_CONTROL_STYLE:"Control style",CONF_GENERAL_DARK_MODE:"Dark mode",CONF_GENERAL_DARK_MODE_FOLLOW_SCHEME:"Follow color scheme",CONF_GENERAL_DARK_MODE_SYSTEM:"Follow system setting",CONF_GENERAL_DARK_MODE_SYSTEM_MSG_WIN:"This option requires either installing the CEF/Spotify Tweaks Windhawk mod and enabling the 'Disable forced dark mode' option or manually patching the Spotify executable to remove the 'force-dark-mode' flag. Otherwise, dark mode will always be enabled. Are you sure you want to continue?",CONF_GENERAL_DARK_MODE_SYSTEM_MSG_UNIX:"This option requires manually patching the Spotify executable to remove the 'force-dark-mode' flag. Otherwise, dark mode will always be enabled. Are you sure you want to continue?",CONF_GENERAL_DARK_MODE_ALWAYS:"Always",CONF_GENERAL_DARK_MODE_NEVER:"Never",CONF_GENERAL_FONT:"UI font",CONF_GENERAL_CUSTOM_FONT_DLG_TITLE:"Set custom font",CONF_GENERAL_CUSTOM_FONT_MSG:"Enter a valid CSS font-family name",CONF_GENERAL_HIDE_PBLEFTBTN:"Hide the like button in the now playing bar",CONF_GENERAL_TOPMOST:"Always on top",CONF_GENERAL_TOPMOST_ALWAYS:"Always",CONF_GENERAL_TOPMOST_MINIMODE:"In mini mode",CONF_GENERAL_TOPMOST_NEVER:"Never",CONF_GENERAL_BACKDROP:"Backdrop",CONF_GENERAL_BACKDROP_NONE:"None (restart required)",CONF_GENERAL_BACKDROP_ACRYLIC:"Acrylic",CONF_GENERAL_BACKDROP_TABBED:"Tabbed",CONF_GENERAL_SHOW_LIBX:"Show Your Library X on the left sidebar",CONF_GENERAL_LOCK_TITLE:"Use static window title",CONF_GENERAL_WH_MESSAGE:'Some options require <a href="https://windhawk.net/mods/cef-titlebar-enabler-universal">CEF/Spotify Tweaks Windhawk mod</a> to work or look good.',CONF_SPEED_TITLE:"Play speed settings",CONF_SPEED_SLOW:"Slow",CONF_SPEED_NORMAL:"Normal",CONF_SPEED_FAST:"Fast",CONF_SPEED_CURRENT_LABEL:"Play speed",CONF_SPEED_CUSTOM_DLG_TITLE:"Set playback speed",CONF_SPEED_CUSTOM_MSG:"Enter a playback speed (0.5 - 5.0)",CONF_SPEED_NO_CONNECT_MSG:"Cannot change playback speed while playing from another device",CONF_ABOUT_TITLE:"About",CONF_ABOUT_DESC:"A Windows Media Player 11 inspired Spicetify theme for Spotify",CONF_ABOUT_VERSION:"Version",CONF_ABOUT_CTEWH_VERSION:"CEF/Spotify Tweaks Windhawk mod %s available",CONF_ABOUT_AUTHOR:"Made by Ingan121",CONF_ABOUT_AUTO_UPDATES:"Automatically check for updates",WMPVIS_INSTALL_TITLE:"Install WMPotify NowPlaying?",WMPVIS_INSTALL_DESC:"WMPotify NowPlaying features WMP-like visualization screen and lyrics overlaid on top of it. We recommend installing it for the best experience with WMPotify.",WMPVIS_INSTALL_STEPS:"To install it, please follow these steps:",WMPVIS_INSTALL_STEP1:"Copy the following code:",WMPVIS_INSTALL_STEP2:"Open a PowerShell window",WMPVIS_INSTALL_STEP2_UNIX:"Open a terminal window",WMPVIS_INSTALL_STEP3:"Paste the code and press Enter",WMPVIS_INSTALL_MORE_INFO:"Or %s for more information, including manual installation instructions.",WMPVIS_INSTALL_HIDE:"If you don't want to install it, %s to hide this button.",WMPVIS_INSTALL_CODE_COPY:"Code copied to clipboard!",THEME_UPDATE_TITLE:"WMPotify has been updated!",THEME_UPDATE_INFO:"WMPotify has been updated to %s. Please read the changelog below.",THEME_UPDATE_STEPS:"To update it, please follow these steps:",THEME_CHANGELOG_PLACEHOLDER:"Failed to fetch changelog! Please %s for more information.",THEME_UPDATE_DISMISS:"Do not notify me again about this update",CTEWH_UPDATE_MSG:"CEF/Spotify Tweaks Windhawk mod can be updated to version %s. Please update it from the Windhawk UI for the best experience with WMPotify."},ft=Vt;var $t={identifier:"ko-KR",UI_OK:"\uD655\uC778",UI_CANCEL:"\uCDE8\uC18C",UI_APPLY:"\uC801\uC6A9",UI_RESET:"\uC7AC\uC124\uC815",UI_AUTO:"\uC790\uB3D9",UI_CUSTOM:"\uC0AC\uC6A9\uC790 \uC9C0\uC815",UI_CLICK_HERE:"\uC5EC\uAE30\uB97C \uD074\uB9AD",MAIN_MSG_ERROR_OLD_SPOTIFY:"Spotify \uBC84\uC804\uC774 \uB108\uBB34 \uC624\uB798\uB418\uC5B4 WMPotify\uB97C \uC0AC\uC6A9\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4! Spotify\uB97C 1.2.45 \uC774\uC0C1\uC73C\uB85C \uC5C5\uB370\uC774\uD2B8\uD558\uC2ED\uC2DC\uC624.",MAIN_MSG_ERROR_LOAD_FAIL:"\uD14C\uB9C8 \uB85C\uB4DC\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4. OK\uB97C \uD074\uB9AD\uD558\uC5EC \uB2E4\uC2DC \uB85C\uB4DC\uD558\uC2ED\uC2DC\uC624.",MAIN_MSG_ERROR_LOAD_FAIL_GLOBALNAV:'\uD14C\uB9C8 \uB85C\uB4DC\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4. \uC2E4\uD5D8\uC801 \uAE30\uB2A5\uC5D0\uC11C "Show Global nav bar with home button, search input and user avatar"\uAC00 "home-next-to-search"\uB85C \uC124\uC815\uB418\uC5B4 \uC788\uB294\uC9C0 \uD655\uC778\uD558\uC2ED\uC2DC\uC624. OK\uB97C \uD074\uB9AD\uD558\uC5EC \uB2E4\uC2DC \uB85C\uB4DC\uD558\uC2ED\uC2DC\uC624.',MAIN_MSG_ERROR_INIT:"\uD14C\uB9C8 \uB85C\uB4DC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4. \uC790\uC138\uD55C \uB0B4\uC6A9\uC740 \uCF58\uC194\uC744 \uD655\uC778\uD558\uC2ED\uC2DC\uC624.",MAIN_MSG_ERROR_INCOMPAT_EXT:"\uD638\uD658\uB418\uC9C0 \uC54A\uB294 \uD655\uC7A5 \uD504\uB85C\uADF8\uB7A8 %s\uC774(\uAC00) \uAC10\uC9C0\uB418\uC5C8\uC2B5\uB2C8\uB2E4! WMPotify\uC758 \uC77C\uBD80 \uAE30\uB2A5\uC774 \uBE44\uD65C\uC131\uD654\uB429\uB2C8\uB2E4.",TAB_NOW_PLAYING:"\uC9C0\uAE08 \uC7AC\uC0DD",TAB_LIBRARY:"\uB77C\uC774\uBE0C\uB7EC\uB9AC",TAB_RESET_ORDER:"\uD0ED \uC21C\uC11C \uCD08\uAE30\uD654",PB_BTN_MINI_MODE:"\uBBF8\uB2C8 \uBAA8\uB4DC",PB_BTN_FULLSCREEN:"\uC804\uCCB4 \uD654\uBA74",LIBX_SIDEBAR_ROOT:"\uB77C\uC774\uBE0C\uB7EC\uB9AC",LIBX_HEADER_ROOT:"\uC74C\uC545",QUEUE_CURRENT_PLAYLIST_PLACEHOLDER:"\uC9C0\uAE08 \uC7AC\uC0DD",MENU_CONF:"WMPotify \uC18D\uC131",CONF_COLOR_TITLE:"\uC0C9 \uC120\uD0DD",CONF_COLOR_HUE:"\uC0C9\uC0C1",CONF_COLOR_SAT:"\uCC44\uB3C4",CONF_COLOR_TINTPB:"\uC9C0\uAE08 \uC7AC\uC0DD \uB9C9\uB300\uC758 \uBC84\uD2BC\uC5D0 \uC0C9\uC0C1 \uC801\uC6A9",CONF_GENERAL_TITLE:"\uC77C\uBC18",CONF_GENERAL_STYLE:"\uC2A4\uD0C0\uC77C",CONF_GENERAL_BASIC_CUSTOM_DLG_TITLE:"\uC0AC\uC6A9\uC790 \uC815\uC758 Basic \uC2A4\uD0C0\uC77C \uC0C9 \uC124\uC815",CONF_GENERAL_BASIC_CUSTOM_ACTIVE_MSG:"\uD65C\uC131 \uCC3D\uC758 \uBC30\uACBD\uC0C9\uC744 \uC785\uB825\uD558\uC138\uC694",CONF_GENERAL_BASIC_CUSTOM_INACTIVE_MSG:"\uBE44\uD65C\uC131 \uCC3D\uC758 \uBC30\uACBD\uC0C9\uC744 \uC785\uB825\uD558\uC138\uC694",CONF_GENERAL_BASIC_CUSTOM_TEXT_MSG:"\uD14D\uC2A4\uD2B8 \uC0C9\uC0C1\uC744 \uC785\uB825\uD558\uC138\uC694",CONF_GENERAL_BASIC_CUSTOM_PLACEHOLDER:"CSS \uC0C9\uC0C1\uC73C\uB85C \uC785\uB825\uD558\uC138\uC694",CONF_GENERAL_TITLE_STYLE:"\uC81C\uBAA9 \uC2A4\uD0C0\uC77C",CONF_GENERAL_TITLE_STYLE_NATIVE:"\uC2DC\uC2A4\uD15C",CONF_GENERAL_TITLE_STYLE_CUSTOM:"\uC790\uCCB4 \uAD6C\uD604",CONF_GENERAL_TITLE_STYLE_KEEPMENU:"\uBA54\uB274 \uC720\uC9C0",CONF_GENERAL_APPLY:"\uC801\uC6A9 (\uB2E4\uC2DC \uB85C\uB4DC \uD544\uC694)",CONF_GENERAL_CONTROL_STYLE:"\uCEE8\uD2B8\uB864 \uC2A4\uD0C0\uC77C",CONF_GENERAL_DARK_MODE:"\uB2E4\uD06C \uBAA8\uB4DC",CONF_GENERAL_DARK_MODE_FOLLOW_SCHEME:"\uC0C9 \uAD6C\uC131\uD45C \uB530\uB974\uAE30",CONF_GENERAL_DARK_MODE_SYSTEM:"\uC2DC\uC2A4\uD15C \uC124\uC815 \uB530\uB974\uAE30",CONF_GENERAL_DARK_MODE_SYSTEM_MSG_WIN:"\uC774 \uC635\uC158\uC744 \uC0AC\uC6A9\uD558\uB824\uBA74 CEF/Spotify Tweaks Windhawk \uBAA8\uB4DC\uB97C \uC124\uCE58\uD558\uACE0 'Disable forced dark mode' \uC635\uC158\uC744 \uD65C\uC131\uD654\uD558\uAC70\uB098 Spotify \uC2E4\uD589 \uD30C\uC77C\uC5D0\uC11C 'force-dark-mode' \uD50C\uB798\uADF8\uB97C \uC81C\uAC70\uD574\uC57C \uD569\uB2C8\uB2E4. \uADF8\uB807\uC9C0 \uC54A\uC73C\uBA74 \uD56D\uC0C1 \uB2E4\uD06C \uBAA8\uB4DC\uAC00 \uD65C\uC131\uD654\uB429\uB2C8\uB2E4. \uACC4\uC18D\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?",CONF_GENERAL_DARK_MODE_SYSTEM_MSG_UNIX:"\uC774 \uC635\uC158\uC744 \uC0AC\uC6A9\uD558\uB824\uBA74 Spotify \uC2E4\uD589 \uD30C\uC77C\uC5D0\uC11C 'force-dark-mode' \uD50C\uB798\uADF8\uB97C \uC81C\uAC70\uD574\uC57C \uD569\uB2C8\uB2E4. \uADF8\uB807\uC9C0 \uC54A\uC73C\uBA74 \uD56D\uC0C1 \uB2E4\uD06C \uBAA8\uB4DC\uAC00 \uD65C\uC131\uD654\uB429\uB2C8\uB2E4. \uACC4\uC18D\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?",CONF_GENERAL_DARK_MODE_ALWAYS:"\uD56D\uC0C1",CONF_GENERAL_DARK_MODE_NEVER:"\uC548\uD568",CONF_GENERAL_FONT:"UI \uAE00\uAF34",CONF_GENERAL_CUSTOM_FONT_DLG_TITLE:"\uC0AC\uC6A9\uC790 \uC815\uC758 \uAE00\uAF34 \uC124\uC815",CONF_GENERAL_CUSTOM_FONT_MSG:"\uC62C\uBC14\uB978 CSS font-family \uC774\uB984 \uC785\uB825",CONF_GENERAL_HIDE_PBLEFTBTN:"\uC9C0\uAE08 \uC7AC\uC0DD \uB9C9\uB300\uC758 \uC88B\uC544\uC694 \uBC84\uD2BC \uC228\uAE30\uAE30",CONF_GENERAL_TOPMOST:"\uD56D\uC0C1 \uC704\uC5D0 \uD45C\uC2DC",CONF_GENERAL_TOPMOST_ALWAYS:"\uD56D\uC0C1",CONF_GENERAL_TOPMOST_MINIMODE:"\uBBF8\uB2C8 \uBAA8\uB4DC\uC5D0\uC11C",CONF_GENERAL_TOPMOST_NEVER:"\uC548\uD568",CONF_GENERAL_BACKDROP:"\uBC30\uACBD \uC7AC\uC9C8",CONF_GENERAL_BACKDROP_NONE:"\uC5C6\uC74C (\uC7AC\uC2DC\uC791 \uD544\uC694)",CONF_GENERAL_BACKDROP_ACRYLIC:"\uC544\uD06C\uB9B4",CONF_GENERAL_BACKDROP_TABBED:"\uD0ED",CONF_GENERAL_SHOW_LIBX:"\uC67C\uCABD \uC0AC\uC774\uB4DC\uBC14\uC5D0 \uB77C\uC774\uBE0C\uB7EC\uB9AC X \uD45C\uC2DC",CONF_GENERAL_LOCK_TITLE:"\uC815\uC801 \uCC3D \uC81C\uBAA9 \uC0AC\uC6A9",CONF_GENERAL_WH_MESSAGE:'\uC77C\uBD80 \uC635\uC158\uC740 <a href="https://windhawk.net/mods/cef-titlebar-enabler-universal">CEF/Spotify Tweaks Windhawk \uBAA8\uB4DC</a>\uAC00 \uD544\uC694\uD569\uB2C8\uB2E4.',CONF_SPEED_TITLE:"\uC7AC\uC0DD \uC18D\uB3C4 \uC124\uC815",CONF_SPEED_SLOW:"\uB290\uB9AC\uAC8C",CONF_SPEED_NORMAL:"\uBCF4\uD1B5",CONF_SPEED_FAST:"\uBE60\uB974\uAC8C",CONF_SPEED_CURRENT_LABEL:"\uC7AC\uC0DD \uC18D\uB3C4",CONF_SPEED_CUSTOM_DLG_TITLE:"\uC7AC\uC0DD \uC18D\uB3C4 \uC124\uC815",CONF_SPEED_CUSTOM_MSG:"\uC7AC\uC0DD \uC18D\uB3C4\uB97C \uC785\uB825\uD558\uC2ED\uC2DC\uC624 (0.5 - 5.0)",CONF_SPEED_NO_CONNECT_MSG:"\uB2E4\uB978 \uC7A5\uCE58\uC5D0\uC11C \uC7AC\uC0DD \uC911\uC77C \uB54C\uB294 \uC7AC\uC0DD \uC18D\uB3C4\uB97C \uBCC0\uACBD\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4",CONF_ABOUT_TITLE:"\uC815\uBCF4",CONF_ABOUT_DESC:"Spotify\uC6A9 Windows Media Player 11 \uD14C\uB9C8",CONF_ABOUT_VERSION:"\uBC84\uC804",CONF_ABOUT_CTEWH_VERSION:"CEF/Spotify Tweaks Windhawk \uBAA8\uB4DC %s \uC0AC\uC6A9 \uAC00\uB2A5",CONF_ABOUT_AUTHOR:"\uC81C\uC791: Ingan121",CONF_ABOUT_AUTO_UPDATES:"\uC790\uB3D9\uC73C\uB85C \uC5C5\uB370\uC774\uD2B8 \uD655\uC778",WMPVIS_INSTALL_TITLE:"WMPotify NowPlaying\uC744 \uC124\uCE58\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?",WMPVIS_INSTALL_DESC:"WMPotify NowPlaying\uC740 WMP\uC640 \uAC19\uC740 \uC2DC\uAC01\uD654 \uD654\uBA74\uACFC \uADF8 \uC704\uC5D0 \uD45C\uC2DC\uB418\uB294 \uAC00\uC0AC \uCC3D\uC744 \uC81C\uACF5\uD569\uB2C8\uB2E4. WMPotify\uB97C \uCD5C\uC0C1\uC758 \uACBD\uD5D8\uC73C\uB85C \uC0AC\uC6A9\uD558\uB824\uBA74 WMPotify NowPlaying \uC124\uCE58\uB97C \uAD8C\uC7A5\uD569\uB2C8\uB2E4.",WMPVIS_INSTALL_STEPS:"\uC124\uCE58\uD558\uB824\uBA74 \uB2E4\uC74C \uB2E8\uACC4\uB97C \uB530\uB974\uC2ED\uC2DC\uC624:",WMPVIS_INSTALL_STEP1:"\uB2E4\uC74C \uCF54\uB4DC\uB97C \uBCF5\uC0AC\uD558\uC2ED\uC2DC\uC624:",WMPVIS_INSTALL_STEP2:"PowerShell\uC744 \uC5FD\uB2C8\uB2E4",WMPVIS_INSTALL_STEP2_UNIX:"\uD130\uBBF8\uB110 \uCC3D\uC744 \uC5FD\uB2C8\uB2E4",WMPVIS_INSTALL_STEP3:"\uCF54\uB4DC\uB97C \uBD99\uC5EC\uB123\uACE0 \uC5D4\uD130 \uD0A4\uB97C \uB204\uB985\uB2C8\uB2E4",WMPVIS_INSTALL_MORE_INFO:"\uB610\uB294 \uC218\uB3D9 \uC124\uCE58 \uC9C0\uCE68\uC744 \uD3EC\uD568\uD55C \uC790\uC138\uD55C \uC815\uBCF4\uB97C \uBCF4\uB824\uBA74 %s\uD558\uC2ED\uC2DC\uC624.",WMPVIS_INSTALL_HIDE:"\uC124\uCE58\uD558\uC9C0 \uC54A\uC73C\uB824\uBA74 %s\uD558\uC5EC \uC774 \uBC84\uD2BC\uC744 \uC228\uAE30\uC2ED\uC2DC\uC624.",WMPVIS_INSTALL_CODE_COPY:"\uCF54\uB4DC\uAC00 \uD074\uB9BD\uBCF4\uB4DC\uC5D0 \uBCF5\uC0AC\uB418\uC5C8\uC2B5\uB2C8\uB2E4!",THEME_UPDATE_TITLE:"WMPotify\uAC00 \uC5C5\uB370\uC774\uD2B8\uB418\uC5C8\uC2B5\uB2C8\uB2E4!",THEME_UPDATE_INFO:"WMPotify\uAC00 %s(\uC73C)\uB85C \uC5C5\uB370\uC774\uD2B8\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uC544\uB798\uC758 \uBCC0\uACBD \uB85C\uADF8\uB97C \uC77D\uC5B4\uC8FC\uC2ED\uC2DC\uC624.",THEME_UPDATE_STEPS:"\uC5C5\uB370\uC774\uD2B8\uD558\uB824\uBA74 \uB2E4\uC74C \uB2E8\uACC4\uB97C \uB530\uB974\uC2ED\uC2DC\uC624:",THEME_CHANGELOG_PLACEHOLDER:"\uBCC0\uACBD \uB0B4\uC5ED\uC744 \uAC00\uC838\uC624\uC9C0 \uBABB\uD588\uC2B5\uB2C8\uB2E4! \uC790\uC138\uD55C \uC815\uBCF4\uB97C \uBCF4\uB824\uBA74 %s\uD558\uC2ED\uC2DC\uC624.",THEME_UPDATE_DISMISS:"\uC774 \uC5C5\uB370\uC774\uD2B8\uC5D0 \uB300\uD55C \uC54C\uB9BC\uC744 \uB2E4\uC2DC \uD45C\uC2DC\uD558\uC9C0 \uC54A\uC74C",CTEWH_UPDATE_MSG:"CEF/Spotify Tweaks Windhawk \uBAA8\uB4DC\uB97C %s(\uC73C)\uB85C \uC5C5\uB370\uC774\uD2B8\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4. \uCD5C\uC0C1\uC758 \uACBD\uD5D8\uC744 \uC704\uD574 Windhawk UI\uC5D0\uC11C \uBAA8\uB4DC\uB97C \uC5C5\uB370\uC774\uD2B8\uD558\uC2ED\uC2DC\uC624."},yt=$t;var Ue={"en-US":"English","ko-KR":"\uD55C\uAD6D\uC5B4"},Z=navigator.language;if(!(Z in Ue)){for(let e in Ue)if(Z.slice(0,2)===e.slice(0,2)){Z=e;break}Z in Ue||(Z="en-US")}var _e={"en-US":ft,"ko-KR":yt},Ce=_e[Z]||_e["en-US"];Ce.getString=zt;var s=Ce;function zt(e){return Ce[e]?ce(Ce[e],...Array.from(arguments).slice(1)):_e["en-US"][e]?(console.info(`Fallback string used for locId ${e}`),ce(_e["en-US"][e],...Array.from(arguments).slice(1))):(console.error(`No string found for locId ${e}`),e)}function ce(e){if(e=e.replace(/&([^&])/g,"<u>$1</u>").replace(/\\&/g,"&"),arguments.length>1)for(let t=1;t<arguments.length;t++)e=e.replace(/%s/,arguments[t]),e=e.replace(`%${t}s`,arguments[t]);return e}var Le=1,Kt={setControlHeight(e){Le=e||1},init(){if(Spicetify.Config.extensions.includes("noControls.js")){Spicetify.showNotification("[WMPotify] "+s.getString("MAIN_MSG_ERROR_INCOMPAT_EXT","No Controls"));return}let e=r=>{r&&(r._updateUiClient?.updateTitlebarHeight&&r._updateUiClient.updateTitlebarHeight({height:Le}),r._updateUiClient?.setButtonsVisibility&&Le<=1&&r._updateUiClient.setButtonsVisibility(!1),window.addEventListener("beforeunload",()=>{r._updateUiClient?.setButtonsVisibility&&r._updateUiClient.setButtonsVisibility({showButtons:!0})})),Spicetify.CosmosAsync?.post("sp://messages/v1/container/control",{type:"update_titlebar",height:Le+"px"})};e(Spicetify.Platform.ControlMessageAPI),e(Spicetify.Platform.UpdateAPI);async function t(){e(Spicetify.Platform.ControlMessageAPI),e(Spicetify.Platform.UpdateAPI)}let i=setInterval(t,100);setTimeout(()=>{clearInterval(i)},1e4);let o=()=>{e(Spicetify.Platform.ControlMessageAPI),e(Spicetify.Platform.UpdateAPI)};document.addEventListener("fullscreenchange",o),window.addEventListener("resize",()=>{setTimeout(()=>{o()},100)})}},ee=Kt;var He=document.createElement("canvas");He.width=1;He.height=1;var Te=He.getContext("2d");function Xt(e,t){return Te.fillStyle="#EEF3FA",Te.filter=`hue-rotate(${e}deg) saturate(${t}%)`,Te.fillRect(0,0,1,1),"rgba("+Te.getImageData(0,0,1,1).data+")"}function de(e,t,i){if(!e&&!t){document.documentElement.style.setProperty("--spice-main","#EEF3FA"),document.documentElement.style.removeProperty("--wmpotify-tint-hue"),document.documentElement.style.removeProperty("--wmpotify-tint-sat");return}let o=document.querySelector(".main-nowPlayingBar-nowPlayingBar");o&&(i?o.classList.add("tinted"):o.classList.remove("tinted")),document.documentElement.style.setProperty("--spice-main",Xt(e,t)),document.documentElement.style.setProperty("--wmpotify-tint-hue",e+"deg"),document.documentElement.style.setProperty("--wmpotify-tint-sat",t/100)}var h=null,Ve=1,Yt={init(){return jt()},query(){return h?h.query():null},extendFrame(e,t,i,o){h?.extendFrame&&([e,t,i,o]=[e,t,i,o].map(r=>Math.round(r*window.devicePixelRatio)),Ve>1&&([e,t]=[e&&e-1,t&&t-1],[i,o]=[i&&i-1,o&&o-1]),h.extendFrame(e,t,i,o))},minimize(){h?.minimize&&h.minimize()},maximizeRestore(){h?.maximizeRestore&&h.maximizeRestore()},close(){h?.close&&h.close()},setLayered(e,t,i){h?.setLayered&&h.setLayered(e,t,i)},setBackdrop(e){h?.setBackdrop&&h.setBackdrop(e)},resizeTo(e,t){h?.resizeTo&&h.resizeTo(e,t)},setMinSize(e,t){h?.setMinSize&&([e,t]=[e,t].map(i=>Math.round(i*window.devicePixelRatio)),h.setMinSize(e,t))},setTopMost(e){h?.setTopMost&&h.setTopMost(e)},setTitle(e){h?.setTitle&&h.setTitle(e)},lockTitle(e){h?.lockTitle&&h.lockTitle(e)},openSpotifyMenu(){h?.openSpotifyMenu&&h.openSpotifyMenu()},setPlaybackSpeed(e){h?.setPlaybackSpeed&&h.setPlaybackSpeed(parseFloat(e))},available(){return!!h},getModule(){return h}};function jt(){if(navigator.userAgent.includes("Windows"))try{h=(window.cancelEsperantoCall||window._getSpotifyModule)("ctewh"),Ve=h.query().dpi/96;let{version:e,initialOptions:t}=h;return console.log(`CEF/Spotify Tweaks Windhawk mod available, Version: ${e}`),window.addEventListener("resize",()=>{Ve=h.query().dpi/96}),{version:e,initialOptions:t}}catch{h=null,console.log("Windhawk mod not available")}}var m=Yt;var z=null;function St(){z=document.createElement("div"),z.id="wmpotify-title-bar";let e=document.createElement("div");e.id="wmpotify-title-icon",e.addEventListener("click",()=>{e.classList.toggle("logo2013"),e.classList.contains("logo2013")?localStorage.wmpotifyUse2013Icon=!0:delete localStorage.wmpotifyUse2013Icon}),localStorage.wmpotifyUse2013Icon&&e.classList.add("logo2013"),e.addEventListener("dblclick",()=>{ht()}),z.appendChild(e),document.body.appendChild(z)}async function Qt(e){let t=m.query();switch(e){case"native":ee.setControlHeight(0);break;case"custom":ee.setControlHeight(0);case"keepmenu":let i=document.createElement("div");if(i.id="wmpotify-title-buttons",window.SpotEx||t){let n=document.createElement("button");n.id="wmpotify-minimize-button",n.addEventListener("click",()=>{t?m.minimize():SpotEx.updateWindow({state:"minimized"})}),i.appendChild(n);let a=document.createElement("button");a.id="wmpotify-maximize-button",a.addEventListener("click",async()=>{t?m.maximizeRestore():(await SpotEx.getWindow()).state==="maximized"?SpotEx.updateWindow({state:"normal"}):SpotEx.updateWindow({state:"maximized"})}),i.appendChild(a),window.addEventListener("resize",l),l();async function l(){t?m.query().isMaximized?a.dataset.maximized=!0:delete a.dataset.maximized:(await SpotEx.getWindow()).state==="maximized"?a.dataset.maximized=!0:delete a.dataset.maximized}}let o=document.createElement("button");o.id="wmpotify-close-button",o.addEventListener("click",()=>{ht()}),i.appendChild(o);case"spotify":z===null&&St();let r=document.createElement("span");r.id="wmpotify-title-text",r.textContent=await Spicetify.AppTitle.get(),z.appendChild(r),(e==="custom"||e==="keepmenu")&&z.appendChild(i),(e==="keepmenu"||e==="spotify")&&ee.setControlHeight(25),Spicetify.AppTitle.sub(n=>{n?.trim()&&(r.textContent=n)});break}}async function ht(){m.available()?m.close():window.close()}var Jt={earlyInit:St,init:Qt},$e=Jt;function gt(e="WMPotify",t,i=s.UI_OK,o=s.UI_CANCEL){return new Promise((r,n)=>{let a=document.createElement("div");a.id="wmpotify-confirm-modal";let l=document.createElement("p");l.textContent=t,a.appendChild(l);let d=new MutationObserver(()=>{document.contains(a)||(d.disconnect(),r(!1))}),u=document.createElement("div");u.classList.add("wmpotify-modal-bottom-buttons");let f=document.createElement("button");f.classList.add("wmpotify-aero"),f.textContent=i,f.addEventListener("click",g=>{d.disconnect(),Spicetify.PopupModal.hide(),r(!0),g.preventDefault(),g.stopPropagation()}),u.appendChild(f);let p=document.createElement("button");p.classList.add("wmpotify-aero"),p.textContent=o,p.addEventListener("click",g=>{d.disconnect(),Spicetify.PopupModal.hide(),r(!1),g.preventDefault(),g.stopPropagation()}),u.appendChild(p),a.appendChild(u),Spicetify.PopupModal.display({title:e,content:a}),d.observe(document.body,{childList:!0})})}function te(e="WMPotify",t,i,o){return new Promise((r,n)=>{let a=document.createElement("div");a.id="wmpotify-prompt-modal";let l=document.createElement("p");l.textContent=t,a.appendChild(l);let d=document.createElement("input");d.classList.add("wmpotify-aero"),d.type="text",d.value=i,d.placeholder=o,d.style.width="100%",a.appendChild(d);let u=new MutationObserver(()=>{document.contains(a)||(u.disconnect(),r(null))}),f=document.createElement("div");f.classList.add("wmpotify-modal-bottom-buttons");let p=document.createElement("button");p.classList.add("wmpotify-aero"),p.textContent="OK",p.addEventListener("click",E=>{u.disconnect(),Spicetify.PopupModal.hide(),r(d.value),E.preventDefault(),E.stopPropagation()}),f.appendChild(p);let g=document.createElement("button");g.classList.add("wmpotify-aero"),g.textContent="Cancel",g.addEventListener("click",E=>{u.disconnect(),Spicetify.PopupModal.hide(),r(null),E.preventDefault(),E.stopPropagation()}),f.appendChild(g),d.addEventListener("keydown",E=>{E.key==="Enter"?p.click():E.key==="Escape"&&g.click()}),a.appendChild(f),Spicetify.PopupModal.display({title:e,content:a}),d.focus(),u.observe(document.body,{childList:!0})})}async function ze(){let e=document.createElement("div");e.id="wmpotify-instructions-dialog",e.innerHTML=`
        <p>${s.WMPVIS_INSTALL_DESC}</p><br>
        <img src="https://raw.githubusercontent.com/Ingan121/WMPotify/refs/heads/master/screenshots/wmpvis_aero_2.png" alt="WMPotify NowPlaying screenshot"><br><br>
        <p>${s.WMPVIS_INSTALL_STEPS}</p><br>
        <ol>
            <li>1. ${s.WMPVIS_INSTALL_STEP1}</li>
            <div class="wmpotify-code-container">
                <button id="wmpotify-copy-code">
                    
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-copy" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM2 5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1h1v1a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1v1z"/>
                    </svg>
                </button>
                <code>
                ${navigator.userAgent.includes("Windows")?`iex "& { $(iwr -useb '<a href="https://raw.githubusercontent.com/Ingan121/WMPotify/master/installer/install.ps1">https://raw.githubusercontent.com/Ingan121/WMPotify/master/installer/install.ps1</a>') } -Install @('wmpvis')"`:'export SKIP_THEME=true; curl -fsSL <a href="https://raw.githubusercontent.com/Ingan121/WMPotify/master/installer/install.sh">https://raw.githubusercontent.com/Ingan121/WMPotify/master/installer/install.sh</a> | sh'}
                </code>
            </div>
            <li>2. ${s[navigator.userAgent.includes("Windows")?"WMPVIS_INSTALL_STEP2":"WMPVIS_INSTALL_STEP2_UNIX"]}</li>
            <li>3. ${s.WMPVIS_INSTALL_STEP3}</li>
        </ol><br>
        <p>${s.getString("WMPVIS_INSTALL_MORE_INFO",`<a href="https://github.com/Ingan121/Spicetify-CustomApps">${s.UI_CLICK_HERE}</a>`)}</p>
        <p>${s.getString("WMPVIS_INSTALL_HIDE",`<a href="javascript:localStorage.wmpotifyNoWmpvis=true;document.querySelector('#wmpotify-tabs-container button[data-identifier=now-playing]').dataset.hidden=true;Spicetify.PopupModal.hide();window.dispatchEvent(new Event('resize'))">${s.UI_CLICK_HERE}</a>`)}</p>
    `,Spicetify.PopupModal.display({title:s.WMPVIS_INSTALL_TITLE,content:e,isLarge:!0}),document.querySelector("#wmpotify-copy-code").addEventListener("click",()=>{let t=document.querySelector("#wmpotify-instructions-dialog code").textContent.trim();Spicetify.Platform.ClipboardAPI.copy(t)})}async function ue(e,t,i){let o=t,r="Failed to fetch changelog!";if(i)r=i.replace(/\r\n/g,"<br>").replace(/\n/g,"<br>");else try{let l=await(await fetch("https://api.github.com/repos/Ingan121/WMPotify/releases/latest")).json();o=l.name,r=l.body?.replace(/\r\n/g,"<br>").replace(/\n/g,"<br>")||""}catch{r=s.getString("THEME_CHANGELOG_PLACEHOLDER",`<a href="https://github.com/Ingan121/WMPotify/releases/tag/${o}">${s.UI_CLICK_HERE}</a>`)}let n=document.createElement("div");n.id="wmpotify-instructions-dialog",n.innerHTML=`
        <p>${s.getString("THEME_UPDATE_INFO",o)}</p>
        <div class="wmpotify-code-container">
            <p>${r}</p>
        </div>
        ${e?"":`
            <p>${s.THEME_UPDATE_STEPS}</p><br>
            <ol>
                <li>1. ${s.WMPVIS_INSTALL_STEP1}</li>
                <div class="wmpotify-code-container">
                    <button id="wmpotify-copy-code">
                        
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-copy" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM2 5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1h1v1a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1v1z"/>
                        </svg>
                    </button>
                    <code>
                    ${navigator.userAgent.includes("Windows")?`iex "& { $(iwr -useb '<a href="https://raw.githubusercontent.com/Ingan121/WMPotify/master/installer/install.ps1">https://raw.githubusercontent.com/Ingan121/WMPotify/master/installer/install.ps1</a>') }"`:'curl -fsSL <a href="https://raw.githubusercontent.com/Ingan121/WMPotify/master/installer/install.sh">https://raw.githubusercontent.com/Ingan121/WMPotify/master/installer/install.sh</a> | sh'}
                    </code>
                </div>
                <li>2. ${s[navigator.userAgent.includes("Windows")?"WMPVIS_INSTALL_STEP2":"WMPVIS_INSTALL_STEP2_UNIX"]}</li>
                <li>3. ${s.WMPVIS_INSTALL_STEP3}</li>
            </ol><br>
            <p>${s.getString("WMPVIS_INSTALL_MORE_INFO",`<a href="https://github.com/Ingan121/WMPotify">${s.UI_CLICK_HERE}</a>`)}</p>
            <button class="wmpotify-aero" onclick="localStorage.wmpotifyIgnoreVersion='${t}';Spicetify.PopupModal.hide();">${s.THEME_UPDATE_DISMISS}</button>
        `}
    `,Spicetify.PopupModal.display({title:s.THEME_UPDATE_TITLE,content:n,isLarge:!e}),e||document.querySelector("#wmpotify-copy-code").addEventListener("click",()=>{let a=document.querySelector("#wmpotify-instructions-dialog code").textContent.trim();Spicetify.Platform.ClipboardAPI.copy(a)})}globalThis.wmpotifyOpenWmpvisInstallDialog=ze;globalThis.wmpotifyOpenUpdateDialog=ue;var oe=class{constructor(t=[],i=[]){this.menuOrder=t,this.submenus=i,this.openedMenu=null,this.mouseOverMenu=!1,this.mouseOverSubmenu=!1,this.handlingPointerEvent=!1,this.handlingKeyEvent=!1,this.boundMenuNavigationHandler=this.menuNavigationHandler.bind(this),this.submenuOpenTimer=null,this.submenuCloseTimer=null,this.shouldNotCloseSubmenu=!1,this.menuHierarchy={},this.beforeMenuOpenEvent=new Event("beforemenuopen"),this.afterMenuCloseEvent=new Event("aftermenuclose");for(let o of t){this.menuHierarchy[o]=[];let r=document.getElementById(o+"MenuBg"),n=r.querySelectorAll(".contextMenuItem");for(let a of n)a.dataset.submenu&&this.menuHierarchy[o].push(a.dataset.submenu),a.addEventListener("pointerover",()=>{for(let l of n)delete l.dataset.active;a.dataset.active=!0,clearTimeout(this.submenuOpenTimer),a.dataset.submenu?this.submenuOpenTimer=setTimeout(()=>{this.openMenu(a.dataset.submenu)},300):this.menuHierarchy[o].length>0&&this.delayedCloseMenu(this.menuHierarchy[o][0])}),a.addEventListener("pointerleave",()=>{this.mouseOverSubmenu||(delete a.dataset.active,clearTimeout(this.submenuOpenTimer),a.dataset.submenu&&this.delayedCloseMenu(a.dataset.submenu))}),a.addEventListener("click",()=>{a.dataset.submenu&&!a.classList.contains("disabled")?this.openedMenu.id!==a.dataset.submenu+"MenuBg"?this.openMenu(a.dataset.submenu):document.getElementById(a.dataset.submenu+"MenuBg").focus():a.dataset.noClose||this.closeMenu(o)});r.addEventListener("focusout",a=>{top.ignoreFocusLoss||a.relatedTarget&&a.relatedTarget.dataset.submenuOf===o||this.closeMenu(o)}),r.addEventListener("pointermove",a=>{(a.clientX>0||a.clientY>0)&&(r.style.animation="none")})}for(let o of i){let r=document.getElementById(o+"MenuBg"),n=r.querySelectorAll(".contextMenuItem"),a=document.getElementById(r.dataset.submenuOf+"MenuBg"),l=Array.from(a.querySelectorAll(".contextMenuItem")).findIndex(u=>u.dataset.submenu===o),d=a.querySelectorAll(".contextMenuItem")[l];for(let u of n)u.addEventListener("pointerover",()=>{for(let f of n)delete f.dataset.active;u.dataset.active=!0}),u.addEventListener("pointerleave",()=>{delete u.dataset.active}),u.addEventListener("click",()=>{this.shouldNotCloseSubmenu=!1,this.closeMenu(o),this.closeMenu(r.dataset.submenuOf)});r.addEventListener("pointerover",()=>{this.mouseOverMenu=!0,this.mouseOverSubmenu=!0,this.shouldNotCloseSubmenu=!0,clearTimeout(this.submenuCloseTimer),d.dataset.active=!0}),r.addEventListener("pointerleave",()=>{this.mouseOverMenu=!1,this.mouseOverSubmenu=!1,this.shouldNotCloseSubmenu=!1}),r.addEventListener("focusout",u=>{if(top.ignoreFocusLoss||r.style.display==="none")return;this.shouldNotCloseSubmenu=!1;let f=!!r.dataset.openStandalone;u.relatedTarget&&u.relatedTarget.id&&u.relatedTarget.id===a.id||(this.closeMenu(o),!(u.relatedTarget&&u.relatedTarget.id&&u.relatedTarget.dataset.submenuOf===r.dataset.submenuOf)&&(f||this.closeMenu(r.dataset.submenuOf)))})}}openMenu(t,i){let o=document.getElementById(t+"MenuBg"),r=document.getElementById(t+"Menu"),n=!!o.dataset.submenuOf,a,l,d,u=o.querySelectorAll(".contextMenuItem.debug");if(localStorage.wmpotifyDebugMode){d=o.querySelectorAll(".contextMenuItem:not([data-hidden])");for(let p of u)p.style.display=""}else{d=o.querySelectorAll(".contextMenuItem:not([data-hidden]):not(.debug)");for(let p of u)p.style.display="none"}if(o.dispatchEvent(this.beforeMenuOpenEvent),i)o.dataset.openStandalone=!0;else{if(n){if(this.menuHierarchy[o.dataset.submenuOf].length>1)for(let g of this.menuHierarchy[o.dataset.submenuOf])g!==t&&this.closeMenu(g);if(a=document.getElementById(o.dataset.submenuOf+"MenuBg"),a.style.display==="none")return;let p=Array.from(a.querySelectorAll(".contextMenuItem")).findIndex(g=>g.dataset.submenu===t);if(l=a.querySelectorAll(".contextMenuItem")[p],l.classList.contains("disabled"))return}else for(let p of this.menuOrder)p!==t&&document.getElementById(p+"MenuBg").style.display==="block"&&this.closeMenu(p);delete o.dataset.openStandalone}o.style.animation="";for(let p of d)delete p.dataset.active;if(i)i.top&&(o.style.top=i.top),i.left&&(o.style.left=i.left),i.right&&(o.style.right=i.right),i.bottom&&(o.style.bottom=i.bottom);else{let p="",g=0;n&&(p=a.offsetTop+l.offsetTop,g=a.offsetLeft+a.offsetWidth-6),o.style.top=p+"px",o.style.left=g+"px"}o.style.display="block";let f=this.calcMenuWidth(t);o.style.width=f+")",o.style.minWidth=0,r.style.width=f+(["aero","10",void 0].includes(localStorage.wmpotifyControlStyle)?" - 2px)":")"),o.style.height=this.calcMenuHeight(t)+"px",i||n&&(l.dataset.active=!0),o.focus(),this.openedMenu=o,document.addEventListener("keydown",this.boundMenuNavigationHandler)}closeMenu(t){let i=document.getElementById(t+"MenuBg"),o=!!i.dataset.openStandalone,r=!!i.dataset.submenuOf&&!o;if(r&&this.shouldNotCloseSubmenu)return;let n,a;if(!o&&r){n=document.getElementById(i.dataset.submenuOf+"MenuBg");let l=Array.from(n.querySelectorAll(".contextMenuItem")).findIndex(d=>d.dataset.submenu===t);a=n.querySelectorAll(".contextMenuItem")[l]}this.submenuCloseTimer&&clearTimeout(this.submenuCloseTimer),i.style.display="none",o?delete i.dataset.openStandalone:r&&delete a.dataset.active,i.dispatchEvent(this.afterMenuCloseEvent),r&&n.style.display!=="none"?(n.focus(),this.openedMenu=n):(this.openedMenu=null,document.removeEventListener("keydown",this.boundMenuNavigationHandler))}delayedCloseMenu(t){this.submenuCloseTimer=setTimeout(()=>{this.closeMenu(t)},300)}menuNavigationHandler(t){if(!this.openedMenu)return;let i;localStorage.wmpotifyDebugMode?i=this.openedMenu.querySelectorAll(".contextMenuItem"):i=this.openedMenu.querySelectorAll(".contextMenuItem:not(.debug)");let o=this.openedMenu.querySelector(".contextMenuItem[data-active]"),r=Array.from(i).indexOf(o),n;switch(this.openedMenu.dataset.submenuOf&&(n=document.getElementById(this.openedMenu.dataset.submenuOf+"MenuBg").querySelector(".contextMenuItem[data-active]")),this.handlingKeyEvent=!0,this.openedMenu.style.animation="none",t.key){case"Escape":this.mouseOverMenu=!1,this.openedMenu.blur();break;case"ArrowUp":o?(delete o.dataset.active,r>0?i[r-1].dataset.active=!0:i[i.length-1].dataset.active=!0):i[i.length-1].dataset.active=!0;break;case"ArrowDown":o?(delete o.dataset.active,r<i.length-1?i[r+1].dataset.active=!0:i[0].dataset.active=!0):i[0].dataset.active=!0;break;case"ArrowLeft":if(this.openedMenu.dataset.submenuOf){this.closeMenu(this.openedMenu.id.slice(0,-6),!0),n.dataset.active=!0;break}if(this.menuOrder.length===1)break;let a=this.menuOrder[(this.menuOrder.indexOf(this.openedMenu.id.slice(0,-6))+this.menuOrder.length-1)%this.menuOrder.length];this.closeMenu(this.openedMenu.id.slice(0,-6)),this.openMenu(a),this.openedMenu.querySelector(".contextMenuItem").dataset.active=!0;break;case"ArrowRight":if(o&&o.dataset.submenu){this.openMenu(o.dataset.submenu),this.openedMenu.querySelector(".contextMenuItem").dataset.active=!0;break}if(this.menuOrder.length===1)break;let l;this.openedMenu.dataset.submenuOf?(l=this.menuOrder[(this.menuOrder.indexOf(this.openedMenu.dataset.submenuOf)+1)%this.menuOrder.length],this.closeMenu(this.openedMenu.id.slice(0,-6))):(l=this.menuOrder[(this.menuOrder.indexOf(this.openedMenu.id.slice(0,-6))+1)%this.menuOrder.length],this.closeMenu(this.openedMenu.id.slice(0,-6))),this.openMenu(l),this.openedMenu.querySelector(".contextMenuItem").dataset.active=!0;break;case"Enter":if(o)o.click();else{this.openedMenu.blur();break}break;default:let d=this.openedMenu.getElementsByTagName("u");for(let u of d)if(t.key===u.textContent.toLowerCase()){u.parentElement.click();break}}this.handlingKeyEvent=!1,t.preventDefault(),t.stopPropagation()}calcMenuWidth(t){let i=document.getElementById(t+"MenuBg"),o;localStorage.wmpotifyDebugMode?o=i.querySelectorAll(".contextMenuItem:not([data-hidden])"):o=i.querySelectorAll(".contextMenuItem:not([data-hidden]):not(.debug)"),i.style.minWidth="";let r=parseInt(getComputedStyle(i).minWidth)||0;return`calc(${Array.from(o).reduce((a,l)=>{let d=l.textContent,u=Ke(d);return Math.max(r,a,u)},0)}px + 4.5em`}calcMenuHeight(t){let i=document.getElementById(t+"MenuBg"),o=i.querySelectorAll("hr"),r;localStorage.wmpotifyDebugMode?r=i.querySelectorAll(".contextMenuItem:not([data-hidden])"):r=i.querySelectorAll(".contextMenuItem:not([data-hidden]):not(.debug)");let n=r[0].offsetHeight,a=0;if(o.length>0){let d=getComputedStyle(o[0]);a=o[0].offsetHeight+parseFloat(d.marginTop)+parseFloat(d.marginBottom)}return parseInt(r.length*n+o.length*a)}};function me(e,t,i){let o=document.createElement("div");return o.id=e+"MenuBg",o.className="contextMenuBg",o.tabIndex=-1,o.style.display="none",o.innerHTML=`<div id="${e}Menu" class="contextMenu"></div>`,i&&(o.dataset.submenuOf=i),t.forEach(r=>{if(r.hr){let a=document.createElement("hr");o.querySelector(".contextMenu").appendChild(a);return}let n=document.createElement("div");n.className="contextMenuItem",r.args?n.innerHTML="<p>"+ce(r.text,...r.args)+"</p>":n.innerHTML="<p>"+ce(r.text)+"</p>",r.classList&&n.classList.add(...r.classList),r.disabled&&n.classList.add("disabled"),r.hidden&&(n.dataset.hidden=!0),r.submenu&&(n.dataset.submenu=r.submenu,n.innerHTML+='<p class="submenuMark">\u23F5</p>'),r.noClose&&(n.dataset.noClose=!0),n.addEventListener("click",r.click),o.querySelector(".contextMenu").appendChild(n)}),document.body.appendChild(o),{menuBg:o,menu:o.querySelector(".contextMenu"),menuItems:o.querySelectorAll(".contextMenuItem")}}function Ke(e,t=getComputedStyle(document.documentElement).getPropertyValue("--menu-font")){let o=(Ke.canvas||(Ke.canvas=document.createElement("canvas"))).getContext("2d");return o.font=t,o.measureText(e).width}var T,O=[],H,Zt={"Friend Activity":"Friends"};function Et(){let e=document.querySelector(".Root__globalNav");T=document.createElement("div"),T.id="wmpotify-tabs-container",e.insertBefore(T,e.querySelector(".main-globalNav-searchSection"));let t=document.querySelector('.custom-navlinks-scrollable_container div[role="presentation"] > button:has(#wmpotify-nowplaying-icon)');t||(t=document.createElement("button"),t.addEventListener("click",()=>{Spicetify.Config.custom_apps.includes("wmpvis")?Spicetify.Platform.History.push({pathname:"/wmpvis"}):ze()}),localStorage.wmpotifyNoWmpvis&&!Spicetify.Config.custom_apps.includes("wmpvis")&&(t.dataset.hidden=!0)),t.setAttribute("aria-label",s.TAB_NOW_PLAYING),t.dataset.identifier="now-playing",K(t);let i=document.querySelector(".main-globalNav-searchContainer > button");i.dataset.identifier="home",K(i);let o=document.querySelector(".main-globalNav-searchContainer div form button");o.dataset.identifier="search",o.addEventListener("click",y=>{Spicetify.Platform.History.push({pathname:"/search"}),y.preventDefault(),y.stopPropagation()}),K(o);let r=document.createElement("button");r.id="wmpotify-library-button",r.dataset.identifier="library",r.setAttribute("aria-label",s.TAB_LIBRARY),r.addEventListener("click",()=>{Spicetify.Platform.History.push({pathname:"/wmpotify-standalone-libx"})}),K(r),O=[t,i,o,r];let n=document.querySelectorAll('.custom-navlinks-scrollable_container div[role="presentation"] > button');if(n.length>0)for(let y of n)K(y),O.push(y);else{let y=document.querySelector(".main-globalNav-historyButtonsContainer"),_=new MutationObserver(()=>{console.log("WMPotify: Handling late custom apps buttons mount");let w=document.querySelectorAll('.custom-navlinks-scrollable_container div[role="presentation"] > button');if(w.length>0){for(let b of w){if(b.querySelector("#wmpotify-nowplaying-icon")){delete t.dataset.hidden;continue}K(b),O.push(b)}_.disconnect(),bt()}});_.observe(y,{childList:!0})}let a=document.querySelectorAll(".main-topBar-topbarContentRight > .main-actionButtons > button");for(let y of a)y.dataset.restoreFocusKey==="buddy_feed"?y.dataset.identifier="buddy-feed":a.length===2&&(y.dataset.identifier="content-feed"),K(y),O.push(y);bt();let l=[];for(let y of O)l.push({text:y.querySelector(".wmpotify-tab-label").textContent,click:()=>y.click()});me("wmpotifyTab",l),me("wmpotifyTabMenu",[{text:s.TAB_RESET_ORDER,click:()=>{localStorage.removeItem("wmpotifyTabOrder"),location.reload()}}]);let d=new oe(["wmpotifyTab","wmpotifyTabMenu"]);H=document.createElement("button"),H.id="wmpotify-tabs-overflow-button",H.addEventListener("click",()=>{d.openMenu("wmpotifyTab",{top:"0",left:H.getBoundingClientRect().left+"px"})}),T.appendChild(H),T.addEventListener("contextmenu",y=>{y.preventDefault(),d.openMenu("wmpotifyTabMenu",{top:y.clientY+"px",left:y.clientX+"px"})});let u=0;ie();let f=setInterval(()=>{ie(),u++>10&&clearInterval(f)},200);window.addEventListener("resize",ie),new ResizeObserver(ie).observe(T),document.addEventListener("fullscreenchange",ie);let p=document.querySelector(".main-topBar-topbarContentRight > button:last-child"),g=document.createElement("span");g.textContent=p.getAttribute("aria-label"),g.classList.add("wmpotify-user-label"),p.appendChild(g);let E=document.createElement("div");E.id="wmpotify-search-container";let A=document.createElement("div");A.id="wmpotify-search-wrapper";let v=document.querySelector('.main-globalNav-searchContainer div form input[type="search"]');A.appendChild(v);let L=document.createElement("button");L.id="wmpotify-search-clear-button",L.setAttribute("aria-label","Clear search"),L.addEventListener("click",()=>{v.value="",v.focus(),Spicetify.Platform.History.push({pathname:"/search"})}),A.appendChild(L),E.appendChild(A),e.appendChild(E),e.addEventListener("pointerdown",y=>{y.button===2&&!y.target.closest("input")&&!y.target.closest("#wmpotify-tabs-container")&&m.openSpotifyMenu()});let D=getComputedStyle(document.documentElement).getPropertyValue("--right-sidebar-width");D&&document.documentElement.style.setProperty("--panel-width",D)}function K(e){T.appendChild(e);let t=document.createElement("span"),i=e.getAttribute("aria-label");t.textContent=Zt[i]||i,t.classList.add("wmpotify-tab-label"),e.draggable=!0,e.addEventListener("dragstart",o=>{T.classList.add("dragging"),o.dataTransfer.setData("text/plain",t.textContent),e.dataset.dragging=!0}),e.addEventListener("dragend",()=>{delete e.dataset.dragging,T.classList.remove("dragging")}),e.addEventListener("dragover",o=>{o.preventDefault(),o.stopPropagation()}),e.addEventListener("drop",o=>{o.preventDefault(),o.stopPropagation();let r=O.find(n=>n.dataset.dragging);r&&(o.offsetX>e.getBoundingClientRect().width/2?T.insertBefore(r,e.nextElementSibling):T.insertBefore(r,e),O=Array.from(T.querySelectorAll("button:not(#wmpotify-tabs-overflow-button)")),ie(),localStorage.wmpotifyTabOrder=eo())}),e.appendChild(t)}function eo(){return O.map(e=>e.dataset.identifier||e.getAttribute("aria-label"))}function bt(){if(localStorage.wmpotifyTabOrder){let e=localStorage.wmpotifyTabOrder.split(",");for(let t of e){let i=O.find(o=>o.dataset.identifier===t||o.getAttribute("aria-label")===t);i&&T.appendChild(i)}O=Array.from(T.querySelectorAll("button")),H&&T.appendChild(H)}}function ie(){let e=document.querySelector(".main-globalNav-historyButtons").getBoundingClientRect().right,t=window.innerWidth-document.querySelector(".main-topBar-topbarContentRight").getBoundingClientRect().left,i=160,o=0;for(;window.innerWidth-e-t-i<T.getBoundingClientRect().width&&o<O.length;)O[O.length-1-o++].dataset.hidden=!0;for(o=document.querySelectorAll("#wmpotify-tabs-container button[data-hidden]").length;o>0&&window.innerWidth-e-t-i>T.getBoundingClientRect().width;)delete O[O.length-o--].dataset.hidden;H.style.display=o>0?"block":""}function ve(e,t){if(!e||isNaN(e))return"00:00";let i=Math.floor(e/1e3),o=Math.floor(i/60);if(i=String(i%60).padStart(2,"0"),o<60)return t&&(o=String(o).padStart(2,"0")),`${o}:${i}`;let r=Math.floor(o/60);return o=String(o%60).padStart(2,"0"),t&&(r=String(r).padStart(2,"0")),`${r}:${o}:${i}`}var wt={};(function e(t,i,o){function r(l,d){if(!i[l]){if(!t[l]){var u=typeof se=="function"&&se;if(!d&&u)return u(l,!0);if(n)return n(l,!0);var f=new Error("Cannot find module '"+l+"'");throw f.code="MODULE_NOT_FOUND",f}var p=i[l]={exports:{}};t[l][0].call(p.exports,function(g){var E=t[l][1][g];return r(E||g)},p,p.exports,e,t,i,o)}return i[l].exports}for(var n=typeof se=="function"&&se,a=0;a<o.length;a++)r(o[a]);return r})({1:[function(e,t,i){var o,r,n;o=function(a,l){var d;return d=setTimeout(l,a),{stop:function(){return clearTimeout(d)}}},n=function(a,l){var d;return d=setInterval(l,a),{stop:function(){return clearInterval(d)}}},r=function(a){return/in/.test(document.readyState)?o(10,function(){return r(a)}):a()},function(a){var l,d,u,f,p,g,E,A,v,L,D;return l=a.FontDetective={},g=["serif","sans-serif","cursive","fantasy","monospace"],A="Helvetica,Lucida Grande,Lucida Sans,Tahoma,Arial,Geneva,Monaco,Verdana,Microsoft Sans Serif,Trebuchet MS,Courier New,Times New Roman,Courier,Lucida Bright,Lucida Sans Typewriter,URW Chancery L,Comic Sans MS,Georgia,Palatino Linotype,Lucida Sans Unicode,Times,Century Schoolbook L,URW Gothic L,Franklin Gothic Medium,Lucida Console,Impact,URW Bookman L,Helvetica Neue,Nimbus Sans L,URW Palladio L,Nimbus Mono L,Nimbus Roman No9 L,Arial Black,Sylfaen,MV Boli,Estrangelo Edessa,Tunga,Gautami,Raavi,Mangal,Shruti,Latha,Kartika,Vrinda,Arial Narrow,Century Gothic,Garamond,Book Antiqua,Bookman Old Style,Calibri,Cambria,Candara,Corbel,Monotype Corsiva,Cambria Math,Consolas,Constantia,MS Reference Sans Serif,MS Mincho,Segoe UI,Arial Unicode MS,Tempus Sans ITC,Kristen ITC,Mistral,Meiryo UI,Juice ITC,Papyrus,Bradley Hand ITC,French Script MT,Malgun Gothic,Microsoft YaHei,Gisha,Leelawadee,Microsoft JhengHei,Haettenschweiler,Microsoft Himalaya,Microsoft Uighur,MoolBoran,Jokerman,DFKai-SB,KaiTi,SimSun-ExtB,Freestyle Script,Vivaldi,FangSong,MingLiU-ExtB,MingLiU_HKSCS,MingLiU_HKSCS-ExtB,PMingLiU-ExtB,Copperplate Gothic Light,Copperplate Gothic Bold,Copperplate Gothic,Franklin Gothic Book,Maiandra GD,Perpetua,Eras Demi ITC,Felix Titling,Franklin Gothic Demi,Pristina,Edwardian Script ITC,OCR A Extended,OCR A,Engravers MT,Eras Light ITC,Franklin Gothic Medium Cond,Rockwell Extra Bold,Rockwell,Curlz MT,Blackadder ITC,Franklin Gothic Heavy,Franklin Gothic Demi Cond,Lucida Handwriting,Segoe UI Light,Segoe UI Semibold,Lucida Calligraphy,Cooper Black,Viner Hand ITC,Britannic Bold,Wide Latin,Old English Text MT,Broadway,Footlight MT Light,Harrington,Snap ITC,Onyx,Playbill,Bauhaus 93,Baskerville Old Face,Algerian,Matura MT Script Capitals,Stencil,Batang,Chiller,Harlow Solid Italic,Kunstler Script,Bernard MT Condensed,Informal Roman,Vladimir Script,Bell MT,Colonna MT,High Tower Text,Californian FB,Ravie,Segoe Script,Brush Script MT,SimSun,Arial Rounded MT Bold,Berlin Sans FB,Centaur,Niagara Solid,Showcard Gothic,Niagara Engraved,Segoe Print,Gabriola,Gill Sans MT,Iskoola Pota,Calisto MT,Script MT Bold,Century Schoolbook,Berlin Sans FB Demi,Magneto,Arabic Typesetting,DaunPenh,Mongolian Baiti,DokChampa,Euphemia,Kalinga,Microsoft Yi Baiti,Nyala,Bodoni MT Poster Compressed,Goudy Old Style,Imprint MT Shadow,Gill Sans MT Condensed,Gill Sans Ultra Bold,Palace Script MT,Lucida Fax,Gill Sans MT Ext Condensed Bold,Goudy Stout,Eras Medium ITC,Rage Italic,Rockwell Condensed,Castellar,Eras Bold ITC,Forte,Gill Sans Ultra Bold Condensed,Perpetua Titling MT,Agency FB,Tw Cen MT,Gigi,Tw Cen MT Condensed,Aparajita,Gloucester MT Extra Condensed,Tw Cen MT Condensed Extra Bold,PMingLiU,Bodoni MT,Bodoni MT Black,Bodoni MT Condensed,MS Gothic,GulimChe,MS UI Gothic,MS PGothic,Gulim,MS PMincho,BatangChe,Dotum,DotumChe,Gungsuh,GungsuhChe,MingLiU,NSimSun,SimHei,DejaVu Sans,DejaVu Sans Condensed,DejaVu Sans Mono,DejaVu Serif,DejaVu Serif Condensed,Eurostile,Matisse ITC,Bitstream Vera Sans Mono,Bitstream Vera Sans,Staccato222 BT,Bitstream Vera Serif,Broadway BT,ParkAvenue BT,Square721 BT,Calligraph421 BT,MisterEarl BT,Cataneo BT,Ruach LET,Rage Italic LET,La Bamba LET,Blackletter686 BT,John Handy LET,Scruff LET,Westwood LET,Yu Gothic,Yu Gothic UI".split(",").sort(),D=[],f=!1,v=!1,u=document.createElement("div"),u.id="font-detective",d=function(){function y(_,w,b){this.name=_,this.type=w,this.style=b}return y.prototype.toString=function(){return'"'+this.name.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'},y}(),p=function(){var y,_,w,b;return y=["monospace","sans-serif","serif"],b=document.createElement("span"),b.innerHTML="mmmmmmmmmmlli",b.style.fontSize="72px",w={},_={},{init:function(){var M,N,W,x;for(document.body.appendChild(u),x=[],N=0,W=y.length;N<W;N++)M=y[N],b.style.fontFamily=M,u.appendChild(b),w[M]=b.offsetWidth,_[M]=b.offsetHeight,x.push(u.removeChild(b));return x},check:function(M){var N,W,x,$;for(x=0,$=y.length;x<$;x++)if(N=y[x],b.style.fontFamily=M+", "+N,u.appendChild(b),W=b.offsetWidth!==w[N]||b.offsetHeight!==_[N],u.removeChild(b),W)return!0;return!1}}}(),E=function(){if(!v)return v=!0,l.incomplete=!0,r(function(y){return function(){var _;return L(function(){var w,b,M;for(M=[],w=0,b=A.length;w<b;w++)_=A[w],M.push(new d(_));return M}())}}(this))},L=function(y){var _,w;return p.init(),_=0,w=n(20,function(){var b,M,N,W,x,$,mt,pt,We,Ge;for(W=0;W<=5;W++){if(N=y[_],b=p.check(N),b)for(D.push(N),We=l.each.callbacks,x=0,mt=We.length;x<mt;x++)M=We[x],M(N);if(_++,_>=y.length){for(w.stop(),Ge=l.all.callbacks,$=0,pt=Ge.length;$<pt;$++)M=Ge[$],M(D);l.all.callbacks=[],l.each.callbacks=[],f=!0;return}}})},l.preload=E,l.each=function(y){var _,w,b;for(w=0,b=D.length;w<b;w++)_=D[w],y(_);if(!f)return l.each.callbacks.push(y),E()},l.each.callbacks=[],l.all=function(y){return f?y(D):(l.all.callbacks.push(y),E())},l.all.callbacks=[]}(wt)},{}]},{},[1]);var _t=wt.FontDetective;var pe="1.0b4";async function Oe(){try{let e=!!document.querySelector("style.marketplaceUserCSS"),t=m.available(),i=m.getModule()?.version,r=await(await fetch("https://www.ingan121.com/wmpotify/latest-dev.txt")).text(),n=r.match("wmpotify=(.*)")[1],a=r.match("cte=(.*)")[1];!e&&Me(pe,n)<0&&localStorage.wmpotifyIgnoreVersion!==n&&ue(!1,n),t&&Me(i,a)<0&&localStorage.wmpotifyLastCheckedWhVer!==a&&Spicetify.showNotification("[WMPotify] "+s.getString("CTEWH_UPDATE_MSG",a)),localStorage.wmpotifyLastCheckedWhVer=a}catch(e){console.error(e)}}function Me(e,t){let i={"":1,b:0,a:-1},o=a=>{let l=a.match(/(\d+)\.(\d+)([ab]?)(\d*)/);return{major:parseInt(l[1]),minor:parseInt(l[2]),type:i[l[3]||""],extra:parseInt(l[4])||0}},r=o(e),n=o(t);return r.major!==n.major?r.major-n.major:r.minor!==n.minor?r.minor-n.minor:r.type!==n.type?r.type-n.type:r.extra-n.extra}function Xe(e){let t=window?.Spicetify?.Platform?.version?.split(".").map(Number);if(t||(t=navigator.userAgent.match(/Spotify\/(\d+\.\d+\.\d+\.\d+)/)?.[1].split(".").map(Number)),!t||!e)return 0;let i=e.split(".").map(Number);for(let o=0;o<i.length;o++)if(t[o]!==i[o])return t[o]-i[o];return 0}var Ct=window.matchMedia("(prefers-color-scheme: dark)"),Lt=new MutationObserver(e=>{for(let t of e)if(t.type==="childList"){let i=Array.from(t.addedNodes);(r=>r.some(n=>n.nodeType===Node.ELEMENT_NODE&&n.matches(".marketplaceCSS.marketplaceScheme")))(i)&&(Spicetify.Config.color_scheme==="dark"?document.documentElement.dataset.wmpotifyDarkMode=!0:delete document.documentElement.dataset.wmpotifyDarkMode)}});function Tt(e){e.matches?document.documentElement.dataset.wmpotifyDarkMode=!0:delete document.documentElement.dataset.wmpotifyDarkMode}var to={addSystemDarkModeListener:function(){Ct.addEventListener("change",Tt)},removeSystemDarkModeListener:function(){Ct.removeEventListener("change",Tt)},addMarketplaceSchemeObserver:function(){Lt.observe(document.body,{childList:!0})},removeMarketplaceSchemeObserver:function(){Lt.disconnect()}},V=to;var S=document.createElement("div"),G=null,je=0,Ae=null,Ne=null,Ie=null,Pe=null,c={};function oo(){if(document.getElementById("wmpotify-config"))return;let e=m.query(),t=document.querySelector(".Root__main-view");S.id="wmpotify-config",S.innerHTML=`
        <div id="wmpotify-config-topborder" class="wmpotify-tintable"></div>
        <button id="wmpotify-config-prev"></button>
        <button id="wmpotify-config-next"></button>
        <p id="wmpotify-config-title">${s.CONF_GENERAL_TITLE}</p>
        <span id="wmpotify-config-wh-message">${s.CONF_GENERAL_WH_MESSAGE}</span>
        <button id="wmpotify-config-close"></button>
        <section id="wmpotify-config-tab-general" class="wmpotify-config-tab-content" data-tab-title="${s.CONF_GENERAL_TITLE}" style="display: block;">
            <label for="wmpotify-config-style">${s.CONF_GENERAL_STYLE}</label>
            <select id="wmpotify-config-style" class="wmpotify-aero">
                <option value="auto">${s.UI_AUTO}</option>
                <option value="xp">XP</option>
                <option value="aero">Aero</option>
                <option value="basic">Basic</option>
                <option value="basic_custom">Basic (${s.UI_CUSTOM})</option>
            </select>
            <label for="wmpotify-config-title-style">${s.CONF_GENERAL_TITLE_STYLE}</label>
            <select id="wmpotify-config-title-style" class="wmpotify-aero">
                <option value="auto">${s.UI_AUTO}</option>
                <option value="native">${s.CONF_GENERAL_TITLE_STYLE_NATIVE}</option>
                <option value="custom">${s.CONF_GENERAL_TITLE_STYLE_CUSTOM}</option>
                <option value="spotify">Spotify</option>
                <option value="keepmenu">${s.CONF_GENERAL_TITLE_STYLE_KEEPMENU}</option>
            </select>
            <button id="wmpotify-config-apply" class="wmpotify-aero">${s.CONF_GENERAL_APPLY}</button><br>
            <label for="wmpotify-config-control-style">${s.CONF_GENERAL_CONTROL_STYLE}</label>
            <select id="wmpotify-config-control-style" class="wmpotify-aero">
                <option value="classic">Windows Classic</option>
                <option value="standard">Windows Standard</option>
                <option value="xp">Windows XP</option>
                <option value="aero" selected>Windows Aero</option>
                <option value="10">Windows 10</option>
            </select>
            <label for="wmpotify-config-dark-mode">${s.CONF_GENERAL_DARK_MODE}</label>
            <select id="wmpotify-config-dark-mode" class="wmpotify-aero">
                <option value="follow_scheme" selected>${s.CONF_GENERAL_DARK_MODE_FOLLOW_SCHEME}</option>
                <option value="system">${s.CONF_GENERAL_DARK_MODE_SYSTEM}</option>
                <option value="always">${s.CONF_GENERAL_DARK_MODE_ALWAYS}</option>
                <option value="never">${s.CONF_GENERAL_DARK_MODE_NEVER}</option>
            </select><br>
            <label for="wmpotify-config-font">${s.CONF_GENERAL_FONT}</label>
            <select id="wmpotify-config-font" class="wmpotify-aero">
                <option value="custom">${s.UI_CUSTOM}</option>
            </select><br>
            <label for="wmpotify-config-topmost">${s.CONF_GENERAL_TOPMOST}</label>
            <select id="wmpotify-config-topmost" class="wmpotify-aero" disabled>
                <option value="always">${s.CONF_GENERAL_TOPMOST_ALWAYS}</option>
                <option value="minimode">${s.CONF_GENERAL_TOPMOST_MINIMODE}</option>
                <option value="never" selected>${s.CONF_GENERAL_TOPMOST_NEVER}</option>
            </select>
            <label for="wmpotify-config-backdrop">${s.CONF_GENERAL_BACKDROP}</label>
            <select id="wmpotify-config-backdrop" class="wmpotify-aero" disabled>
                <option value="none" selected>${s.CONF_GENERAL_BACKDROP_NONE}</option>
                <option value="mica">Mica</option>
                <option value="acrylic">${s.CONF_GENERAL_BACKDROP_ACRYLIC}</option>
                <option value="tabbed">${s.CONF_GENERAL_BACKDROP_TABBED}</option>
            </select><br>
            <input type="checkbox" id="wmpotify-config-hide-pbleftbtn" class="wmpotify-aero">
            <label for="wmpotify-config-hide-pbleftbtn">${s.CONF_GENERAL_HIDE_PBLEFTBTN}</label><br>
            <input type="checkbox" id="wmpotify-config-show-libx" class="wmpotify-aero">
            <label for="wmpotify-config-show-libx">${s.CONF_GENERAL_SHOW_LIBX}</label><br>
            <input type="checkbox" id="wmpotify-config-lock-title" class="wmpotify-aero" disabled>
            <label for="wmpotify-config-lock-title">${s.CONF_GENERAL_LOCK_TITLE}</label>
        </section>
        <section id="wmpotify-config-tab-color" class="wmpotify-config-tab-content" data-tab-title="${s.CONF_COLOR_TITLE}">
            <section class="field-row">
                <a href="#" id="wmpotify-config-color-reset">${s.UI_RESET}</a>
                <input type="checkbox" id="wmpotify-config-tint-playerbar" class="wmpotify-aero">
                <label for="wmpotify-config-tint-playerbar">${s.CONF_COLOR_TINTPB}</label>
            </section>
            <label>${s.CONF_COLOR_HUE}</label><br>
            <input type="range" id="wmpotify-config-hue" class="wmpotify-aero no-track" min="0" max="360" step="1" value="180"><br>
            <label>${s.CONF_COLOR_SAT}</label><br>
            <input type="range" id="wmpotify-config-sat" class="wmpotify-aero no-track" min="0" max="354" step="1" value="121"><br>
        </section>
        ${e?.speedModSupported?`
        <section id="wmpotify-config-tab-speed" class="wmpotify-config-tab-content" data-tab-title="${s.CONF_SPEED_TITLE}" data-wh-speedmod-required="true">
            <a href="#" id="wmpotify-config-speed-slow">${s.CONF_SPEED_SLOW}</a>
            <a href="#" id="wmpotify-config-speed-normal">${s.CONF_SPEED_NORMAL}</a>
            <a href="#" id="wmpotify-config-speed-fast">${s.CONF_SPEED_FAST}</a><br>
            <input type="range" id="wmpotify-config-speed" class="wmpotify-aero" min="0.5" max="2.0" step="0.1" value="1"><br>
            ${s.CONF_SPEED_CURRENT_LABEL}: <span id="wmpotify-config-speed-value">1.0</span>
        </section>
        `:""}
        <section id="wmpotify-config-tab-about" class="wmpotify-config-tab-content" data-tab-title="${s.CONF_ABOUT_TITLE}">
            <div id="wmpotify-about-logo"></div>
            <p id="wmpotify-about-title">WMPotify</p>
            <button id="wmpotify-about-github" onclick="window.open('https://github.com/Ingan121/WMPotify', '_blank')">
                
                <svg version="1.0" xmlns="http://www.w3.org/2000/svg"
                    width="240.000000pt" height="240.000000pt" viewBox="0 0 240.000000 240.000000"
                    preserveAspectRatio="xMidYMid meet">

                    <g transform="translate(0.000000,240.000000) scale(0.100000,-0.100000)"
                    fill="white" stroke="none">
                    <path d="M970 2301 c-305 -68 -555 -237 -727 -493 -301 -451 -241 -1056 143
                    -1442 115 -116 290 -228 422 -271 49 -16 55 -16 77 -1 24 16 25 20 25 135 l0
                    118 -88 -5 c-103 -5 -183 13 -231 54 -17 14 -50 62 -73 106 -38 74 -66 108
                    -144 177 -26 23 -27 24 -9 37 43 32 130 1 185 -65 96 -117 133 -148 188 -160
                    49 -10 94 -6 162 14 9 3 21 24 27 48 6 23 22 58 35 77 l24 35 -81 16 c-170 35
                    -275 96 -344 200 -64 96 -85 179 -86 334 0 146 16 206 79 288 28 36 31 47 23
                    68 -15 36 -11 188 5 234 13 34 20 40 47 43 45 5 129 -24 214 -72 l73 -42 64
                    15 c91 21 364 20 446 0 l62 -16 58 35 c77 46 175 82 224 82 39 0 39 -1 55 -52
                    17 -59 20 -166 5 -217 -8 -30 -6 -39 16 -68 109 -144 121 -383 29 -579 -62
                    -129 -193 -219 -369 -252 l-84 -16 31 -55 32 -56 3 -223 4 -223 25 -16 c23
                    -15 28 -15 76 2 80 27 217 101 292 158 446 334 590 933 343 1431 -145 293
                    -419 518 -733 602 -137 36 -395 44 -525 15z"/>
                    </g>
                </svg>
            </button>
            <p>${s.CONF_ABOUT_DESC}</p>
            <p>${s.CONF_ABOUT_VERSION}: 1.0 Beta 4<span id="wmpotify-about-ctewh-ver"></span></p>
            <p>${s.CONF_ABOUT_AUTHOR} - <a href="https://www.ingan121.com/" target="_blank">www.ingan121.com</a></p>
            <input type="checkbox" id="wmpotify-config-auto-updates" class="wmpotify-aero" checked>
            <label for="wmpotify-config-auto-updates">${s.CONF_ABOUT_AUTO_UPDATES}</label>
        </section>
    `,G=S.querySelectorAll(".wmpotify-config-tab-content"),c.topborder=S.querySelector("#wmpotify-config-topborder"),c.title=S.querySelector("#wmpotify-config-title"),c.hue=S.querySelector("#wmpotify-config-hue"),c.sat=S.querySelector("#wmpotify-config-sat"),c.tintPb=S.querySelector("#wmpotify-config-tint-playerbar"),c.style=S.querySelector("#wmpotify-config-style"),c.titleStyle=S.querySelector("#wmpotify-config-title-style"),c.controlStyle=S.querySelector("#wmpotify-config-control-style"),c.darkMode=S.querySelector("#wmpotify-config-dark-mode"),c.fontSelector=S.querySelector("#wmpotify-config-font"),c.fontCustom=S.querySelector("#wmpotify-config-font option"),c.hidePbLeftBtn=S.querySelector("#wmpotify-config-hide-pbleftbtn"),c.topmost=S.querySelector("#wmpotify-config-topmost"),c.backdrop=S.querySelector("#wmpotify-config-backdrop"),c.showLibX=S.querySelector("#wmpotify-config-show-libx"),c.lockTitle=S.querySelector("#wmpotify-config-lock-title"),c.whMessage=S.querySelector("#wmpotify-config-wh-message"),c.whVer=S.querySelector("#wmpotify-about-ctewh-ver"),c.autoUpdates=S.querySelector("#wmpotify-config-auto-updates"),S.style.height=localStorage.wmpotifyConfigHeight||"",c.style.addEventListener("change",async()=>{if(c.style.value==="basic_custom"){let n=await te(s.CONF_GENERAL_BASIC_CUSTOM_DLG_TITLE,s.CONF_GENERAL_BASIC_CUSTOM_ACTIVE_MSG,"",s.CONF_GENERAL_BASIC_CUSTOM_PLACEHOLDER);if(!n){c.style.value=localStorage.wmpotifyStyle||"auto";return}let a=await te(s.CONF_GENERAL_BASIC_CUSTOM_DLG_TITLE,s.CONF_GENERAL_BASIC_CUSTOM_INACTIVE_MSG,"",s.CONF_GENERAL_BASIC_CUSTOM_PLACEHOLDER);if(!a){c.style.value=localStorage.wmpotifyStyle||"auto";return}let l=await te(s.CONF_GENERAL_BASIC_CUSTOM_DLG_TITLE,s.CONF_GENERAL_BASIC_CUSTOM_TEXT_MSG,"",s.CONF_GENERAL_BASIC_CUSTOM_PLACEHOLDER);if(!l){c.style.value=localStorage.wmpotifyStyle||"auto";return}Ne=n,Ie=a,Pe=l}}),c.controlStyle.addEventListener("change",()=>{localStorage.wmpotifyControlStyle=c.controlStyle.value,document.documentElement.dataset.wmpotifyControlStyle=c.controlStyle.value}),c.darkMode.addEventListener("change",async()=>{let n=c.darkMode.value,a=window.matchMedia("(prefers-color-scheme: dark)");if(n==="system"&&!m.getModule()?.initialOptions.noforceddarkmode&&a.matches){let l="CONF_GENERAL_DARK_MODE_SYSTEM_MSG_"+(navigator.userAgent.includes("Windows")?"WIN":"UNIX");if(!await gt(s.CONF_GENERAL_DARK_MODE_SYSTEM,s[l])){c.darkMode.value=localStorage.wmpotifyDarkMode||"follow_scheme";return}}localStorage.wmpotifyDarkMode=n,n==="always"||n==="follow_scheme"&&window.Spicetify?.Config?.color_scheme==="dark"||n==="system"&&a.matches?document.documentElement.dataset.wmpotifyDarkMode=!0:delete document.documentElement.dataset.wmpotifyDarkMode,n==="system"?V.addSystemDarkModeListener():V.removeSystemDarkModeListener(),n==="follow_scheme"?V.addMarketplaceSchemeObserver():V.removeMarketplaceSchemeObserver()}),c.fontSelector.addEventListener("change",async()=>{if(c.fontSelector.value==="custom"){let n=await te(s.CONF_GENERAL_CUSTOM_FONT_DLG_TITLE,s.CONF_GENERAL_CUSTOM_FONT_MSG,"",localStorage.wmpotifyFont||"Segoe UI");if(!n){c.fontSelector.value=localStorage.wmpotifyFont||"Segoe UI";return}c.fontCustom.textContent=n,localStorage.wmpotifyFont=n}else c.fontCustom.textContent=s.UI_CUSTOM,localStorage.wmpotifyFont=c.fontSelector.value;document.documentElement.style.setProperty("--ui-font",localStorage.wmpotifyFont)}),c.hidePbLeftBtn.addEventListener("change",()=>{c.hidePbLeftBtn.checked?(localStorage.wmpotifyHidePbLeftBtn=!0,document.body.dataset.hidePbLeftBtn=!0):(delete localStorage.wmpotifyHidePbLeftBtn,delete document.body.dataset.hidePbLeftBtn)}),c.showLibX.addEventListener("change",()=>{c.showLibX.checked?(localStorage.wmpotifyShowLibX=!0,delete document.body.dataset.hideLibx):(delete localStorage.wmpotifyShowLibX,document.body.dataset.hideLibx=!0,Spicetify.Platform.LocalStorageAPI.setItem("ylx-sidebar-state",1))}),S.querySelector("#wmpotify-config-close").addEventListener("click",Qe),S.querySelector("#wmpotify-config-apply").addEventListener("click",Ot),c.autoUpdates.addEventListener("change",()=>{c.autoUpdates.checked?(delete localStorage.wmpotifyNoUpdateCheck,Oe()):localStorage.wmpotifyNoUpdateCheck=!0});let i=Spicetify.Platform.PlatformData.os_version.split(".")[2]>=22e3;if(e&&(c.topmost.disabled=!1,c.topmost.value=localStorage.wmpotifyTopMost||"never",c.topmost.addEventListener("change",()=>{localStorage.wmpotifyTopMost=c.topmost.value,c.topmost.value==="always"||c.topmost.value==="minimode"&&X.isMiniMode()?m.setTopMost(!0):m.setTopMost(!1)}),c.lockTitle.disabled=!1,c.lockTitle.checked=localStorage.wmpotifyLockTitle,c.lockTitle.addEventListener("change",async()=>{if(m.lockTitle(c.lockTitle.checked),c.lockTitle.checked)m.setTitle(await Spicetify.AppTitle.get()),localStorage.wmpotifyLockTitle=!0;else{delete localStorage.wmpotifyLockTitle;let n=Spicetify.Player.data?.item.metadata;n&&Spicetify.Player.isPlaying()&&m.setTitle(n.artist_name+" - "+n.title)}}),i&&(c.backdrop.disabled=!1,c.backdrop.value=localStorage.wmpotifyBackdrop||"mica",c.backdrop.addEventListener("change",()=>{localStorage.wmpotifyBackdrop=c.backdrop.value,m.setBackdrop(c.backdrop.value)})),c.whMessage.style.display="none",c.whVer.textContent=", "+s.getString("CONF_ABOUT_CTEWH_VERSION",m.getModule().version),e.speedModSupported)){c.speed=S.querySelector("#wmpotify-config-speed"),c.speedValue=S.querySelector("#wmpotify-config-speed-value"),c.speed.addEventListener("pointerup",ao),S.querySelector("#wmpotify-config-speed-slow").addEventListener("click",fe.bind(null,.5)),S.querySelector("#wmpotify-config-speed-normal").addEventListener("click",fe.bind(null,1)),S.querySelector("#wmpotify-config-speed-fast").addEventListener("click",fe.bind(null,1.4));let n=e.playbackSpeed||1;c.speedValue.textContent=Number.isInteger(n)?n+".0":n,c.speedValue.addEventListener("click",async()=>{let a=await te(s.CONF_SPEED_CUSTOM_DLG_TITLE,s.CONF_SPEED_CUSTOM_MSG,n.toString(),"1.0");a&&fe(a)})}i||(c.backdrop.style.display="none",c.backdrop.previousElementSibling.style.display="none"),navigator.userAgent.includes("Windows")||(c.topmost.style.display="none",c.topmost.previousElementSibling.style.display="none",c.lockTitle.style.display="none",c.lockTitle.nextElementSibling.style.display="none",c.whMessage.style.display="none"),c.hue.addEventListener("input",Ye),c.sat.addEventListener("input",Ye),c.tintPb.addEventListener("change",Ye),S.querySelector("#wmpotify-config-color-reset").addEventListener("click",no),S.querySelector("#wmpotify-config-prev").addEventListener("click",vt),S.querySelector("#wmpotify-config-next").addEventListener("click",Mt),_t.each(n=>{let a=document.createElement("option");a.textContent=n.name,a.value=n.name,n.name===(localStorage.wmpotifyFont||"Segoe UI")&&(a.selected=!0),n.name==="Segoe UI"?c.fontSelector.insertBefore(a,c.fontSelector.firstChild):c.fontSelector.insertBefore(a,c.fontCustom)}),localStorage.wmpotifyStyle&&(localStorage.wmpotifyStyle==="basic"&&localStorage.wmpotifyBasicActiveColor&&localStorage.wmpotifyBasicInactiveColor&&localStorage.wmpotifyBasicTextColor?(Ne=localStorage.wmpotifyBasicActiveColor,Ie=localStorage.wmpotifyBasicInactiveColor,Pe=localStorage.wmpotifyBasicTextColor,c.style.value="basic_custom"):c.style.value=localStorage.wmpotifyStyle),navigator.userAgent.includes("Windows")||c.titleStyle.querySelector("option[value=keepmenu]").remove(),navigator.userAgent.includes("Linux")&&c.titleStyle.querySelector("option[value=spotify]").remove(),localStorage.wmpotifyTitleStyle&&(c.titleStyle.value=localStorage.wmpotifyTitleStyle),localStorage.wmpotifyControlStyle&&(c.controlStyle.value=localStorage.wmpotifyControlStyle),["follow_scheme","system","always","never"].includes(localStorage.wmpotifyDarkMode)?c.darkMode.value=localStorage.wmpotifyDarkMode:m.getModule()?.initialOptions.noforceddarkmode&&(c.darkMode.value="system"),localStorage.wmpotifyHidePbLeftBtn&&(c.hidePbLeftBtn.checked=!0),localStorage.wmpotifyShowLibX&&(S.querySelector("#wmpotify-config-show-libx").checked=!0),localStorage.wmpotifyNoUpdateCheck&&(c.autoUpdates.checked=!1);let o=0,r=!1;c.topborder.addEventListener("pointerdown",function(){r=!0,o=S.getBoundingClientRect().bottom,document.body.style.cursor="ns-resize"},!0),document.addEventListener("pointerup",function(){r=!1,document.body.style.cursor="",localStorage.wmpotifyConfigHeight=S.style.height},!0),document.addEventListener("pointermove",function(n){r&&(S.style.height=o-n.clientY+"px")},!0),t.appendChild(S)}function io(){if(G){if(document.body.dataset.wmpotifyLibPageOpen)Spicetify.Config.custom_apps.includes("wmpvis")?Spicetify.Platform.History.push({pathname:"/wmpvis"}):Spicetify.Platform.History.push({pathname:"/"});else if(S.style.display==="block"){Qe();return}if(S.style.display="block",localStorage.wmpotifyTintColor){let[e,t,i]=localStorage.wmpotifyTintColor.split(",");c.hue.value=parseInt(e)+180,c.sat.value=parseInt(t)*121/100,i&&(c.tintPb.checked=!0)}}}function Qe(){S.style.display="none"}function Je(e){if(G){for(let t=0;t<G.length;t++){let i=G[t];i.style.display=t===e?"block":"none"}je=e,c.title.textContent=G[e].dataset.tabTitle}}function vt(){Je((je-1+G.length)%G.length)}function Mt(){Je((je+1)%G.length)}function Ye(){let e=c.hue.value-180,t=c.sat.value*100/121;de(e,t,c.tintPb.checked),localStorage.wmpotifyTintColor=e+","+t+","+(c.tintPb.checked?"1":"")}function no(){c.hue.value=180,c.sat.value=121,de(),delete localStorage.wmpotifyTintColor}function ao(){c.speedValue.textContent=Number.isInteger(parseFloat(c.speed.value))?c.speed.value+".0":c.speed.value,Ae&&clearTimeout(Ae),Ae=setTimeout(()=>{fe(c.speed.value),Ae=null},500)}function fe(e){if(Spicetify.Platform.ConnectAPI.state.connectionStatus==="connected"){Spicetify.showNotification(s.CONF_SPEED_NO_CONNECT_MSG);return}e=parseFloat(e);let t=m.query().playbackSpeed||1;if(e!==t){c.speed.value=e,c.speedValue.textContent=Number.isInteger(e)?e+".0":e;try{m.setPlaybackSpeed(e)}catch(i){Spicetify.showNotification(i.message)}}}function Ot(){let e=c.style.value,t=c.titleStyle.value;e!=="auto"?(e!=="basic_custom"||!Ne||!Ie||!Pe?(delete localStorage.wmpotifyBasicActiveColor,delete localStorage.wmpotifyBasicInactiveColor,delete localStorage.wmpotifyBasicTextColor):(localStorage.wmpotifyBasicActiveColor=Ne,localStorage.wmpotifyBasicInactiveColor=Ie,localStorage.wmpotifyBasicTextColor=Pe),localStorage.wmpotifyStyle=e==="basic_custom"?"basic":e):delete localStorage.wmpotifyStyle,t!=="auto"?localStorage.wmpotifyTitleStyle=t:delete localStorage.wmpotifyTitleStyle,location.reload()}var ro={init:oo,open:io,close:Qe,openTab:Je,prevTab:vt,nextTab:Mt,apply:Ot,isOpen:()=>S.style.display==="block"},ye=ro;var At=null;function lo(){if(m.available())if(et()){let e=localStorage.wmpotifyPreMiniModeSize?.split(",");e&&e.length===2&&window.resizeTo(parseInt(e[0]),parseInt(e[1]))}else document.fullscreenElement&&document.exitFullscreen(),localStorage.wmpotifyPreMiniModeSize=[window.innerWidth,window.innerHeight],m.resizeTo(358,60)}function so(){if(document.fullscreenElement)document.exitFullscreen(),ke();else{if(Spicetify.Config.custom_apps.includes("wmpvis"))Spicetify.Platform.History.push({pathname:"/wmpvis"});else{let e=document.querySelector('.main-nowPlayingBar-extraControls button[data-testid="lyrics-button"]');e&&e.click()}ye.close(),document.documentElement.requestFullscreen(),document.body.classList.add("wmpotify-playerbar-visible"),setTimeout(()=>{document.addEventListener("pointermove",Ze),Ze()},200)}document.addEventListener("fullscreenchange",()=>{document.fullscreenElement||ke()},{once:!0}),document.addEventListener("resize",()=>{ke()},{once:!0})}function et(){let e=!!document.querySelector("#wmpotify-title-bar");return window.innerWidth<360&&window.innerHeight<(e?92:62)}function Ze(){if(!document.fullscreenElement){ke();return}document.body.classList.add("wmpotify-playerbar-visible"),clearTimeout(At),At=setTimeout(()=>{document.body.classList.remove("wmpotify-playerbar-visible")},2e3)}function ke(){document.body.classList.remove("wmpotify-playerbar-visible"),document.removeEventListener("pointermove",Ze)}window.addEventListener("resize",()=>{localStorage.wmpotifyTopMost==="minimode"&&m.setTopMost(et())});var co={toggleMiniMode:lo,toggleFullscreen:so,isMiniMode:et},X=co;var tt,he,ot,xe,Y,I,Nt=null,Se=!1;function xt(){let e=document.querySelector(".main-nowPlayingBar-nowPlayingBar");tt=document.querySelector(".player-controls__buttons button[data-testid='control-button-playpause']"),Spicetify.Player.addEventListener("onplaypause",ge),new MutationObserver(ge).observe(tt,{attributes:!0,attributeFilter:["aria-label"]}),It(),new MutationObserver(It).observe(document.querySelector(".main-nowPlayingBar-left"),{childList:!0});let t=document.querySelector(".player-controls__left"),i=document.querySelector('.player-controls__buttons button[data-testid="control-button-skip-forward"]'),o=document.querySelector('.player-controls__buttons button[data-testid="control-button-repeat"]');t.appendChild(o);let r=m.query();r?.speedModSupported&&r.immediateSpeedChange&&(i.addEventListener("pointerdown",()=>{i.disabled||Spicetify.Platform.ConnectAPI.state.connectionStatus==="connected"||(Nt=setTimeout(()=>{i.dataset.fastForward=!0,m.setPlaybackSpeed(5),Spicetify.Player.play()},1e3))}),i.addEventListener("click",v=>{clearTimeout(Nt),i.dataset.fastForward&&(delete i.dataset.fastForward,m.setPlaybackSpeed(1),v.preventDefault(),v.stopPropagation())}));let n=document.createElement("button");n.setAttribute("aria-label","Stop"),n.id="wmpotify-stop-button",n.addEventListener("click",()=>{Spicetify.Platform.PlayerAPI.clearQueue(),Spicetify.Player.playUri("")}),t.appendChild(n);let a=document.querySelector(".player-controls__right"),l=document.querySelector(".volume-bar");he=l.querySelector(".volume-bar__icon-button"),ot=l.querySelector(".progress-bar"),Pt(),new MutationObserver(Pt).observe(ot,{attributes:!0,attributeFilter:["style"]}),a.appendChild(l);let d=document.querySelector(".volume-bar__slider-container"),u=d.children[0];d.addEventListener("click",()=>{if(window.innerWidth<750){u.dataset.visible=!0;let v=setTimeout(()=>{delete u.dataset.visible},5e3);u.addEventListener("pointerup",()=>{clearTimeout(v),setTimeout(()=>{delete u.dataset.visible},100)},{once:!0})}}),xe=document.querySelectorAll(".playback-bar [class*=encore-text]");let f=document.createElement("div");f.classList.add("wmpotify-time-text-container"),I=document.createElement("span"),I.classList.add("wmpotify-time-text"),Y=parseInt(localStorage.wmpotifyTimeTextMode||0),kt(),I.dataset.mode=Y,I.addEventListener("click",()=>{Y=(Y+1)%3,I.dataset.mode=Y,localStorage.wmpotifyTimeTextMode=Y}),f.appendChild(I),e.insertAdjacentElement("afterbegin",f),Spicetify.Player.addEventListener("onprogress",kt);let p=document.querySelector("#wmpotify-title-bar"),g=document.querySelector("#wmpotify-title-buttons");if(p&&(A(),window.addEventListener("resize",A)),r){let v=new Spicetify.Playbar.Button(s.PB_BTN_MINI_MODE,"",()=>X.toggleMiniMode());v.element.id="wmpotify-mini-mode-button"}let E=new Spicetify.Playbar.Button(s.PB_BTN_FULLSCREEN,"",()=>X.toggleFullscreen());E.element.id="wmpotify-fullscreen-button";function A(){window.innerWidth<800?p.contains(I)||(g?p.insertBefore(I,g):p.appendChild(I)):e.contains(I)||f.appendChild(I)}}async function It(){ge();let e=!!document.querySelector("#wmpotify-title-bar"),t=m.available(),i=await Spicetify.AppTitle.get(),o=document.querySelector("#wmpotify-title-text"),r=document.querySelector(".main-nowPlayingWidget-trackInfo");if(!r||document.querySelector(".wmpotify-track-info"))return;let n=document.createElement("p");n.classList.add("wmpotify-track-info"),n.textContent=document.querySelector(".main-trackInfo-name")?.textContent||"",r.appendChild(n),window.innerWidth<420&&window.innerHeight<(e?92:62)&&(e?o.textContent=n.textContent:t&&m.setTitle(n.textContent),Se=!0);let a=1;setInterval(()=>{if(!Spicetify.Player.isPlaying())return;let l=Spicetify.Player.data?.item.metadata;l&&(a===0?n.textContent=l.title:a===1?n.textContent=l.artist_name:a===2&&(n.textContent=l.album_title),a=(a+1)%3,window.innerWidth<420&&window.innerHeight<(e?92:62)?(e?o.textContent=n.textContent:t&&(m.lockTitle(!0),m.setTitle(n.textContent)),Se=!0):Se&&(Se=!1,e&&(o.textContent=i),localStorage.wmpotifyLockTitle||m.lockTitle(!1),Spicetify.Player.isPlaying()&&!localStorage.wmpotifyLockTitle?m.setTitle(l.artist_name+" - "+l.title):m.setTitle(i)))},3e3),Spicetify.Player.addEventListener("songchange",()=>{a=0,n.textContent=Spicetify.Player.data?.item.metadata.title,window.innerWidth<420&&window.innerHeight<(e?92:62)&&(e?o.textContent=n.textContent:t&&m.setTitle(n.textContent),Se=!0)})}function ge(){tt?.classList.toggle("playing",Spicetify.Player.isPlaying());let e=document.querySelector(`.playlist-playlist-playlist[data-test-uri="${Spicetify.Player.data?.context?.uri}"]`);e&&e.classList.toggle("playing",Spicetify.Player.isPlaying())}function Pt(){let e=getComputedStyle(ot).getPropertyValue("--progress-bar-transform").replace("%","")/100;e===0?he.dataset.vol="muted":e<=.3?he.dataset.vol="low":e<=.6?he.dataset.vol="mid":he.dataset.vol="high"}function kt(){switch(Y){case 0:{let e=Spicetify.Player.data?.item?.metadata?.duration-Spicetify.Player.getProgress();I.textContent=ve(e,!0)}break;case 1:{let e=xe[0].textContent;(e.length===4||e.length===7)&&(e="0"+e),I.textContent=e}break;case 2:{let e=xe[0].textContent;(e.length===4||e.length===7)&&(e="0"+e);let t=xe[1].textContent;(t.length===4||t.length===7)&&(t="0"+t),I.textContent=`${e} / ${t}`}break}}var be=new MutationObserver(ne),uo=new ResizeObserver(ne.bind(null,!0)),mo={init(){be.observe(document.documentElement,{attributes:!0,attributeFilter:["style"]}),uo.observe(document.querySelector(".Root__right-sidebar")),window.addEventListener("resize",ne),window.addEventListener("load",ne),ne(!0)},updateSidebarWidth:ne};function ne(e){if(!Spicetify.Platform.History.location.pathname.startsWith("/wmpotify-standalone-libx")&&!e){let o=getComputedStyle(document.documentElement).getPropertyValue("--right-sidebar-width");o&&(be.disconnect(),document.documentElement.style.setProperty("--panel-width",o),be.observe(document.documentElement,{attributes:!0,attributeFilter:["style"]}));return}be.disconnect();let t=document.querySelector(".Root__right-sidebar aside");document.documentElement.style.setProperty("--panel-width",t?t.offsetWidth:8),getComputedStyle(document.documentElement).getPropertyValue("--right-sidebar-width")&&document.documentElement.style.setProperty("--right-sidebar-width",t?t.offsetWidth:8),t?document.body.classList.add("sidebar-open"):document.body.classList.remove("sidebar-open"),be.observe(document.documentElement,{attributes:!0,attributeFilter:["style"]})}var ae=mo;var it;function Be(){console.log("WMPotify: Trying to initialize queue panel"),ae.updateSidebarWidth(!0);let e=document.querySelector(".Root__right-sidebar > div > div > div:has(aside)");if(e&&!it&&(it=new MutationObserver(Be),it.observe(e,{childList:!0})),!document.querySelector("#queue-panel")||document.querySelector("#wmpotify-queue-toolbar")||document.querySelectorAll('div[data-encore-id="tabPanel"]').length>2)return;let t=document.querySelector("#Desktop_PanelContainer_Id:has(#queue-panel)"),i=document.querySelector("#Desktop_PanelContainer_Id:not(:has(#queue-panel))");t&&i&&(i.style.display="none"),t.classList.add("spotify-queue-panel");let o=document.querySelector("#Desktop_PanelContainer_Id:has(#queue-panel) > div > div:first-child > div:first-child"),r=document.querySelector("#Desktop_PanelContainer_Id:has(#queue-panel) > div > div:nth-child(2)");r.id="spotify-queue-panel-content";let n=document.createElement("div");n.id="wmpotify-queue-toolbar";let a=document.createElement("button");a.id="wmpotify-queue-playlist-button",a.classList.add("wmpotify-toolbar-button"),a.addEventListener("click",()=>{let L=Spicetify.Player.data?.context?.uri;L&&window.open(L)}),a.textContent=document.querySelector('#queue-panel div[data-flip-id*="section-header-"] a')?.textContent||s.QUEUE_CURRENT_PLAYLIST_PLACEHOLDER,a.innerHTML+='<span class="expandMark">\u23F7</span>',n.appendChild(a);let l=document.createElement("button");l.id="wmpotify-queue-clear-button",l.classList.add("wmpotify-toolbar-button"),l.addEventListener("click",()=>{Spicetify.Platform.PlayerAPI.clearQueue(),Spicetify.Player.playUri("")}),n.appendChild(l),r.insertAdjacentElement("afterbegin",n);let d=getComputedStyle(document.documentElement).getPropertyValue("--album-art-placeholder").trim().slice(5,-2),u=document.createElement("div");u.id="wmpotify-queue-npv";let f=document.createElement("img");f.id="wmpotify-queue-album-art",f.src=document.querySelector(".main-nowPlayingWidget-coverArt .cover-art img")?.src||d,u.appendChild(f);let p=document.createElement("div");p.id="wmpotify-queue-song-title",p.textContent=document.querySelector(".main-trackInfo-name")?.textContent||"No items",u.appendChild(p),o.insertAdjacentElement("afterbegin",u),Bt(),new MutationObserver(Bt).observe(document.querySelector("#queue-panel"),{childList:!0});let g=document.querySelectorAll('#Desktop_PanelContainer_Id:has(#queue-panel) div[role="tablist"] button'),E=[],A;for(let L of g)E.push({text:L.textContent,click:function(){for(let D of A.menuItems)D.classList.remove("activeStyle");this.classList.add("activeStyle"),L.click()}});E[0].classList=["activeStyle"],document.querySelector("#wmpotifyQueueTabMenuBg")?.remove(),A=me("wmpotifyQueueTab",E);let v=new oe(["wmpotifyQueueTab"]);t.addEventListener("contextmenu",L=>{L.preventDefault(),v.openMenu("wmpotifyQueueTab",{left:L.clientX+"px",top:L.clientY+"px"})}),Spicetify.Player.addEventListener("songchange",()=>{a.textContent=Spicetify.Player.data?.context?.metadata?.context_description||s.QUEUE_CURRENT_PLAYLIST_PLACEHOLDER,a.innerHTML+='<span class="expandMark">\u23F7</span>',f.src=Spicetify.Player.data?.item?.album?.images?.[0]?.url?.replace("spotify:image:","https://i.scdn.co/image/")||d,p.textContent=Spicetify.Player.data?.item?.name||"No items"})}function Bt(){let e=document.querySelector("#queue-panel > div:first-child");if(!e)return;let t=e?.querySelectorAll("#queue-panel ul")[1];t?(delete e.dataset.nothingInQueue,Rt(),new MutationObserver(Rt).observe(t,{childList:!0})):document.querySelector("#queue-panel > div:first-child > svg:first-child")?e.dataset.nothingInQueue=!0:delete e.dataset.nothingInQueue}function Rt(){if(!document.querySelector("#queue-panel")||!Spicetify.Queue)return;let e=document.querySelectorAll("#queue-panel li .HeaderArea");for(let t=0;t<e.length;t++){let i=e[t];if(i.querySelector(".wmpotify-queue-duration"))continue;let o=t===0?Spicetify.Queue.track?.contextTrack?.metadata?.duration:Spicetify.Queue.nextTracks?.[t-1]?.contextTrack?.metadata?.duration;if(!o)continue;let r=document.createElement("span");r.classList.add("wmpotify-queue-duration"),r.textContent=ve(o),i.appendChild(r)}}var po={getItem(e){let t=Spicetify._platform?.initialUser?.username,i=localStorage.getItem(t+":"+e);return isNaN(i)?i:parseFloat(i)},setItem(e,t){let i=Spicetify._platform?.initialUser?.username;localStorage.setItem(i+":"+e,t)},removeItem(e){let t=Spicetify._platform?.initialUser?.username;localStorage.removeItem(t+":"+e)}},F=po;var C,B=[],P={},q=new MutationObserver(st),Ft=new MutationObserver(yo),R=!1,lt=!1,nt=[],at=[],fo={async init(){if(document.querySelector("#wmpotify-libx-sidebar"))return!1;Object.keys(Spicetify.Platform.Translations).filter(o=>o.startsWith("shared.library.filter.")).forEach(o=>{let r=Spicetify.Platform.Translations[o];P[o.split(".").pop()]={loc_id:o,value:r}}),B.length===0&&(B.push({identifier:"playlist",localized:P.playlist.value,elem:null}),B.push({identifier:"album",localized:P.album.value,elem:null}),B.push({identifier:"artist",localized:P.artist.value,elem:null}));let t=document.createElement("div");t.id="wmpotify-libx-header",document.querySelector(".main-yourLibraryX-libraryContainer").insertAdjacentElement("afterbegin",t);let i=document.createElement("div");return i.id="wmpotify-libx-sidebar",document.querySelector(".main-yourLibraryX-libraryItemContainer").insertAdjacentElement("afterbegin",i),await ho(),C=document.querySelector('.main-yourLibraryX-filterArea .search-searchCategory-categoryGrid [role="presentation"]'),st(),q.observe(C,{childList:!0}),Ft.observe(document.querySelector(".main-yourLibraryX-filterArea"),{childList:!0}),window.addEventListener("resize",qt),!0},uninit(){document.querySelector("#wmpotify-libx-header")?.remove(),document.querySelector("#wmpotify-libx-sidebar")?.remove(),q.disconnect(),Ft.disconnect(),window.removeEventListener("resize",qt)},go(e){e||(e=Spicetify.Platform.History.location.pathname.split("/").slice(2)),e[0]!==void 0&&So(e)},expand:bo,collapse:Eo};function rt(){let e=document.querySelector("#wmpotify-libx-header");e.innerHTML="";let t=document.createElement("div");t.classList.add("wmpotify-libx-header-root-icon"),t.classList.add("wmpotify-toolbar-button"),e.appendChild(t);let i=document.createElement("button");i.classList.add("wmpotify-libx-header-root-text"),i.classList.add("wmpotify-toolbar-button"),i.textContent=s.LIBX_HEADER_ROOT,i.addEventListener("click",Q),e.appendChild(i);let o=ct();if(o.forEach((r,n)=>{let a=document.createElement("button");a.classList.add("wmpotify-libx-header-category-text"),a.classList.add("wmpotify-toolbar-button"),a.textContent=r,a.addEventListener("click",async()=>{if(!a.nextElementSibling)return;R&&(Ee(),await we()),q.disconnect();let l=B.find(d=>d.localized===r);if(n===0)Q(),await U();else{if(!l)return;let d=B.find(u=>u.localized===o[n-1]);(!Dt(d)||!document.contains(l.elem))&&(re()||(Q(),await U()),d.elem.click(),await U())}j(l),l.elem.click(),q.observe(C,{childList:!0})}),e.appendChild(a)}),R){let r=document.querySelector(".main-yourLibraryX-collapseButton > div").textContent,n=document.createElement("button");n.classList.add("wmpotify-libx-header-category-text"),n.classList.add("wmpotify-toolbar-button"),n.textContent=r,e.appendChild(n)}}function st(){R=document.querySelector(".main-yourLibraryX-collapseButton").childElementCount>1;let e=ct(!0);if(R){let o=Spicetify.Platform.LocalStorageAPI.getItem("opened-folder-uri");e.push(o)}if(!lt){let o="/wmpotify-standalone-libx/"+e.join("/");Spicetify.Platform.History.location.pathname==="/wmpotify-standalone-libx"?Spicetify.Platform.History.location.pathname=o:Spicetify.Platform.History.location.pathname!==o&&Spicetify.Platform.History.push({pathname:"/wmpotify-standalone-libx/"+e.join("/")})}if(R){rt();return}let t=!C.querySelector('button[class*="ChipClear"]:first-child'),i=Array.from(C.querySelectorAll("button"));if(t)i.forEach((o,r)=>{let n={};n.localized=o.textContent,n.identifier=Object.keys(P).find(a=>P[a].value===n.localized),n.elem=o,B.some(a=>a.localized===n.localized)||B.push(n)});else{i.shift();let o=i[0].textContent,r=B.find(n=>n.localized===o);if(!r){let n={};n.localized=o,n.identifier=Object.keys(P).find(a=>P[a].value===n.localized),n.elem=i[0],B.push(n),r=n}r.children||(r.children=[]),i.shift(),i.forEach((n,a)=>{let l={};l.localized=n.textContent,l.identifier=Object.keys(P).find(d=>P[d].value===l.localized),l.elem=n,r.children.some(d=>d.localized===l.localized)||r.children.push(l)})}rt(),Wt()}function yo(){q.disconnect(),C=document.querySelector('.main-yourLibraryX-filterArea .search-searchCategory-categoryGrid [role="presentation"]'),st(),q.observe(C,{childList:!0})}function j(e){if(!document.contains(e.elem)){for(let t of C.querySelectorAll("button"))if(t.textContent===e.localized){e.elem=t;break}}}function re(){return!C.querySelector('button[class*="ChipClear"]:first-child')}function Dt(e){return re()?!1:Array.from(C.querySelectorAll("button"))[1].textContent===e.localized}async function Q(){R&&(Ee(),await we()),C.querySelector('button[class*="ChipClear"]:first-child')?.click()}function Ee(){lt=!0,document.querySelectorAll(".main-yourLibraryX-collapseButton button")?.[1]?.click()}function ct(e=!1){let t=[];if(R=document.querySelector(".main-yourLibraryX-collapseButton").childElementCount>1,R)return e?at:nt;if(re())return nt=[],at=[],t;{let o=Array.from(C.querySelectorAll("button")).slice(1)[0].textContent;e&&(o=Object.keys(P).find(n=>P[n].value===o)),t.push(o);let r=C.querySelector('button[class*="secondary-selected"]');r&&(e?t.push(Object.keys(P).find(n=>P[n].value===r.textContent)):t.push(r.textContent)),e?at=structuredClone(t):nt=structuredClone(t)}return t}async function So(e){if(R&&(Ee(),await we()),q.disconnect(),!re()){if(Q(),e.length===0)return;await U()}for(let t=0;t<e.length;t++)if(e[t].startsWith("spotify:user:"))await go(),document.querySelector('.main-yourLibraryX-libraryRootlist .main-rootlist-wrapper div[role="button"][aria-labelledby*="listrow-title-'+e[t]+'"]').click();else if(t===0){let i=B.find(o=>o.identifier===e[t]);if(!i)return;j(i),i.elem.click(),await U()}else{let i=B.find(r=>r.identifier===e[t-1]);if(!i)return;let o=i.children.find(r=>r.identifier===e[t]);if(!o)return;j(o),o.elem.click(),await U()}rt(),Wt(),q.observe(C,{childList:!0})}function Wt(){let e=document.querySelector("#wmpotify-libx-sidebar");e.innerHTML="";let t=document.createElement("div");t.classList.add("wmpotify-libx-sidebar-item-container");let i=document.createElement("button");i.classList.add("wmpotify-libx-sidebar-item"),i.id="wmpotify-libx-sidebar-root",i.textContent=s.LIBX_SIDEBAR_ROOT,i.addEventListener("click",Q);let o=document.createElement("div");o.classList.add("wmpotify-libx-sidebar-chevron"),o.addEventListener("click",()=>{e.classList.toggle("rootCollapsed")}),t.appendChild(o),t.appendChild(i),e.appendChild(t),B.forEach(n=>{let a=document.createElement("div");a.classList.add("wmpotify-libx-sidebar-item-container");let l=document.createElement("button");if(l.classList.add("wmpotify-libx-sidebar-item"),l.textContent=n.localized,l.dataset.identifier=n.identifier,l.addEventListener("click",async()=>{l.classList.contains("active")&&!R||(R&&(Ee(),await we()),q.disconnect(),re()||(Q(),await U()),j(n),n.elem.click(),q.observe(C,{childList:!0}))}),a.appendChild(l),e.appendChild(a),n.children&&n.children.length>0){let d=document.createElement("div");d.classList.add("wmpotify-libx-sidebar-chevron"),d.addEventListener("click",()=>{a.classList.toggle("collapsed")}),a.insertBefore(d,l);let u=document.createElement("div");u.classList.add("wmpotify-libx-sidebar-downlevel"),n.children.forEach(f=>{let p=document.createElement("button");p.classList.add("wmpotify-libx-sidebar-item"),p.textContent=f.localized,p.dataset.identifier=f.identifier,p.addEventListener("click",async()=>{p.classList.contains("active")&&!R||(R&&(Ee(),await we()),q.disconnect(),j(f),(!Dt(n)||!document.contains(f.elem))&&(re()||(Q(),await U()),j(n),n.elem.click(),await U()),j(f),f.elem.click(),q.observe(C,{childList:!0}))}),u.appendChild(p)}),e.appendChild(u)}});let r=ct();if(r.length>0){let n=r.pop();Array.from(e.querySelectorAll(".wmpotify-libx-sidebar-item")).find(l=>l.textContent===n).classList.add("active")}else i.classList.add("active")}function qt(){let e=F.getItem("ylx-sidebar-state");Spicetify.Platform.LocalStorageAPI.setItem("ylx-sidebar-state",2),F.setItem("ylx-sidebar-state",e)}function ho(){if(!document.querySelector('.main-yourLibraryX-filterArea .search-searchCategory-categoryGrid [role="presentation"]'))return new Promise(e=>{let t=new MutationObserver(()=>{document.querySelector('.main-yourLibraryX-filterArea .search-searchCategory-categoryGrid [role="presentation"]')&&(e(),t.disconnect())});t.observe(document.querySelector(".main-yourLibraryX-libraryItemContainer"),{childList:!0,subtree:!0})})}function U(){return new Promise(e=>{let t=new MutationObserver(()=>{C.querySelector("button")&&(e(),t.disconnect())});t.observe(C,{childList:!0})})}function we(){return new Promise(e=>{let t=new MutationObserver(()=>{lt=!1,e(),t.disconnect()});t.observe(document.querySelector(".main-yourLibraryX-filterArea"),{childList:!0})})}function go(){if(!document.querySelector('.main-yourLibraryX-libraryRootlist .main-rootlist-wrapper [role="presentation"]:not([class])'))return new Promise(e=>{let t=new MutationObserver(()=>{document.querySelector('.main-yourLibraryX-libraryRootlist .main-rootlist-wrapper [role="presentation"]:not([class])')&&(e(),t.disconnect())});t.observe(document.querySelector(".main-yourLibraryX-libraryRootlist"),{childList:!0,subtree:!0})})}function bo(){if(document.querySelector(".main-yourLibraryX-filterArea + div")||(window.innerWidth<1024&&window.resizeTo(1024+window.outerWidth-window.innerWidth,window.outerHeight),document.querySelector(".main-yourLibraryX-filterArea")||document.querySelector(".main-yourLibraryX-collapseButton button")?.click(),document.querySelector(".main-yourLibraryX-filterArea + div")))return;let e=document.querySelector(".main-yourLibraryX-headerContent > button:last-child")||document.querySelector(".main-yourLibraryX-headerContent > div:last-child > button:last-child");if(e)e.click();else{let t=new MutationObserver(()=>{e=document.querySelector(".main-yourLibraryX-headerContent > button:last-child")||document.querySelector(".main-yourLibraryX-headerContent > div:last-child > button:last-child"),e&&(e.click(),t.disconnect())});t.observe(document.querySelector(".main-yourLibraryX-headerContent"),{childList:!0,subtree:!0})}}function Eo(e=1){[0,1].includes(e)&&(e===1?document.querySelector(".main-yourLibraryX-collapseButton button")?.click():e===0&&document.querySelector(".main-yourLibraryX-headerContent > button:first-child")?.click())}var J=fo;async function Re(e){let t=document.querySelector('section[data-testid="artist-page"]');if(!t){e&&(await Fe.waitForPageRender(),Re(!1));return}await Gt(t),document.querySelector(".main-topBar-topbarContent").appendChild(document.querySelector(".artist-artistDiscography-topBar")),t.querySelector(".artist-artistDiscography-cardGrid")&&await Gt(t,!0);let i=document.querySelector(".main-topBar-topbarContent .artist-artistDiscography-topBar a").textContent,o=t.dataset.testUri,r=t.querySelectorAll(".artist-artistDiscography-headerContainer");for(let l of r){if(l.querySelector(".artist-artistDiscography-headerTitle + div a"))continue;let d=l.querySelector(".main-entityHeader-image");if(!d)continue;d.addEventListener("dblclick",()=>{l.querySelector(".artist-artistDiscography-headerButtons div button").click()}),d.addEventListener("contextmenu",async f=>{l.querySelector(".artist-artistDiscography-headerButtons > button:last-child").click(),f.preventDefault(),f.stopPropagation(),await wo();let p=document.querySelector("[data-tippy-root]");p.dataset.wmpotifyForceTransform=!0,p.style.setProperty("--tippy-force-transform",`translate(${f.clientX}px, ${f.clientY}px)`)});let u=document.createElement("a");u.href=o,u.textContent=i,l.querySelector(".artist-artistDiscography-headerTitle + div").appendChild(u)}let n=t.querySelectorAll(".artist-artistDiscography-tracklist");for(let l of n){if(l.querySelector(".wmpotify-discography-trackList-header"))continue;let d=l.querySelector('[role="grid"]');if(!d)continue;let u=d.getAttribute("aria-label"),f=document.createElement("div");f.className="wmpotify-discography-trackList-header",f.textContent=u,l.insertAdjacentElement("afterbegin",f)}let a=new MutationObserver(()=>{Re(!1),a.disconnect()});a.observe(t.querySelector('[data-testid="infinite-scroll-list"]'),{childList:!0})}function Gt(e,t){if(!e.querySelector(".artist-artistDiscography-tracklist")&&(t||!e.querySelector(".artist-artistDiscography-cardGrid")))return new Promise(i=>{let o=new MutationObserver(()=>{(e.querySelector(".artist-artistDiscography-tracklist")||!t&&e.querySelector(".artist-artistDiscography-cardGrid"))&&(o.disconnect(),i())});o.observe(e,{childList:!0,subtree:!0})})}function wo(){return new Promise(e=>{let t=new MutationObserver(()=>{document.querySelector("[data-tippy-root]")&&(t.disconnect(),e())});t.observe(document.body,{childList:!0})})}var qe=null;async function dt(e){let t=document.querySelector("main > [role=presentation]");if(!t){e&&(await _o(),dt(!1));return}await Co(t),console.log("Initializing playlist page");let i=t.querySelector(".main-actionBar-ActionBarRow > div:last-child"),o=document.querySelector(".main-topBar-topbarContent");if(!i||!o)return;i.id="playlist-search-box-container";let r=i.parentElement;qe&&qe.disconnect(),qe=new MutationObserver(a=>{for(let l of a)if(l.type==="attributes"&&l.attributeName==="class"){let d=l.target;d.classList.contains("main-entityHeader-topbarContentFadeIn")?d.appendChild(i):r.appendChild(i)}}),qe.observe(o,{attributes:!0,attributeFilter:["class"]});let n=t.querySelector(".main-trackList-trackListHeaderRow");if(n){for(let a of n.querySelectorAll(":scope > div"))if(a.querySelector("button")){a.classList.add("has-button"),a.querySelector(".Svg-img-icon-small-textBrightAccent")&&a.classList.add("selected");let l=new MutationObserver(()=>{l.disconnect(),a.querySelector(".Svg-img-icon-small-textBrightAccent")?a.classList.add("selected"):a.classList.remove("selected"),l.observe(a,{childList:!0,subtree:!0})});l.observe(a,{childList:!0,subtree:!0})}}}function _o(){return new Promise(e=>{let t=new MutationObserver(()=>{document.querySelector(".main-loadingPage-container")||document.querySelector("main > [role=presentation]")&&(e(),t.disconnect())});t.observe(document.querySelector(".main-view-container__scroll-node-child main"),{childList:!0})})}function Co(e){if(!e.querySelector(".main-actionBar-ActionBarRow")||!document.querySelector(".main-topBar-topbarContent"))return new Promise(t=>{let i=new MutationObserver(()=>{e.querySelector(".main-actionBar-ActionBarRow")&&document.querySelector(".main-topBar-topbarContent")&&(i.disconnect(),t())});i.observe(e,{childList:!0,subtree:!0})})}var ut=0,De={waitForPageRender(){return new Promise(e=>{let t=new MutationObserver(()=>{document.querySelector(".main-loadingPage-container")||(e(),t.disconnect())});t.observe(document.querySelector(".main-view-container__scroll-node-child main"),{childList:!0})})},async handleLocChange(e){if(e?.pathname&&!(ut&&Date.now()-ut<2e3)){if(document.documentElement.dataset.page=e.pathname,ae.updateSidebarWidth(!0),e.pathname.startsWith("/wmpotify-standalone-libx")){document.body.dataset.wmpotifyLibPageOpen=!0;let t=F.getItem("ylx-sidebar-state"),i=F.getItem("ylx-expanded-state-nav-bar-width");Spicetify.Platform.version?.split(".").map(Number)[2]>=58?J.expand():Spicetify.Platform.LocalStorageAPI.setItem("ylx-sidebar-state",2),Spicetify.Platform.LocalStorageAPI.setItem("ylx-expanded-state-nav-bar-width",0),F.setItem("ylx-sidebar-state",t),F.setItem("ylx-expanded-state-nav-bar-width",i),await J.init()||Spicetify.Platform.History.action==="POP"&&J.go()}else if(document.body.dataset.wmpotifyLibPageOpen)if(delete document.body.dataset.wmpotifyLibPageOpen,J.uninit(),localStorage.wmpotifyShowLibX){let t=F.getItem("ylx-sidebar-state");if(Spicetify.Platform.version?.split(".").map(Number)[2]>=58)J.collapse(t);else{F.removeItem("ylx-sidebar-state");let i=F.getItem("ylx-expanded-state-nav-bar-width");F.removeItem("ylx-expanded-state-nav-bar-width"),Spicetify.Platform.LocalStorageAPI.setItem("ylx-sidebar-state",t),Spicetify.Platform.LocalStorageAPI.setItem("ylx-expanded-state-nav-bar-width",i)}}else Spicetify.Platform.version?.split(".").map(Number)[2]>=58?J.collapse():Spicetify.Platform.LocalStorageAPI.setItem("ylx-sidebar-state",1);e.pathname.match("/artist/.*/discography/.*")?Re(!0):e.pathname.startsWith("/playlist/")&&(document.querySelector(".playlist-playlist-playlist")||await De.waitForPageRender(),ge()),dt(!0)}},init(){De.handleLocChange(Spicetify.Platform.History.location),ut=Date.now(),Spicetify.Platform.History.listen(e=>De.handleLocChange(e))}},Fe=De;var Ut=[".Root__globalNav",".main-globalNav-historyButtons",".main-globalNav-searchSection",".main-globalNav-searchContainer > button",".main-globalNav-searchContainer div form button",'.main-globalNav-searchContainer div form input[type="search"]',".main-topBar-topbarContentRight > .main-actionButtons > button",".main-topBar-topbarContentRight > button:last-child",".Root__main-view",".main-view-container__scroll-node-child main",".main-nowPlayingBar-nowPlayingBar",".player-controls__left",'.player-controls__buttons button[data-testid="control-button-repeat"]','.player-controls__buttons button[data-testid="control-button-playpause"]',".player-controls__right",".playback-bar [class*=encore-text]",".volume-bar",".volume-bar__icon-button",".volume-bar .progress-bar",".main-nowPlayingBar-left"],le="xp",k="spotify";function Lo(){localStorage.wmpotifyShowLibX||(document.body.dataset.hideLibx=!0),m.init();let e=m.query();switch(e&&(localStorage.wmpotifyTopMost==="always"||localStorage.wmpotifyTopMost==="minimode"&&X.isMiniMode()?m.setTopMost(!0):m.setTopMost(!1)),localStorage.wmpotifyTitleStyle&&["native","custom","spotify","keepmenu"].includes(localStorage.wmpotifyTitleStyle)?k=localStorage.wmpotifyTitleStyle:(console.log("WMPotify EarlyInit:",window.SpotEx,e),window.outerHeight-window.innerHeight>0||e?.options?.showframe||navigator.userAgent.includes("Linux")?k="native":(window.SpotEx||e)&&(e?.options?.showmenu&&!e.options.showcontrols?k="keepmenu":k="custom")),k==="keepmenu"&&!navigator.userAgent.includes("Windows")&&(k="spotify"),k==="spotify"&&navigator.userAgent.includes("Linux")&&(k="native"),document.documentElement.dataset.wmpotifyTitleStyle=k,k!=="native"&&$e.earlyInit(),e&&!localStorage.wmpotifyStyle&&k==="native"&&e.isThemingEnabled&&(m.getModule()?.initialOptions.transparentrendering&&e.isDwmEnabled?le="aero":e.isDwmEnabled||(le="basic")),localStorage.wmpotifyStyle&&["xp","aero","basic"].includes(localStorage.wmpotifyStyle)&&(le=localStorage.wmpotifyStyle),m.setMinSize(358,k==="native"?60:90),le){case"xp":m.extendFrame(0,0,0,0);break;case"aero":m.extendFrame(0,0,0,60);break;case"basic":m.extendFrame(0,0,0,0),document.body.style.setProperty("--basic-pb-text",localStorage.wmpotifyBasicTextColor||"#002963"),document.hasFocus()?document.body.style.backgroundColor=localStorage.wmpotifyBasicActiveColor||"#b9d1ea":document.body.style.backgroundColor=localStorage.wmpotifyBasicInactiveColor||"#d7e4f2",window.addEventListener("focus",()=>{document.body.style.backgroundColor=localStorage.wmpotifyBasicActiveColor||"#b9d1ea"}),window.addEventListener("blur",()=>{document.body.style.backgroundColor=localStorage.wmpotifyBasicInactiveColor||"#d7e4f2"});break}document.documentElement.dataset.wmpotifyStyle=le,document.documentElement.dataset.wmpotifyControlStyle=localStorage.wmpotifyControlStyle||"aero",window.addEventListener("resize",()=>{le==="aero"&&(window.innerHeight<62?m.extendFrame(-1,-1,-1,-1):m.extendFrame(0,0,0,60)),m.setMinSize(358,k==="native"?60:90)}),localStorage.wmpotifyFont&&document.documentElement.style.setProperty("--ui-font",localStorage.wmpotifyFont),localStorage.wmpotifyHidePbLeftBtn&&(document.body.dataset.hidePbLeftBtn=!0),e&&localStorage.wmpotifyLockTitle&&m.lockTitle(!0);let t="follow_scheme";["follow_scheme","system","always","never"].includes(localStorage.wmpotifyDarkMode)?t=localStorage.wmpotifyDarkMode:m.getModule()?.initialOptions.noforceddarkmode&&(t="system");let i=window.matchMedia("(prefers-color-scheme: dark)");(t==="always"||t==="follow_scheme"&&window.Spicetify?.Config?.color_scheme==="dark"||t==="system"&&i.matches)&&(document.documentElement.dataset.wmpotifyDarkMode=!0),t==="system"?V.addSystemDarkModeListener():t==="follow_scheme"&&V.addMarketplaceSchemeObserver()}Lo();async function To(){if(await $e.init(k),m.available()&&localStorage.wmpotifyLockTitle&&m.setTitle(await Spicetify.AppTitle.get()),localStorage.wmpotifyShowLibX||Spicetify.Platform.LocalStorageAPI.setItem("ylx-sidebar-state",1),Spicetify.Platform.PlatformData.os_version?.split(".")[2]>=22e3&&localStorage.wmpotifyBackdrop!=="none"&&m.setBackdrop(localStorage.wmpotifyBackdrop||"mica"),localStorage.wmpotifyTintColor){let[t,i,o]=localStorage.wmpotifyTintColor.split(",");de(t,i,o)}ee.init(),Fe.init(),ae.init(),ye.init(),new Spicetify.Menu.Item(s.MENU_CONF,!1,ye.open).register(),Et(),xt(),Be(),new MutationObserver(Be).observe(document.querySelector(".XOawmCGZcQx4cesyNfVO")||document.querySelector(".Root__right-sidebar > div > div[class]:first-child")||document.querySelector(".Root__right-sidebar div[class]"),{childList:!0}),(!localStorage.wmpotifyLastVer||Me(localStorage.wmpotifyLastVer,pe)<0)&&ue(!0,pe),localStorage.wmpotifyLastVer=pe,localStorage.wmpotifyNoUpdateCheck||Oe()}function vo(){return window.Spicetify?.Platform?.PlayerAPI&&window.Spicetify.AppTitle&&window.Spicetify.Menu&&window.Spicetify.Platform.History?.listen&&window.Spicetify.Platform.LocalStorageAPI&&window.Spicetify.Platform.Translations&&window.Spicetify.Platform.PlatformData?!!Ut.every(e=>document.querySelector(e)):null}document.readyState==="complete"&&Ht();window.addEventListener("load",()=>{Ht()});function Ht(){let e=0,t=setInterval(async()=>{let i=vo();if(i){clearInterval(t);try{await To(),console.log("WMPotify: Theme loaded"),document.documentElement.dataset.wmpotifyInitComplete=!0}catch(o){(window.Spicetify?.showNotification||window.alert)("[WMPotify] "+s.MAIN_MSG_ERROR_INIT),console.error("WMPotify: Error during init:",o),document.documentElement.dataset.wmpotifyJsFail=!0}}else if(e++>80){if(Xe("1.2.45")<0)(window.Spicetify?.showNotification||window.alert)("[WMPotify] "+s.MAIN_MSG_ERROR_OLD_SPOTIFY);else{let o=Xe("1.2.45")===0?"MAIN_MSG_ERROR_LOAD_FAIL_GLOBALNAV":"MAIN_MSG_ERROR_LOAD_FAIL";window.confirm("[WMPotify] "+s[o])&&window.location.reload()}i===!1?(console.error("WMPotify: Missing elements:",Ut.filter(o=>!document.querySelector(o))),document.querySelector(".Root__globalNav")||(document.documentElement.dataset.wmpotifyNoGlobalNav=!0,delete document.body.dataset.hideLibx,console.error("WMPotify: Global nav not found"))):console.error("WMPotify: Missing API objects:",Object.entries({"Spicetify.Platform.PlayerAPI":window.Spicetify?.Platform?.PlayerAPI,"Spicetify.AppTitle":window.Spicetify.AppTitle,"Spicetify.Menu":window.Spicetify.Menu,"Spicetify.Platform.History.listen":window.Spicetify.Platform.History?.listen,"Spicetify.Platform.LocalStorageAPI":window.Spicetify.Platform.LocalStorageAPI,"Spicetify.Platform.Translations":window.Spicetify.Platform.Translations,"Spicetify.Platform.PlatformData":window.Spicetify.Platform.PlatformData}).filter(([o,r])=>!r)),clearInterval(t)}},100)}document.addEventListener("scroll",function(){document.documentElement.scrollTo(0,0)});})();
