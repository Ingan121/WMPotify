"use strict";(()=>{var ue=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,o)=>(typeof require<"u"?require:e)[o]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var Qt={identifier:"en-US",UI_OK:"OK",UI_CANCEL:"Cancel",UI_APPLY:"Apply",UI_RESET:"Reset",UI_AUTO:"Auto",UI_CUSTOM:"Custom",UI_DEFAULT:"Default",UI_CLICK_HERE:"click here",MAIN_MSG_ERROR_OLD_SPOTIFY:"Your Spotify version is too old for WMPotify! Please update to Spotify 1.2.45 or newer.",MAIN_MSG_ERROR_LOAD_FAIL:"Theme loading failed. Please check the console for more information. Click OK to reload and try again.",MAIN_MSG_ERROR_LOAD_FAIL_GLOBALNAV:'Theme loading failed. Please check the console for more information. Make sure that the "Show Global nav bar with home button, search input and user avatar" option in the experimental features is set to "home-next-to-search". Click OK to reload and try again.',MAIN_MSG_ERROR_INIT:"An error occurred during initialization. Please check the console for more information. Click OK to reload and try again.",MAIN_MSG_ERROR_INCOMPAT_EXT:"Incompatible extension %s detected! Some features of WMPotify will be disabled.",TAB_NOW_PLAYING:"Now Playing",TAB_LIBRARY:"Library",TAB_RESET_ORDER:"Reset Tab Order",PB_TOOLTIP_STOP:"Stop",PB_TOOLTIP_SEEK_BK:"Right click: Skip back 15 seconds",PB_TOOLTIP_SEEK_FWD:"Right click: Skip forward 15 seconds",PB_TOOLTIP_FF:"Long click: Fast forward",PB_BTN_MINI_MODE:"Mini mode",PB_BTN_FULLSCREEN:"Full screen",LIBX_SIDEBAR_ROOT:"Library",LIBX_HEADER_ROOT:"Music",QUEUE_CURRENT_PLAYLIST_PLACEHOLDER:"Now Playing",QUEUE_CURRENT_TRACK_PLACEHOLDER:"No items",MENU_CONF:"WMPotify Properties",CONF_COLOR_TITLE:"Color Chooser",CONF_COLOR_HUE:"Hue",CONF_COLOR_SAT:"Saturation",CONF_COLOR_TINTPB:"Apply color to the now playing bar buttons",CONF_COLOR_TINTMORE:"Apply color to more UI elements",CONF_GENERAL_TITLE:"General",CONF_GENERAL_STYLE:"Style",CONF_GENERAL_BASIC_CUSTOM_DLG_TITLE:"Set custom Basic colors",CONF_GENERAL_BASIC_CUSTOM_ACTIVE_MSG:"Enter a background color for an active window",CONF_GENERAL_BASIC_CUSTOM_INACTIVE_MSG:"Enter a background color for an inactive window",CONF_GENERAL_BASIC_CUSTOM_TEXT_MSG:"Enter a text color",CONF_GENERAL_BASIC_CUSTOM_PLACEHOLDER:"Enter as a CSS color",CONF_GENERAL_TITLE_STYLE:"Title style",CONF_GENERAL_TITLE_STYLE_NATIVE:"Native",CONF_GENERAL_TITLE_STYLE_CUSTOM:"Custom",CONF_GENERAL_TITLE_STYLE_KEEPMENU:"Keep Menu",CONF_GENERAL_APPLY:"Apply (reload required)",CONF_GENERAL_CONTROL_STYLE:"Control style",CONF_GENERAL_CONTROL_STYLE_CLASSIC:"Windows Classic",CONF_GENERAL_CONTROL_STYLE_STANDARD:"Windows Standard",CONF_GENERAL_CONTROL_STYLE_HC:"High Contrast",CONF_GENERAL_CONTROL_STYLE_CUSTOM:"Windows Classic (Custom)",CONF_GENERAL_MSG_INVALID_SCHEME_FILE:"The imported theme file does not contain valid colors.",CONF_GENERAL_MSG_UNSUPPORTED_SCHEME_FILE:"The imported theme file is not supported by WMPotify.",CONF_GENERAL_DARK_MODE:"Dark mode",CONF_GENERAL_DARK_MODE_FOLLOW_SCHEME:"Follow color scheme",CONF_GENERAL_DARK_MODE_SYSTEM:"Follow system setting",CONF_GENERAL_DARK_MODE_SYSTEM_MSG_WIN:"This option requires either installing the CEF/Spotify Tweaks Windhawk mod and enabling the 'Disable forced dark mode' option or manually patching the Spotify executable to remove the 'force-dark-mode' flag. Otherwise, dark mode will always be enabled. Are you sure you want to continue?",CONF_GENERAL_DARK_MODE_SYSTEM_MSG_UNIX:"This option requires manually patching the Spotify executable to remove the 'force-dark-mode' flag. Otherwise, dark mode will always be enabled. Are you sure you want to continue?",CONF_GENERAL_DARK_MODE_ALWAYS:"Always",CONF_GENERAL_DARK_MODE_NEVER:"Never",CONF_GENERAL_FONT:"UI font",CONF_GENERAL_CUSTOM_FONT_DLG_TITLE:"Set custom font",CONF_GENERAL_CUSTOM_FONT_MSG:"Enter a valid CSS font-family name",CONF_GENERAL_FONT_EXTERNAL:"External font",CONF_GENERAL_EXTERNAL_FONT_DLG_TITLE:"Set external font",CONF_GENERAL_EXTERNAL_FONT_URL_MSG:"Enter a URL for an external font stylesheet, such as Google Fonts",CONF_GENERAL_EXTERNAL_FONT_NAME_MSG:"Enter the family name of the external font",CONF_GENERAL_FONT_RELOAD:"Reload font list",CONF_GENERAL_FONT_LOADSYS:"Load system font list",CONF_GENERAL_FONT_PERM_RECOVERY_DESC:"It seems that the local font access permission has been denied. To allow it again, please follow the following steps:",CONF_GENERAL_FONT_PERM_RECOVERY_STEP1:"Click here",CONF_GENERAL_FONT_PERM_RECOVERY_STEP2:"Click the \u24D8 button on the top left",CONF_GENERAL_FONT_PERM_RECOVERY_STEP3:"Enable the Fonts permission",CONF_GENERAL_FONT_PERM_RECOVERY_STEP4:"Click here to close the windows",CONF_GENERAL_FONT_PERM_RECOVERY_STEP5:"Try loading the system fonts again",CONF_GENERAL_TOPMOST:"Always on top",CONF_GENERAL_TOPMOST_ALWAYS:"Always",CONF_GENERAL_TOPMOST_MINIMODE:"In mini mode",CONF_GENERAL_TOPMOST_NEVER:"Never",CONF_GENERAL_BACKDROP:"Backdrop",CONF_GENERAL_BACKDROP_NONE:"None (restart required)",CONF_GENERAL_BACKDROP_ACRYLIC:"Acrylic",CONF_GENERAL_BACKDROP_TABBED:"Tabbed",CONF_GENERAL_PBLEFTBTN:"Like button in the now playing bar",CONF_GENERAL_PBLEFTBTN_HIDE:"Hide",CONF_GENERAL_PBLEFTBTN_LEFTALIGN:"Left align",CONF_GENERAL_PBLEFTBTN_RIGHTALIGN:"Right align",CONF_GENERAL_SHOW_LIBX:"Show Your Library X on the left sidebar",CONF_GENERAL_LOCK_TITLE:"Use static window title",CONF_GENERAL_WH_MESSAGE:'Some options require <a href="https://windhawk.net/mods/cef-titlebar-enabler-universal">CEF/Spotify Tweaks Windhawk mod</a> to work or look good.',CONF_SPEED_TITLE:"Play speed settings",CONF_SPEED_SLOW:"Slow",CONF_SPEED_NORMAL:"Normal",CONF_SPEED_FAST:"Fast",CONF_SPEED_CURRENT_LABEL:"Play speed",CONF_SPEED_CUSTOM_DLG_TITLE:"Set playback speed",CONF_SPEED_CUSTOM_MSG:"Enter a playback speed (0.5 - 5.0)",CONF_SPEED_NO_CONNECT_MSG:"Cannot change playback speed while playing from another device",CONF_SPEED_OUT_OF_RANGE_MSG:"Playback speed must be faster than 0 and less than or equal to 5.0",CONF_SPEED_UNSUPPORTED_MSG_WIN:"Changing the playback speed while playing music requires the x64 Windows Spotify client with the CEF/Spotify Tweaks Windhawk mod installed",CONF_SPEED_UNSUPPORTED_MSG_UNIX:"Changing the playback speed is only supported while playing podcasts",CONF_ABOUT_TITLE:"About",CONF_ABOUT_DESC:"A Windows Media Player 11 inspired Spicetify theme for Spotify",CONF_ABOUT_VERSION:"Version",CONF_ABOUT_CTEWH_VERSION:"CEF/Spotify Tweaks Windhawk mod %s available",CONF_ABOUT_AUTHOR:"Made by Ingan121",CONF_ABOUT_AUTO_UPDATES:"Automatically check for updates",WMPVIS_INSTALL_TITLE:"Install WMPotify NowPlaying?",WMPVIS_INSTALL_DESC:"WMPotify NowPlaying features WMP-like visualization screen and lyrics overlaid on top of it. We recommend installing it for the best experience with WMPotify.",WMPVIS_INSTALL_STEPS:"To install it, please follow these steps:",WMPVIS_INSTALL_STEP1:"Copy the following code:",WMPVIS_INSTALL_STEP2:"Open a PowerShell window",WMPVIS_INSTALL_STEP2_UNIX:"Open a terminal window",WMPVIS_INSTALL_STEP3:"Paste the code and press Enter",WMPVIS_INSTALL_MORE_INFO:"Or %s for more information, including manual installation instructions.",WMPVIS_INSTALL_HIDE:"If you don't want to install it, %s to hide this button.",WMPVIS_INSTALL_CODE_COPY:"Code copied to clipboard!",THEME_UPDATE_TITLE:"WMPotify has been updated!",THEME_UPDATE_INFO:"WMPotify has been updated to %s. Please read the changelog below.",THEME_UPDATE_STEPS:"To update it, please follow these steps:",THEME_CHANGELOG_PLACEHOLDER:"Failed to fetch changelog! Please %s for more information.",THEME_UPDATE_DISMISS:"Do not notify me again about this update",CTEWH_UPDATE_MSG:"CEF/Spotify Tweaks Windhawk mod can be updated to version %s. Please update it from the Windhawk UI for the best experience with WMPotify."},St=Qt;var Zt={identifier:"ko-KR",UI_OK:"\uD655\uC778",UI_CANCEL:"\uCDE8\uC18C",UI_APPLY:"\uC801\uC6A9",UI_RESET:"\uC7AC\uC124\uC815",UI_AUTO:"\uC790\uB3D9",UI_CUSTOM:"\uC0AC\uC6A9\uC790 \uC9C0\uC815",UI_DEFAULT:"\uAE30\uBCF8\uAC12",UI_CLICK_HERE:"\uC5EC\uAE30\uB97C \uD074\uB9AD",MAIN_MSG_ERROR_OLD_SPOTIFY:"Spotify \uBC84\uC804\uC774 \uB108\uBB34 \uC624\uB798\uB418\uC5B4 WMPotify\uB97C \uC0AC\uC6A9\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4! Spotify\uB97C 1.2.45 \uC774\uC0C1\uC73C\uB85C \uC5C5\uB370\uC774\uD2B8\uD558\uC2ED\uC2DC\uC624.",MAIN_MSG_ERROR_LOAD_FAIL:"\uD14C\uB9C8 \uB85C\uB4DC\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4. OK\uB97C \uD074\uB9AD\uD558\uC5EC \uB2E4\uC2DC \uB85C\uB4DC\uD558\uC2ED\uC2DC\uC624.",MAIN_MSG_ERROR_LOAD_FAIL_GLOBALNAV:'\uD14C\uB9C8 \uB85C\uB4DC\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4. \uC2E4\uD5D8\uC801 \uAE30\uB2A5\uC5D0\uC11C "Show Global nav bar with home button, search input and user avatar"\uAC00 "home-next-to-search"\uB85C \uC124\uC815\uB418\uC5B4 \uC788\uB294\uC9C0 \uD655\uC778\uD558\uC2ED\uC2DC\uC624. OK\uB97C \uD074\uB9AD\uD558\uC5EC \uB2E4\uC2DC \uB85C\uB4DC\uD558\uC2ED\uC2DC\uC624.',MAIN_MSG_ERROR_INIT:"\uD14C\uB9C8 \uB85C\uB4DC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4. \uC790\uC138\uD55C \uB0B4\uC6A9\uC740 \uCF58\uC194\uC744 \uD655\uC778\uD558\uC2ED\uC2DC\uC624. OK\uB97C \uD074\uB9AD\uD558\uC5EC \uB2E4\uC2DC \uB85C\uB4DC\uD558\uC2ED\uC2DC\uC624.",MAIN_MSG_ERROR_INCOMPAT_EXT:"\uD638\uD658\uB418\uC9C0 \uC54A\uB294 \uD655\uC7A5 \uD504\uB85C\uADF8\uB7A8 %s\uC774(\uAC00) \uAC10\uC9C0\uB418\uC5C8\uC2B5\uB2C8\uB2E4! WMPotify\uC758 \uC77C\uBD80 \uAE30\uB2A5\uC774 \uBE44\uD65C\uC131\uD654\uB429\uB2C8\uB2E4.",TAB_NOW_PLAYING:"\uC9C0\uAE08 \uC7AC\uC0DD",TAB_LIBRARY:"\uB77C\uC774\uBE0C\uB7EC\uB9AC",TAB_RESET_ORDER:"\uD0ED \uC21C\uC11C \uCD08\uAE30\uD654",PB_TOOLTIP_STOP:"\uC815\uC9C0\uD558\uAE30",PB_TOOLTIP_SEEK_BK:"\uC624\uB978\uCABD \uD074\uB9AD: 15\uCD08 \uB4A4\uB85C \uAC74\uB108\uB6F0\uAE30",PB_TOOLTIP_SEEK_FWD:"\uC624\uB978\uCABD \uD074\uB9AD: 15\uCD08 \uC55E\uC73C\uB85C \uAC74\uB108\uB6F0\uAE30",PB_TOOLTIP_FF:"\uAE38\uAC8C \uD074\uB9AD: \uBE68\uB9AC \uAC10\uAE30",PB_BTN_MINI_MODE:"\uBBF8\uB2C8 \uBAA8\uB4DC",PB_BTN_FULLSCREEN:"\uC804\uCCB4 \uD654\uBA74",LIBX_SIDEBAR_ROOT:"\uB77C\uC774\uBE0C\uB7EC\uB9AC",LIBX_HEADER_ROOT:"\uC74C\uC545",QUEUE_CURRENT_PLAYLIST_PLACEHOLDER:"\uC9C0\uAE08 \uC7AC\uC0DD",QUEUE_CURRENT_TRACK_PLACEHOLDER:"\uD56D\uBAA9 \uC5C6\uC74C",MENU_CONF:"WMPotify \uC18D\uC131",CONF_COLOR_TITLE:"\uC0C9 \uC120\uD0DD",CONF_COLOR_HUE:"\uC0C9\uC0C1",CONF_COLOR_SAT:"\uCC44\uB3C4",CONF_COLOR_TINTPB:"\uC9C0\uAE08 \uC7AC\uC0DD \uB9C9\uB300\uC758 \uBC84\uD2BC\uC5D0 \uC0C9\uC0C1 \uC801\uC6A9",CONF_COLOR_TINTMORE:"\uB354 \uB9CE\uC740 UI \uC694\uC18C\uC5D0 \uC0C9\uC0C1 \uC801\uC6A9",CONF_GENERAL_TITLE:"\uC77C\uBC18",CONF_GENERAL_STYLE:"\uC2A4\uD0C0\uC77C",CONF_GENERAL_BASIC_CUSTOM_DLG_TITLE:"\uC0AC\uC6A9\uC790 \uC815\uC758 Basic \uC2A4\uD0C0\uC77C \uC0C9 \uC124\uC815",CONF_GENERAL_BASIC_CUSTOM_ACTIVE_MSG:"\uD65C\uC131 \uCC3D\uC758 \uBC30\uACBD\uC0C9\uC744 \uC785\uB825\uD558\uC138\uC694",CONF_GENERAL_BASIC_CUSTOM_INACTIVE_MSG:"\uBE44\uD65C\uC131 \uCC3D\uC758 \uBC30\uACBD\uC0C9\uC744 \uC785\uB825\uD558\uC138\uC694",CONF_GENERAL_BASIC_CUSTOM_TEXT_MSG:"\uD14D\uC2A4\uD2B8 \uC0C9\uC0C1\uC744 \uC785\uB825\uD558\uC138\uC694",CONF_GENERAL_BASIC_CUSTOM_PLACEHOLDER:"CSS \uC0C9\uC0C1\uC73C\uB85C \uC785\uB825\uD558\uC138\uC694",CONF_GENERAL_TITLE_STYLE:"\uC81C\uBAA9 \uC2A4\uD0C0\uC77C",CONF_GENERAL_TITLE_STYLE_NATIVE:"\uC2DC\uC2A4\uD15C",CONF_GENERAL_TITLE_STYLE_CUSTOM:"\uC790\uCCB4 \uAD6C\uD604",CONF_GENERAL_TITLE_STYLE_KEEPMENU:"\uBA54\uB274 \uC720\uC9C0",CONF_GENERAL_APPLY:"\uC801\uC6A9 (\uB2E4\uC2DC \uB85C\uB4DC \uD544\uC694)",CONF_GENERAL_CONTROL_STYLE:"\uCEE8\uD2B8\uB864 \uC2A4\uD0C0\uC77C",CONF_GENERAL_CONTROL_STYLE_CLASSIC:"Windows \uACE0\uC804",CONF_GENERAL_CONTROL_STYLE_STANDARD:"Windows \uD45C\uC900",CONF_GENERAL_CONTROL_STYLE_HC:"\uACE0\uB300\uBE44",CONF_GENERAL_CONTROL_STYLE_CUSTOM:"Windows \uACE0\uC804 (\uC0AC\uC6A9\uC790 \uC9C0\uC815)",CONF_GENERAL_MSG_INVALID_SCHEME_FILE:"\uAC00\uC838\uC628 \uD30C\uC77C\uC774 \uC62C\uBC14\uB978 \uC0C9\uC0C1\uC744 \uD3EC\uD568\uD558\uACE0 \uC788\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.",CONF_GENERAL_MSG_UNSUPPORTED_SCHEME_FILE:"\uAC00\uC838\uC628 \uD30C\uC77C\uC774 WMPotify\uC5D0\uC11C \uC9C0\uC6D0\uB418\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.",CONF_GENERAL_DARK_MODE:"\uB2E4\uD06C \uBAA8\uB4DC",CONF_GENERAL_DARK_MODE_FOLLOW_SCHEME:"\uC0C9 \uAD6C\uC131\uD45C \uB530\uB974\uAE30",CONF_GENERAL_DARK_MODE_SYSTEM:"\uC2DC\uC2A4\uD15C \uC124\uC815 \uB530\uB974\uAE30",CONF_GENERAL_DARK_MODE_SYSTEM_MSG_WIN:"\uC774 \uC635\uC158\uC744 \uC0AC\uC6A9\uD558\uB824\uBA74 CEF/Spotify Tweaks Windhawk \uBAA8\uB4DC\uB97C \uC124\uCE58\uD558\uACE0 'Disable forced dark mode' \uC635\uC158\uC744 \uD65C\uC131\uD654\uD558\uAC70\uB098 Spotify \uC2E4\uD589 \uD30C\uC77C\uC5D0\uC11C 'force-dark-mode' \uD50C\uB798\uADF8\uB97C \uC81C\uAC70\uD574\uC57C \uD569\uB2C8\uB2E4. \uADF8\uB807\uC9C0 \uC54A\uC73C\uBA74 \uD56D\uC0C1 \uB2E4\uD06C \uBAA8\uB4DC\uAC00 \uD65C\uC131\uD654\uB429\uB2C8\uB2E4. \uACC4\uC18D\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?",CONF_GENERAL_DARK_MODE_SYSTEM_MSG_UNIX:"\uC774 \uC635\uC158\uC744 \uC0AC\uC6A9\uD558\uB824\uBA74 Spotify \uC2E4\uD589 \uD30C\uC77C\uC5D0\uC11C 'force-dark-mode' \uD50C\uB798\uADF8\uB97C \uC81C\uAC70\uD574\uC57C \uD569\uB2C8\uB2E4. \uADF8\uB807\uC9C0 \uC54A\uC73C\uBA74 \uD56D\uC0C1 \uB2E4\uD06C \uBAA8\uB4DC\uAC00 \uD65C\uC131\uD654\uB429\uB2C8\uB2E4. \uACC4\uC18D\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?",CONF_GENERAL_DARK_MODE_ALWAYS:"\uD56D\uC0C1",CONF_GENERAL_DARK_MODE_NEVER:"\uC548\uD568",CONF_GENERAL_FONT:"UI \uAE00\uAF34",CONF_GENERAL_CUSTOM_FONT_DLG_TITLE:"\uC0AC\uC6A9\uC790 \uC815\uC758 \uAE00\uAF34 \uC124\uC815",CONF_GENERAL_CUSTOM_FONT_MSG:"\uC62C\uBC14\uB978 CSS font-family \uC774\uB984 \uC785\uB825",CONF_GENERAL_FONT_EXTERNAL:"\uC678\uBD80 \uAE00\uAF34",CONF_GENERAL_EXTERNAL_FONT_DLG_TITLE:"\uC678\uBD80 \uAE00\uAF34 \uC124\uC815",CONF_GENERAL_EXTERNAL_FONT_URL_MSG:"Google Fonts\uC640 \uAC19\uC740 \uC678\uBD80 \uAE00\uAF34 \uC2A4\uD0C0\uC77C\uC2DC\uD2B8\uC758 URL\uC744 \uC785\uB825\uD558\uC138\uC694",CONF_GENERAL_EXTERNAL_FONT_NAME_MSG:"\uC678\uBD80 \uAE00\uAF34\uC758 \uD328\uBC00\uB9AC \uC774\uB984\uC744 \uC785\uB825\uD558\uC138\uC694",CONF_GENERAL_FONT_RELOAD:"\uAE00\uAF34 \uBAA9\uB85D \uB2E4\uC2DC \uBD88\uB7EC\uC624\uAE30",CONF_GENERAL_FONT_LOADSYS:"\uC2DC\uC2A4\uD15C \uAE00\uAF34 \uBAA9\uB85D \uBD88\uB7EC\uC624\uAE30",CONF_GENERAL_FONT_PERM_RECOVERY_DESC:"\uB85C\uCEEC \uAE00\uAF34 \uC811\uADFC \uAD8C\uD55C\uC774 \uAC70\uBD80\uB41C \uAC83 \uAC19\uC2B5\uB2C8\uB2E4. \uD5C8\uC6A9\uD558\uB824\uBA74 \uB2E4\uC74C \uB2E8\uACC4\uB97C \uB530\uB974\uC2ED\uC2DC\uC624:",CONF_GENERAL_FONT_PERM_RECOVERY_STEP1:"\uC5EC\uAE30\uB97C \uD074\uB9AD\uD558\uC138\uC694",CONF_GENERAL_FONT_PERM_RECOVERY_STEP2:"\uC88C\uCE21 \uC0C1\uB2E8\uC758 \u24D8 \uBC84\uD2BC\uC744 \uB204\uB974\uC138\uC694",CONF_GENERAL_FONT_PERM_RECOVERY_STEP3:"Fonts \uAD8C\uD55C\uC744 \uD65C\uC131\uD654\uD558\uC138\uC694",CONF_GENERAL_FONT_PERM_RECOVERY_STEP4:"\uC5EC\uAE30\uB97C \uD074\uB9AD\uD558\uC5EC \uCC3D\uB4E4\uC744 \uB2EB\uC73C\uC138\uC694",CONF_GENERAL_FONT_PERM_RECOVERY_STEP5:"\uC2DC\uC2A4\uD15C \uAE00\uAF34 \uBAA9\uB85D\uC744 \uB2E4\uC2DC \uBD88\uB7EC\uC640\uBCF4\uC138\uC694",CONF_GENERAL_TOPMOST:"\uD56D\uC0C1 \uC704\uC5D0 \uD45C\uC2DC",CONF_GENERAL_TOPMOST_ALWAYS:"\uD56D\uC0C1",CONF_GENERAL_TOPMOST_MINIMODE:"\uBBF8\uB2C8 \uBAA8\uB4DC\uC5D0\uC11C",CONF_GENERAL_TOPMOST_NEVER:"\uC548\uD568",CONF_GENERAL_BACKDROP:"\uBC30\uACBD \uC7AC\uC9C8",CONF_GENERAL_BACKDROP_NONE:"\uC5C6\uC74C (\uC7AC\uC2DC\uC791 \uD544\uC694)",CONF_GENERAL_BACKDROP_ACRYLIC:"\uC544\uD06C\uB9B4",CONF_GENERAL_BACKDROP_TABBED:"\uD0ED",CONF_GENERAL_PBLEFTBTN:"\uC9C0\uAE08 \uC7AC\uC0DD \uB9C9\uB300\uC758 \uC88B\uC544\uC694 \uBC84\uD2BC",CONF_GENERAL_PBLEFTBTN_HIDE:"\uC228\uAE30\uAE30",CONF_GENERAL_PBLEFTBTN_LEFTALIGN:"\uC67C\uCABD \uC815\uB82C",CONF_GENERAL_PBLEFTBTN_RIGHTALIGN:"\uC624\uB978\uCABD \uC815\uB82C",CONF_GENERAL_SHOW_LIBX:"\uC67C\uCABD \uC0AC\uC774\uB4DC\uBC14\uC5D0 \uB77C\uC774\uBE0C\uB7EC\uB9AC X \uD45C\uC2DC",CONF_GENERAL_LOCK_TITLE:"\uC815\uC801 \uCC3D \uC81C\uBAA9 \uC0AC\uC6A9",CONF_GENERAL_WH_MESSAGE:'\uC77C\uBD80 \uC635\uC158\uC740 <a href="https://windhawk.net/mods/cef-titlebar-enabler-universal">CEF/Spotify Tweaks Windhawk \uBAA8\uB4DC</a>\uAC00 \uD544\uC694\uD569\uB2C8\uB2E4.',CONF_SPEED_TITLE:"\uC7AC\uC0DD \uC18D\uB3C4 \uC124\uC815",CONF_SPEED_SLOW:"\uB290\uB9AC\uAC8C",CONF_SPEED_NORMAL:"\uBCF4\uD1B5",CONF_SPEED_FAST:"\uBE60\uB974\uAC8C",CONF_SPEED_CURRENT_LABEL:"\uC7AC\uC0DD \uC18D\uB3C4",CONF_SPEED_CUSTOM_DLG_TITLE:"\uC7AC\uC0DD \uC18D\uB3C4 \uC124\uC815",CONF_SPEED_CUSTOM_MSG:"\uC7AC\uC0DD \uC18D\uB3C4\uB97C \uC785\uB825\uD558\uC2ED\uC2DC\uC624 (0.5 - 5.0)",CONF_SPEED_NO_CONNECT_MSG:"\uB2E4\uB978 \uC7A5\uCE58\uC5D0\uC11C \uC7AC\uC0DD \uC911\uC77C \uB54C\uB294 \uC7AC\uC0DD \uC18D\uB3C4\uB97C \uBCC0\uACBD\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4",CONF_SPEED_OUT_OF_RANGE_MSG:"\uC7AC\uC0DD \uC18D\uB3C4\uB294 0\uBCF4\uB2E4 \uD06C\uACE0 5 \uC774\uD558\uC5EC\uC57C \uD569\uB2C8\uB2E4",CONF_SPEED_UNSUPPORTED_MSG_WIN:"\uC74C\uC545\uC744 \uC7AC\uC0DD\uD558\uB294 \uB3D9\uC548 \uC7AC\uC0DD \uC18D\uB3C4\uB97C \uBCC0\uACBD\uD558\uB824\uBA74 CEF/Spotify Tweaks Windhawk \uBAA8\uB4DC\uAC00 \uC124\uCE58\uB41C x64 Windows Spotify \uD074\uB77C\uC774\uC5B8\uD2B8\uAC00 \uD544\uC694\uD569\uB2C8\uB2E4",CONF_SPEED_UNSUPPORTED_MSG_UNIX:"\uD31F\uCE90\uC2A4\uD2B8\uB97C \uC7AC\uC0C1\uD558\uB294 \uB3D9\uC548\uC5D0\uB9CC \uC7AC\uC0DD \uC18D\uB3C4\uB97C \uBCC0\uACBD\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4",CONF_ABOUT_TITLE:"\uC815\uBCF4",CONF_ABOUT_DESC:"Spotify\uC6A9 Windows Media Player 11 \uD14C\uB9C8",CONF_ABOUT_VERSION:"\uBC84\uC804",CONF_ABOUT_CTEWH_VERSION:"CEF/Spotify Tweaks Windhawk \uBAA8\uB4DC %s \uC0AC\uC6A9 \uAC00\uB2A5",CONF_ABOUT_AUTHOR:"\uC81C\uC791: Ingan121",CONF_ABOUT_AUTO_UPDATES:"\uC790\uB3D9\uC73C\uB85C \uC5C5\uB370\uC774\uD2B8 \uD655\uC778",WMPVIS_INSTALL_TITLE:"WMPotify NowPlaying\uC744 \uC124\uCE58\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?",WMPVIS_INSTALL_DESC:"WMPotify NowPlaying\uC740 WMP\uC640 \uAC19\uC740 \uC2DC\uAC01\uD654 \uD654\uBA74\uACFC \uADF8 \uC704\uC5D0 \uD45C\uC2DC\uB418\uB294 \uAC00\uC0AC \uCC3D\uC744 \uC81C\uACF5\uD569\uB2C8\uB2E4. WMPotify\uB97C \uCD5C\uC0C1\uC758 \uACBD\uD5D8\uC73C\uB85C \uC0AC\uC6A9\uD558\uB824\uBA74 WMPotify NowPlaying \uC124\uCE58\uB97C \uAD8C\uC7A5\uD569\uB2C8\uB2E4.",WMPVIS_INSTALL_STEPS:"\uC124\uCE58\uD558\uB824\uBA74 \uB2E4\uC74C \uB2E8\uACC4\uB97C \uB530\uB974\uC2ED\uC2DC\uC624:",WMPVIS_INSTALL_STEP1:"\uB2E4\uC74C \uCF54\uB4DC\uB97C \uBCF5\uC0AC\uD558\uC2ED\uC2DC\uC624:",WMPVIS_INSTALL_STEP2:"PowerShell\uC744 \uC5FD\uB2C8\uB2E4",WMPVIS_INSTALL_STEP2_UNIX:"\uD130\uBBF8\uB110 \uCC3D\uC744 \uC5FD\uB2C8\uB2E4",WMPVIS_INSTALL_STEP3:"\uCF54\uB4DC\uB97C \uBD99\uC5EC\uB123\uACE0 \uC5D4\uD130 \uD0A4\uB97C \uB204\uB985\uB2C8\uB2E4",WMPVIS_INSTALL_MORE_INFO:"\uB610\uB294 \uC218\uB3D9 \uC124\uCE58 \uC9C0\uCE68\uC744 \uD3EC\uD568\uD55C \uC790\uC138\uD55C \uC815\uBCF4\uB97C \uBCF4\uB824\uBA74 %s\uD558\uC2ED\uC2DC\uC624.",WMPVIS_INSTALL_HIDE:"\uC124\uCE58\uD558\uC9C0 \uC54A\uC73C\uB824\uBA74 %s\uD558\uC5EC \uC774 \uBC84\uD2BC\uC744 \uC228\uAE30\uC2ED\uC2DC\uC624.",WMPVIS_INSTALL_CODE_COPY:"\uCF54\uB4DC\uAC00 \uD074\uB9BD\uBCF4\uB4DC\uC5D0 \uBCF5\uC0AC\uB418\uC5C8\uC2B5\uB2C8\uB2E4!",THEME_UPDATE_TITLE:"WMPotify\uAC00 \uC5C5\uB370\uC774\uD2B8\uB418\uC5C8\uC2B5\uB2C8\uB2E4!",THEME_UPDATE_INFO:"WMPotify\uAC00 %s(\uC73C)\uB85C \uC5C5\uB370\uC774\uD2B8\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uC544\uB798\uC758 \uBCC0\uACBD \uB85C\uADF8\uB97C \uC77D\uC5B4\uC8FC\uC2ED\uC2DC\uC624.",THEME_UPDATE_STEPS:"\uC5C5\uB370\uC774\uD2B8\uD558\uB824\uBA74 \uB2E4\uC74C \uB2E8\uACC4\uB97C \uB530\uB974\uC2ED\uC2DC\uC624:",THEME_CHANGELOG_PLACEHOLDER:"\uBCC0\uACBD \uB0B4\uC5ED\uC744 \uAC00\uC838\uC624\uC9C0 \uBABB\uD588\uC2B5\uB2C8\uB2E4! \uC790\uC138\uD55C \uC815\uBCF4\uB97C \uBCF4\uB824\uBA74 %s\uD558\uC2ED\uC2DC\uC624.",THEME_UPDATE_DISMISS:"\uC774 \uC5C5\uB370\uC774\uD2B8\uC5D0 \uB300\uD55C \uC54C\uB9BC\uC744 \uB2E4\uC2DC \uD45C\uC2DC\uD558\uC9C0 \uC54A\uC74C",CTEWH_UPDATE_MSG:"CEF/Spotify Tweaks Windhawk \uBAA8\uB4DC\uB97C %s(\uC73C)\uB85C \uC5C5\uB370\uC774\uD2B8\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4. \uCD5C\uC0C1\uC758 \uACBD\uD5D8\uC744 \uC704\uD574 Windhawk UI\uC5D0\uC11C \uBAA8\uB4DC\uB97C \uC5C5\uB370\uC774\uD2B8\uD558\uC2ED\uC2DC\uC624."},bt=Zt;var qe={"en-US":"English","ko-KR":"\uD55C\uAD6D\uC5B4"},j=navigator.language;if(!(j in qe)){for(let t in qe)if(j.slice(0,2)===t.slice(0,2)){j=t;break}j in qe||(j="en-US")}var we={"en-US":St,"ko-KR":bt},me=we["en-US"];j!=="en-US"&&Object.assign(me,we[j]);me.getString=Jt;var c=me;function Jt(t){return me[t]?pe(me[t],...Array.from(arguments).slice(1)):we["en-US"][t]?(console.info(`Fallback string used for locId ${t}`),pe(we["en-US"][t],...Array.from(arguments).slice(1))):(console.error(`No string found for locId ${t}`),t)}function pe(t){if(t=t.replace(/&([^&])/g,"<u>$1</u>").replace(/\\&/g,"&"),arguments.length>1)for(let e=1;e<arguments.length;e++)t=t.replace(/%s/,arguments[e]),t=t.replace(`%${e}s`,arguments[e]);return t}var We=class{constructor(e=1){if(this.controlHeight=e,Spicetify.Config.extensions.includes("noControls.js")){Spicetify.showNotification("[WMPotify] "+c.getString("MAIN_MSG_ERROR_INCOMPAT_EXT","No Controls"));return}let o=i=>{i&&(i._updateUiClient?.updateTitlebarHeight&&i._updateUiClient.updateTitlebarHeight({height:this.controlHeight}),i._updateUiClient?.setButtonsVisibility&&this.controlHeight<=1&&i._updateUiClient.setButtonsVisibility(!1),window.addEventListener("beforeunload",()=>{i._updateUiClient?.setButtonsVisibility&&i._updateUiClient.setButtonsVisibility({showButtons:!0})})),Spicetify.CosmosAsync?.post("sp://messages/v1/container/control",{type:"update_titlebar",height:this.controlHeight+"px"})};o(Spicetify.Platform.ControlMessageAPI),o(Spicetify.Platform.UpdateAPI);async function n(){o(Spicetify.Platform.ControlMessageAPI),o(Spicetify.Platform.UpdateAPI)}let r=setInterval(n,100);setTimeout(()=>{clearInterval(r)},1e4);let a=()=>{o(Spicetify.Platform.ControlMessageAPI),o(Spicetify.Platform.UpdateAPI)};document.addEventListener("fullscreenchange",a),window.addEventListener("resize",()=>{setTimeout(()=>{a()},100)})}setControlHeight(e){this.controlHeight=e||1}},ve=We;var g=null,Ve=1,eo={init(){return to()},query(){return g?g.query():null},extendFrame(t,e,o,n){g?.extendFrame&&([t,e,o,n]=[t,e,o,n].map(r=>Math.round(r*window.devicePixelRatio)),Ve>1&&([t,e]=[t&&t-1,e&&e-1],[o,n]=[o&&o-1,n&&n-1]),g.extendFrame(t,e,o,n))},minimize(){g?.minimize&&g.minimize()},maximizeRestore(){g?.maximizeRestore&&g.maximizeRestore()},close(){g?.close&&g.close()},setLayered(t,e,o){g?.setLayered&&g.setLayered(t,e,o)},setBackdrop(t){g?.setBackdrop&&g.setBackdrop(t)},resizeTo(t,e){g?.resizeTo&&g.resizeTo(t,e)},setMinSize(t,e){g?.setMinSize&&([t,e]=[t,e].map(o=>Math.round(o*window.devicePixelRatio)),g.setMinSize(t,e))},setTopMost(t){g?.setTopMost&&g.setTopMost(t)},setTitle(t){g?.setTitle&&g.setTitle(t)},lockTitle(t){g?.lockTitle&&g.lockTitle(t)},openSpotifyMenu(){g?.openSpotifyMenu&&g.openSpotifyMenu()},setPlaybackSpeed(t){g?.setPlaybackSpeed&&g.setPlaybackSpeed(parseFloat(t))},available(){return!!g},getModule(){return g}};function to(){if(navigator.userAgent.includes("Windows"))try{g=(window.cancelEsperantoCall||window._getSpotifyModule)("ctewh"),Ve=g.query().dpi/96;let{version:t,initialOptions:e}=g;return console.log(`CEF/Spotify Tweaks Windhawk mod available, Version: ${t}`),window.addEventListener("resize",()=>{Ve=g.query().dpi/96}),{version:t,initialOptions:e}}catch{g=null,console.log("Windhawk mod not available")}}var y=eo;var Q=null;function gt(){Q=document.createElement("div"),Q.id="wmpotify-title-bar";let t=document.createElement("div");t.id="wmpotify-title-icon",t.addEventListener("click",()=>{t.classList.toggle("logo2013"),t.classList.contains("logo2013")?localStorage.wmpotifyUse2013Icon=!0:delete localStorage.wmpotifyUse2013Icon}),localStorage.wmpotifyUse2013Icon&&t.classList.add("logo2013"),t.addEventListener("dblclick",()=>{_t()}),Q.appendChild(t),document.body.appendChild(Q)}async function oo(t){let e=y.query();switch(t){case"native":new ve(0);break;case"custom":new ve(0);case"keepmenu":let o=document.createElement("div");if(o.id="wmpotify-title-buttons",window.SpotEx||e){let a=document.createElement("button");a.id="wmpotify-minimize-button",a.addEventListener("click",()=>{e?y.minimize():SpotEx.updateWindow({state:"minimized"})}),o.appendChild(a);let i=document.createElement("button");i.id="wmpotify-maximize-button",i.addEventListener("click",async()=>{e?y.maximizeRestore():(await SpotEx.getWindow()).state==="maximized"?SpotEx.updateWindow({state:"normal"}):SpotEx.updateWindow({state:"maximized"})}),o.appendChild(i),window.addEventListener("resize",l),l();async function l(){e?y.query().isMaximized?i.dataset.maximized=!0:delete i.dataset.maximized:(await SpotEx.getWindow()).state==="maximized"?i.dataset.maximized=!0:delete i.dataset.maximized}}let n=document.createElement("button");n.id="wmpotify-close-button",n.addEventListener("click",()=>{_t()}),o.appendChild(n);case"spotify":Q===null&&gt();let r=document.createElement("span");r.id="wmpotify-title-text",r.textContent=await Spicetify.AppTitle.get(),Q.appendChild(r),(t==="custom"||t==="keepmenu")&&Q.appendChild(o),(t==="keepmenu"||t==="spotify")&&new ve(25),Spicetify.AppTitle.sub(a=>{a?.trim()&&(r.textContent=a)});break}}async function _t(){y.available()?y.close():window.close()}var $e=class{static earlyInit=gt;static init=oo},Ye=$e;function Ce(t="WMPotify",e,o=c.UI_OK,n=c.UI_CANCEL){return new Promise((r,a)=>{let i=document.createElement("div");i.id="wmpotify-confirm-modal";let l=document.createElement("p");l.textContent=e,i.appendChild(l);let u=new MutationObserver(()=>{document.contains(i)||(u.disconnect(),r(!1))}),m=document.createElement("div");m.classList.add("wmpotify-modal-bottom-buttons");let f=document.createElement("button");f.classList.add("wmpotify-aero"),f.textContent=o,f.addEventListener("click",E=>{u.disconnect(),Spicetify.PopupModal.hide(),r(!0),E.preventDefault(),E.stopPropagation()}),m.appendChild(f);let p=document.createElement("button");p.classList.add("wmpotify-aero"),p.textContent=n,p.addEventListener("click",E=>{u.disconnect(),Spicetify.PopupModal.hide(),r(!1),E.preventDefault(),E.stopPropagation()}),m.appendChild(p),i.appendChild(m),Spicetify.PopupModal.display({title:t,content:i}),u.observe(document.body,{childList:!0})})}function q(t="WMPotify",e,o,n){return new Promise((r,a)=>{let i=document.createElement("div");i.id="wmpotify-prompt-modal";let l=document.createElement("p");l.textContent=e,i.appendChild(l);let u=document.createElement("input");u.classList.add("wmpotify-aero"),u.type="text",u.value=o,u.placeholder=n,u.style.width="100%",i.appendChild(u);let m=new MutationObserver(()=>{document.contains(i)||(m.disconnect(),r(null))}),f=document.createElement("div");f.classList.add("wmpotify-modal-bottom-buttons");let p=document.createElement("button");p.classList.add("wmpotify-aero"),p.textContent=c.UI_OK,p.addEventListener("click",b=>{m.disconnect(),Spicetify.PopupModal.hide(),r(u.value),b.preventDefault(),b.stopPropagation()}),f.appendChild(p);let E=document.createElement("button");E.classList.add("wmpotify-aero"),E.textContent=c.UI_CANCEL,E.addEventListener("click",b=>{m.disconnect(),Spicetify.PopupModal.hide(),r(null),b.preventDefault(),b.stopPropagation()}),f.appendChild(E),u.addEventListener("keydown",b=>{b.key==="Enter"?p.click():b.key==="Escape"&&E.click()}),i.appendChild(f),Spicetify.PopupModal.display({title:t,content:i}),u.focus(),m.observe(document.body,{childList:!0})})}async function Te(){let t=document.createElement("div");t.id="wmpotify-instructions-dialog",t.innerHTML=`
        <p>${c.WMPVIS_INSTALL_DESC}</p><br>
        <img src="https://raw.githubusercontent.com/Ingan121/WMPotify/refs/heads/master/screenshots/wmpvis_aero_2.png" alt="WMPotify NowPlaying screenshot"><br><br>
        <p>${c.WMPVIS_INSTALL_STEPS}</p><br>
        <ol>
            <li>1. ${c.WMPVIS_INSTALL_STEP1}</li>
            <div class="wmpotify-code-container">
                <button id="wmpotify-copy-code">
                    
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-copy" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM2 5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1h1v1a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1v1z"/>
                    </svg>
                </button>
                <code>
                ${navigator.userAgent.includes("Windows")?`iex "& { $(iwr -useb '<a href="https://raw.githubusercontent.com/Ingan121/WMPotify/master/installer/install.ps1">https://raw.githubusercontent.com/Ingan121/WMPotify/master/installer/install.ps1</a>') } -Install @('wmpvis')"`:'export SKIP_THEME=true; curl -fsSL <a href="https://raw.githubusercontent.com/Ingan121/WMPotify/master/installer/install.sh">https://raw.githubusercontent.com/Ingan121/WMPotify/master/installer/install.sh</a> | sh'}
                </code>
            </div>
            <li>2. ${c[navigator.userAgent.includes("Windows")?"WMPVIS_INSTALL_STEP2":"WMPVIS_INSTALL_STEP2_UNIX"]}</li>
            <li>3. ${c.WMPVIS_INSTALL_STEP3}</li>
        </ol><br>
        <p>${c.getString("WMPVIS_INSTALL_MORE_INFO",`<a href="https://github.com/Ingan121/Spicetify-CustomApps">${c.UI_CLICK_HERE}</a>`)}</p>
        <p>${c.getString("WMPVIS_INSTALL_HIDE",`<a href="javascript:localStorage.wmpotifyNoWmpvis=true;document.querySelector('#wmpotify-tabs-container button[data-identifier=now-playing]').dataset.hidden=true;Spicetify.PopupModal.hide();window.dispatchEvent(new Event('resize'))">${c.UI_CLICK_HERE}</a>`)}</p>
    `,Spicetify.PopupModal.display({title:c.WMPVIS_INSTALL_TITLE,content:t,isLarge:!0}),document.querySelector("#wmpotify-copy-code").addEventListener("click",()=>{let e=document.querySelector("#wmpotify-instructions-dialog code").textContent.trim();Spicetify.Platform.ClipboardAPI.copy(e)})}async function fe(t,e,o){let n=e,r="Failed to fetch changelog!";if(o)r=o.replace(/\r\n/g,"<br>").replace(/\n/g,"<br>");else try{let l=await(await fetch("https://api.github.com/repos/Ingan121/WMPotify/releases/latest")).json();n=l.name,r=l.body?.replace(/\r\n/g,"<br>").replace(/\n/g,"<br>")||""}catch{r=c.getString("THEME_CHANGELOG_PLACEHOLDER",`<a href="https://github.com/Ingan121/WMPotify/releases/tag/${n}">${c.UI_CLICK_HERE}</a>`)}let a=document.createElement("div");a.id="wmpotify-instructions-dialog",a.innerHTML=`
        <p>${c.getString("THEME_UPDATE_INFO",n)}</p>
        <div class="wmpotify-code-container">
            <p>${r}</p>
        </div>
        ${t?"":`
            <p>${c.THEME_UPDATE_STEPS}</p><br>
            <ol>
                <li>1. ${c.WMPVIS_INSTALL_STEP1}</li>
                <div class="wmpotify-code-container">
                    <button id="wmpotify-copy-code">
                        
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-copy" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM2 5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1h1v1a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1v1z"/>
                        </svg>
                    </button>
                    <code>
                    ${navigator.userAgent.includes("Windows")?`iex "& { $(iwr -useb '<a href="https://raw.githubusercontent.com/Ingan121/WMPotify/master/installer/install.ps1">https://raw.githubusercontent.com/Ingan121/WMPotify/master/installer/install.ps1</a>') }"`:'curl -fsSL <a href="https://raw.githubusercontent.com/Ingan121/WMPotify/master/installer/install.sh">https://raw.githubusercontent.com/Ingan121/WMPotify/master/installer/install.sh</a> | sh'}
                    </code>
                </div>
                <li>2. ${c[navigator.userAgent.includes("Windows")?"WMPVIS_INSTALL_STEP2":"WMPVIS_INSTALL_STEP2_UNIX"]}</li>
                <li>3. ${c.WMPVIS_INSTALL_STEP3}</li>
            </ol><br>
            <p>${c.getString("WMPVIS_INSTALL_MORE_INFO",`<a href="https://github.com/Ingan121/WMPotify">${c.UI_CLICK_HERE}</a>`)}</p>
            <button class="wmpotify-aero" onclick="localStorage.wmpotifyIgnoreVersion='${e}';Spicetify.PopupModal.hide();">${c.THEME_UPDATE_DISMISS}</button>
        `}
    `,Spicetify.PopupModal.display({title:c.THEME_UPDATE_TITLE,content:a,isLarge:!t}),t||document.querySelector("#wmpotify-copy-code").addEventListener("click",()=>{let i=document.querySelector("#wmpotify-instructions-dialog code").textContent.trim();Spicetify.Platform.ClipboardAPI.copy(i)})}var Y=class{constructor(e=[],o=[]){this.menuOrder=e,this.submenus=o,this.openedMenu=null,this.mouseOverMenu=!1,this.mouseOverSubmenu=!1,this.handlingPointerEvent=!1,this.handlingKeyEvent=!1,this.boundMenuNavigationHandler=this.menuNavigationHandler.bind(this),this.submenuOpenTimer=null,this.submenuCloseTimer=null,this.shouldNotCloseSubmenu=!1,this.menuHierarchy={},this.beforeMenuOpenEvent=new Event("beforemenuopen"),this.afterMenuCloseEvent=new Event("aftermenuclose");for(let n of e){this.menuHierarchy[n]=[];let r=document.getElementById(n+"MenuBg"),a=r.querySelectorAll(".contextMenuItem");for(let i of a)i.dataset.submenu&&this.menuHierarchy[n].push(i.dataset.submenu),i.addEventListener("pointerover",()=>{for(let l of a)delete l.dataset.active;i.dataset.active=!0,clearTimeout(this.submenuOpenTimer),i.dataset.submenu?this.submenuOpenTimer=setTimeout(()=>{this.openMenu(i.dataset.submenu)},300):this.menuHierarchy[n].length>0&&this.delayedCloseMenu(this.menuHierarchy[n][0])}),i.addEventListener("pointerleave",()=>{this.mouseOverSubmenu||(delete i.dataset.active,clearTimeout(this.submenuOpenTimer),i.dataset.submenu&&this.delayedCloseMenu(i.dataset.submenu))}),i.addEventListener("click",()=>{i.dataset.submenu&&!i.classList.contains("disabled")?this.openedMenu.id!==i.dataset.submenu+"MenuBg"?this.openMenu(i.dataset.submenu):document.getElementById(i.dataset.submenu+"MenuBg").focus():i.dataset.noClose||this.closeMenu(n)});r.addEventListener("focusout",i=>{top.ignoreFocusLoss||i.relatedTarget&&i.relatedTarget.dataset.submenuOf===n||this.closeMenu(n)}),r.addEventListener("pointermove",i=>{(i.clientX>0||i.clientY>0)&&(r.style.animation="none")})}for(let n of o){let r=document.getElementById(n+"MenuBg"),a=r.querySelectorAll(".contextMenuItem"),i=document.getElementById(r.dataset.submenuOf+"MenuBg"),l=Array.from(i.querySelectorAll(".contextMenuItem")).findIndex(m=>m.dataset.submenu===n),u=i.querySelectorAll(".contextMenuItem")[l];for(let m of a)m.addEventListener("pointerover",()=>{for(let f of a)delete f.dataset.active;m.dataset.active=!0}),m.addEventListener("pointerleave",()=>{delete m.dataset.active}),m.addEventListener("click",()=>{this.shouldNotCloseSubmenu=!1,this.closeMenu(n),this.closeMenu(r.dataset.submenuOf)});r.addEventListener("pointerover",()=>{this.mouseOverMenu=!0,this.mouseOverSubmenu=!0,this.shouldNotCloseSubmenu=!0,clearTimeout(this.submenuCloseTimer),u.dataset.active=!0}),r.addEventListener("pointerleave",()=>{this.mouseOverMenu=!1,this.mouseOverSubmenu=!1,this.shouldNotCloseSubmenu=!1}),r.addEventListener("focusout",m=>{if(top.ignoreFocusLoss||r.style.display==="none")return;this.shouldNotCloseSubmenu=!1;let f=!!r.dataset.openStandalone;m.relatedTarget&&m.relatedTarget.id&&m.relatedTarget.id===i.id||(this.closeMenu(n),!(m.relatedTarget&&m.relatedTarget.id&&m.relatedTarget.dataset.submenuOf===r.dataset.submenuOf)&&(f||this.closeMenu(r.dataset.submenuOf)))})}}openMenu(e,o){let n=document.getElementById(e+"MenuBg"),r=document.getElementById(e+"Menu"),a=!!n.dataset.submenuOf,i,l,u,m=n.querySelectorAll(".contextMenuItem.debug");if(localStorage.wmpotifyDebugMode){u=n.querySelectorAll(".contextMenuItem:not([data-hidden])");for(let p of m)p.style.display=""}else{u=n.querySelectorAll(".contextMenuItem:not([data-hidden]):not(.debug)");for(let p of m)p.style.display="none"}if(n.dispatchEvent(this.beforeMenuOpenEvent),o)n.dataset.openStandalone=!0;else{if(a){if(this.menuHierarchy[n.dataset.submenuOf].length>1)for(let E of this.menuHierarchy[n.dataset.submenuOf])E!==e&&this.closeMenu(E);if(i=document.getElementById(n.dataset.submenuOf+"MenuBg"),i.style.display==="none")return;let p=Array.from(i.querySelectorAll(".contextMenuItem")).findIndex(E=>E.dataset.submenu===e);if(l=i.querySelectorAll(".contextMenuItem")[p],l.classList.contains("disabled"))return}else for(let p of this.menuOrder)p!==e&&document.getElementById(p+"MenuBg").style.display==="block"&&this.closeMenu(p);delete n.dataset.openStandalone}n.style.animation="";for(let p of u)delete p.dataset.active;if(o)o.top&&(n.style.top=o.top),o.left&&(n.style.left=o.left),o.right&&(n.style.right=o.right),o.bottom&&(n.style.bottom=o.bottom);else{let p="",E=0;a&&(p=i.offsetTop+l.offsetTop,E=i.offsetLeft+i.offsetWidth-6),n.style.top=p+"px",n.style.left=E+"px"}n.style.display="block";let f=this.calcMenuWidth(e);n.style.width=f+")",n.style.minWidth=0,r.style.width=f+(["aero","10",void 0].includes(localStorage.wmpotifyControlStyle)?" - 2px)":")"),n.style.height=this.calcMenuHeight(e)+"px",o||a&&(l.dataset.active=!0),n.focus(),this.openedMenu=n,document.addEventListener("keydown",this.boundMenuNavigationHandler)}closeMenu(e){let o=document.getElementById(e+"MenuBg"),n=!!o.dataset.openStandalone,r=!!o.dataset.submenuOf&&!n;if(r&&this.shouldNotCloseSubmenu)return;let a,i;if(!n&&r){a=document.getElementById(o.dataset.submenuOf+"MenuBg");let l=Array.from(a.querySelectorAll(".contextMenuItem")).findIndex(u=>u.dataset.submenu===e);i=a.querySelectorAll(".contextMenuItem")[l]}this.submenuCloseTimer&&clearTimeout(this.submenuCloseTimer),o.style.display="none",n?delete o.dataset.openStandalone:r&&delete i.dataset.active,o.dispatchEvent(this.afterMenuCloseEvent),r&&a.style.display!=="none"?(a.focus(),this.openedMenu=a):(this.openedMenu=null,document.removeEventListener("keydown",this.boundMenuNavigationHandler))}delayedCloseMenu(e){this.submenuCloseTimer=setTimeout(()=>{this.closeMenu(e)},300)}menuNavigationHandler(e){if(!this.openedMenu)return;let o;localStorage.wmpotifyDebugMode?o=this.openedMenu.querySelectorAll(".contextMenuItem"):o=this.openedMenu.querySelectorAll(".contextMenuItem:not(.debug)");let n=this.openedMenu.querySelector(".contextMenuItem[data-active]"),r=Array.from(o).indexOf(n),a;switch(this.openedMenu.dataset.submenuOf&&(a=document.getElementById(this.openedMenu.dataset.submenuOf+"MenuBg").querySelector(".contextMenuItem[data-active]")),this.handlingKeyEvent=!0,this.openedMenu.style.animation="none",e.key){case"Escape":this.mouseOverMenu=!1,this.openedMenu.blur();break;case"ArrowUp":n?(delete n.dataset.active,r>0?o[r-1].dataset.active=!0:o[o.length-1].dataset.active=!0):o[o.length-1].dataset.active=!0;break;case"ArrowDown":n?(delete n.dataset.active,r<o.length-1?o[r+1].dataset.active=!0:o[0].dataset.active=!0):o[0].dataset.active=!0;break;case"ArrowLeft":if(this.openedMenu.dataset.submenuOf){this.closeMenu(this.openedMenu.id.slice(0,-6),!0),a.dataset.active=!0;break}if(this.menuOrder.length===1)break;let i=this.menuOrder[(this.menuOrder.indexOf(this.openedMenu.id.slice(0,-6))+this.menuOrder.length-1)%this.menuOrder.length];this.closeMenu(this.openedMenu.id.slice(0,-6)),this.openMenu(i),this.openedMenu.querySelector(".contextMenuItem").dataset.active=!0;break;case"ArrowRight":if(n&&n.dataset.submenu){this.openMenu(n.dataset.submenu),this.openedMenu.querySelector(".contextMenuItem").dataset.active=!0;break}if(this.menuOrder.length===1)break;let l;this.openedMenu.dataset.submenuOf?(l=this.menuOrder[(this.menuOrder.indexOf(this.openedMenu.dataset.submenuOf)+1)%this.menuOrder.length],this.closeMenu(this.openedMenu.id.slice(0,-6))):(l=this.menuOrder[(this.menuOrder.indexOf(this.openedMenu.id.slice(0,-6))+1)%this.menuOrder.length],this.closeMenu(this.openedMenu.id.slice(0,-6))),this.openMenu(l),this.openedMenu.querySelector(".contextMenuItem").dataset.active=!0;break;case"Enter":if(n)n.click();else{this.openedMenu.blur();break}break;default:let u=this.openedMenu.getElementsByTagName("u");for(let m of u)if(e.key===m.textContent.toLowerCase()){m.parentElement.click();break}}this.handlingKeyEvent=!1,e.preventDefault(),e.stopPropagation()}calcMenuWidth(e){let o=document.getElementById(e+"MenuBg"),n;localStorage.wmpotifyDebugMode?n=o.querySelectorAll(".contextMenuItem:not([data-hidden])"):n=o.querySelectorAll(".contextMenuItem:not([data-hidden]):not(.debug)"),o.style.minWidth="";let r=parseInt(getComputedStyle(o).minWidth)||0;return`calc(${Array.from(n).reduce((i,l)=>{let u=l.textContent,m=ze(u);return Math.max(r,i,m)},0)}px + 4.5em`}calcMenuHeight(e){let o=document.getElementById(e+"MenuBg"),n=o.querySelectorAll("hr"),r;localStorage.wmpotifyDebugMode?r=o.querySelectorAll(".contextMenuItem:not([data-hidden])"):r=o.querySelectorAll(".contextMenuItem:not([data-hidden]):not(.debug)");let a=r[0].offsetHeight,i=0;if(n.length>0){let u=getComputedStyle(n[0]);i=n[0].offsetHeight+parseFloat(u.marginTop)+parseFloat(u.marginBottom)}return parseInt(r.length*a+n.length*i)}};function Z(t,e,o){let n=document.createElement("div");return n.id=t+"MenuBg",n.className="contextMenuBg",n.tabIndex=-1,n.style.display="none",n.innerHTML=`<div id="${t}Menu" class="contextMenu"></div>`,o&&(n.dataset.submenuOf=o),e.forEach(r=>{if(r.hr){let i=document.createElement("hr");n.querySelector(".contextMenu").appendChild(i);return}let a=document.createElement("div");a.className="contextMenuItem",r.args?a.innerHTML="<p>"+pe(r.text,...r.args)+"</p>":a.innerHTML="<p>"+pe(r.text)+"</p>",r.classList&&a.classList.add(...r.classList),r.disabled&&a.classList.add("disabled"),r.hidden&&(a.dataset.hidden=!0),r.submenu&&(a.dataset.submenu=r.submenu,a.innerHTML+='<p class="submenuMark">\u23F5</p>'),r.noClose&&(a.dataset.noClose=!0),a.addEventListener("click",r.click),n.querySelector(".contextMenu").appendChild(a)}),document.body.appendChild(n),{menuBg:n,menu:n.querySelector(".contextMenu"),menuItems:n.querySelectorAll(".contextMenuItem")}}function ze(t,e=getComputedStyle(document.documentElement).getPropertyValue("--menu-font")){let n=(ze.canvas||(ze.canvas=document.createElement("canvas"))).getContext("2d");return n.font=e,n.measureText(t).width}var no={"Friend Activity":"Friends"},Ke=class{constructor(){let e=document.querySelector(".Root__globalNav");this.tabsContainer=document.createElement("div"),this.tabsContainer.id="wmpotify-tabs-container",e.insertBefore(this.tabsContainer,e.querySelector(".main-globalNav-searchSection"));let o=document.querySelector('.custom-navlinks-scrollable_container div[role="presentation"] > button:has(#wmpotify-nowplaying-icon)');o||(o=document.createElement("button"),o.addEventListener("click",()=>{Spicetify.Config.custom_apps.includes("wmpvis")?Spicetify.Platform.History.push({pathname:"/wmpvis"}):Te()}),localStorage.wmpotifyNoWmpvis&&!Spicetify.Config.custom_apps.includes("wmpvis")&&(o.dataset.extraHidden=!0)),o.setAttribute("aria-label",c.TAB_NOW_PLAYING),o.dataset.identifier="now-playing",this.addTab(o);let n=document.querySelector(".main-globalNav-searchContainer > button");n.dataset.identifier="home",this.addTab(n);let r=document.querySelector(".main-globalNav-searchContainer div form button");r.dataset.identifier="search",r.addEventListener("click",S=>{Spicetify.Platform.History.push({pathname:"/search"}),S.preventDefault(),S.stopPropagation()}),this.addTab(r);let a=document.createElement("button");a.id="wmpotify-library-button",a.dataset.identifier="library",a.setAttribute("aria-label",c.TAB_LIBRARY),a.addEventListener("click",()=>{Spicetify.Platform.History.push({pathname:"/wmpotify-standalone-libx"})}),this.addTab(a),this.tabs=[o,n,r,a];let i=document.querySelectorAll('.custom-navlinks-scrollable_container div[role="presentation"] > button');if(i.length>0)for(let S of i)this.addTab(S),this.tabs.push(S);else{let S=document.querySelector(".main-globalNav-historyButtonsContainer"),w=new MutationObserver(()=>{console.log("WMPotify: Handling late custom apps buttons mount");for(let P of this.tabs)delete P.dataset.hidden;let N=document.querySelectorAll('.custom-navlinks-scrollable_container div[role="presentation"] > button');if(N.length>0){for(let P of N){if(P.querySelector("#wmpotify-nowplaying-icon")){delete o.dataset.hidden;continue}this.addTab(P),this.tabs.push(P)}w.disconnect(),this.loadOrder()}});w.observe(S,{childList:!0,subtree:!0})}let l=document.querySelectorAll(".main-topBar-topbarContentRight > .main-actionButtons > button");for(let S of l)S.dataset.restoreFocusKey==="buddy_feed"?S.dataset.identifier="buddy-feed":l.length===2&&(S.dataset.identifier="content-feed"),this.addTab(S),this.tabs.push(S);this.loadOrder();let u=[];for(let S of this.tabs)u.push({text:S.querySelector(".wmpotify-tab-label").textContent,click:()=>S.click()});Z("wmpotifyTab",u),Z("wmpotifyTabMenu",[{text:c.TAB_RESET_ORDER,click:()=>{localStorage.removeItem("wmpotifyTabOrder"),location.reload()}}]);let m=new Y(["wmpotifyTab","wmpotifyTabMenu"]);this.overflowButton=document.createElement("button"),this.overflowButton.id="wmpotify-tabs-overflow-button";let f=document.querySelector("#wmpotify-title-bar")?"25px":"0";this.overflowButton.addEventListener("click",()=>{m.openMenu("wmpotifyTab",{top:f,left:this.overflowButton.getBoundingClientRect().left+"px"})}),this.tabsContainer.appendChild(this.overflowButton),this.tabsContainer.addEventListener("contextmenu",S=>{S.preventDefault(),m.openMenu("wmpotifyTabMenu",{top:S.clientY+"px",left:S.clientX+"px"})});let p=0;this.handleTabOverflow();let E=setInterval(()=>{this.handleTabOverflow(),p++>10&&clearInterval(E)},200);window.addEventListener("resize",this.handleTabOverflow.bind(this)),new ResizeObserver(this.handleTabOverflow.bind(this)).observe(this.tabsContainer),document.addEventListener("fullscreenchange",this.handleTabOverflow.bind(this));let b=document.querySelector(".main-topBar-topbarContentRight > button:last-child"),M=document.createElement("span");M.textContent=b.getAttribute("aria-label"),M.classList.add("wmpotify-user-label"),b.appendChild(M);let v=document.createElement("div");v.id="wmpotify-search-container";let T=document.createElement("div");T.id="wmpotify-search-wrapper";let x=document.querySelector('.main-globalNav-searchContainer div form input[type="search"]');T.appendChild(x);let C=document.createElement("button");C.id="wmpotify-search-clear-button",C.setAttribute("aria-label","Clear search"),C.addEventListener("click",()=>{x.value="",x.focus(),Spicetify.Platform.History.push({pathname:"/search"})}),T.appendChild(C),v.appendChild(T),e.appendChild(v),e.addEventListener("pointerdown",S=>{S.button===2&&!S.target.closest("input")&&!S.target.closest("#wmpotify-tabs-container")&&y.openSpotifyMenu()});let O=getComputedStyle(document.documentElement).getPropertyValue("--right-sidebar-width");O&&document.documentElement.style.setProperty("--panel-width",O)}addTab(e){this.tabsContainer.appendChild(e);let o=document.createElement("span"),n=e.getAttribute("aria-label");o.textContent=no[n]||n,o.classList.add("wmpotify-tab-label"),e.draggable=!0,e.addEventListener("dragstart",r=>{this.tabsContainer.classList.add("dragging"),r.dataTransfer.setData("text/plain",o.textContent),e.dataset.dragging=!0}),e.addEventListener("dragend",()=>{delete e.dataset.dragging,this.tabsContainer.classList.remove("dragging")}),e.addEventListener("dragover",r=>{r.preventDefault(),r.stopPropagation()}),e.addEventListener("drop",r=>{r.preventDefault(),r.stopPropagation();let a=this.tabs.find(i=>i.dataset.dragging);a&&(r.offsetX>e.getBoundingClientRect().width/2?this.tabsContainer.insertBefore(a,e.nextElementSibling):this.tabsContainer.insertBefore(a,e),this.tabs=Array.from(this.tabsContainer.querySelectorAll("button:not(#wmpotify-tabs-overflow-button)")),this.handleTabOverflow(),localStorage.wmpotifyTabOrder=this.getTabOrder())}),e.appendChild(o)}getTabOrder(){return this.tabs.map(e=>e.dataset.identifier||e.getAttribute("aria-label"))}loadOrder(){if(localStorage.wmpotifyTabOrder){let e=localStorage.wmpotifyTabOrder.split(",");for(let o of e){let n=this.tabs.find(r=>r.dataset.identifier===o||r.getAttribute("aria-label")===o);n&&this.tabsContainer.appendChild(n)}this.tabs=Array.from(this.tabsContainer.querySelectorAll("button")),this.overflowButton&&this.tabsContainer.appendChild(this.overflowButton)}}handleTabOverflow(){let e=document.querySelector(".main-globalNav-historyButtons").getBoundingClientRect().right,o=window.innerWidth-document.querySelector(".main-topBar-topbarContentRight").getBoundingClientRect().left,n=160,r=0;for(;window.innerWidth-e-o-n<this.tabsContainer.getBoundingClientRect().width&&r<this.tabs.length;)this.tabs[this.tabs.length-1-r++].dataset.hidden=!0;for(r=document.querySelectorAll("#wmpotify-tabs-container button[data-hidden]").length;r>0&&window.innerWidth-e-o-n>this.tabsContainer.getBoundingClientRect().width;)delete this.tabs[this.tabs.length-r--].dataset.hidden;this.overflowButton.style.display=r>0?"block":""}},wt=Ke;function Le(t,e){if(!t||isNaN(t))return"00:00";let o=Math.floor(t/1e3),n=Math.floor(o/60);if(o=String(o%60).padStart(2,"0"),n<60)return e&&(n=String(n).padStart(2,"0")),`${n}:${o}`;let r=Math.floor(n/60);return n=String(n%60).padStart(2,"0"),e&&(r=String(r).padStart(2,"0")),`${r}:${n}:${o}`}var vt={};(function t(e,o,n){function r(l,u){if(!o[l]){if(!e[l]){var m=typeof ue=="function"&&ue;if(!u&&m)return m(l,!0);if(a)return a(l,!0);var f=new Error("Cannot find module '"+l+"'");throw f.code="MODULE_NOT_FOUND",f}var p=o[l]={exports:{}};e[l][0].call(p.exports,function(E){var b=e[l][1][E];return r(b||E)},p,p.exports,t,e,o,n)}return o[l].exports}for(var a=typeof ue=="function"&&ue,i=0;i<n.length;i++)r(n[i]);return r})({1:[function(t,e,o){var n,r,a;n=function(i,l){var u;return u=setTimeout(l,i),{stop:function(){return clearTimeout(u)}}},a=function(i,l){var u;return u=setInterval(l,i),{stop:function(){return clearInterval(u)}}},r=function(i){return/in/.test(document.readyState)?n(10,function(){return r(i)}):i()},function(i){var l,u,m,f,p,E,b,M,v,T,x;return l=i.FontDetective={},E=["serif","sans-serif","cursive","fantasy","monospace"],M="Helvetica,Lucida Grande,Lucida Sans,Tahoma,Arial,Geneva,Monaco,Verdana,Microsoft Sans Serif,Trebuchet MS,Courier New,Times New Roman,Courier,Lucida Bright,Lucida Sans Typewriter,URW Chancery L,Comic Sans MS,Georgia,Palatino Linotype,Lucida Sans Unicode,Times,Century Schoolbook L,URW Gothic L,Franklin Gothic Medium,Lucida Console,Impact,URW Bookman L,Helvetica Neue,Nimbus Sans L,URW Palladio L,Nimbus Mono L,Nimbus Roman No9 L,Arial Black,Sylfaen,MV Boli,Estrangelo Edessa,Tunga,Gautami,Raavi,Mangal,Shruti,Latha,Kartika,Vrinda,Arial Narrow,Century Gothic,Garamond,Book Antiqua,Bookman Old Style,Calibri,Cambria,Candara,Corbel,Monotype Corsiva,Cambria Math,Consolas,Constantia,MS Reference Sans Serif,MS Mincho,Segoe UI,Arial Unicode MS,Tempus Sans ITC,Kristen ITC,Mistral,Meiryo UI,Juice ITC,Papyrus,Bradley Hand ITC,French Script MT,Malgun Gothic,Microsoft YaHei,Gisha,Leelawadee,Microsoft JhengHei,Haettenschweiler,Microsoft Himalaya,Microsoft Uighur,MoolBoran,Jokerman,DFKai-SB,KaiTi,SimSun-ExtB,Freestyle Script,Vivaldi,FangSong,MingLiU-ExtB,MingLiU_HKSCS,MingLiU_HKSCS-ExtB,PMingLiU-ExtB,Copperplate Gothic Light,Copperplate Gothic Bold,Copperplate Gothic,Franklin Gothic Book,Maiandra GD,Perpetua,Eras Demi ITC,Felix Titling,Franklin Gothic Demi,Pristina,Edwardian Script ITC,OCR A Extended,OCR A,Engravers MT,Eras Light ITC,Franklin Gothic Medium Cond,Rockwell Extra Bold,Rockwell,Curlz MT,Blackadder ITC,Franklin Gothic Heavy,Franklin Gothic Demi Cond,Lucida Handwriting,Segoe UI Light,Segoe UI Semibold,Lucida Calligraphy,Cooper Black,Viner Hand ITC,Britannic Bold,Wide Latin,Old English Text MT,Broadway,Footlight MT Light,Harrington,Snap ITC,Onyx,Playbill,Bauhaus 93,Baskerville Old Face,Algerian,Matura MT Script Capitals,Stencil,Batang,Chiller,Harlow Solid Italic,Kunstler Script,Bernard MT Condensed,Informal Roman,Vladimir Script,Bell MT,Colonna MT,High Tower Text,Californian FB,Ravie,Segoe Script,Brush Script MT,SimSun,Arial Rounded MT Bold,Berlin Sans FB,Centaur,Niagara Solid,Showcard Gothic,Niagara Engraved,Segoe Print,Gabriola,Gill Sans MT,Iskoola Pota,Calisto MT,Script MT Bold,Century Schoolbook,Berlin Sans FB Demi,Magneto,Arabic Typesetting,DaunPenh,Mongolian Baiti,DokChampa,Euphemia,Kalinga,Microsoft Yi Baiti,Nyala,Bodoni MT Poster Compressed,Goudy Old Style,Imprint MT Shadow,Gill Sans MT Condensed,Gill Sans Ultra Bold,Palace Script MT,Lucida Fax,Gill Sans MT Ext Condensed Bold,Goudy Stout,Eras Medium ITC,Rage Italic,Rockwell Condensed,Castellar,Eras Bold ITC,Forte,Gill Sans Ultra Bold Condensed,Perpetua Titling MT,Agency FB,Tw Cen MT,Gigi,Tw Cen MT Condensed,Aparajita,Gloucester MT Extra Condensed,Tw Cen MT Condensed Extra Bold,PMingLiU,Bodoni MT,Bodoni MT Black,Bodoni MT Condensed,MS Gothic,GulimChe,MS UI Gothic,MS PGothic,Gulim,MS PMincho,BatangChe,Dotum,DotumChe,Gungsuh,GungsuhChe,MingLiU,NSimSun,SimHei,DejaVu Sans,DejaVu Sans Condensed,DejaVu Sans Mono,DejaVu Serif,DejaVu Serif Condensed,Eurostile,Matisse ITC,Bitstream Vera Sans Mono,Bitstream Vera Sans,Staccato222 BT,Bitstream Vera Serif,Broadway BT,ParkAvenue BT,Square721 BT,Calligraph421 BT,MisterEarl BT,Cataneo BT,Ruach LET,Rage Italic LET,La Bamba LET,Blackletter686 BT,John Handy LET,Scruff LET,Westwood LET,Yu Gothic,Yu Gothic UI".split(",").sort(),x=[],f=!1,v=!1,m=document.createElement("div"),m.id="font-detective",u=function(){function C(O,S,w){this.name=O,this.type=S,this.style=w}return C.prototype.toString=function(){return'"'+this.name.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'},C}(),p=function(){var C,O,S,w;return C=["monospace","sans-serif","serif"],w=document.createElement("span"),w.innerHTML="mmmmmmmmmmlli",w.style.fontSize="72px",S={},O={},{init:function(){var N,P,W,R;for(document.body.appendChild(m),R=[],P=0,W=C.length;P<W;P++)N=C[P],w.style.fontFamily=N,m.appendChild(w),S[N]=w.offsetWidth,O[N]=w.offsetHeight,R.push(m.removeChild(w));return R},check:function(N){var P,W,R,X;for(R=0,X=C.length;R<X;R++)if(P=C[R],w.style.fontFamily=N+", "+P,m.appendChild(w),W=w.offsetWidth!==S[P]||w.offsetHeight!==O[P],m.removeChild(w),W)return!0;return!1}}}(),b=function(){if(!v)return v=!0,l.incomplete=!0,r(function(C){return function(){var O;return T(function(){var S,w,N;for(N=[],S=0,w=M.length;S<w;S++)O=M[S],N.push(new u(O));return N}())}}(this))},T=function(C){var O,S;return p.init(),O=0,S=a(20,function(){var w,N,P,W,R,X,ht,Et,Ge,Ue;for(W=0;W<=5;W++){if(P=C[O],w=p.check(P),w)for(x.push(P),Ge=l.each.callbacks,R=0,ht=Ge.length;R<ht;R++)N=Ge[R],N(P);if(O++,O>=C.length){for(S.stop(),Ue=l.all.callbacks,X=0,Et=Ue.length;X<Et;X++)N=Ue[X],N(x);l.all.callbacks=[],l.each.callbacks=[],f=!0;return}}})},l.preload=b,l.each=function(C){var O,S,w;for(S=0,w=x.length;S<w;S++)O=x[S],C(O);if(!f)return l.each.callbacks.push(C),b()},l.each.callbacks=[],l.all=function(C){return f?C(x):(l.all.callbacks.push(C),b())},l.all.callbacks=[]}(vt)},{}]},{},[1]);var Xe=vt.FontDetective;var je=document.createElement("canvas");je.width=1;je.height=1;var Me=je.getContext("2d",{alpha:!1,willReadFrequently:!0});function d(t,e,o="#EEF3FA"){return Me.fillStyle=o,Me.filter=`hue-rotate(${t}deg) saturate(${e}%)`,Me.fillRect(0,0,1,1),"rgba("+Me.getImageData(0,0,1,1).data+")"}function H(t,e,o,n){if(!t&&!e){document.documentElement.style.setProperty("--spice-main","#EEF3FA"),document.documentElement.style.removeProperty("--wmpotify-tint-hue"),document.documentElement.style.removeProperty("--wmpotify-tint-sat"),Ct();return}window.matchMedia("(forced-colors: active)").matches&&(o=!1,n=!1);let a=document.querySelector(".main-nowPlayingBar-nowPlayingBar");if(a&&(o?a.classList.add("tinted"):a.classList.remove("tinted")),document.documentElement.style.setProperty("--spice-main",d(t,e)),document.documentElement.style.setProperty("--wmpotify-tint-hue",t+"deg"),document.documentElement.style.setProperty("--wmpotify-tint-sat",e/100),n){document.documentElement.dataset.wmpotifyTintMore=!0;let i=d(t,e,"#0067d0");if(document.documentElement.style.setProperty("--spice-button",i),document.documentElement.style.setProperty("--spice-button-active",i),document.documentElement.style.setProperty("--spice-accent",i),document.documentElement.style.setProperty("--wmp11-text-hilight",i),document.documentElement.style.setProperty("--wmp11-config-link-color",i),document.documentElement.style.setProperty("--hilight",i),document.documentElement.style.setProperty("--hot-tracking-color",i),document.documentElement.style.setProperty("--menu-hilight",i),document.documentElement.style.setProperty("--wmp11-header-line",d(t,e,"#a6b9dd")),document.documentElement.dataset.wmpotifyDarkMode)document.documentElement.style.setProperty("--item-hover-background",`linear-gradient(to bottom,${d(t,e,"#272f3a")} 0%,${d(t,e,"#272f39")} 10%,${d(t,e,"#272e38")} 20%,${d(t,e,"#272d36")} 30%,${d(t,e,"#272e34")} 40%,${d(t,e,"#272c33")} 50%,${d(t,e,"#272b31")} 60%,${d(t,e,"#272c30")} 70%,${d(t,e,"#272a2e")} 80%,${d(t,e,"#272b2d")} 90%,${d(t,e,"#27282b")} 100%)`),document.documentElement.style.setProperty("--item-selection-background",`linear-gradient(to bottom,${d(t,e,"#2d425b")} 0%,${d(t,e,"#2d425b")} 10%,${d(t,e,"#2d3f58")} 20%,${d(t,e,"#2d3f55")} 30%,${d(t,e,"#2d3d51")} 40%,${d(t,e,"#2d3c4f")} 50%,${d(t,e,"#2d3c4c")} 60%,${d(t,e,"#2d3949")} 70%,${d(t,e,"#2d3946")} 80%,${d(t,e,"#2d3643")} 90%,${d(t,e,"#2d3440")} 100%)`),document.documentElement.style.setProperty("--item-selection-hover-background",`linear-gradient(to bottom,${d(t,e,"#2e496a")} 0%,${d(t,e,"#2e496a")} 10%,${d(t,e,"#2e4667")} 20%,${d(t,e,"#2e4664")} 30%,${d(t,e,"#2e435e")} 40%,${d(t,e,"#2e435e")} 50%,${d(t,e,"#2e435b")} 60%,${d(t,e,"#2e4058")} 70%,${d(t,e,"#2e4055")} 80%,${d(t,e,"#2e3d52")} 90%,${d(t,e,"#2e3d4f")} 100%)`),document.documentElement.style.setProperty("--item-hover-border",d(t,e,"#2f4d73")),document.documentElement.style.setProperty("--item-active-border",d(t,e,"#5176ac")),document.documentElement.style.setProperty("--item-selection-hover-border",d(t,e,"#6286b5")),document.documentElement.style.setProperty("--menu-item-hover-background",`linear-gradient(to bottom,${d(t,e,"#303b4499")},${d(t,e,"#30383dcc")} 75%,${d(t,e,"#30373ccc")})`),document.documentElement.style.setProperty("--menu-item-hover-border-color",d(t,e,"#375273")),document.documentElement.style.removeProperty("--wmp11-separator-shadow"),document.documentElement.style.removeProperty("--wmp11-separator-light"),document.documentElement.style.setProperty("--wmp11-header-text",d(t,e,"#abd5fd")),document.documentElement.style.removeProperty("--button-border-color-inner-focus"),document.documentElement.style.removeProperty("--menu-item-hover-color"),localStorage.wmpotifyControlStyle!=="10"?(document.documentElement.style.setProperty("--button-face-hover",d(t,e,"#484e60")),document.documentElement.style.setProperty("--button-face-active",d(t,e,"#384058")),document.documentElement.style.setProperty("--button-shade-light-hovered",d(t,e,"#3b4255")),document.documentElement.style.setProperty("--button-shade-light-active",d(t,e,"#2a344d")),document.documentElement.style.setProperty("--button-shade-dark-hovered",d(t,e,"#366685")),document.documentElement.style.setProperty("--button-shade-top-active",d(t,e,"#4b5166")),document.documentElement.style.setProperty("--button-shade-bottom-active",d(t,e,"#2a5579")),document.documentElement.style.setProperty("--button-border-color-default",d(t,e,"#9fa7bf")),document.documentElement.style.setProperty("--button-border-color-hovered",d(t,e,"#9ea6be")),document.documentElement.style.setProperty("--button-border-color-active",d(t,e,"#8e96ae")),document.documentElement.style.setProperty("--textbox-border-color-focused",d(t,e,"#506a81")),document.documentElement.style.setProperty("--textbox-border-top-color-focused",d(t,e,"#6aa9db")),document.documentElement.style.setProperty("--menu-icon-background-border-color",d(t,e,"#32537c")),document.documentElement.style.setProperty("--menu-icon-checkmark-color",d(t,e,"#aac9fe")),document.documentElement.style.setProperty("--menu-icon-radio-dot-outer-color",d(t,e,"#b8c6e2")),document.documentElement.style.setProperty("--menu-icon-radio-dot-inner-color",d(t,e,"#d5d4ea")),document.documentElement.style.setProperty("--menu-icon-radio-dot-border-color",d(t,e,"#9fabca")),document.documentElement.style.setProperty("--menu-item-hover-border-color",d(t,e,"#375273"))):(document.documentElement.style.removeProperty("--button-face-hover"),document.documentElement.style.removeProperty("--button-face-active"),document.documentElement.style.removeProperty("--button-shade-light-hovered"),document.documentElement.style.removeProperty("--button-shade-light-active"),document.documentElement.style.removeProperty("--button-shade-dark-hovered"),document.documentElement.style.removeProperty("--button-shade-top-active"),document.documentElement.style.removeProperty("--button-shade-bottom-active"),document.documentElement.style.removeProperty("--button-border-color-default"),document.documentElement.style.removeProperty("--button-border-color-hovered"),document.documentElement.style.removeProperty("--button-border-color-active"),document.documentElement.style.removeProperty("--textbox-border-color-focused"),document.documentElement.style.removeProperty("--textbox-border-top-color-focused"),document.documentElement.style.removeProperty("--menu-icon-background-border-color"),document.documentElement.style.removeProperty("--menu-icon-checkmark-color"),document.documentElement.style.removeProperty("--menu-icon-radio-dot-outer-color"),document.documentElement.style.removeProperty("--menu-icon-radio-dot-inner-color"),document.documentElement.style.removeProperty("--menu-icon-radio-dot-border-color"),document.documentElement.style.removeProperty("--menu-item-hover-border-color"));else if(document.documentElement.style.setProperty("--item-hover-background",`linear-gradient(to bottom,${d(t,e,"#ebf4fc")} 0%,${d(t,e,"#eaf4fc")} 10%,${d(t,e,"#e9f3fc")} 20%,${d(t,e,"#e8f3fc")} 30%,${d(t,e,"#e7f2fc")} 40%,${d(t,e,"#e5f2fc")} 50%,${d(t,e,"#e2f1fc")} 60%,${d(t,e,"#e1f1fc")} 70%,${d(t,e,"#e0f0fc")} 80%,${d(t,e,"#dff0fc")} 90%,${d(t,e,"#def0fc")} 100%)`),document.documentElement.style.setProperty("--item-selection-background",`linear-gradient(to bottom,${d(t,e,"#edf5fd")} 0%,${d(t,e,"#ebf5fd")} 10%,${d(t,e,"#e9f4fd")} 20%,${d(t,e,"#e6f3fd")} 30%,${d(t,e,"#e4f3fd")} 40%,${d(t,e,"#e1f1fd")} 50%,${d(t,e,"#daeefc")} 60%,${d(t,e,"#d8eefc")} 70%,${d(t,e,"#d5edfc")} 80%,${d(t,e,"#d3ecfc")} 90%,${d(t,e,"#d2ecfc")} 100%)`),document.documentElement.style.setProperty("--item-selection-hover-background",`linear-gradient(to bottom,${d(t,e,"#e4f3fd")} 0%,${d(t,e,"#e2f2fd")} 10%,${d(t,e,"#dff0fc")} 20%,${d(t,e,"#dceffc")} 30%,${d(t,e,"#daeefc")} 40%,${d(t,e,"#d4ecfb")} 50%,${d(t,e,"#cce9fa")} 60%,${d(t,e,"#cae8fa")} 70%,${d(t,e,"#c6e7fa")} 80%,${d(t,e,"#c4e5fa")} 90%,${d(t,e,"#c2e5fa")} 100%)`),document.documentElement.style.setProperty("--item-hover-border",d(t,e,"#cde9f8")),document.documentElement.style.setProperty("--item-active-border",d(t,e,"#95dbfd")),document.documentElement.style.setProperty("--item-selection-hover-border",d(t,e,"#b2e3fb")),document.documentElement.style.setProperty("--menu-item-hover-background",`linear-gradient(to bottom,#fff9,${d(t,e,"#e6ecf5cc")} 90%,#fffc)`),document.documentElement.style.setProperty("--menu-item-hover-border-color",d(t,e,"#b8d6fb")),document.documentElement.style.setProperty("--wmp11-separator-shadow",d(t,e,"#a9b7c9")),document.documentElement.style.setProperty("--wmp11-separator-light",d(t,e,"#f2f7fc")),document.documentElement.style.setProperty("--wmp11-header-text",d(t,e,"#003399")),localStorage.wmpotifyControlStyle==="10"){document.documentElement.style.setProperty("--button-face-hover",d(t,e,"#e5f1fb")),document.documentElement.style.setProperty("--button-face-active",d(t,e,"#cce4f7"));let l=d(t,e,"#0078d7");document.documentElement.style.setProperty("--button-border-color-hovered",l),document.documentElement.style.setProperty("--button-border-color-active",d(t,e,"#005499")),document.documentElement.style.setProperty("--button-border-color-inner-focus",l),document.documentElement.style.setProperty("--textbox-border-color-focused",l),document.documentElement.style.setProperty("--menu-item-hover-color",d(t,e,"#91c9f7"))}else{document.documentElement.style.removeProperty("--button-border-color-inner-focus"),document.documentElement.style.removeProperty("--menu-item-hover-color"),document.documentElement.style.setProperty("--button-face-hover",d(t,e,"#eaf6fd")),document.documentElement.style.setProperty("--button-face-active",d(t,e,"#c4e5f6"));let l=d(t,e,"#bee6fd"),u=d(t,e,"#98d1ef");document.documentElement.style.setProperty("--button-shade-light-hovered",l),document.documentElement.style.setProperty("--button-shade-light-active",u),document.documentElement.style.setProperty("--button-shade-dark-hovered",d(t,e,"#a7d9f5")),document.documentElement.style.setProperty("--button-shade-top-active",d(t,e,"#e5f4fc")),document.documentElement.style.setProperty("--button-shade-bottom-active",d(t,e,"#68b3db")),document.documentElement.style.setProperty("--button-border-color-default",d(t,e,"#5586a3")),document.documentElement.style.setProperty("--button-border-color-hovered",d(t,e,"#3c7fb1")),document.documentElement.style.setProperty("--button-border-color-active",d(t,e,"#6d91ab")),document.documentElement.style.setProperty("--textbox-border-color-focused",l),document.documentElement.style.setProperty("--textbox-border-top-color-focused",u),document.documentElement.style.setProperty("--menu-icon-background-border-color",d(t,e,"#b3d3f9")),document.documentElement.style.setProperty("--menu-icon-checkmark-color",d(t,e,"#0c12a1")),document.documentElement.style.setProperty("--menu-icon-radio-dot-outer-color",d(t,e,"#333583")),document.documentElement.style.setProperty("--menu-icon-radio-dot-border-color",d(t,e,"#1a1490"))}localStorage.wmpotifyControlStyle!=="10"?(document.documentElement.style.setProperty("--checkbox-hover-background",d(t,e,"#e9f7fe")),document.documentElement.style.setProperty("--checkbox-hover-shadow","inset 0 0 0 1px "+d(t,e,"#def9fa")+",inset 1px 1px 0 1px "+d(t,e,"#79c6f9")+",inset -1px -1px 0 1px "+d(t,e,"#c6e9fc")+",inset 3px 3px 6px "+d(t,e,"#b1dffd")),document.documentElement.style.setProperty("--checkbox-checkmark-color",d(t,e,"#4a5f97"))):(document.documentElement.style.setProperty("--checkbox-hover-border",d(t,e,"#0078d7")),document.documentElement.style.setProperty("--checkbox-active-border",d(t,e,"#005499")),document.documentElement.style.setProperty("--checkbox-active-background",d(t,e,"#cce4f7")))}else delete document.documentElement.dataset.wmpotifyTintMore,Ct()}function Ct(){document.documentElement.style.removeProperty("--spice-button"),document.documentElement.style.removeProperty("--spice-button-active"),document.documentElement.style.removeProperty("--spice-accent"),document.documentElement.style.removeProperty("--wmp11-text-hilight"),document.documentElement.style.removeProperty("--wmp11-config-link-color"),document.documentElement.style.removeProperty("--hilight"),document.documentElement.style.removeProperty("--hot-tracking-color"),document.documentElement.style.removeProperty("--menu-hilight"),document.documentElement.style.removeProperty("--wmp11-header-line"),document.documentElement.style.removeProperty("--item-hover-background"),document.documentElement.style.removeProperty("--item-selection-background"),document.documentElement.style.removeProperty("--item-selection-hover-background"),document.documentElement.style.removeProperty("--item-hover-border"),document.documentElement.style.removeProperty("--item-active-border"),document.documentElement.style.removeProperty("--item-selection-hover-border"),document.documentElement.style.removeProperty("--menu-item-hover-background"),document.documentElement.style.removeProperty("--menu-item-hover-border-color"),document.documentElement.style.removeProperty("--wmp11-separator-shadow"),document.documentElement.style.removeProperty("--wmp11-separator-light"),document.documentElement.style.removeProperty("--wmp11-header-text"),document.documentElement.style.removeProperty("--button-border-color-inner-focus"),document.documentElement.style.removeProperty("--menu-item-hover-color"),document.documentElement.style.removeProperty("--button-face-hover"),document.documentElement.style.removeProperty("--button-face-active"),document.documentElement.style.removeProperty("--button-shade-light-hovered"),document.documentElement.style.removeProperty("--button-shade-light-active"),document.documentElement.style.removeProperty("--button-shade-dark-hovered"),document.documentElement.style.removeProperty("--button-shade-top-active"),document.documentElement.style.removeProperty("--button-shade-bottom-active"),document.documentElement.style.removeProperty("--button-border-color-default"),document.documentElement.style.removeProperty("--button-border-color-hovered"),document.documentElement.style.removeProperty("--button-border-color-active"),document.documentElement.style.removeProperty("--textbox-border-color-focused"),document.documentElement.style.removeProperty("--textbox-border-top-color-focused"),document.documentElement.style.removeProperty("--menu-icon-background-border-color"),document.documentElement.style.removeProperty("--menu-icon-checkmark-color"),document.documentElement.style.removeProperty("--menu-icon-radio-dot-outer-color"),document.documentElement.style.removeProperty("--menu-icon-radio-dot-inner-color"),document.documentElement.style.removeProperty("--menu-icon-radio-dot-border-color"),document.documentElement.style.removeProperty("--checkbox-hover-background"),document.documentElement.style.removeProperty("--checkbox-hover-shadow"),document.documentElement.style.removeProperty("--checkbox-checkmark-color"),document.documentElement.style.removeProperty("--checkbox-hover-border"),document.documentElement.style.removeProperty("--checkbox-active-border"),document.documentElement.style.removeProperty("--checkbox-active-background")}var io="1.2.0 Pre-release (2025/07/24)",ne=class t{constructor(e){let o=e.split(" "),n=o[0].split(".");this.major=parseInt(n[0]),this.minor=parseInt(n[1]),this.patch=parseInt(n[2])||0,this.extra=o.length===1?"":o.slice(1).join(" ")}toString(e=1){switch(parseInt(e)){case 0:return`${this.major}.${this.minor}.${this.patch}${this.extra?` ${this.extra}`:""}`;case 1:return`${this.major}.${this.minor}.${this.patch}`;case 2:return`${this.major}.${this.minor}`;case 3:return`${this.major}`;default:return this.toString(1)}}compare(e,o){let n=new t(e);return this.major!==n.major?this.major-n.major>0?1:-1:this.minor!==n.minor?this.minor-n.minor>0?1:-1:this.patch!==n.patch?this.patch-n.patch>0?1:-1:o||this.extra&&n.extra?0:this.extra?-1:n.extra?1:0}},z=new ne(io);async function ye(){try{let t=!!document.querySelector("style.marketplaceUserCSS"),e=y.available(),o=new ne(y.getModule()?.version),r=await(await fetch("https://www.ingan121.com/wmpotify/latest.txt")).text(),a=r.match("wmpotify_new=(.*)")[1],i=r.match("cte=(.*)")[1];!t&&z.compare(a)<0&&localStorage.wmpotifyIgnoreVersion!==a&&fe(!1,a),e&&o.compare(i)<0&&localStorage.wmpotifyLastCheckedWhVer!==i&&Spicetify.showNotification("[WMPotify] "+c.getString("CTEWH_UPDATE_MSG",i)),localStorage.wmpotifyLastCheckedWhVer=i}catch(t){console.error(t)}}function ie(t){let e=window?.Spicetify?.Platform?.version?.split(".").map(Number);if(e||(e=navigator.userAgent.match(/Spotify\/(\d+\.\d+\.\d+\.\d+)/)?.[1].split(".").map(Number)),!e||!t)return 0;let o=t.split(".").map(Number);for(let n=0;n<o.length;n++)if(e[n]!==o[n])return e[n]-o[n];return 0}var Tt=window.matchMedia("(prefers-color-scheme: dark)"),Lt=new MutationObserver(t=>{for(let e of t)if(e.type==="childList"){let o=Array.from(e.addedNodes);if((r=>r.some(a=>a.nodeType===Node.ELEMENT_NODE&&a.matches(".marketplaceCSS.marketplaceScheme")))(o)&&(Spicetify.Config.color_scheme==="dark"?document.documentElement.dataset.wmpotifyDarkMode=!0:delete document.documentElement.dataset.wmpotifyDarkMode,localStorage.wmpotifyTintColor)){let[r,a,i,l]=localStorage.wmpotifyTintColor.split(",");H(r,a,i,l)}}});function Mt(t){if(t.matches?document.documentElement.dataset.wmpotifyDarkMode=!0:delete document.documentElement.dataset.wmpotifyDarkMode,localStorage.wmpotifyTintColor){let[e,o,n,r]=localStorage.wmpotifyTintColor.split(",");H(e,o,n,r)}}var ro={addSystemDarkModeListener:function(){Tt.addEventListener("change",Mt)},removeSystemDarkModeListener:function(){Tt.removeEventListener("change",Mt)},addMarketplaceSchemeObserver:function(){Lt.observe(document.body,{childList:!0})},removeMarketplaceSchemeObserver:function(){Lt.disconnect()}},V=ro;var ao={getItem(t){let e=Spicetify._platform?.initialUser?.username,o=localStorage.getItem(e+":"+t);return isNaN(o)?o:parseFloat(o)},setItem(t,e){let o=Spicetify._platform?.initialUser?.username;localStorage.setItem(o+":"+t,e)},removeItem(t){let e=Spicetify._platform?.initialUser?.username;localStorage.removeItem(e+":"+t)}},D=ao;var L,k=[],A={},G=new MutationObserver(tt),Ot=new MutationObserver(so),F=!1,et=!1,Qe=[],Ze=[],I=ie("1.2.58")>=0?"left":"ylx",te=ie("1.2.58")>=0?"left-sidebar-expanded-state-width":"ylx-expanded-state-nav-bar-width",lo={async init(){if(document.querySelector("#wmpotify-libx-sidebar"))return!1;Object.keys(Spicetify.Platform.Translations).filter(r=>r.startsWith("shared.library.filter.")).forEach(r=>{let a=Spicetify.Platform.Translations[r];A[r.split(".").pop()]={loc_id:r,value:a}}),A.podcasts={loc_id:"search.title.shows",value:Spicetify.Platform.Translations["search.title.shows"]},k.length===0&&(k.push({identifier:"playlist",localized:A.playlist.value,elem:null}),k.push({identifier:"album",localized:A.album.value,elem:null}),k.push({identifier:"artist",localized:A.artist.value,elem:null}));let e=document.createElement("div");e.id="wmpotify-libx-header",document.querySelector(".main-yourLibraryX-libraryContainer").insertAdjacentElement("afterbegin",e);let o=document.createElement("div");o.id="wmpotify-libx-sidebar",document.querySelector(".main-yourLibraryX-libraryItemContainer").insertAdjacentElement("afterbegin",o),await uo(),L=document.querySelector('.main-yourLibraryX-filterArea .search-searchCategory-categoryGrid [role="presentation"]');let n=L.querySelector('div[role="listbox"]');return n&&(L=n),tt(),G.observe(L,{childList:!0}),Ot.observe(document.querySelector(".main-yourLibraryX-filterArea"),{childList:!0}),window.addEventListener("resize",Pt),!0},uninit(){document.querySelector("#wmpotify-libx-header")?.remove(),document.querySelector("#wmpotify-libx-sidebar")?.remove(),G.disconnect(),Ot.disconnect(),window.removeEventListener("resize",Pt)},go(t){t||(t=Spicetify.Platform.History.location.pathname.split("/").slice(2)),t[0]!==void 0&&co(t)}};function Je(){let t=document.querySelector("#wmpotify-libx-header");t.innerHTML="";let e=document.createElement("div");e.classList.add("wmpotify-libx-header-root-icon"),e.classList.add("wmpotify-toolbar-button"),t.appendChild(e);let o=document.createElement("button");o.classList.add("wmpotify-libx-header-root-text"),o.classList.add("wmpotify-toolbar-button"),o.textContent=c.LIBX_HEADER_ROOT,o.addEventListener("click",ee),t.appendChild(o);let n=ot();if(n.forEach((r,a)=>{let i=document.createElement("button");i.classList.add("wmpotify-libx-header-category-text"),i.classList.add("wmpotify-toolbar-button"),i.textContent=r,i.addEventListener("click",async()=>{if(!i.nextElementSibling)return;F&&(he(),await Ee()),G.disconnect();let l=k.find(u=>u.localized===r);if(a===0)ee(),await $();else{if(!l)return;let u=k.find(m=>m.localized===n[a-1]);(!Nt(u)||!document.contains(l.elem))&&(re()||(ee(),await $()),u.elem.click(),await $())}J(l),l.elem.click(),G.observe(L,{childList:!0})}),t.appendChild(i)}),F){let r=(document.querySelector(".main-yourLibraryX-collapseButton h2")||document.querySelector(".main-yourLibraryX-collapseButton [class*=encore-text]")).textContent,a=document.createElement("button");a.classList.add("wmpotify-libx-header-category-text"),a.classList.add("wmpotify-toolbar-button"),a.textContent=r,t.appendChild(a)}}function tt(){F=document.querySelector(".main-yourLibraryX-collapseButton").childElementCount>1;let t=ot(!0);if(F){let n=Spicetify.Platform.LocalStorageAPI.getItem("opened-folder-uri");t.push(n)}if(!et){let n="/wmpotify-standalone-libx/"+t.join("/");Spicetify.Platform.History.location.pathname==="/wmpotify-standalone-libx"?Spicetify.Platform.History.location.pathname=n:Spicetify.Platform.History.location.pathname!==n&&Spicetify.Platform.History.push({pathname:"/wmpotify-standalone-libx/"+t.join("/")})}if(F){Je();return}let e=!L.querySelector('button[class*="ChipClear"]:first-child, div[role="option"]:has(div[class*="ChipClear"]):first-child'),o=Array.from(L.querySelectorAll('button, div[role="option"]'));if(e)o.forEach((n,r)=>{let a={};a.localized=n.textContent,a.identifier=Object.keys(A).find(i=>A[i].value===a.localized),a.elem=n,k.some(i=>i.localized===a.localized)||k.push(a)});else{o.shift();let n=o[0].textContent,r=k.find(a=>a.localized===n);if(!r){let a={};a.localized=n,a.identifier=Object.keys(A).find(i=>A[i].value===a.localized),a.elem=o[0],k.push(a),r=a}r.children||(r.children=[]),o.shift(),o.forEach((a,i)=>{let l={};l.localized=a.textContent,l.identifier=Object.keys(A).find(u=>A[u].value===l.localized),l.elem=a,r.children.some(u=>u.localized===l.localized)||r.children.push(l)})}Je(),At()}function so(){G.disconnect(),L=document.querySelector('.main-yourLibraryX-filterArea .search-searchCategory-categoryGrid [role="presentation"]');let t=L.querySelector('div[role="listbox"]');t&&(L=t),tt(),G.observe(L,{childList:!0})}function J(t){if(!document.contains(t.elem)){for(let e of L.querySelectorAll('button, div[role="option"]'))if(e.textContent===t.localized){t.elem=e;break}}}function re(){return!L.querySelector('button[class*="ChipClear"]:first-child, div[role="option"]:has(div[class*="ChipClear"]):first-child')}function Nt(t){return re()?!1:Array.from(L.querySelectorAll('button, div[role="option"]'))[1].textContent===t.localized}async function ee(){F&&(he(),await Ee()),L.querySelector('button[class*="ChipClear"]:first-child, div[role="option"]:has(div[class*="ChipClear"]):first-child')?.click()}function he(){et=!0,document.querySelectorAll(".main-yourLibraryX-collapseButton button")?.[1]?.click()}function ot(t=!1){let e=[];if(F=document.querySelector(".main-yourLibraryX-collapseButton").childElementCount>1,F)return t?Ze:Qe;if(re())return Qe=[],Ze=[],e;{let n=Array.from(L.querySelectorAll('button, div[role="option"]')).slice(1)[0].textContent;t&&(n=Object.keys(A).find(a=>A[a].value===n)),e.push(n);let r=L.querySelector('button[class*="secondary-selected"], div[role="option"]:has(div[class*="secondary-selected"])');r&&(t?e.push(Object.keys(A).find(a=>A[a].value===r.textContent)):e.push(r.textContent)),t?Ze=structuredClone(e):Qe=structuredClone(e)}return e}async function co(t){if(F&&(he(),await Ee()),G.disconnect(),!re()){if(ee(),t.length===0)return;await $()}for(let e=0;e<t.length;e++)if(t[e].startsWith("spotify:user:"))await mo(),document.querySelector('.main-yourLibraryX-libraryRootlist .main-rootlist-wrapper div[role="button"][aria-labelledby*="listrow-title-'+t[e]+'"]').click();else if(e===0){let o=k.find(n=>n.identifier===t[e]);if(!o)return;J(o),o.elem.click(),await $()}else{let o=k.find(r=>r.identifier===t[e-1]);if(!o)return;let n=o.children.find(r=>r.identifier===t[e]);if(!n)return;J(n),n.elem.click(),await $()}Je(),At(),G.observe(L,{childList:!0})}function At(){let t=document.querySelector("#wmpotify-libx-sidebar");t.innerHTML="";let e=document.createElement("div");e.classList.add("wmpotify-libx-sidebar-item-container");let o=document.createElement("button");o.classList.add("wmpotify-libx-sidebar-item"),o.id="wmpotify-libx-sidebar-root",o.textContent=c.LIBX_SIDEBAR_ROOT,o.addEventListener("click",ee);let n=document.createElement("div");n.classList.add("wmpotify-libx-sidebar-chevron"),n.addEventListener("click",()=>{t.classList.toggle("rootCollapsed")}),e.appendChild(n),e.appendChild(o),t.appendChild(e),k.forEach(a=>{let i=document.createElement("div");i.classList.add("wmpotify-libx-sidebar-item-container");let l=document.createElement("button");if(l.classList.add("wmpotify-libx-sidebar-item"),l.textContent=a.localized,l.dataset.identifier=a.identifier,l.addEventListener("click",async()=>{l.classList.contains("active")&&!F||(F&&(he(),await Ee()),G.disconnect(),re()||(ee(),await $()),J(a),a.elem.click(),G.observe(L,{childList:!0}))}),i.appendChild(l),t.appendChild(i),a.children&&a.children.length>0){let u=document.createElement("div");u.classList.add("wmpotify-libx-sidebar-chevron"),u.addEventListener("click",()=>{i.classList.toggle("collapsed")}),i.insertBefore(u,l);let m=document.createElement("div");m.classList.add("wmpotify-libx-sidebar-downlevel"),a.children.forEach(f=>{let p=document.createElement("button");p.classList.add("wmpotify-libx-sidebar-item"),p.textContent=f.localized,p.dataset.identifier=f.identifier,p.addEventListener("click",async()=>{p.classList.contains("active")&&!F||(F&&(he(),await Ee()),G.disconnect(),J(f),(!Nt(a)||!document.contains(f.elem))&&(re()||(ee(),await $()),J(a),a.elem.click(),await $()),J(f),f.elem.click(),G.observe(L,{childList:!0}))}),m.appendChild(p)}),t.appendChild(m)}});let r=ot();if(r.length>0){let a=r.pop();Array.from(t.querySelectorAll(".wmpotify-libx-sidebar-item")).find(l=>l.textContent===a).classList.add("active")}else o.classList.add("active")}function Pt(){let t=D.getItem(`${I}-sidebar-state`);Spicetify.Platform.LocalStorageAPI.setItem(`${I}-sidebar-state`,2),D.setItem(`${I}-sidebar-state`,t)}function uo(){if(!document.querySelector('.main-yourLibraryX-filterArea .search-searchCategory-categoryGrid [role="presentation"]'))return new Promise(t=>{let e=new MutationObserver(()=>{document.querySelector('.main-yourLibraryX-filterArea .search-searchCategory-categoryGrid [role="presentation"]')&&(t(),e.disconnect())});e.observe(document.querySelector(".main-yourLibraryX-libraryItemContainer"),{childList:!0,subtree:!0})})}function $(){return new Promise(t=>{let e=new MutationObserver(()=>{L.querySelector('button, div[role="option"]')&&(t(),e.disconnect())});e.observe(L,{childList:!0})})}function Ee(){return new Promise(t=>{let e=new MutationObserver(()=>{et=!1,t(),e.disconnect()});e.observe(document.querySelector(".main-yourLibraryX-filterArea"),{childList:!0})})}function mo(){if(!document.querySelector('.main-yourLibraryX-libraryRootlist .main-rootlist-wrapper [role="presentation"]:not([class])'))return new Promise(t=>{let e=new MutationObserver(()=>{document.querySelector('.main-yourLibraryX-libraryRootlist .main-rootlist-wrapper [role="presentation"]:not([class])')&&(t(),e.disconnect())});e.observe(document.querySelector(".main-yourLibraryX-libraryRootlist"),{childList:!0,subtree:!0})})}var ae=lo;async function xt(){let t={types:[{description:"All Supported Types",accept:{"application/x-windows-theme":[".theme",".themepack"],"application/x-windows-registry":[".reg"],"application/json":[".json"],"text/css":[".css"]}},{description:"Theme Files",accept:{"application/x-windows-theme":[".theme",".themepack"]}},{description:"Registry Files (HKCU\\CPL\\Colors or WCTC)",accept:{"application/x-windows-registry":[".reg"]}},{description:"ModernActiveDesktop JSON Files",accept:{"application/json":[".json"]}},{description:"CSS Files",accept:{"text/css":[".css"]}}],excludeAcceptAllOption:!1,multiple:!1},[e]=await window.showOpenFilePicker(t),o=await e.getFile(),n=await o.arrayBuffer(),r=new Uint8Array(n),a="utf-8";r[0]===255&&r[1]===254?a="utf-16le":r[0]===254&&r[1]===255&&(a="utf-16be");let i=new TextDecoder(a).decode(n);if(i.match("--.*:.*;")||o.name.endsWith(".css")){let l=i;if(!l.includes("wmpotify-compatible")){l=i.replace("--button-face:","--surface:").replace("--button-shadow:","--button-shadow-color:").replace("--ui-font:","--ui-font-default:");for(let m of l.split(`
`)){if(m.length>500)return Spicetify.showNotification(c.CONF_GENERAL_MSG_UNSUPPORTED_SCHEME_FILE),-1;!m.includes("!important")&&m.includes(":")&&(l=l.replace(m,m.replace(/:\s*(.*);/,": $1 !important;")))}let u=[];u.surface=l.match(/--surface:\s*(.*);/)?.[1].replace(/ !important/,""),u["button-shadow-color"]=l.match(/--button-shadow-color:\s*(.*);/)?.[1].replace(/ !important/,""),u["button-dk-shadow"]=l.match(/--button-dk-shadow:\s*(.*);/)?.[1].replace(/ !important/,""),u["button-hilight"]=l.match(/--button-hilight:\s*(.*);/)?.[1].replace(/ !important/,""),u["button-light"]=l.match(/--button-light:\s*(.*);/)?.[1].replace(/ !important/,""),u["button-text"]=l.match(/--button-text:\s*(.*);/)?.[1].replace(/ !important/,""),u["menu-text"]=l.match(/--menu-text:\s*(.*);/)?.[1].replace(/ !important/,""),u["hilight-text"]=l.match(/--hilight-text:\s*(.*);/)?.[1].replace(/ !important/,""),l+=":root {"+Rt(u)+"}",l=l.replace(/  |\n/g,"")}Se(l),localStorage.wmpotifyControlStyle="custom",localStorage.wmpotifyCustomScheme=l}else try{let l=JSON.parse(i),u=It(l);Se(u),localStorage.wmpotifyControlStyle="custom",localStorage.wmpotifyCustomScheme=u}catch{let l=!!i.split(`
`)[0].match(/(?=.*REG)(?=.*EDIT)/i),u=l&&i.includes("\\Control Panel\\Appearance\\ClassicSchemes\\");try{let m={"active-border":_(i,"ActiveBorder",l,u),"active-title":_(i,"ActiveTitle",l,u),"app-workspace":_(i,"AppWorkspace",l,u),background:_(i,"Background",l,u),"button-alternate-face":_(i,"ButtonAlternateFace",l,u),"button-dk-shadow":_(i,"ButtonDkShadow",l,u),"button-face":_(i,"ButtonFace",l,u),"button-hilight":_(i,"ButtonHilight",l,u),"button-light":_(i,"ButtonLight",l,u),"button-shadow":_(i,"ButtonShadow",l,u),"button-text":_(i,"ButtonText",l,u),"gradient-active-title":_(i,"GradientActiveTitle",l,u),"gradient-inactive-title":_(i,"GradientInactiveTitle",l,u),"gray-text":_(i,"GrayText",l,u),hilight:_(i,"Hilight",l,u),"hilight-text":_(i,"HilightText",l,u),"hot-tracking-color":_(i,"HotTrackingColor",l,u),"inactive-border":_(i,"InactiveBorder",l,u),"inactive-title":_(i,"InactiveTitle",l,u),"inactive-title-text":_(i,"InactiveTitleText",l,u),"info-text":_(i,"InfoText",l,u),"info-window":_(i,"InfoWindow",l,u),menu:_(i,"Menu",l,u),"menu-bar":_(i,"MenuBar",l,u),"menu-hilight":_(i,"MenuHilight",l,u),"menu-text":_(i,"MenuText",l,u),scrollbar:_(i,"Scrollbar",l,u),"title-text":_(i,"TitleText",l,u),window:_(i,"Window",l,u),"window-frame":_(i,"WindowFrame",l,u),"window-text":_(i,"WindowText",l,u)};if(u){let p=i.match(`\\n"Size1"=dword:0000(.*)\r
`);p?m["scrollbar-size"]=parseInt(p[1],16)+"px":m["scrollbar-size"]="16px";let E=i.match(`\\n"Size8"=dword:0000(.*)\r
`);E?m["menu-height"]=parseInt(E[1],16)+"px":m["menu-height"]="18px",i.match(`\\n"Gradients"=dword:00000000\r
`)&&(m["gradient-active-title"]=m["active-title"],m["gradient-inactive-title"]=m["inactive-title"]),i.match(`\\n"FlatMenus"=dword:00000000\r
`)?m["flat-menus"]="none":m["flat-menus"]="mbcm"}else m["scrollbar-size"]="16px",m["menu-height"]="18px";let f=It(m);Se(f),localStorage.wmpotifyControlStyle="custom",localStorage.wmpotifyCustomScheme=f}catch{return Spicetify.showNotification(c.CONF_GENERAL_MSG_INVALID_SCHEME_FILE),-1}}}async function Se(t){let e=document.getElementById("wmpotify-scheme");e||(e=document.createElement("style"),e.id="wmpotify-scheme",document.body.appendChild(e)),e.textContent=t,document.documentElement.dataset.wmpotifyControlStyle="custom",t.includes("--flat-menus: mbcm")&&(document.documentElement.dataset.wmpotifyFlatMenus=!0)}function It(t){let e=["extra-border-bottom","supports-win-shadow","extra-title-height","extra-border-size","menu-animation","menu-shadow","supports-colorization","win-open-anim","win-close-anim","palette-title-height"],o={"button-face":"surface","button-shadow":"button-shadow-color","ui-font":"ui-font-default"},n=`:root {
`;for(let r in t)if(!e.includes(r)){if(o[r]){n+=`--${o[r]}: ${t[r]} !important;
`;continue}n+=`--${r}: ${t[r]} !important;
`}return n+=Rt(t),n+="}",n}function Rt(t){let e=t.surface||t["button-face"],o=t["button-dk-shadow"],n=t["button-hilight"],r=t["button-light"],a=t["button-shadow-color"]||t["button-shadow"],i=t["button-text"],l=t["menu-text"],u=t["hilight-text"],m=`
        <svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M15 0H0V1V16H1V1H15V0Z" fill="${r}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M2 1H1V15H2V2H14V1H2Z" fill="${n}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M16 17H15H0V16H15V0H16V17Z" fill="${o}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M15 1H14V15H1V16H14H15V1Z" fill="${a}"/>
            <rect x="2" y="2" width="12" height="13" fill="${e}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M8 6H7V7H6V8H5V9H4V10H11V9H10V8H9V7H8V6Z" fill="${i}"/>
        </svg>`.replace(/  |\n/g,""),f=`
        <svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M15 0H0V1V16H1V1H15V0Z" fill="${r}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M2 1H1V15H2V2H14V1H2Z" fill="${n}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M16 17H15H0V16H15V0H16V17Z" fill="${o}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M15 1H14V15H1V16H14H15V1Z" fill="${a}"/>
            <rect x="2" y="2" width="12" height="13" fill="${e}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M9 6H4V7H5V8H6V9H7V10H8V9H9V8H10V7H11V6Z" fill="${i}"/>
        </svg>`.replace(/  |\n/g,""),p=`
        <svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M15 0H0V1V16H1V1H15V0Z" fill="${r}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M2 1H1V15H2V2H14V1H2Z" fill="${n}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M16 17H15H0V16H15V0H16V17Z" fill="${o}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M15 1H14V15H1V16H14H15V1Z" fill="${a}"/>
            <rect x="2" y="2" width="12" height="13" fill="${e}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M9 4H8V5H7V6H6V7H5V8H6V9H7V10H8V11H9V4Z" fill="${i}"/>
        </svg>`.replace(/  |\n/g,""),E=`
        <svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M15 0H0V1V16H1V1H15V0Z" fill="${r}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M2 1H1V15H2V2H14V1H2Z" fill="${n}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M16 17H15H0V16H15V0H16V17Z" fill="${o}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M15 1H14V15H1V16H14H15V1Z" fill="${a}"/>
            <rect x="2" y="2" width="12" height="13" fill="${e}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M7 4H6V11H7V10H8V9H9V8H10V7H9V6H8V5H7V4Z" fill="${i}"/>
        </svg>`.replace(/  |\n/g,""),b=`
        <svg width="2" height="2" viewBox="0 0 2 2" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M1 0H0V1H1V2H2V1H1V0Z" fill="${e}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M2 0H1V1H0V2H1V1H2V0Z" fill="${n}"/>
        </svg>`.replace(/  |\n/g,""),M=`
        <svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M0 0H15H16V17H15H0V16V1V0ZM1 16H15V1H1V16Z" fill="${a}"/>
            <rect x="1" y="1" width="14" height="15" fill="${e}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M12 7H5V8H6V9H7V10H8V11H9V10H10V9H11V8H12V7Z" fill="${i}"/>
        </svg>`.replace(/  |\n/g,""),v=`
        <svg width="7" height="7" viewBox="0 0 7 7" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M7 0H6V1H5V2H4V3H3V4H2V3H1V2H0V5H1V6H2V7H3V6H4V5H5V4H6V3H7V0Z" fill="${i}"/>
        </svg>`.replace(/  |\n/g,""),T=`
        <svg width="7" height="7" viewBox="0 0 7 7" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M7 0H6V1H5V2H4V3H3V4H2V3H1V2H0V5H1V6H2V7H3V6H4V5H5V4H6V3H7V0Z" fill="${a}"/>
        </svg>`.replace(/  |\n/g,""),x=`
        <?xml version="1.0" standalone="no"?>
        <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd" >
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="-10 0 2058 2048" shape-rendering="crispEdges">
            <path fill="${l}" d="M512 832l320 319l576 -575v384l-576 576l-320 -320v-384z" />
        </svg>`.replace(/  |\n/g,""),C=`
        <?xml version="1.0" standalone="no"?>
        <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd" >
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="-10 0 2058 2048" shape-rendering="crispEdges">
            <path fill="${u}" d="M512 832l320 319l576 -575v384l-576 576l-320 -320v-384z" />
        </svg>`.replace(/  |\n/g,"");return`
        --scroll-up: url("data:image/svg+xml,${encodeURIComponent(m)}") !important;
        --scroll-down: url("data:image/svg+xml,${encodeURIComponent(f)}") !important;
        --scroll-left: url("data:image/svg+xml,${encodeURIComponent(p)}") !important;
        --scroll-right: url("data:image/svg+xml,${encodeURIComponent(E)}") !important;
        --scroll-track: url("data:image/svg+xml,${encodeURIComponent(b)}") !important;
        --dropdown-button-pressed: url("data:image/svg+xml,${encodeURIComponent(M)}") !important;
        --checkmark: url("data:image/svg+xml,${encodeURIComponent(v)}") !important;
        --checkmark-disabled: url("data:image/svg+xml,${encodeURIComponent(T)}") !important;
        --checkmark-menu: url("data:image/svg+xml,${encodeURIComponent(x)}") !important;
        --checkmark-menu-hover: url("data:image/svg+xml,${encodeURIComponent(C)}") !important;
    `.replace(/  |\n/g,"")}function _(t,e,o,n){let r=["Scrollbar","Background","ActiveTitle","InactiveTitle","Menu","Window","WindowFrame","MenuText","WindowText","TitleText","ActiveBorder","InactiveBorder","AppWorkspace","Hilight","HilightText","ButtonFace","ButtonShadow","GrayText","ButtonText","InactiveTitleText","ButtonHilight","ButtonDkShadow","ButtonLight","InfoText","InfoWindow","ButtonAlternateFace","HotTrackingColor","GradientActiveTitle","GradientInactiveTitle","MenuHilight","MenuBar"],a;n?a=new RegExp(`\\n"Color${r.indexOf(e)}"=dword:00(.*)\r
`):o?a=new RegExp(`\\n"${e}"="(.*)"\r
`):a=new RegExp(`\\n${e}=(.*)\r
`);let i=t.match(a);if(n){if(i)return"#"+i[1].trim().match(/.{2}/g).reverse().join("");throw new Error(`Color not found for ${e}`)}if(!i)switch(e){case"ButtonAlternateFace":return"#B5B5B5";case"GradientActiveTitle":return _(t,"ActiveTitle",o);case"GradientInactiveTitle":return _(t,"InactiveTitle",o);case"MenuBar":return _(t,"Menu",o);case"MenuHilight":return _(t,"Hilight",o);case"HotTrackingColor":return"#008080";default:throw new Error(`Color not found for ${e}`)}return"#"+i[1].trim().split(" ").map(l=>parseInt(l).toString(16).padStart(2,"0")).join("")}var h=document.createElement("div"),U=null,nt=0,Oe=null,Re=!1,Ae=null,Ie=null,xe=null,s={};function po(){if(document.getElementById("wmpotify-config"))return;let t=y.query(),e=document.querySelector(".Root__main-view"),o=window.matchMedia("(forced-colors: active)");h.id="wmpotify-config",h.innerHTML=`
        <div id="wmpotify-config-topborder" class="wmpotify-tintable"></div>
        <button id="wmpotify-config-prev"></button>
        <button id="wmpotify-config-next"></button>
        <p id="wmpotify-config-title">${c.CONF_GENERAL_TITLE}</p>
        <span id="wmpotify-config-wh-message">${c.CONF_GENERAL_WH_MESSAGE}</span>
        <button id="wmpotify-config-close"></button>
        <section id="wmpotify-config-tab-general" class="wmpotify-config-tab-content" data-tab-title="${c.CONF_GENERAL_TITLE}" style="display: block;">
            <label for="wmpotify-config-style">${c.CONF_GENERAL_STYLE}</label>
            <select id="wmpotify-config-style" class="wmpotify-aero">
                <option value="auto">${c.UI_AUTO}</option>
                <option value="xp">XP</option>
                <option value="aero">Aero</option>
                <option value="basic">Basic</option>
                <option value="basic_custom">Basic (${c.UI_CUSTOM})</option>
            </select>
            <label for="wmpotify-config-title-style">${c.CONF_GENERAL_TITLE_STYLE}</label>
            <select id="wmpotify-config-title-style" class="wmpotify-aero">
                <option value="auto">${c.UI_AUTO}</option>
                <option value="native">${c.CONF_GENERAL_TITLE_STYLE_NATIVE}</option>
                <option value="custom">${c.CONF_GENERAL_TITLE_STYLE_CUSTOM}</option>
                <option value="spotify">Spotify</option>
                <option value="keepmenu">${c.CONF_GENERAL_TITLE_STYLE_KEEPMENU}</option>
            </select>
            <button id="wmpotify-config-apply" class="wmpotify-aero">${c.CONF_GENERAL_APPLY}</button><br>
            <label for="wmpotify-config-control-style">${c.CONF_GENERAL_CONTROL_STYLE}</label>
            <select id="wmpotify-config-control-style" class="wmpotify-aero">
                <option value="classic">${c.CONF_GENERAL_CONTROL_STYLE_CLASSIC}</option>
                <option value="standard">${c.CONF_GENERAL_CONTROL_STYLE_STANDARD}</option>
                <option value="xp">Windows XP</option>
                <option value="aero" selected>Windows Aero</option>
                <option value="10">Windows 10</option>
                <option value="custom">${c.CONF_GENERAL_CONTROL_STYLE_CUSTOM}</option>
            </select>
            <label for="wmpotify-config-dark-mode">${c.CONF_GENERAL_DARK_MODE}</label>
            <select id="wmpotify-config-dark-mode" class="wmpotify-aero">
                <option value="follow_scheme" selected>${c.CONF_GENERAL_DARK_MODE_FOLLOW_SCHEME}</option>
                <option value="system">${c.CONF_GENERAL_DARK_MODE_SYSTEM}</option>
                <option value="always">${c.CONF_GENERAL_DARK_MODE_ALWAYS}</option>
                <option value="never">${c.CONF_GENERAL_DARK_MODE_NEVER}</option>
            </select><br>
            <label for="wmpotify-config-font">${c.CONF_GENERAL_FONT}</label>
            <select id="wmpotify-config-font" class="wmpotify-aero">
                <option value="default">${c.UI_DEFAULT}</option>
                <option value="custom">${c.UI_CUSTOM}</option>
                <option value="external">${c.CONF_GENERAL_FONT_EXTERNAL}</option>
                <option value="reload">${c.CONF_GENERAL_FONT_RELOAD}</option>
                ${globalThis.documentPictureInPicture?`
                    <option value="loadsys">${c.CONF_GENERAL_FONT_LOADSYS}</option>
                `:""}
            </select><br>
            <label for="wmpotify-config-topmost">${c.CONF_GENERAL_TOPMOST}</label>
            <select id="wmpotify-config-topmost" class="wmpotify-aero" disabled>
                <option value="always">${c.CONF_GENERAL_TOPMOST_ALWAYS}</option>
                <option value="minimode">${c.CONF_GENERAL_TOPMOST_MINIMODE}</option>
                <option value="never" selected>${c.CONF_GENERAL_TOPMOST_NEVER}</option>
            </select>
            <label for="wmpotify-config-backdrop">${c.CONF_GENERAL_BACKDROP}</label>
            <select id="wmpotify-config-backdrop" class="wmpotify-aero" disabled>
                <option value="none" selected>${c.CONF_GENERAL_BACKDROP_NONE}</option>
                <option value="mica">Mica</option>
                <option value="acrylic">${c.CONF_GENERAL_BACKDROP_ACRYLIC}</option>
                <option value="tabbed">${c.CONF_GENERAL_BACKDROP_TABBED}</option>
            </select><br>
            <label for="wmpotify-config-pbleftbtn">${c.CONF_GENERAL_PBLEFTBTN}</label>
            <select id="wmpotify-config-pbleftbtn" class="wmpotify-aero">
                <option value="hide">${c.CONF_GENERAL_PBLEFTBTN_HIDE}</option>
                <option value="left" selected>${c.CONF_GENERAL_PBLEFTBTN_LEFTALIGN}</option>
                <option value="right">${c.CONF_GENERAL_PBLEFTBTN_RIGHTALIGN}</option>
            </select><br>
            <input type="checkbox" id="wmpotify-config-show-libx" class="wmpotify-aero">
            <label for="wmpotify-config-show-libx">${c.CONF_GENERAL_SHOW_LIBX}</label><br>
            <input type="checkbox" id="wmpotify-config-lock-title" class="wmpotify-aero" disabled>
            <label for="wmpotify-config-lock-title">${c.CONF_GENERAL_LOCK_TITLE}</label>
        </section>
        <section id="wmpotify-config-tab-color" class="wmpotify-config-tab-content" data-tab-title="${c.CONF_COLOR_TITLE}">
            <section class="field-row">
                <a href="#" id="wmpotify-config-color-reset">${c.UI_RESET}</a>
                <input type="checkbox" id="wmpotify-config-tint-playerbar" class="wmpotify-aero">
                <label for="wmpotify-config-tint-playerbar">${c.CONF_COLOR_TINTPB}</label>
                <input type="checkbox" id="wmpotify-config-tint-more" class="wmpotify-aero">
                <label for="wmpotify-config-tint-more">${c.CONF_COLOR_TINTMORE}</label>
            </section>
            <label>${c.CONF_COLOR_HUE}</label><br>
            <input type="range" id="wmpotify-config-hue" class="wmpotify-aero no-track" min="0" max="360" step="1" value="180"><br>
            <label>${c.CONF_COLOR_SAT}</label><br>
            <input type="range" id="wmpotify-config-sat" class="wmpotify-aero no-track" min="0" max="354" step="1" value="121"><br>
        </section>
        <section id="wmpotify-config-tab-speed" class="wmpotify-config-tab-content" data-tab-title="${c.CONF_SPEED_TITLE}" data-wh-speedmod-required="true">
            <a href="#" id="wmpotify-config-speed-slow">${c.CONF_SPEED_SLOW}</a>
            <a href="#" id="wmpotify-config-speed-normal">${c.CONF_SPEED_NORMAL}</a>
            <a href="#" id="wmpotify-config-speed-fast">${c.CONF_SPEED_FAST}</a><br>
            <input type="range" id="wmpotify-config-speed" class="wmpotify-aero" min="0.5" max="2.0" step="0.1" value="1"><br>
            ${c.CONF_SPEED_CURRENT_LABEL}: <span id="wmpotify-config-speed-value">1.0</span>
        </section>
        <section id="wmpotify-config-tab-about" class="wmpotify-config-tab-content" data-tab-title="${c.CONF_ABOUT_TITLE}">
            <div id="wmpotify-about-logo"></div>
            <p id="wmpotify-about-title">WMPotify</p>
            <button id="wmpotify-about-github" onclick="window.open('https://github.com/Ingan121/WMPotify', '_blank')">
                
                <svg version="1.0" xmlns="http://www.w3.org/2000/svg"
                    width="240.000000pt" height="240.000000pt" viewBox="0 0 240.000000 240.000000"
                    preserveAspectRatio="xMidYMid meet">

                    <g transform="translate(0.000000,240.000000) scale(0.100000,-0.100000)"
                    fill="white" stroke="none">
                    <path d="M970 2301 c-305 -68 -555 -237 -727 -493 -301 -451 -241 -1056 143
                    -1442 115 -116 290 -228 422 -271 49 -16 55 -16 77 -1 24 16 25 20 25 135 l0
                    118 -88 -5 c-103 -5 -183 13 -231 54 -17 14 -50 62 -73 106 -38 74 -66 108
                    -144 177 -26 23 -27 24 -9 37 43 32 130 1 185 -65 96 -117 133 -148 188 -160
                    49 -10 94 -6 162 14 9 3 21 24 27 48 6 23 22 58 35 77 l24 35 -81 16 c-170 35
                    -275 96 -344 200 -64 96 -85 179 -86 334 0 146 16 206 79 288 28 36 31 47 23
                    68 -15 36 -11 188 5 234 13 34 20 40 47 43 45 5 129 -24 214 -72 l73 -42 64
                    15 c91 21 364 20 446 0 l62 -16 58 35 c77 46 175 82 224 82 39 0 39 -1 55 -52
                    17 -59 20 -166 5 -217 -8 -30 -6 -39 16 -68 109 -144 121 -383 29 -579 -62
                    -129 -193 -219 -369 -252 l-84 -16 31 -55 32 -56 3 -223 4 -223 25 -16 c23
                    -15 28 -15 76 2 80 27 217 101 292 158 446 334 590 933 343 1431 -145 293
                    -419 518 -733 602 -137 36 -395 44 -525 15z"/>
                    </g>
                </svg>
            </button>
            <p>${c.CONF_ABOUT_DESC}</p>
            <p>${c.CONF_ABOUT_VERSION}: ${z.toString(0)}<span id="wmpotify-about-ctewh-ver"></span></p>
            <p>${c.CONF_ABOUT_AUTHOR} - <a href="https://www.ingan121.com/" target="_blank">www.ingan121.com</a></p>
            <input type="checkbox" id="wmpotify-config-auto-updates" class="wmpotify-aero" checked>
            <label for="wmpotify-config-auto-updates">${c.CONF_ABOUT_AUTO_UPDATES}</label>
        </section>
    `,U=h.querySelectorAll(".wmpotify-config-tab-content"),s.topborder=h.querySelector("#wmpotify-config-topborder"),s.title=h.querySelector("#wmpotify-config-title"),s.hue=h.querySelector("#wmpotify-config-hue"),s.sat=h.querySelector("#wmpotify-config-sat"),s.tintPb=h.querySelector("#wmpotify-config-tint-playerbar"),s.tintMore=h.querySelector("#wmpotify-config-tint-more"),s.style=h.querySelector("#wmpotify-config-style"),s.titleStyle=h.querySelector("#wmpotify-config-title-style"),s.controlStyle=h.querySelector("#wmpotify-config-control-style"),s.darkMode=h.querySelector("#wmpotify-config-dark-mode"),s.fontSelector=h.querySelector("#wmpotify-config-font"),s.fontCustom=h.querySelector('#wmpotify-config-font option[value="custom"]'),s.fontReload=h.querySelector('#wmpotify-config-font option[value="reload"]'),s.defaultFontOptionsCount=3+ +!!globalThis.documentPictureInPicture+ +h.contains(s.fontReload),s.topmost=h.querySelector("#wmpotify-config-topmost"),s.backdrop=h.querySelector("#wmpotify-config-backdrop"),s.pbLeftBtn=h.querySelector("#wmpotify-config-pbleftbtn"),s.showLibX=h.querySelector("#wmpotify-config-show-libx"),s.lockTitle=h.querySelector("#wmpotify-config-lock-title"),s.whMessage=h.querySelector("#wmpotify-config-wh-message"),s.whVer=h.querySelector("#wmpotify-about-ctewh-ver"),s.autoUpdates=h.querySelector("#wmpotify-config-auto-updates");let n=localStorage.wmpotifyConfigHeight;n&&parseInt(n)>=24&&(h.style.height=localStorage.wmpotifyConfigHeight),Ft(o),o.addEventListener("change",Ft),s.style.addEventListener("change",async()=>{if(s.style.value==="basic_custom"){let m=await q(c.CONF_GENERAL_BASIC_CUSTOM_DLG_TITLE,c.CONF_GENERAL_BASIC_CUSTOM_ACTIVE_MSG,"",c.CONF_GENERAL_BASIC_CUSTOM_PLACEHOLDER);if(!m){s.style.value=localStorage.wmpotifyStyle||"auto";return}let f=await q(c.CONF_GENERAL_BASIC_CUSTOM_DLG_TITLE,c.CONF_GENERAL_BASIC_CUSTOM_INACTIVE_MSG,"",c.CONF_GENERAL_BASIC_CUSTOM_PLACEHOLDER);if(!f){s.style.value=localStorage.wmpotifyStyle||"auto";return}let p=await q(c.CONF_GENERAL_BASIC_CUSTOM_DLG_TITLE,c.CONF_GENERAL_BASIC_CUSTOM_TEXT_MSG,"",c.CONF_GENERAL_BASIC_CUSTOM_PLACEHOLDER);if(!p){s.style.value=localStorage.wmpotifyStyle||"auto";return}Ae=m,Ie=f,xe=p}}),s.controlStyle.addEventListener("change",async()=>{if(s.controlStyle.value==="custom"){try{await xt()===-1&&(s.controlStyle.value=localStorage.wmpotifyControlStyle||"aero")}catch{s.controlStyle.value=localStorage.wmpotifyControlStyle||"aero"}return}if(document.getElementById("wmpotify-scheme")?.remove(),delete localStorage.wmpotifyCustomScheme,delete document.documentElement.dataset.wmpotifyFlatMenus,localStorage.wmpotifyControlStyle=s.controlStyle.value,document.documentElement.dataset.wmpotifyControlStyle=s.controlStyle.value,localStorage.wmpotifyTintColor){let[m,f,p,E]=localStorage.wmpotifyTintColor.split(",");H(m,f,p,E)}}),s.darkMode.addEventListener("change",async()=>{let m=s.darkMode.value,f=window.matchMedia("(prefers-color-scheme: dark)");if(m==="system"&&!y.getModule()?.initialOptions.noforceddarkmode&&f.matches){let p="CONF_GENERAL_DARK_MODE_SYSTEM_MSG_"+(navigator.userAgent.includes("Windows")?"WIN":"UNIX");if(!await Ce(c.CONF_GENERAL_DARK_MODE_SYSTEM,c[p])){s.darkMode.value=localStorage.wmpotifyDarkMode||"follow_scheme";return}}if(localStorage.wmpotifyDarkMode=m,m==="always"||m==="follow_scheme"&&window.Spicetify?.Config?.color_scheme==="dark"||m==="system"&&f.matches?document.documentElement.dataset.wmpotifyDarkMode=!0:delete document.documentElement.dataset.wmpotifyDarkMode,m==="system"?V.addSystemDarkModeListener():V.removeSystemDarkModeListener(),m==="follow_scheme"?V.addMarketplaceSchemeObserver():V.removeMarketplaceSchemeObserver(),localStorage.wmpotifyTintColor){let[p,E,b,M]=localStorage.wmpotifyTintColor.split(",");H(p,E,b,M)}}),s.fontSelector.addEventListener("change",async()=>{if(delete localStorage.wmpotifyExternalFont,s.fontSelector.value==="custom"){let m=await q(c.CONF_GENERAL_CUSTOM_FONT_DLG_TITLE,c.CONF_GENERAL_CUSTOM_FONT_MSG,"",localStorage.wmpotifyFont||"Segoe UI");if(!m){Ne();return}s.fontCustom.textContent=m,localStorage.wmpotifyFont=m}else if(s.fontSelector.value==="external"){let m=await q(c.CONF_GENERAL_EXTERNAL_FONT_DLG_TITLE,c.CONF_GENERAL_EXTERNAL_FONT_URL_MSG,"","");if(!m){Ne();return}let f=m.match(/family=([^:@&]+)/)?.[1].replaceAll("+"," "),p=await q(c.CONF_GENERAL_EXTERNAL_FONT_DLG_TITLE,c.CONF_GENERAL_EXTERNAL_FONT_NAME_MSG,f||"",f||"");if(!p){Ne();return}Gt(m),s.fontCustom.textContent=p,s.fontSelector.value="custom",localStorage.wmpotifyFont=p,localStorage.wmpotifyExternalFont=m}else if(s.fontCustom.textContent=c.UI_CUSTOM,s.fontSelector.value==="reload"||s.fontSelector.value==="loadsys"){let m;if(s.fontSelector.value==="loadsys"&&globalThis.documentPictureInPicture&&(m=await window.queryLocalFonts(),m.length===0)){So(),Ne();return}delete localStorage.wmpotifyFontCache;let f=s.fontSelector.options.length-s.defaultFontOptionsCount;for(let p=0;p<f;p++)s.fontSelector.options[s.defaultFontOptionsCount].remove();s.fontSelector.value==="loadsys"?Eo(m):kt()}else s.fontSelector.value==="default"?delete localStorage.wmpotifyFont:localStorage.wmpotifyFont=s.fontSelector.value;localStorage.wmpotifyFont?document.documentElement.style.setProperty("--ui-font",localStorage.wmpotifyFont):document.documentElement.style.removeProperty("--ui-font")}),s.pbLeftBtn.addEventListener("change",()=>{switch(s.pbLeftBtn.value){case"hide":localStorage.wmpotifyHidePbLeftBtn=!0,document.body.dataset.hidePbLeftBtn=!0,delete localStorage.wmpotifyRightAlignPbLeftBtn,delete document.body.dataset.rightAlignPbLeftBtn;break;case"left":delete localStorage.wmpotifyHidePbLeftBtn,delete document.body.dataset.hidePbLeftBtn,delete localStorage.wmpotifyRightAlignPbLeftBtn,delete document.body.dataset.rightAlignPbLeftBtn;break;case"right":delete localStorage.wmpotifyHidePbLeftBtn,delete document.body.dataset.hidePbLeftBtn,localStorage.wmpotifyRightAlignPbLeftBtn=!0,document.body.dataset.rightAlignPbLeftBtn=!0}}),s.showLibX.addEventListener("change",()=>{s.showLibX.checked?(localStorage.wmpotifyShowLibX=!0,delete document.body.dataset.hideLibx):(delete localStorage.wmpotifyShowLibX,document.body.dataset.hideLibx=!0,Spicetify.Platform.LocalStorageAPI.setItem(`${I}-sidebar-state`,1))}),h.querySelector("#wmpotify-config-close").addEventListener("click",it),h.querySelector("#wmpotify-config-apply").addEventListener("click",Dt),s.autoUpdates.addEventListener("change",()=>{s.autoUpdates.checked?(delete localStorage.wmpotifyNoUpdateCheck,ye()):localStorage.wmpotifyNoUpdateCheck=!0}),Re=t?.speedModSupported,s.speed=h.querySelector("#wmpotify-config-speed"),s.speedValue=h.querySelector("#wmpotify-config-speed-value"),s.speed.addEventListener("pointerup",ho),h.querySelector("#wmpotify-config-speed-slow").addEventListener("click",be.bind(null,.5)),h.querySelector("#wmpotify-config-speed-normal").addEventListener("click",be.bind(null,1)),h.querySelector("#wmpotify-config-speed-fast").addEventListener("click",be.bind(null,1.4));let r=Spicetify.Player.origin.getState().speed||1;s.speedValue.textContent=Number.isInteger(r)?r+".0":r,s.speedValue.addEventListener("click",async()=>{let m=await q(c.CONF_SPEED_CUSTOM_DLG_TITLE,c.CONF_SPEED_CUSTOM_MSG,r.toString(),"1.0");m&&be(m)});let a=Spicetify.Platform.PlatformData.os_version.split(".")[2]>=22e3;t&&(s.topmost.disabled=!1,s.topmost.value=localStorage.wmpotifyTopMost||"never",s.topmost.addEventListener("change",()=>{localStorage.wmpotifyTopMost=s.topmost.value,s.topmost.value==="always"||s.topmost.value==="minimode"&&K.isMiniMode()?y.setTopMost(!0):y.setTopMost(!1)}),s.lockTitle.disabled=!1,s.lockTitle.checked=localStorage.wmpotifyLockTitle,s.lockTitle.addEventListener("change",async()=>{if(y.lockTitle(s.lockTitle.checked),s.lockTitle.checked)y.setTitle(await Spicetify.AppTitle.get()),localStorage.wmpotifyLockTitle=!0;else{delete localStorage.wmpotifyLockTitle;let m=Spicetify.Player.data?.item.metadata;m&&Spicetify.Player.isPlaying()&&y.setTitle(m.artist_name+" - "+m.title)}}),a&&(s.backdrop.disabled=!1,s.backdrop.value=localStorage.wmpotifyBackdrop||"mica",s.backdrop.addEventListener("change",()=>{localStorage.wmpotifyBackdrop=s.backdrop.value,y.setBackdrop(s.backdrop.value)})),s.whMessage.style.display="none",s.whVer.textContent=", "+c.getString("CONF_ABOUT_CTEWH_VERSION",y.getModule().version)),a||(s.backdrop.style.display="none",s.backdrop.previousElementSibling.style.display="none"),navigator.userAgent.includes("Windows")||(s.topmost.style.display="none",s.topmost.previousElementSibling.style.display="none",s.lockTitle.style.display="none",s.lockTitle.nextElementSibling.style.display="none",s.whMessage.style.display="none"),s.hue.addEventListener("input",Pe),s.sat.addEventListener("input",Pe),s.tintPb.addEventListener("change",Pe),s.tintMore.addEventListener("change",Pe),h.querySelector("#wmpotify-config-color-reset").addEventListener("click",yo),h.querySelector("#wmpotify-config-prev").addEventListener("click",Bt),h.querySelector("#wmpotify-config-next").addEventListener("click",Ht),kt(),localStorage.wmpotifyStyle&&(localStorage.wmpotifyStyle==="basic"&&localStorage.wmpotifyBasicActiveColor&&localStorage.wmpotifyBasicInactiveColor&&localStorage.wmpotifyBasicTextColor?(Ae=localStorage.wmpotifyBasicActiveColor,Ie=localStorage.wmpotifyBasicInactiveColor,xe=localStorage.wmpotifyBasicTextColor,s.style.value="basic_custom"):s.style.value=localStorage.wmpotifyStyle),navigator.userAgent.includes("Windows")||s.titleStyle.querySelector("option[value=keepmenu]").remove(),navigator.userAgent.includes("Linux")&&s.titleStyle.querySelector("option[value=spotify]").remove(),localStorage.wmpotifyTitleStyle&&(s.titleStyle.value=localStorage.wmpotifyTitleStyle),o.matches||(localStorage.wmpotifyControlStyle&&(s.controlStyle.value=localStorage.wmpotifyControlStyle),["follow_scheme","system","always","never"].includes(localStorage.wmpotifyDarkMode)?s.darkMode.value=localStorage.wmpotifyDarkMode:y.getModule()?.initialOptions.noforceddarkmode&&(s.darkMode.value="system")),localStorage.wmpotifyHidePbLeftBtn?s.pbLeftBtn.value="hide":localStorage.wmpotifyRightAlignPbLeftBtn&&(s.pbLeftBtn.value="right"),localStorage.wmpotifyShowLibX&&(h.querySelector("#wmpotify-config-show-libx").checked=!0),localStorage.wmpotifyNoUpdateCheck&&(s.autoUpdates.checked=!1);let i=0,l=!1;s.topborder.addEventListener("pointerdown",function(){l=!0,i=h.getBoundingClientRect().bottom,document.body.style.cursor="ns-resize"},!0),document.addEventListener("pointerup",function(){l&&(l=!1,document.body.style.cursor="",h.offsetHeight<24&&(h.style.height="24px"),localStorage.wmpotifyConfigHeight=h.style.height)},!0),document.addEventListener("pointermove",function(m){l&&h.offsetHeight>=24&&(h.style.height=i-m.clientY+"px")},!0),e.appendChild(h);let u=setInterval(()=>{try{new Spicetify.Menu.Item(c.MENU_CONF,!1,Ut.open).register(),clearInterval(u)}catch{}},100)}function fo(){if(U){if(document.body.dataset.wmpotifyLibPageOpen||document.querySelector(".QdB2YtfEq0ks5O4QbtwX"))Spicetify.Config.custom_apps.includes("wmpvis")?Spicetify.Platform.History.push({pathname:"/wmpvis"}):Spicetify.Platform.History.push({pathname:"/"});else if(h.style.display==="block"){it();return}if(h.style.display="block",localStorage.wmpotifyTintColor){let[t,e,o,n]=localStorage.wmpotifyTintColor.split(",");s.hue.value=parseInt(t)+180,s.sat.value=parseInt(e)*121/100,o&&(s.tintPb.checked=!0),n&&(s.tintMore.checked=!0)}}}function it(){h.style.display="none"}function rt(t){if(U){for(let e=0;e<U.length;e++){let o=U[e];o.style.display=e===t?"block":"none"}nt=t,s.title.textContent=U[t].dataset.tabTitle}}function Bt(){let t=(nt-1+U.length)%U.length;U[t].dataset.whSpeedmodRequired&&!Re&&!document.querySelector('button[data-testid="control-button-playback-speed"]')&&t--,rt(t)}function Ht(){let t=(nt+1)%U.length;U[t].dataset.whSpeedmodRequired&&!Re&&!document.querySelector('button[data-testid="control-button-playback-speed"]')&&t++,rt(t)}function Pe(){let t=s.hue.value-180,e=s.sat.value*100/121;H(t,e,s.tintPb.checked,s.tintMore.checked),localStorage.wmpotifyTintColor=t+","+e+","+(s.tintPb.checked?"1":"")+","+(s.tintMore.checked?"1":"")}function yo(){s.hue.value=180,s.sat.value=121,H(),delete localStorage.wmpotifyTintColor}function ho(){s.speedValue.textContent=Number.isInteger(parseFloat(s.speed.value))?s.speed.value+".0":s.speed.value,Oe&&clearTimeout(Oe),Oe=setTimeout(()=>{be(s.speed.value),Oe=null},500)}function be(t){let e=document.querySelector('button[data-testid="control-button-playback-speed"]');if(!Re&&!e){Spicetify.showNotification(c["CONF_SPEED_UNSUPPORTED_MSG_"+(navigator.userAgent.includes("Windows")?"WIN":"UNIX")]);return}if(Spicetify.Platform.ConnectAPI.state.connectionStatus==="connected"&&!e){Spicetify.showNotification(c.CONF_SPEED_NO_CONNECT_MSG);return}t=parseFloat(t);let o=Spicetify.Player.origin.getState().speed||1;if(t!==o){if(t<=0||t>5){Spicetify.showNotification(c.CONF_SPEED_OUT_OF_RANGE_MSG);return}s.speed.value=t,s.speedValue.textContent=Number.isInteger(t)?t+".0":t;try{e?Spicetify.Player.origin.setSpeed(t):y.setPlaybackSpeed(t)}catch(n){Spicetify.showNotification(n.message)}}}function Dt(){let t=s.style.value,e=s.titleStyle.value;t!=="auto"?(t!=="basic_custom"||!Ae||!Ie||!xe?(delete localStorage.wmpotifyBasicActiveColor,delete localStorage.wmpotifyBasicInactiveColor,delete localStorage.wmpotifyBasicTextColor):(localStorage.wmpotifyBasicActiveColor=Ae,localStorage.wmpotifyBasicInactiveColor=Ie,localStorage.wmpotifyBasicTextColor=xe),localStorage.wmpotifyStyle=t==="basic_custom"?"basic":t):delete localStorage.wmpotifyStyle,e!=="auto"?localStorage.wmpotifyTitleStyle=e:delete localStorage.wmpotifyTitleStyle,location.reload()}function kt(){let t=localStorage.wmpotifyFontCache?.split(",")||[];t.length?(t.forEach(e=>{let o=document.createElement("option");o.textContent=e,o.value=e,e===localStorage.wmpotifyFont&&(o.selected=!0),e==="Segoe UI"?s.fontSelector.insertBefore(o,s.fontSelector.options[s.defaultFontOptionsCount]):s.fontSelector.appendChild(o)}),t.includes(localStorage.wmpotifyFont)||(localStorage.wmpotifyFont?(s.fontSelector.value="custom",s.fontCustom.textContent=localStorage.wmpotifyFont):s.fontSelector.value="default")):(Xe.each(e=>{let o=document.createElement("option");o.textContent=e.name,o.value=e.name,e.name===localStorage.wmpotifyFont&&(o.selected=!0),e.name==="Segoe UI"?s.fontSelector.insertBefore(o,s.fontSelector.options[s.defaultFontOptionsCount]):s.fontSelector.appendChild(o),t.push(e.name)}),Xe.all(()=>{t.includes(localStorage.wmpotifyFont)||(localStorage.wmpotifyFont?(s.fontSelector.value="custom",s.fontCustom.textContent=localStorage.wmpotifyFont):s.fontSelector.value="default"),localStorage.wmpotifyFontCache=t.join(","),s.fontReload.remove(),s.defaultFontOptionsCount--}))}async function Eo(t){let e=[...new Set(t.map(o=>o.family))];for(let o of e){let n=document.createElement("option");n.textContent=o,n.value=o,o===localStorage.wmpotifyFont&&(n.selected=!0),o==="Segoe UI"?s.fontSelector.insertBefore(n,s.fontSelector.options[s.defaultFontOptionsCount]):s.fontSelector.appendChild(n)}e.includes(localStorage.wmpotifyFont)||(localStorage.wmpotifyFont?(s.fontSelector.value="custom",s.fontCustom.textContent=localStorage.wmpotifyFont):s.fontSelector.value="default"),localStorage.wmpotifyFontCache=e.join(",")}function Gt(t){let e=document.getElementById("wmpotify-external-font");e||(e=document.createElement("link"),e.rel="stylesheet",document.body.appendChild(e)),e.href=t}async function So(){if(window.documentPictureInPicture){let t=await documentPictureInPicture.requestWindow({width:1e3,height:650});t&&(t.document.body.innerHTML=`
                <style>
                    html { background-color: white }
                    body { color: black; margin: 8px !important }
                    * { font-family: sans-serif }
                    p { max-width: calc(100% - 20px); -webkit-app-region: drag }
                    a { color: LinkText; text-decoration: none }
                    a:hover { text-decoration: underline }
                    button { color: black; position: fixed; top: 5px; right: 5px; padding-inline: 6px }
                    @media (prefers-color-scheme: dark) {
                        html { background-color: black }
                        body { color: white }
                        a { color: dodgerblue }
                    }
                </style>
                <button onclick="window.popup?.close();window.close()">X</button>
                <p>${c.CONF_GENERAL_FONT_PERM_RECOVERY_DESC}</p>
                <div style="display: flex">
                    <img src="https://raw.githubusercontent.com/Ingan121/WMPotify/refs/heads/master/screenshots/fonts_perm_recovery.png">
                    <div style="margin-left: 5px">
                        1. <a href="javascript:window.popup=open('https://xpui.app.spotify.com/', 'popup', 'width=700,height=650,top=0,left='+screen.width)">${c.CONF_GENERAL_FONT_PERM_RECOVERY_STEP1}</a><br>
                        2. ${c.CONF_GENERAL_FONT_PERM_RECOVERY_STEP2}<br>
                        3. ${c.CONF_GENERAL_FONT_PERM_RECOVERY_STEP3}<br>
                        4. <a href="javascript:window.popup?.close();window.close();">${c.CONF_GENERAL_FONT_PERM_RECOVERY_STEP4}</a><br>
                        5. ${c.CONF_GENERAL_FONT_PERM_RECOVERY_STEP5}<br>
                    </div>
                </div>
            `)}}function Ne(){let t=localStorage.wmpotifyFont;if(!t){s.fontSelector.value="default";return}for(let e of s.fontSelector.options)if(e.value===t){s.fontSelector.value=t;return}s.fontSelector.value="custom"}function Ft(t){if(t.matches){if(s.controlStyle.innerHTML=`
            <option value="classic">${c.CONF_GENERAL_CONTROL_STYLE_HC}</option>
            <option value="custom">${c.CONF_GENERAL_CONTROL_STYLE_CUSTOM}</option>
        `,localStorage.wmpotifyControlStyle!=="custom"?(s.controlStyle.value="classic",document.documentElement.dataset.wmpotifyControlStyle="classic"):s.controlStyle.value="custom",s.darkMode.innerHTML=`
            <option value="never">${c.CONF_GENERAL_CONTROL_STYLE_HC}</option>
        `,s.darkMode.value="never",s.darkMode.disabled=!0,s.tintPb.disabled=!0,s.tintMore.disabled=!0,localStorage.wmpotifyTintColor){let[e,o,n,r]=localStorage.wmpotifyTintColor.split(",");H(e,o,!1,!1)}}else{s.controlStyle.innerHTML=`
            <option value="classic">${c.CONF_GENERAL_CONTROL_STYLE_CLASSIC}</option>
            <option value="standard">${c.CONF_GENERAL_CONTROL_STYLE_STANDARD}</option>
            <option value="xp">Windows XP</option>
            <option value="aero" selected>Windows Aero</option>
            <option value="10">Windows 10</option>
            <option value="custom">${c.CONF_GENERAL_CONTROL_STYLE_CUSTOM}</option>
        `,s.controlStyle.value=localStorage.wmpotifyControlStyle||"aero",document.documentElement.dataset.wmpotifyControlStyle=s.controlStyle.value,s.darkMode.innerHTML=`
            <option value="follow_scheme" selected>${c.CONF_GENERAL_DARK_MODE_FOLLOW_SCHEME}</option>
            <option value="system">${c.CONF_GENERAL_DARK_MODE_SYSTEM}</option>
            <option value="always">${c.CONF_GENERAL_DARK_MODE_ALWAYS}</option>
            <option value="never">${c.CONF_GENERAL_DARK_MODE_NEVER}</option>
        `,s.darkMode.disabled=!1;let e=y.getModule()?.initialOptions.noforceddarkmode?"system":"follow_scheme";if(s.darkMode.value=localStorage.wmpotifyDarkMode||e,s.tintPb.disabled=!1,s.tintMore.disabled=!1,localStorage.wmpotifyTintColor){let[o,n,r,a]=localStorage.wmpotifyTintColor.split(",");H(o,n,r,a)}}}var Ut={init:po,open:fo,close:it,openTab:rt,prevTab:Bt,nextTab:Ht,apply:Dt,isOpen:()=>h.style.display==="block",applyExternalFont:Gt,elements:s},le=Ut;var qt=null,at=class{static toggleMiniMode(){if(y.available())if(lt()){let e=localStorage.wmpotifyPreMiniModeSize?.split(",");e&&e.length===2&&window.resizeTo(parseInt(e[0]),parseInt(e[1]))}else document.fullscreenElement&&document.exitFullscreen(),y.query().isMaximized&&y.maximizeRestore(),localStorage.wmpotifyPreMiniModeSize=[window.outerWidth,window.outerHeight],y.resizeTo(358,60)}static toggleFullscreen(){if(document.fullscreenElement)document.exitFullscreen(),ke();else{if(Spicetify.Config.custom_apps.includes("wmpvis"))Spicetify.Platform.History.push({pathname:"/wmpvis"});else{let e=document.querySelector('.main-nowPlayingBar-extraControls button[data-testid="lyrics-button"]');e&&e.click()}le.close(),document.documentElement.requestFullscreen(),document.body.classList.add("wmpotify-playerbar-visible"),setTimeout(()=>{document.addEventListener("pointermove",st),st()},200)}document.addEventListener("fullscreenchange",()=>{document.fullscreenElement||ke()},{once:!0}),document.addEventListener("resize",()=>{ke()},{once:!0})}static isMiniMode=lt};function lt(){let t=!!document.querySelector("#wmpotify-title-bar");return window.innerWidth<360&&window.innerHeight<(t?92:62)}function st(){if(!document.fullscreenElement){ke();return}document.body.classList.add("wmpotify-playerbar-visible"),clearTimeout(qt),qt=setTimeout(()=>{document.body.classList.remove("wmpotify-playerbar-visible")},2e3)}function ke(){document.body.classList.remove("wmpotify-playerbar-visible"),document.removeEventListener("pointermove",st)}window.addEventListener("resize",()=>{localStorage.wmpotifyTopMost==="minimode"&&y.setTopMost(lt())});var K=at;var ct=class{constructor(){this.playerBar=document.querySelector(".main-nowPlayingBar-nowPlayingBar"),this.setupTrackInfoWidget(),new MutationObserver(this.setupTrackInfoWidget.bind(this)).observe(document.querySelector(".main-nowPlayingBar-left"),{childList:!0});let e=document.querySelector(".player-controls__left"),o=document.createElement("button"),n=["playback-control.enable-repeat","playback-control.enable-repeat-one","playback-control.disable-repeat"],r=Spicetify.Player.getRepeat(),a=Spicetify.Platform.Translations[n[r]];o.setAttribute("aria-label",a),o.setAttribute("aria-checked",!!r),o.id="wmpotify-repeat-button",o.addEventListener("click",()=>{Spicetify.Player.toggleRepeat()}),Spicetify.Tippy(o,{...Spicetify.TippyProps,content:a}),Spicetify.Platform.PlayerAPI._events.addListener("update",({data:v})=>{o.setAttribute("aria-checked",!!v.repeat);let T=Spicetify.Platform.Translations[n[v.repeat]];o.setAttribute("aria-label",T),o._tippy.setContent(T)}),e.appendChild(o);let i=y.query(),l=document.querySelector('.player-controls__buttons button[data-testid="control-button-skip-back"]'),u=document.querySelector('.player-controls__buttons button[data-testid="control-button-skip-forward"]');l&&(l.addEventListener("contextmenu",v=>{Spicetify.Player.seek(Spicetify.Player.getProgress()-15e3),v.preventDefault()}),Spicetify.Platform.Translations["playback-control.skip-back"]+=`
`+c.PB_TOOLTIP_SEEK_BK),u&&(u.addEventListener("contextmenu",v=>{Spicetify.Player.seek(Spicetify.Player.getProgress()+15e3),v.preventDefault()}),Spicetify.Platform.Translations["playback-control.skip-forward"]+=`
`+c.PB_TOOLTIP_SEEK_FWD,i?.speedModSupported&&i.immediateSpeedChange&&(u.addEventListener("pointerdown",()=>{u.disabled||Spicetify.Platform.ConnectAPI.state.connectionStatus==="connected"||(this.longPressTimer=setTimeout(()=>{u.dataset.fastForward=!0,y.setPlaybackSpeed(5),Spicetify.Player.play()},1e3))}),document.addEventListener("pointerup",v=>{clearTimeout(this.longPressTimer),u.dataset.fastForward&&(delete u.dataset.fastForward,y.setPlaybackSpeed(1),v.preventDefault(),v.stopPropagation())}),Spicetify.Platform.Translations["playback-control.skip-forward"]+=`
`+c.PB_TOOLTIP_FF));let m=document.createElement("button");m.setAttribute("aria-label",c.PB_TOOLTIP_STOP),m.id="wmpotify-stop-button",m.addEventListener("click",()=>{Spicetify.Platform.PlayerAPI.clearQueue(),Spicetify.Player.playUri("")}),Spicetify.Tippy(m,{...Spicetify.TippyProps,content:c.PB_TOOLTIP_STOP}),e.appendChild(m);let f=document.querySelector(".player-controls__right"),p=document.querySelector(".volume-bar");this.volumeButton=p.querySelector(".volume-bar__icon-button"),this.volumeBarProgress=p.querySelector(".progress-bar"),this.updateVolumeIcon(),new MutationObserver(this.updateVolumeIcon.bind(this)).observe(this.volumeBarProgress,{attributes:!0,attributeFilter:["style"]}),f.appendChild(p);let E=document.querySelector(".volume-bar__slider-container"),b=E.children[0];if(E.addEventListener("click",()=>{if(window.innerWidth<750){b.dataset.visible=!0;let v=setTimeout(()=>{delete b.dataset.visible},5e3);b.addEventListener("pointerup",()=>{clearTimeout(v),setTimeout(()=>{delete b.dataset.visible},100)},{once:!0})}}),this.timeTexts=document.querySelectorAll(".playback-bar [class*=encore-text]"),this.timeTextContainer=document.createElement("div"),this.timeTextContainer.classList.add("wmpotify-time-text-container"),this.timeText=document.createElement("span"),this.timeText.classList.add("wmpotify-time-text"),this.timeTextMode=parseInt(localStorage.wmpotifyTimeTextMode||0),this.updateTimeText(),this.timeText.dataset.mode=this.timeTextMode,this.timeText.addEventListener("click",()=>{this.timeTextMode=(this.timeTextMode+1)%3,this.timeText.dataset.mode=this.timeTextMode,localStorage.wmpotifyTimeTextMode=this.timeTextMode}),this.timeTextContainer.appendChild(this.timeText),this.playerBar.insertAdjacentElement("afterbegin",this.timeTextContainer),Spicetify.Player.addEventListener("onprogress",this.updateTimeText.bind(this)),this.titlebar=document.querySelector("#wmpotify-title-bar"),this.titleButtons=document.querySelector("#wmpotify-title-buttons"),this.titlebar&&(this.updateTimeTextMiniMode(),window.addEventListener("resize",this.updateTimeTextMiniMode.bind(this))),i){let v=new Spicetify.Playbar.Button(c.PB_BTN_MINI_MODE,"",()=>K.toggleMiniMode());v.element.id="wmpotify-mini-mode-button"}let M=new Spicetify.Playbar.Button(c.PB_BTN_FULLSCREEN,"",()=>K.toggleFullscreen());M.element.id="wmpotify-fullscreen-button"}async setupTrackInfoWidget(){let e=!!document.querySelector("#wmpotify-title-bar"),o=y.available(),n=await Spicetify.AppTitle.get(),r=document.querySelector("#wmpotify-title-text"),a=document.querySelector(".main-nowPlayingWidget-trackInfo");if(!a||document.querySelector(".wmpotify-track-info"))return;let i=document.createElement("p");i.classList.add("wmpotify-track-info"),i.textContent=document.querySelector(".main-trackInfo-name")?.textContent||"",a.appendChild(i),window.innerWidth<420&&window.innerHeight<(e?92:62)&&(e?r.textContent=i.textContent:o&&y.setTitle(i.textContent),this.titleSet=!0);let l=1;setInterval(()=>{if(!Spicetify.Player.isPlaying())return;let u=Spicetify.Player.data?.item.metadata;u&&(l===0?i.textContent=u.title:l===1?i.textContent=u.artist_name:l===2&&(i.textContent=u.album_title),l=(l+1)%3,window.innerWidth<420&&window.innerHeight<(e?92:62)?(e?r.textContent=i.textContent:o&&(y.lockTitle(!0),y.setTitle(i.textContent)),this.titleSet=!0):this.titleSet&&(this.titleSet=!1,e&&(r.textContent=n),localStorage.wmpotifyLockTitle||y.lockTitle(!1),Spicetify.Player.isPlaying()&&!localStorage.wmpotifyLockTitle?y.setTitle(u.artist_name+" - "+u.title):y.setTitle(n)))},3e3),Spicetify.Player.addEventListener("songchange",()=>{l=0,i.textContent=Spicetify.Player.data?.item.metadata.title,window.innerWidth<420&&window.innerHeight<(e?92:62)&&(e?r.textContent=i.textContent:o&&y.setTitle(i.textContent),this.titleSet=!0)})}updateTimeTextMiniMode(){window.innerWidth<800?this.titlebar.contains(this.timeText)||(this.titleButtons?this.titlebar.insertBefore(this.timeText,this.titleButtons):this.titlebar.appendChild(this.timeText)):this.playerBar.contains(this.timeText)||this.timeTextContainer.appendChild(this.timeText)}updateVolumeIcon(){let e=getComputedStyle(this.volumeBarProgress).getPropertyValue("--progress-bar-transform").replace("%","")/100;e===0?this.volumeButton.dataset.vol="muted":e<=.3?this.volumeButton.dataset.vol="low":e<=.6?this.volumeButton.dataset.vol="mid":this.volumeButton.dataset.vol="high"}updateTimeText(){switch(this.timeTextMode){case 0:try{let e=Spicetify.Player.data?.item?.metadata?.duration-Spicetify.Player.getProgress();this.timeText.textContent=Le(e,!0)}catch(e){console.error("WMPotify: Error getting remaining time:",e),this.timeText.textContent="00:00"}break;case 1:{let e=this.timeTexts[0].textContent;(e.length===4||e.length===7)&&(e="0"+e),this.timeText.textContent=e}break;case 2:{let e=this.timeTexts[0].textContent;(e.length===4||e.length===7)&&(e="0"+e);let o=this.timeTexts[1].textContent;(o.length===4||o.length===7)&&(o="0"+o),this.timeText.textContent=`${e} / ${o}`}break}}},Wt=ct;var ge=new MutationObserver(se),bo=new ResizeObserver(se.bind(null,!0)),go=new MutationObserver(Vt),dt=class{constructor(){ge.observe(document.documentElement,{attributes:!0,attributeFilter:["style"]}),bo.observe(document.querySelector(".Root__right-sidebar")),go.observe(document.querySelector("#Desktop_LeftSidebar_Id"),{attributes:!0,attributeFilter:["style"]}),window.addEventListener("resize",se),window.addEventListener("load",se),se(!0),Vt()}static updateSidebarWidth=se};function se(t){if(!Spicetify.Platform.History.location.pathname.startsWith("/wmpotify-standalone-libx")&&!t){let n=getComputedStyle(document.documentElement).getPropertyValue("--right-sidebar-width");n&&(ge.disconnect(),document.documentElement.style.setProperty("--panel-width",n),ge.observe(document.documentElement,{attributes:!0,attributeFilter:["style"]}));return}ge.disconnect();let e=document.querySelector(".Root__right-sidebar");document.documentElement.style.setProperty("--panel-width",e?e.offsetWidth:8),getComputedStyle(document.documentElement).getPropertyValue("--right-sidebar-width")&&document.documentElement.style.setProperty("--right-sidebar-width",e?e.offsetWidth:8),e.querySelector("aside")?(document.body.classList.add("sidebar-open"),document.querySelector(".QdB2YtfEq0ks5O4QbtwX")&&!e.querySelector("aside.NowPlayingView")?document.body.classList.add("sidebar-open-in-cinema"):document.body.classList.remove("sidebar-open-in-cinema")):(document.body.classList.remove("sidebar-open"),document.body.classList.remove("sidebar-open-in-cinema")),ge.observe(document.documentElement,{attributes:!0,attributeFilter:["style"]})}function Vt(){let e=document.querySelector("#Desktop_LeftSidebar_Id").style.getPropertyValue("--left-sidebar-width");e&&document.documentElement.style.setProperty("--wmpotify-left-sidebar-width",e)}var ce=dt;var ut;function Fe(){console.log("WMPotify: Trying to initialize queue panel"),ce.updateSidebarWidth(!0);let t=document.querySelector(".Root__right-sidebar > div > div > div:has(aside)");if(t&&!ut&&(ut=new MutationObserver(Fe),ut.observe(t,{childList:!0})),!document.querySelector("#queue-panel")||document.querySelector("#wmpotify-queue-toolbar")||document.querySelectorAll('div[data-encore-id="tabPanel"]').length>2)return;let e=document.querySelector("#Desktop_PanelContainer_Id:has(#queue-panel)"),o=document.querySelector("#Desktop_PanelContainer_Id:not(:has(#queue-panel))");e&&o&&(o.style.display="none"),e.dataset.identifier="spotify-queue-panel";let n=document.querySelector("#Desktop_PanelContainer_Id:has(#queue-panel) > div > div:first-child > div:first-child"),r=document.querySelector("#Desktop_PanelContainer_Id:has(#queue-panel) > div > div:nth-child(2)");r.id="spotify-queue-panel-content";let a=document.createElement("div");a.id="wmpotify-queue-toolbar";let i=document.createElement("button");i.id="wmpotify-queue-playlist-button",i.classList.add("wmpotify-toolbar-button"),i.addEventListener("click",()=>{let T=Spicetify.Player.data?.context?.uri;T&&window.open(T)}),i.textContent=document.querySelector('#queue-panel div[data-flip-id*="section-header-"] a')?.textContent||c.QUEUE_CURRENT_PLAYLIST_PLACEHOLDER,i.innerHTML+='<span class="expandMark">\u23F7</span>',a.appendChild(i);let l=document.createElement("button");l.id="wmpotify-queue-clear-button",l.classList.add("wmpotify-toolbar-button"),l.addEventListener("click",()=>{Spicetify.Platform.PlayerAPI.clearQueue(),Spicetify.Player.playUri("")}),a.appendChild(l),r.insertAdjacentElement("afterbegin",a);let u=getComputedStyle(document.documentElement).getPropertyValue("--album-art-placeholder").trim().slice(5,-2),m=document.createElement("div");m.id="wmpotify-queue-npv";let f=document.createElement("img");f.id="wmpotify-queue-album-art",f.src=document.querySelector(".main-nowPlayingWidget-coverArt .cover-art img")?.src||u,m.appendChild(f);let p=document.createElement("div");p.id="wmpotify-queue-song-title",p.textContent=document.querySelector(".main-trackInfo-name")?.textContent||"No items",m.appendChild(p),n.insertAdjacentElement("afterbegin",m),$t(),new MutationObserver($t).observe(document.querySelector("#queue-panel"),{childList:!0});let E=document.querySelectorAll('#Desktop_PanelContainer_Id:has(#queue-panel) div[role="tablist"] button'),b=[],M;for(let T of E)b.push({text:T.textContent,click:function(){for(let x of M.menuItems)x.classList.remove("activeStyle");this.classList.add("activeStyle"),T.click()}});b[0].classList=["activeStyle"],document.querySelector("#wmpotifyQueueTabMenuBg")?.remove(),M=Z("wmpotifyQueueTab",b);let v=new Y(["wmpotifyQueueTab"]);e.addEventListener("contextmenu",T=>{T.preventDefault(),v.openMenu("wmpotifyQueueTab",{left:T.clientX+"px",top:T.clientY+"px"})}),Spicetify.Player.addEventListener("songchange",()=>{i.textContent=Spicetify.Player.data?.context?.metadata?.context_description||c.QUEUE_CURRENT_PLAYLIST_PLACEHOLDER,i.innerHTML+='<span class="expandMark">\u23F7</span>',f.src=Spicetify.Player.data?.item?.album?.images?.[0]?.url||u,p.textContent=Spicetify.Player.data?.item?.name||c.QUEUE_CURRENT_PLAYLIST_PLACEHOLDER})}function $t(){let t=document.querySelector("#queue-panel > div:first-child");if(!t)return;let e=t?.querySelectorAll("#queue-panel ul")[1];e?(delete t.dataset.nothingInQueue,Yt(),new MutationObserver(Yt).observe(e,{childList:!0})):document.querySelector("#queue-panel > div:first-child > svg:first-child")?t.dataset.nothingInQueue=!0:delete t.dataset.nothingInQueue}function Yt(){if(!document.querySelector("#queue-panel")||!Spicetify.Queue)return;let t=document.querySelectorAll("#queue-panel li .HeaderArea");for(let e=0;e<t.length;e++){let o=t[e];if(o.querySelector(".wmpotify-queue-duration"))continue;let n=e===0?Spicetify.Queue.track?.contextTrack?.metadata?.duration:Spicetify.Queue.nextTracks?.[e-1]?.contextTrack?.metadata?.duration;if(!n)continue;let r=document.createElement("span");r.classList.add("wmpotify-queue-duration"),r.textContent=Le(n),o.appendChild(r)}}async function Be(t){let e=document.querySelector('section[data-test-uri^="spotify:artist:"]');if(!e){t&&(await _e.waitForPageRender(),Be(!1));return}await zt(e);let o=e.querySelector(".artist-artistDiscography-topBar")||e.querySelector("section div:has(> .x-sortBox-sortDropdown)");if(o?(o.dataset.identifier="discography-topbar",document.querySelector(".main-topBar-topbarContent").appendChild(o)):o=document.querySelector('[data-identifier="discography-topbar"]'),!o)return;e.querySelector(".artist-artistDiscography-cardGrid")&&await zt(e,!0);let n=o.querySelector("a").textContent,r=e.dataset.testUri,a=e.querySelectorAll(".artist-artistDiscography-headerContainer");for(let f of a){if(f.querySelector(".artist-artistDiscography-headerTitle + div a"))continue;let p=f.querySelector(".main-entityHeader-image");if(!p)continue;p.addEventListener("dblclick",()=>{f.querySelector(".artist-artistDiscography-headerButtons div button").click()}),p.addEventListener("contextmenu",async b=>{f.querySelector(".artist-artistDiscography-headerButtons > button:last-child").click(),b.preventDefault(),b.stopPropagation(),await _o();let M=document.querySelector("[data-tippy-root]");M.dataset.wmpotifyForceTransform=!0,M.style.setProperty("--tippy-force-transform",`translate(${b.clientX}px, ${b.clientY}px)`)});let E=document.createElement("a");E.href=r,E.textContent=n,f.querySelector(".artist-artistDiscography-headerTitle + div").appendChild(E)}let i=e.querySelectorAll(".artist-artistDiscography-tracklist");for(let f of i){if(f.querySelector(".wmpotify-discography-trackList-header"))continue;let p=f.querySelector('[role="grid"]');if(!p)continue;let E=p.getAttribute("aria-label"),b=document.createElement("div");b.className="wmpotify-discography-trackList-header",b.textContent=E,f.insertAdjacentElement("afterbegin",b)}let l=new MutationObserver(()=>{Be(!1),l.disconnect()}),u=!1,m=e.querySelector('[data-testid="infinite-scroll-list"]');m||(m=e.querySelector("section"),u=!0),l.observe(m,{childList:!0,subtree:u})}function zt(t,e){if(!t.querySelector(".artist-artistDiscography-tracklist")&&(e||!t.querySelector(".artist-artistDiscography-cardGrid")))return new Promise(o=>{let n=new MutationObserver(()=>{(t.querySelector(".artist-artistDiscography-tracklist")||!e&&t.querySelector(".artist-artistDiscography-cardGrid"))&&(n.disconnect(),o())});n.observe(t,{childList:!0,subtree:!0})})}function _o(){return new Promise(t=>{let e=new MutationObserver(()=>{document.querySelector("[data-tippy-root]")&&(e.disconnect(),t())});e.observe(document.body,{childList:!0})})}var He=null;async function mt(){let t=document.querySelector("main [role=presentation]");if(!t)return;let e=t.querySelector(".main-actionBar-ActionBarRow > div:last-child"),o=document.querySelector(".main-topBar-topbarContent");if(!e||!o)return;console.log("WMPotify: Initializing playlist page"),e.id="playlist-search-box-container";let n=e.parentElement;He&&He.disconnect(),He=new MutationObserver(a=>{for(let i of a)if(i.type==="attributes"&&i.attributeName==="class"){let l=i.target;l.classList.contains("main-entityHeader-topbarContentFadeIn")?l.appendChild(e):n.appendChild(e)}}),He.observe(o,{attributes:!0,attributeFilter:["class"]});let r=t.querySelector(".main-trackList-trackListHeaderRow");if(r){for(let a of r.querySelectorAll(":scope > div"))if(a.querySelector("button")){a.classList.add("has-button"),(a.querySelector('svg:has(path[d="m14 6-6 6-6-6h12z"])')||a.querySelector('svg:has(path[d="M14 10 8 4l-6 6h12z"])'))&&a.classList.add("selected");let i=new MutationObserver(()=>{i.disconnect(),a.querySelector('svg:has(path[d="m14 6-6 6-6-6h12z"])')||a.querySelector('svg:has(path[d="M14 10 8 4l-6 6h12z"])')?a.classList.add("selected"):a.classList.remove("selected"),i.observe(a,{childList:!0,subtree:!0})});i.observe(a,{childList:!0,subtree:!0})}}}var pt=0,De=null,de={waitForPageRender(){return new Promise(t=>{let e=new MutationObserver(()=>{document.querySelector(".main-loadingPage-container")||(t(),e.disconnect())});e.observe(document.querySelector(".main-view-container__scroll-node-child main"),{childList:!0})})},async onLocChange(t){if(t?.pathname&&!(pt&&Date.now()-pt<2e3)){if(document.documentElement.dataset.page=t.pathname,ce.updateSidebarWidth(!0),t.pathname.startsWith("/wmpotify-standalone-libx")){document.body.dataset.wmpotifyLibPageOpen=!0;let e=D.getItem(`${I}-sidebar-state`),o=D.getItem(te);Spicetify.Platform.LocalStorageAPI.setItem(`${I}-sidebar-state`,2),Spicetify.Platform.LocalStorageAPI.setItem(te,0),D.setItem(`${I}-sidebar-state`,e),D.setItem(te,o),await ae.init()||Spicetify.Platform.History.action==="POP"&&ae.go()}else if(document.body.dataset.wmpotifyLibPageOpen)if(delete document.body.dataset.wmpotifyLibPageOpen,ae.uninit(),localStorage.wmpotifyShowLibX){let e=D.getItem(`${I}-sidebar-state`);D.removeItem(`${I}-sidebar-state`);let o=D.getItem(te);D.removeItem(te),Spicetify.Platform.LocalStorageAPI.setItem(`${I}-sidebar-state`,parseInt(e)),Spicetify.Platform.LocalStorageAPI.setItem(te,parseInt(o))}else Spicetify.Platform.LocalStorageAPI.setItem(`${I}-sidebar-state`,1);t.pathname.match("/artist/.*/discography.*")&&Be(!0)}},async onMainContentMount(){console.debug("WMPotify: onMainContentMount"),mt(!0),De&&De.disconnect();let t=document.querySelector('div[data-testid="topbar-content-wrapper"]');t&&(De=new MutationObserver(de.onMainContentMount),De.observe(t,{childList:!0}))},init(){de.onLocChange(Spicetify.Platform.History.location),pt=Date.now(),Spicetify.Platform.History.listen(t=>de.onLocChange(t)),new MutationObserver(de.onMainContentMount).observe(document.querySelector("main"),{childList:!0}),new MutationObserver(de.onMainContentMount).observe(document.querySelector(".Root__main-view"),{childList:!0})},initPlaylistPage:mt},_e=de;var Kt=[".Root__globalNav",".main-globalNav-historyButtons",".main-globalNav-searchSection",".main-globalNav-searchContainer > button",".main-globalNav-searchContainer div form button",'.main-globalNav-searchContainer div form input[type="search"]',".main-topBar-topbarContentRight > .main-actionButtons > button",".main-topBar-topbarContentRight > button:last-child",".Root__main-view",".main-view-container__scroll-node-child main",".main-nowPlayingBar-nowPlayingBar",".player-controls__left",'.player-controls__buttons button[data-testid="control-button-playpause"]',".player-controls__right",".playback-bar [class*=encore-text]",".volume-bar",".volume-bar__icon-button",".volume-bar .progress-bar",".main-nowPlayingBar-left"],wo=performance.now(),oe="xp",B="spotify";function vo(){localStorage.wmpotifyShowLibX||(document.body.dataset.hideLibx=!0),y.init();let t=y.query();t&&(localStorage.wmpotifyTopMost==="always"||localStorage.wmpotifyTopMost==="minimode"&&K.isMiniMode()?y.setTopMost(!0):y.setTopMost(!1)),localStorage.wmpotifyTitleStyle&&["native","custom","spotify","keepmenu"].includes(localStorage.wmpotifyTitleStyle)?B=localStorage.wmpotifyTitleStyle:(console.log("WMPotify EarlyInit:",window.SpotEx,t),window.outerHeight-window.innerHeight>0||t?.options?.showframe||navigator.userAgent.includes("Linux")?B="native":(window.SpotEx||t)&&(B="custom")),B==="keepmenu"&&!navigator.userAgent.includes("Windows")&&(B="spotify"),B==="spotify"&&navigator.userAgent.includes("Linux")&&(B="native"),document.documentElement.dataset.wmpotifyTitleStyle=B,B!=="native"&&Ye.earlyInit();let e=window.matchMedia("(forced-colors: active)");switch(!localStorage.wmpotifyStyle&&B==="native"&&(e.matches?oe="basic":t&&t.isThemingEnabled&&(y.getModule()?.initialOptions.transparentrendering&&t.isDwmEnabled?oe="aero":t.isDwmEnabled||(oe="basic"))),localStorage.wmpotifyStyle&&["xp","aero","basic"].includes(localStorage.wmpotifyStyle)&&(oe=localStorage.wmpotifyStyle),y.setMinSize(358,B==="native"?60:90),oe){case"xp":y.extendFrame(0,0,0,0);break;case"aero":y.extendFrame(0,0,0,60);break;case"basic":y.extendFrame(0,0,0,0),localStorage.wmpotifyBasicTextColor&&document.body.style.setProperty("--basic-pb-text",localStorage.wmpotifyBasicTextColor),localStorage.wmpotifyBasicActiveColor&&document.body.style.setProperty("--basic-pb-active-bg",localStorage.wmpotifyBasicActiveColor),localStorage.wmpotifyBasicInactiveColor&&document.body.style.setProperty("--basic-pb-inactive-bg",localStorage.wmpotifyBasicInactiveColor),document.hasFocus()?document.body.style.backgroundColor="var(--basic-pb-active-bg, #b9d1ea)":document.body.style.backgroundColor="var(--basic-pb-inactive-bg, #d7e4f2)",window.addEventListener("focus",()=>{document.body.style.backgroundColor="var(--basic-pb-active-bg, #b9d1ea)"}),window.addEventListener("blur",()=>{document.body.style.backgroundColor="var(--basic-pb-inactive-bg, #d7e4f2)"});break}document.documentElement.dataset.wmpotifyStyle=oe,document.documentElement.dataset.wmpotifyControlStyle=localStorage.wmpotifyControlStyle||"aero",localStorage.wmpotifyCustomScheme&&Se(localStorage.wmpotifyCustomScheme),window.addEventListener("resize",()=>{oe==="aero"&&(window.innerHeight<62?y.extendFrame(-1,-1,-1,-1):y.extendFrame(0,0,0,60)),y.setMinSize(358,B==="native"?60:90)}),localStorage.wmpotifyExternalFont&&le.applyExternalFont(localStorage.wmpotifyExternalFont),localStorage.wmpotifyFont&&document.documentElement.style.setProperty("--ui-font",localStorage.wmpotifyFont),localStorage.wmpotifyHidePbLeftBtn&&(document.body.dataset.hidePbLeftBtn=!0),localStorage.wmpotifyRightAlignPbLeftBtn&&(document.body.dataset.rightAlignPbLeftBtn=!0),t&&localStorage.wmpotifyLockTitle&&y.lockTitle(!0);let o="follow_scheme";["follow_scheme","system","always","never"].includes(localStorage.wmpotifyDarkMode)?o=localStorage.wmpotifyDarkMode:y.getModule()?.initialOptions.noforceddarkmode&&(o="system");let n=window.matchMedia("(prefers-color-scheme: dark)");(o==="always"||o==="follow_scheme"&&window.Spicetify?.Config?.color_scheme==="dark"||o==="system"&&n.matches)&&(document.documentElement.dataset.wmpotifyDarkMode=!0),o==="system"?V.addSystemDarkModeListener():o==="follow_scheme"&&V.addMarketplaceSchemeObserver(),jt("WMPotify: earlyInit end")}vo();globalThis.WMPotify={ver:z,Strings:c,Config:le,WindowManager:K,ThemeManager:V,PageManager:_e,WindhawkComm:y,CustomLibX:ae,Dialog:{openUpdateDialog:fe,openWmpvisInstallDialog:Te,promptModal:q,confirmModal:Ce},MadMenu:{createMadMenu:Z,MadMenu:Y},MadVersion:ne,setTintColor:H,checkUpdates:ye};async function Co(){await Ye.init(B),y.available()&&localStorage.wmpotifyLockTitle&&y.setTitle(await Spicetify.AppTitle.get()),localStorage.wmpotifyShowLibX||Spicetify.Platform.LocalStorageAPI.setItem(`${I}-sidebar-state`,1),Spicetify.Platform.PlatformData.os_version?.split(".")[2]>=22e3&&localStorage.wmpotifyBackdrop!=="none"&&y.setBackdrop(localStorage.wmpotifyBackdrop||"mica"),_e.init(),new ce,le.init(),globalThis.WMPotify.topbar=new wt,globalThis.WMPotify.playerBar=new Wt,Fe(),new MutationObserver(Fe).observe(document.querySelector(".XOawmCGZcQx4cesyNfVO")||document.querySelector(".Root__right-sidebar > div > div[class]:first-child")||document.querySelector(".Root__right-sidebar div[class]"),{childList:!0}),(!localStorage.wmpotifyLastVer||z.compare(localStorage.wmpotifyLastVer)<0)&&fe(!0,z.toString(0)),localStorage.wmpotifyLastVer=z.toString(0),localStorage.wmpotifyNoUpdateCheck||ye()}async function ft(){try{await Co(),jt("WMPotify: Theme loaded"),document.documentElement.dataset.wmpotifyInitComplete=!0}catch(t){console.error("WMPotify: Error during init:",t);let e="[WMPotify] "+c.MAIN_MSG_ERROR_INIT+`

`+t.stack;window.confirm(e)&&window.location.reload(),document.documentElement.dataset.wmpotifyJsFail=!0}}function yt(){return window.Spicetify?.Platform?.PlayerAPI&&window.Spicetify.AppTitle&&window.Spicetify.Menu&&window.Spicetify.Platform.History?.listen&&window.Spicetify.Platform.LocalStorageAPI&&window.Spicetify.Platform.Translations&&window.Spicetify.Platform.PlatformData&&window.Spicetify.Player.origin?._state?.repeat!=null?!!Kt.every(t=>document.querySelector(t)):null}document.readyState==="complete"&&Xt();window.addEventListener("load",()=>{Xt()});function Xt(){let t=0;yt()?ft():Spicetify.Events.platformLoaded.on(()=>{if(yt())ft();else{let e=setInterval(()=>{let o=yt();if(o)clearInterval(e),ft();else if(t++>80){if(ie("1.2.45")<0)(window.Spicetify?.showNotification||window.alert)("[WMPotify] "+c.MAIN_MSG_ERROR_OLD_SPOTIFY);else if(ie("1.2.45")===0&&!document.querySelector(".Root__globalNav"))window.confirm("[WMPotify] "+c.MAIN_MSG_ERROR_LOAD_FAIL_GLOBALNAV)&&window.location.reload();else{let n="[WMPotify] "+c.MAIN_MSG_ERROR_LOAD_FAIL+`

`,r="";o===!1?r+=`Missing elements:
`+Kt.filter(a=>!document.querySelector(a)).join(`
`):r+=`Missing API objects:
`+Object.entries({"Spicetify.Platform.PlayerAPI":window.Spicetify?.Platform?.PlayerAPI,"Spicetify.AppTitle":window.Spicetify.AppTitle,"Spicetify.Menu":window.Spicetify.Menu,"Spicetify.Platform.History.listen":window.Spicetify.Platform.History?.listen,"Spicetify.Platform.LocalStorageAPI":window.Spicetify.Platform.LocalStorageAPI,"Spicetify.Platform.Translations":window.Spicetify.Platform.Translations,"Spicetify.Platform.PlatformData":window.Spicetify.Platform.PlatformData,"Spicetify.Player.origin._state.repeat":window.Spicetify.Player.origin?._state?.repeat!=null}).filter(([a,i])=>!i).map(([a,i])=>a).join(`
`),window.confirm(n+r)&&window.location.reload(),console.error("WMPotify:",r)}document.querySelector(".Root__globalNav")||(document.documentElement.dataset.wmpotifyNoGlobalNav=!0,delete document.body.dataset.hideLibx,console.error("WMPotify: Global nav not found")),clearInterval(e)}},100)}})}document.addEventListener("scroll",function(){document.documentElement.scrollTo(0,0)});function jt(t){let e=performance.now()-wo;console.log(`[${e.toFixed(6)}ms] ${t}`)}})();
