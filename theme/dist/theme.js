"use strict";(()=>{var J=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,i)=>(typeof require<"u"?require:t)[i]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var ce=1,ft={setControlHeight(e){ce=e||1},init(){if(Spicetify.Config.extensions.includes("noControls.js")){Spicetify.showNotification("[WMPotify] Incompatible extension 'No Controls' detected! Some features of WMPotify will be disabled.");return}let e=o=>{o&&(o._updateUiClient?.updateTitlebarHeight&&o._updateUiClient.updateTitlebarHeight({height:ce}),o._updateUiClient?.setButtonsVisibility&&ce<=1&&o._updateUiClient.setButtonsVisibility(!1),window.addEventListener("beforeunload",()=>{o._updateUiClient?.setButtonsVisibility&&o._updateUiClient.setButtonsVisibility({showButtons:!0})})),Spicetify.CosmosAsync.post("sp://messages/v1/container/control",{type:"update_titlebar",height:ce+"px"})};e(Spicetify.Platform.ControlMessageAPI),e(Spicetify.Platform.UpdateAPI);async function t(){e(Spicetify.Platform.ControlMessageAPI),e(Spicetify.Platform.UpdateAPI)}let i=setInterval(t,100);setTimeout(()=>{clearInterval(i)},1e4);let n=()=>{e(Spicetify.Platform.ControlMessageAPI),e(Spicetify.Platform.UpdateAPI)};document.addEventListener("fullscreenchange",n),window.addEventListener("resize",()=>{setTimeout(()=>{n()},100)})}},V=ft;var Le=document.createElement("canvas");Le.width=1;Le.height=1;var ue=Le.getContext("2d");function pt(e,t){return ue.fillStyle="#EEF3FA",ue.filter=`hue-rotate(${e}deg) saturate(${t}%)`,ue.fillRect(0,0,1,1),"rgba("+ue.getImageData(0,0,1,1).data+")"}function Z(e,t,i){if(!e&&!t){document.documentElement.style.setProperty("--spice-main","#EEF3FA"),document.documentElement.style.removeProperty("--wmpotify-tint-hue"),document.documentElement.style.removeProperty("--wmpotify-tint-sat");return}let n=document.querySelector(".main-nowPlayingBar-nowPlayingBar");n&&(i?n.classList.add("tinted"):n.classList.remove("tinted")),document.documentElement.style.setProperty("--spice-main",pt(e,t)),document.documentElement.style.setProperty("--wmpotify-tint-hue",e+"deg"),document.documentElement.style.setProperty("--wmpotify-tint-sat",t/100)}var p=null,Ee=1,yt={init(){return ht()},query(){return p?p.query():null},extendFrame(e,t,i,n){p?.extendFrame&&([e,t,i,n]=[e,t,i,n].map(o=>Math.round(o*window.devicePixelRatio)),Ee>1&&([e,t]=[e&&e-1,t&&t-1],[i,n]=[i&&i-1,n&&n-1]),p.extendFrame(e,t,i,n))},minimize(){p?.minimize&&p.minimize()},maximizeRestore(){p?.maximizeRestore&&p.maximizeRestore()},close(){p?.close&&p.close()},setLayered(e,t,i){p?.setLayered&&p.setLayered(e,t,i)},setBackdrop(e){p?.setBackdrop&&p.setBackdrop(e)},resizeTo(e,t){p?.resizeTo&&p.resizeTo(e,t)},setMinSize(e,t){p?.setMinSize&&([e,t]=[e,t].map(i=>Math.round(i*window.devicePixelRatio)),p.setMinSize(e,t))},setTopMost(e){p?.setTopMost&&p.setTopMost(e)},setTitle(e){p?.setTitle&&p.setTitle(e)},lockTitle(e){p?.lockTitle&&p.lockTitle(e)},openSpotifyMenu(){p?.openSpotifyMenu&&p.openSpotifyMenu()},setPlaybackSpeed(e){p?.setPlaybackSpeed&&p.setPlaybackSpeed(parseFloat(e))},available(){return!!p},getModule(){return p}};function ht(){if(navigator.userAgent.includes("Windows"))try{p=window.cancelEsperantoCall("ctewh"),Ee=p.query().dpi/96;let{version:e,initialOptions:t}=p;return console.log(`CEF/Spotify Tweaks Windhawk mod available, Version: ${e}`),window.addEventListener("resize",()=>{Ee=p.query().dpi/96}),{version:e,initialOptions:t}}catch{p=null,console.log("Windhawk mod not available")}}var f=yt;async function je(e){let t=f.query();switch(e){case"native":V.setControlHeight(0);break;case"custom":V.setControlHeight(0);case"keepmenu":let i=document.createElement("div");if(i.id="wmpotify-title-buttons",window.SpotEx||t){let l=document.createElement("button");l.id="wmpotify-minimize-button",l.addEventListener("click",()=>{window.SpotEx?SpotEx.updateWindow({state:"minimized"}):f.minimize()}),i.appendChild(l);let s=document.createElement("button");s.id="wmpotify-maximize-button",s.addEventListener("click",async()=>{window.SpotEx?(await SpotEx.getWindow()).state==="maximized"?SpotEx.updateWindow({state:"normal"}):SpotEx.updateWindow({state:"maximized"}):f.maximizeRestore()}),i.appendChild(s),window.addEventListener("resize",async()=>{window.SpotEx?(await SpotEx.getWindow()).state==="maximized"?s.dataset.maximized=!0:delete s.dataset.maximized:f.query().isMaximized?s.dataset.maximized=!0:delete s.dataset.maximized})}let n=document.createElement("button");n.id="wmpotify-close-button",n.addEventListener("click",()=>{Ve()}),i.appendChild(n);case"spotify":let o=document.createElement("div");o.id="wmpotify-title-bar";let a=document.createElement("div");a.id="wmpotify-title-icon",a.addEventListener("dblclick",()=>{Ve()}),o.appendChild(a);let r=document.createElement("span");r.id="wmpotify-title-text",r.textContent=await Spicetify.AppTitle.get(),o.appendChild(r),(e==="custom"||e==="keepmenu")&&o.appendChild(i),(e==="keepmenu"||e==="spotify")&&V.setControlHeight(25),document.body.appendChild(o),Spicetify.AppTitle.sub(l=>{r.textContent=l});break}}async function Ve(){f.available()?f.close():window.close()}var j=class{constructor(t=[],i=[]){this.menuOrder=t,this.submenus=i,this.openedMenu=null,this.mouseOverMenu=!1,this.mouseOverSubmenu=!1,this.handlingPointerEvent=!1,this.handlingKeyEvent=!1,this.boundMenuNavigationHandler=this.menuNavigationHandler.bind(this),this.submenuOpenTimer=null,this.submenuCloseTimer=null,this.shouldNotCloseSubmenu=!1,this.menuHierarchy={},this.beforeMenuOpenEvent=new Event("beforemenuopen"),this.afterMenuCloseEvent=new Event("aftermenuclose");for(let n of t){this.menuHierarchy[n]=[];let o=document.getElementById(n+"MenuBg"),a=o.querySelectorAll(".contextMenuItem");for(let r of a)r.dataset.submenu&&this.menuHierarchy[n].push(r.dataset.submenu),r.addEventListener("pointerover",()=>{for(let l of a)delete l.dataset.active;r.dataset.active=!0,clearTimeout(this.submenuOpenTimer),r.dataset.submenu?this.submenuOpenTimer=setTimeout(()=>{this.openMenu(r.dataset.submenu)},300):this.menuHierarchy[n].length>0&&this.delayedCloseMenu(this.menuHierarchy[n][0])}),r.addEventListener("pointerleave",()=>{this.mouseOverSubmenu||(delete r.dataset.active,clearTimeout(this.submenuOpenTimer),r.dataset.submenu&&this.delayedCloseMenu(r.dataset.submenu))}),r.addEventListener("click",()=>{r.dataset.submenu&&!r.classList.contains("disabled")?this.openedMenu.id!==r.dataset.submenu+"MenuBg"?this.openMenu(r.dataset.submenu):document.getElementById(r.dataset.submenu+"MenuBg").focus():r.dataset.noClose||this.closeMenu(n)});o.addEventListener("focusout",r=>{top.ignoreFocusLoss||r.relatedTarget&&r.relatedTarget.dataset.submenuOf===n||this.closeMenu(n)}),o.addEventListener("pointermove",r=>{(r.clientX>0||r.clientY>0)&&(o.style.animation="none")})}for(let n of i){let o=document.getElementById(n+"MenuBg"),a=o.querySelectorAll(".contextMenuItem"),r=document.getElementById(o.dataset.submenuOf+"MenuBg"),l=Array.from(r.querySelectorAll(".contextMenuItem")).findIndex(c=>c.dataset.submenu===n),s=r.querySelectorAll(".contextMenuItem")[l];for(let c of a)c.addEventListener("pointerover",()=>{for(let d of a)delete d.dataset.active;c.dataset.active=!0}),c.addEventListener("pointerleave",()=>{delete c.dataset.active}),c.addEventListener("click",()=>{this.shouldNotCloseSubmenu=!1,this.closeMenu(n),this.closeMenu(o.dataset.submenuOf)});o.addEventListener("pointerover",()=>{this.mouseOverMenu=!0,this.mouseOverSubmenu=!0,this.shouldNotCloseSubmenu=!0,clearTimeout(this.submenuCloseTimer),s.dataset.active=!0}),o.addEventListener("pointerleave",()=>{this.mouseOverMenu=!1,this.mouseOverSubmenu=!1,this.shouldNotCloseSubmenu=!1}),o.addEventListener("focusout",c=>{if(top.ignoreFocusLoss||o.style.display==="none")return;this.shouldNotCloseSubmenu=!1;let d=!!o.dataset.openStandalone;c.relatedTarget&&c.relatedTarget.id&&c.relatedTarget.id===r.id||(this.closeMenu(n),!(c.relatedTarget&&c.relatedTarget.id&&c.relatedTarget.dataset.submenuOf===o.dataset.submenuOf)&&(d||this.closeMenu(o.dataset.submenuOf)))})}}openMenu(t,i){let n=document.getElementById(t+"MenuBg"),o=document.getElementById(t+"Menu"),a=!!n.dataset.submenuOf,r,l,s,c=n.querySelectorAll(".contextMenuItem.debug");if(localStorage.wmpotifyDebugMode){s=n.querySelectorAll(".contextMenuItem:not([data-hidden])");for(let m of c)m.style.display=""}else{s=n.querySelectorAll(".contextMenuItem:not([data-hidden]):not(.debug)");for(let m of c)m.style.display="none"}if(n.dispatchEvent(this.beforeMenuOpenEvent),i)n.dataset.openStandalone=!0;else{if(a){if(this.menuHierarchy[n.dataset.submenuOf].length>1)for(let b of this.menuHierarchy[n.dataset.submenuOf])b!==t&&this.closeMenu(b);if(r=document.getElementById(n.dataset.submenuOf+"MenuBg"),r.style.display==="none")return;let m=Array.from(r.querySelectorAll(".contextMenuItem")).findIndex(b=>b.dataset.submenu===t);if(l=r.querySelectorAll(".contextMenuItem")[m],l.classList.contains("disabled"))return}else for(let m of this.menuOrder)m!==t&&document.getElementById(m+"MenuBg").style.display==="block"&&this.closeMenu(m);delete n.dataset.openStandalone}n.style.animation="";for(let m of s)delete m.dataset.active;if(i)i.top&&(n.style.top=i.top),i.left&&(n.style.left=i.left),i.right&&(n.style.right=i.right),i.bottom&&(n.style.bottom=i.bottom);else{let m="",b=0;a&&(m=r.offsetTop+l.offsetTop,b=r.offsetLeft+r.offsetWidth-6),n.style.top=m+"px",n.style.left=b+"px"}n.style.display="block";let d=this.calcMenuWidth(t);n.style.width=d+")",n.style.minWidth=0,o.style.width=d+" - 2px)",n.style.height=this.calcMenuHeight(t)+"px",i||a&&(l.dataset.active=!0),n.focus(),this.openedMenu=n,document.addEventListener("keydown",this.boundMenuNavigationHandler)}closeMenu(t){let i=document.getElementById(t+"MenuBg"),n=!!i.dataset.openStandalone,o=!!i.dataset.submenuOf&&!n;if(o&&this.shouldNotCloseSubmenu)return;let a,r;if(!n&&o){a=document.getElementById(i.dataset.submenuOf+"MenuBg");let l=Array.from(a.querySelectorAll(".contextMenuItem")).findIndex(s=>s.dataset.submenu===t);r=a.querySelectorAll(".contextMenuItem")[l]}this.submenuCloseTimer&&clearTimeout(this.submenuCloseTimer),i.style.display="none",n?delete i.dataset.openStandalone:o&&delete r.dataset.active,i.dispatchEvent(this.afterMenuCloseEvent),o&&a.style.display!=="none"?(a.focus(),this.openedMenu=a):(this.openedMenu=null,document.removeEventListener("keydown",this.boundMenuNavigationHandler))}delayedCloseMenu(t){this.submenuCloseTimer=setTimeout(()=>{this.closeMenu(t)},300)}menuNavigationHandler(t){if(!this.openedMenu)return;let i;localStorage.wmpotifyDebugMode?i=this.openedMenu.querySelectorAll(".contextMenuItem"):i=this.openedMenu.querySelectorAll(".contextMenuItem:not(.debug)");let n=this.openedMenu.querySelector(".contextMenuItem[data-active]"),o=Array.from(i).indexOf(n),a;switch(this.openedMenu.dataset.submenuOf&&(a=document.getElementById(this.openedMenu.dataset.submenuOf+"MenuBg").querySelector(".contextMenuItem[data-active]")),this.handlingKeyEvent=!0,this.openedMenu.style.animation="none",t.key){case"Escape":this.mouseOverMenu=!1,this.openedMenu.blur();break;case"ArrowUp":n?(delete n.dataset.active,o>0?i[o-1].dataset.active=!0:i[i.length-1].dataset.active=!0):i[i.length-1].dataset.active=!0;break;case"ArrowDown":n?(delete n.dataset.active,o<i.length-1?i[o+1].dataset.active=!0:i[0].dataset.active=!0):i[0].dataset.active=!0;break;case"ArrowLeft":if(this.openedMenu.dataset.submenuOf){this.closeMenu(this.openedMenu.id.slice(0,-6),!0),a.dataset.active=!0;break}if(this.menuOrder.length===1)break;let r=this.menuOrder[(this.menuOrder.indexOf(this.openedMenu.id.slice(0,-6))+this.menuOrder.length-1)%this.menuOrder.length];this.closeMenu(this.openedMenu.id.slice(0,-6)),this.openMenu(r),this.openedMenu.querySelector(".contextMenuItem").dataset.active=!0;break;case"ArrowRight":if(n&&n.dataset.submenu){this.openMenu(n.dataset.submenu),this.openedMenu.querySelector(".contextMenuItem").dataset.active=!0;break}if(this.menuOrder.length===1)break;let l;this.openedMenu.dataset.submenuOf?(l=this.menuOrder[(this.menuOrder.indexOf(this.openedMenu.dataset.submenuOf)+1)%this.menuOrder.length],this.closeMenu(this.openedMenu.id.slice(0,-6))):(l=this.menuOrder[(this.menuOrder.indexOf(this.openedMenu.id.slice(0,-6))+1)%this.menuOrder.length],this.closeMenu(this.openedMenu.id.slice(0,-6))),this.openMenu(l),this.openedMenu.querySelector(".contextMenuItem").dataset.active=!0;break;case"Enter":if(n)n.click();else{this.openedMenu.blur();break}break;default:let s=this.openedMenu.getElementsByTagName("u");for(let c of s)if(t.key===c.textContent.toLowerCase()){c.parentElement.click();break}}this.handlingKeyEvent=!1,t.preventDefault(),t.stopPropagation()}calcMenuWidth(t){let i=document.getElementById(t+"MenuBg"),n;localStorage.wmpotifyDebugMode?n=i.querySelectorAll(".contextMenuItem:not([data-hidden])"):n=i.querySelectorAll(".contextMenuItem:not([data-hidden]):not(.debug)"),i.style.minWidth="";let o=parseInt(getComputedStyle(i).minWidth)||0;return`calc(${Array.from(n).reduce((r,l)=>{let s=l.textContent,c=Te(s);return Math.max(o,r,c)},0)}px + 4.5em`}calcMenuHeight(t){let i=document.getElementById(t+"MenuBg"),n=i.querySelectorAll("hr"),o;localStorage.wmpotifyDebugMode?o=i.querySelectorAll(".contextMenuItem:not([data-hidden])"):o=i.querySelectorAll(".contextMenuItem:not([data-hidden]):not(.debug)");let a=o[0].offsetHeight,r=0;if(n.length>0){let s=getComputedStyle(n[0]);r=n[0].offsetHeight+parseFloat(s.marginTop)+parseFloat(s.marginBottom)}return parseInt(o.length*a+n.length*r)}};function de(e,t,i){let n=document.createElement("div");return n.id=e+"MenuBg",n.className="contextMenuBg",n.tabIndex=-1,n.style.display="none",n.innerHTML=`<div id="${e}Menu" class="contextMenu"></div>`,i&&(n.dataset.submenuOf=i),t.forEach(o=>{if(o.hr){let r=document.createElement("hr");n.querySelector(".contextMenu").appendChild(r);return}let a=document.createElement("div");a.className="contextMenuItem",o.args?a.innerHTML="<p>"+$e(o.text,...o.args)+"</p>":a.innerHTML="<p>"+$e(o.text)+"</p>",o.classList&&a.classList.add(...o.classList),o.disabled&&a.classList.add("disabled"),o.hidden&&(a.dataset.hidden=!0),o.submenu&&(a.dataset.submenu=o.submenu,a.innerHTML+='<p class="submenuMark">\u23F5</p>'),o.noClose&&(a.dataset.noClose=!0),a.addEventListener("click",o.click),n.querySelector(".contextMenu").appendChild(a)}),document.body.appendChild(n),{menuBg:n,menu:n.querySelector(".contextMenu"),menuItems:n.querySelectorAll(".contextMenuItem")}}function Te(e,t=getComputedStyle(document.documentElement).getPropertyValue("--menu-font")){let n=(Te.canvas||(Te.canvas=document.createElement("canvas"))).getContext("2d");return n.font=t,n.measureText(e).width}function $e(e){if(e=e.replace(/&([^&])/g,"<u>$1</u>").replace(/\\&/g,"&"),arguments.length>1)for(let t=1;t<arguments.length;t++)e=e.replace(/%s/,arguments[t]),e=e.replace(`%${t}s`,arguments[t]);return e}var N,W=[],K,bt={"Friend Activity":"Friends"};function Ke(){let e=document.querySelector(".Root__globalNav");N=document.createElement("div"),N.id="wmpotify-tabs-container",e.insertBefore(N,e.querySelector(".main-globalNav-searchSection"));let t=document.querySelector('.custom-navlinks-scrollable_container div[role="presentation"] > button:has(#wmpotify-nowplaying-icon)');t||(t=document.createElement("button"),t.setAttribute("aria-label","Now Playing"),t.addEventListener("click",()=>{window.open("https://github.com/Ingan121/WMPotify/tree/master/CustomApps/wmpvis"),Spicetify.showNotification("Please install this!")})),t.dataset.identifier="now-playing",$(t);let i=document.querySelector(".main-globalNav-searchContainer > button");i.dataset.identifier="home",$(i);let n=document.querySelector(".main-globalNav-searchContainer div form button");n.dataset.identifier="search",n.addEventListener("click",g=>{window.open("spotify:search"),g.preventDefault(),g.stopPropagation()}),$(n);let o=document.createElement("button");o.id="wmpotify-library-button",o.dataset.identifier="library",o.setAttribute("aria-label","Library"),o.addEventListener("click",()=>{Spicetify.Platform.History.push({pathname:"/wmpotify-standalone-libx"})}),$(o),W=[t,i,n,o];let a=document.querySelectorAll('.custom-navlinks-scrollable_container div[role="presentation"] > button');for(let g of a)$(g),W.push(g);let r=document.querySelectorAll(".main-topBar-topbarContentRight > .main-actionButtons > button");for(let g of r)$(g),W.push(g);let l=[];for(let g of W)l.push({text:g.querySelector(".wmpotify-tab-label").textContent,click:()=>g.click()});de("wmpotifyTab",l);let s=new j(["wmpotifyTab"]);K=document.createElement("button"),K.id="wmpotify-tabs-overflow-button",K.addEventListener("click",()=>{s.openMenu("wmpotifyTab",{top:"0",left:K.getBoundingClientRect().left+"px"})}),N.appendChild(K),me(),setTimeout(me,1e3),window.addEventListener("resize",me),document.addEventListener("fullscreenchange",me);let c=document.querySelector(".main-topBar-topbarContentRight > button:last-child"),d=document.createElement("span");d.textContent=c.getAttribute("aria-label"),d.classList.add("wmpotify-user-label"),c.appendChild(d);let m=document.createElement("div");m.id="wmpotify-search-container";let b=document.createElement("div");b.id="wmpotify-search-wrapper";let x=document.querySelector('.main-globalNav-searchContainer div form input[type="search"]');b.appendChild(x);let k=document.createElement("button");k.id="wmpotify-search-clear-button",k.setAttribute("aria-label","Clear search"),k.addEventListener("click",()=>{x.value="",x.focus(),window.open("spotify:search")}),b.appendChild(k),m.appendChild(b),e.appendChild(m),e.addEventListener("pointerdown",g=>{g.button===2&&!g.target.closest("input")&&f.openSpotifyMenu()});let h=getComputedStyle(document.documentElement).getPropertyValue("--right-sidebar-width");h&&document.documentElement.style.setProperty("--panel-width",h)}function $(e){N.appendChild(e);let t=document.createElement("span"),i=e.getAttribute("aria-label");t.textContent=bt[i]||i,t.classList.add("wmpotify-tab-label"),e.appendChild(t)}function me(){let e=document.querySelector(".main-globalNav-historyButtons").getBoundingClientRect().right,t=window.innerWidth-document.querySelector(".main-topBar-topbarContentRight").getBoundingClientRect().left,i=160,n=0;for(;window.innerWidth-e-t-i<N.getBoundingClientRect().width&&n<W.length;)W[W.length-1-n++].dataset.hidden=!0;for(n=document.querySelectorAll("#wmpotify-tabs-container button[data-hidden]").length;n>0&&window.innerWidth-e-t-i>N.getBoundingClientRect().width;)delete W[W.length-n--].dataset.hidden;K.style.display=n>0?"block":""}function fe(e,t){if(!e||isNaN(e))return"00:00";let i=Math.floor(e/1e3),n=Math.floor(i/60);if(i=String(i%60).padStart(2,"0"),n<60)return t&&(n=String(n).padStart(2,"0")),`${n}:${i}`;let o=Math.floor(n/60);return n=String(n%60).padStart(2,"0"),t&&(o=String(o).padStart(2,"0")),`${o}:${n}:${i}`}var Qe=null;function gt(){if(f.available())if(window.innerWidth<360&&window.innerHeight<262){let e=localStorage.wmpotifyPreMiniModeSize?.split(",");e&&e.length===2&&window.resizeTo(parseInt(e[0]),parseInt(e[1]))}else document.fullscreenElement&&document.exitFullscreen(),localStorage.wmpotifyPreMiniModeSize=[window.innerWidth,window.innerHeight],f.resizeTo(358,60)}function wt(){document.fullscreenElement?(document.exitFullscreen(),pe()):(Spicetify.Config.custom_apps.includes("wmpvis")?Spicetify.Platform.History.push("/wmpvis"):lyricsButton&&lyricsButton.click(),document.documentElement.requestFullscreen(),document.body.classList.add("wmpotify-playerbar-visible"),setTimeout(()=>{document.addEventListener("pointermove",Pe),Pe()},200)),document.addEventListener("fullscreenchange",()=>{document.fullscreenElement||pe()},{once:!0}),document.addEventListener("resize",()=>{pe()},{once:!0})}function Pe(){if(!document.fullscreenElement){pe();return}document.body.classList.add("wmpotify-playerbar-visible"),clearTimeout(Qe),Qe=setTimeout(()=>{document.body.classList.remove("wmpotify-playerbar-visible")},2e3)}function pe(){document.body.classList.remove("wmpotify-playerbar-visible"),document.removeEventListener("pointermove",Pe)}var St={toggleMiniMode:gt,toggleFullscreen:wt},ee=St;var ke,ne,qe,ye,D,T,Ye=null,te=!1;function tt(){let e=document.querySelector(".main-nowPlayingBar-nowPlayingBar");ke=document.querySelector(".player-controls__buttons button[data-testid='control-button-playpause']"),Spicetify.Player.addEventListener("onplaypause",ie),new MutationObserver(ie).observe(ke,{attributes:!0,attributeFilter:["aria-label"]}),Je(),new MutationObserver(Je).observe(document.querySelector(".main-nowPlayingBar-left"),{childList:!0});let t=document.querySelector(".player-controls__left"),i=document.querySelector('.player-controls__buttons button[data-testid="control-button-skip-forward"]'),n=document.querySelector('.player-controls__buttons button[data-testid="control-button-repeat"]');t.appendChild(n);let o=f.query();o?.speedModSupported&&o.immediateSpeedChange&&(i.addEventListener("pointerdown",()=>{i.disabled||Spicetify.Platform.ConnectAPI.state.connectionStatus==="connected"||(Ye=setTimeout(()=>{i.dataset.fastForward=!0,f.setPlaybackSpeed(5),Spicetify.Player.play()},1e3))}),i.addEventListener("click",h=>{clearTimeout(Ye),i.dataset.fastForward&&(delete i.dataset.fastForward,f.setPlaybackSpeed(1),h.preventDefault(),h.stopPropagation())}));let a=document.createElement("button");a.setAttribute("aria-label","Stop"),a.id="wmpotify-stop-button",a.addEventListener("click",()=>{Spicetify.Platform.PlayerAPI.clearQueue(),Spicetify.Player.playUri("")}),t.appendChild(a);let r=document.querySelector(".player-controls__right"),l=document.querySelector(".volume-bar");ne=l.querySelector(".volume-bar__icon-button"),qe=l.querySelector(".progress-bar"),Ze(),new MutationObserver(Ze).observe(qe,{attributes:!0,attributeFilter:["style"]}),r.appendChild(l);let s=document.querySelector(".volume-bar__slider-container"),c=s.children[0];s.addEventListener("click",()=>{if(window.innerWidth<750){c.dataset.visible=!0;let h=setTimeout(()=>{delete c.dataset.visible},5e3);c.addEventListener("pointerup",()=>{clearTimeout(h),setTimeout(()=>{delete c.dataset.visible},100)},{once:!0})}}),ye=document.querySelectorAll(".playback-bar [class*=encore-text]");let d=document.createElement("div");d.classList.add("wmpotify-time-text-container"),T=document.createElement("span"),T.classList.add("wmpotify-time-text"),D=parseInt(localStorage.wmpotifyTimeTextMode||0),et(),T.dataset.mode=D,T.addEventListener("click",()=>{D=(D+1)%3,T.dataset.mode=D,localStorage.wmpotifyTimeTextMode=D}),d.appendChild(T),e.insertAdjacentElement("afterbegin",d),Spicetify.Player.addEventListener("onprogress",et);let m=document.querySelector("#wmpotify-title-bar"),b=document.querySelector("#wmpotify-title-buttons");if(m&&(k(),window.addEventListener("resize",k)),o){let h=document.querySelector('.main-nowPlayingBar-extraControls button[data-testid="pip-toggle-button"]');if(h)h.addEventListener("click",g=>{ee.toggleMiniMode(),g.preventDefault(),g.stopPropagation()});else{let g=new Spicetify.Playbar.Button("Mini mode","",()=>ee.toggleMiniMode());g.element.id="wmpotify-mini-mode-button"}}let x=document.querySelector('.main-nowPlayingBar-extraControls button[data-testid="fullscreen-mode-button"]');if(x)x.addEventListener("click",h=>{ee.toggleFullscreen(),h.preventDefault(),h.stopPropagation()});else{let h=new Spicetify.Playbar.Button("Full screen","",()=>ee.toggleFullscreen());h.element.id="wmpotify-fullscreen-button"}function k(){window.innerWidth<750?m.contains(T)||(b?m.insertBefore(T,b):m.appendChild(T)):e.contains(T)||d.appendChild(T)}}async function Je(){ie();let e=!!document.querySelector("#wmpotify-title-bar"),t=f.available(),i=await Spicetify.AppTitle.get(),n=document.querySelector("#wmpotify-title-text"),o=document.querySelector(".main-nowPlayingWidget-trackInfo");if(!o||document.querySelector(".wmpotify-track-info"))return;let a=document.createElement("p");a.classList.add("wmpotify-track-info"),a.textContent=document.querySelector(".main-trackInfo-name")?.textContent||"",o.appendChild(a),window.innerWidth<420&&window.innerHeight<(e?92:62)&&(e?n.textContent=a.textContent:t&&f.setTitle(a.textContent),te=!0);let r=1;setInterval(()=>{if(!Spicetify.Player.isPlaying())return;let l=Spicetify.Player.data?.item.metadata;l&&(r===0?a.textContent=l.title:r===1?a.textContent=l.artist_name:r===2&&(a.textContent=l.album_title),r=(r+1)%3,window.innerWidth<420&&window.innerHeight<(e?92:62)?(e?n.textContent=a.textContent:t&&(f.lockTitle(!0),f.setTitle(a.textContent)),te=!0):te&&(te=!1,e&&(n.textContent=i),f.lockTitle(!1),Spicetify.Player.isPlaying()?f.setTitle(l.artist_name+" - "+l.title):f.setTitle(i)))},3e3),Spicetify.Player.addEventListener("songchange",()=>{r=0,a.textContent=Spicetify.Player.data?.item.metadata.title,window.innerWidth<420&&window.innerHeight<(e?92:62)&&(e?n.textContent=a.textContent:t&&f.setTitle(a.textContent),te=!0)})}function ie(){ke?.classList.toggle("playing",Spicetify.Player.isPlaying());let e=document.querySelector(`.playlist-playlist-playlist[data-test-uri="${Spicetify.Player.data?.context?.uri}"]`);e&&e.classList.toggle("playing",Spicetify.Player.isPlaying())}function Ze(){let e=getComputedStyle(qe).getPropertyValue("--progress-bar-transform").replace("%","")/100;e===0?ne.dataset.vol="muted":e<=.3?ne.dataset.vol="low":e<=.6?ne.dataset.vol="mid":ne.dataset.vol="high"}function et(){switch(D){case 0:{let e=Spicetify.Player.data?.item?.metadata?.duration-Spicetify.Player.getProgress();T.textContent=fe(e,!0)}break;case 1:{let e=ye[0].textContent;(e.length===4||e.length===7)&&(e="0"+e),T.textContent=e}break;case 2:{let e=ye[0].textContent;(e.length===4||e.length===7)&&(e="0"+e);let t=ye[1].textContent;(t.length===4||t.length===7)&&(t="0"+t),T.textContent=`${e} / ${t}`}break}}var nt={};(function e(t,i,n){function o(l,s){if(!i[l]){if(!t[l]){var c=typeof J=="function"&&J;if(!s&&c)return c(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var m=i[l]={exports:{}};t[l][0].call(m.exports,function(b){var x=t[l][1][b];return o(x||b)},m,m.exports,e,t,i,n)}return i[l].exports}for(var a=typeof J=="function"&&J,r=0;r<n.length;r++)o(n[r]);return o})({1:[function(e,t,i){var n,o,a;n=function(r,l){var s;return s=setTimeout(l,r),{stop:function(){return clearTimeout(s)}}},a=function(r,l){var s;return s=setInterval(l,r),{stop:function(){return clearInterval(s)}}},o=function(r){return/in/.test(document.readyState)?n(10,function(){return o(r)}):r()},function(r){var l,s,c,d,m,b,x,k,h,g,X;return l=r.FontDetective={},b=["serif","sans-serif","cursive","fantasy","monospace"],k="Helvetica,Lucida Grande,Lucida Sans,Tahoma,Arial,Geneva,Monaco,Verdana,Microsoft Sans Serif,Trebuchet MS,Courier New,Times New Roman,Courier,Lucida Bright,Lucida Sans Typewriter,URW Chancery L,Comic Sans MS,Georgia,Palatino Linotype,Lucida Sans Unicode,Times,Century Schoolbook L,URW Gothic L,Franklin Gothic Medium,Lucida Console,Impact,URW Bookman L,Helvetica Neue,Nimbus Sans L,URW Palladio L,Nimbus Mono L,Nimbus Roman No9 L,Arial Black,Sylfaen,MV Boli,Estrangelo Edessa,Tunga,Gautami,Raavi,Mangal,Shruti,Latha,Kartika,Vrinda,Arial Narrow,Century Gothic,Garamond,Book Antiqua,Bookman Old Style,Calibri,Cambria,Candara,Corbel,Monotype Corsiva,Cambria Math,Consolas,Constantia,MS Reference Sans Serif,MS Mincho,Segoe UI,Arial Unicode MS,Tempus Sans ITC,Kristen ITC,Mistral,Meiryo UI,Juice ITC,Papyrus,Bradley Hand ITC,French Script MT,Malgun Gothic,Microsoft YaHei,Gisha,Leelawadee,Microsoft JhengHei,Haettenschweiler,Microsoft Himalaya,Microsoft Uighur,MoolBoran,Jokerman,DFKai-SB,KaiTi,SimSun-ExtB,Freestyle Script,Vivaldi,FangSong,MingLiU-ExtB,MingLiU_HKSCS,MingLiU_HKSCS-ExtB,PMingLiU-ExtB,Copperplate Gothic Light,Copperplate Gothic Bold,Copperplate Gothic,Franklin Gothic Book,Maiandra GD,Perpetua,Eras Demi ITC,Felix Titling,Franklin Gothic Demi,Pristina,Edwardian Script ITC,OCR A Extended,OCR A,Engravers MT,Eras Light ITC,Franklin Gothic Medium Cond,Rockwell Extra Bold,Rockwell,Curlz MT,Blackadder ITC,Franklin Gothic Heavy,Franklin Gothic Demi Cond,Lucida Handwriting,Segoe UI Light,Segoe UI Semibold,Lucida Calligraphy,Cooper Black,Viner Hand ITC,Britannic Bold,Wide Latin,Old English Text MT,Broadway,Footlight MT Light,Harrington,Snap ITC,Onyx,Playbill,Bauhaus 93,Baskerville Old Face,Algerian,Matura MT Script Capitals,Stencil,Batang,Chiller,Harlow Solid Italic,Kunstler Script,Bernard MT Condensed,Informal Roman,Vladimir Script,Bell MT,Colonna MT,High Tower Text,Californian FB,Ravie,Segoe Script,Brush Script MT,SimSun,Arial Rounded MT Bold,Berlin Sans FB,Centaur,Niagara Solid,Showcard Gothic,Niagara Engraved,Segoe Print,Gabriola,Gill Sans MT,Iskoola Pota,Calisto MT,Script MT Bold,Century Schoolbook,Berlin Sans FB Demi,Magneto,Arabic Typesetting,DaunPenh,Mongolian Baiti,DokChampa,Euphemia,Kalinga,Microsoft Yi Baiti,Nyala,Bodoni MT Poster Compressed,Goudy Old Style,Imprint MT Shadow,Gill Sans MT Condensed,Gill Sans Ultra Bold,Palace Script MT,Lucida Fax,Gill Sans MT Ext Condensed Bold,Goudy Stout,Eras Medium ITC,Rage Italic,Rockwell Condensed,Castellar,Eras Bold ITC,Forte,Gill Sans Ultra Bold Condensed,Perpetua Titling MT,Agency FB,Tw Cen MT,Gigi,Tw Cen MT Condensed,Aparajita,Gloucester MT Extra Condensed,Tw Cen MT Condensed Extra Bold,PMingLiU,Bodoni MT,Bodoni MT Black,Bodoni MT Condensed,MS Gothic,GulimChe,MS UI Gothic,MS PGothic,Gulim,MS PMincho,BatangChe,Dotum,DotumChe,Gungsuh,GungsuhChe,MingLiU,NSimSun,SimHei,DejaVu Sans,DejaVu Sans Condensed,DejaVu Sans Mono,DejaVu Serif,DejaVu Serif Condensed,Eurostile,Matisse ITC,Bitstream Vera Sans Mono,Bitstream Vera Sans,Staccato222 BT,Bitstream Vera Serif,Broadway BT,ParkAvenue BT,Square721 BT,Calligraph421 BT,MisterEarl BT,Cataneo BT,Ruach LET,Rage Italic LET,La Bamba LET,Blackletter686 BT,John Handy LET,Scruff LET,Westwood LET,Yu Gothic,Yu Gothic UI".split(",").sort(),X=[],d=!1,h=!1,c=document.createElement("div"),c.id="font-detective",s=function(){function S(M,v,w){this.name=M,this.type=v,this.style=w}return S.prototype.toString=function(){return'"'+this.name.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'},S}(),m=function(){var S,M,v,w;return S=["monospace","sans-serif","serif"],w=document.createElement("span"),w.innerHTML="mmmmmmmmmmlli",w.style.fontSize="72px",v={},M={},{init:function(){var L,E,O,q;for(document.body.appendChild(c),q=[],E=0,O=S.length;E<O;E++)L=S[E],w.style.fontFamily=L,c.appendChild(w),v[L]=w.offsetWidth,M[L]=w.offsetHeight,q.push(c.removeChild(w));return q},check:function(L){var E,O,q,R;for(q=0,R=S.length;q<R;q++)if(E=S[q],w.style.fontFamily=L+", "+E,c.appendChild(w),O=w.offsetWidth!==v[E]||w.offsetHeight!==M[E],c.removeChild(w),O)return!0;return!1}}}(),x=function(){if(!h)return h=!0,l.incomplete=!0,o(function(S){return function(){var M;return g(function(){var v,w,L;for(L=[],v=0,w=k.length;v<w;v++)M=k[v],L.push(new s(M));return L}())}}(this))},g=function(S){var M,v;return m.init(),M=0,v=a(20,function(){var w,L,E,O,q,R,Ue,Xe,xe,Me;for(O=0;O<=5;O++){if(E=S[M],w=m.check(E),w)for(X.push(E),xe=l.each.callbacks,q=0,Ue=xe.length;q<Ue;q++)L=xe[q],L(E);if(M++,M>=S.length){for(v.stop(),Me=l.all.callbacks,R=0,Xe=Me.length;R<Xe;R++)L=Me[R],L(X);l.all.callbacks=[],l.each.callbacks=[],d=!0;return}}})},l.preload=x,l.each=function(S){var M,v,w;for(v=0,w=X.length;v<w;v++)M=X[v],S(M);if(!d)return l.each.callbacks.push(S),x()},l.each.callbacks=[],l.all=function(S){return d?S(X):(l.all.callbacks.push(S),x())},l.all.callbacks=[]}(nt)},{}]},{},[1]);var it=nt.FontDetective;var y=document.createElement("div"),H=null,Ie=0,he=null,u={title:null,hue:null,sat:null};function vt(){if(document.getElementById("wmpotify-config"))return;let e=document.querySelector(".Root__main-view");if(y.id="wmpotify-config",y.innerHTML=`
        <div id="wmpotify-config-topborder" class="wmpotify-tintable"></div>
        <button id="wmpotify-config-prev"></button>
        <button id="wmpotify-config-next"></button>
        <p id="wmpotify-config-title">Color Chooser</p>
        <button id="wmpotify-config-close"></button>
        <section class="wmpotify-config-tab-content" data-tab-title="Color Chooser" style="display: block;">
            <section class="field-row">
                <a href="#" id="wmpotify-config-color-reset">Reset</a>
                <input type="checkbox" id="wmpotify-config-tint-playerbar" class="wmpotify-aero">
                <label for="wmpotify-config-tint-playerbar">Apply color to the now playing bar buttons</label>
            </section>
            <label>Hue</label><br>
            <input type="range" id="wmpotify-config-hue" class="wmpotify-aero no-track" min="0" max="360" step="1" value="180"><br>
            <label>Saturation</label><br>
            <input type="range" id="wmpotify-config-sat" class="wmpotify-aero no-track" min="0" max="354" step="1" value="121"><br>
        </section>
        <section class="wmpotify-config-tab-content" data-tab-title="General">
            <label for="wmpotify-config-style">Style</label>
            <select id="wmpotify-config-style" class="wmpotify-aero">
                <option value="auto">Auto</option>
                <option value="xp">XP</option>
                <option value="aero">Aero</option>
                <option value="basic">Basic</option>
            </select>
            <label for="wmpotify-config-title-style">Title style</label>
            <select id="wmpotify-config-title-style" class="wmpotify-aero">
                <option value="auto">Auto</option>
                <option value="native">Native</option>
                <option value="custom">Custom</option>
                <option value="spotify">Spotify</option>
                <option value="keepmenu">Keep Menu</option>
            </select><br>
            <label for="wmpotify-config-font">UI font</label>
            <select id="wmpotify-config-font" class="wmpotify-aero">
                <option value="custom">Custom</option>
            </select><br>
            <input type="checkbox" id="wmpotify-config-show-libx" class="wmpotify-aero">
            <label for="wmpotify-config-show-libx">Show Your Library X on the left sidebar</label><br>
            <button id="wmpotify-config-apply" class="wmpotify-aero">Apply</button>
        </section>
        <section class="wmpotify-config-tab-content" data-tab-title="Play speed settings" data-wh-speedmod-required="true">
            <a href="#" id="wmpotify-config-speed-slow">Slow</a>
            <a href="#" id="wmpotify-config-speed-normal">Normal</a>
            <a href="#" id="wmpotify-config-speed-fast">Fast</a><br>
            <input type="range" id="wmpotify-config-speed" class="wmpotify-aero" min="0.5" max="2.0" step="0.1" value="1"><br>
            Play speed: <span id="wmpotify-config-speed-value">1.0</span>
        </section>
        <section class="wmpotify-config-tab-content" data-tab-title="About">
            <div id="wmpotify-about-logo"></div>
            <p id="wmpotify-about-title">WMPotify</p><br>
            <p>A Windows Media Player 11 inspired Spicetify theme for Spotify</p>
            <p>Version: Pre-alpha</p>
            <p>Made by Ingan121 - <a href="https://www.ingan121.com/" target="_blank">www.ingan121.com</a></p>
            <a href="https://github.com/Ingan121/WMPotify" target="_blank">GitHub</a>
        </section>
    `,u.topborder=y.querySelector("#wmpotify-config-topborder"),u.fontSelector=y.querySelector("#wmpotify-config-font"),u.fontCustom=y.querySelector("#wmpotify-config-font option"),u.fontSelector.addEventListener("change",()=>{if(u.fontSelector.value==="custom"){let o=prompt("Enter a valid CSS font-family name");o&&(u.fontCustom.textContent=o,localStorage.wmpotifyFont=o)}else u.fontCustom.textContent="Custom",localStorage.wmpotifyFont=u.fontSelector.value;document.documentElement.style.setProperty("--ui-font",localStorage.wmpotifyFont)}),u.showLibX=y.querySelector("#wmpotify-config-show-libx"),u.showLibX.addEventListener("change",()=>{u.showLibX.checked?(localStorage.wmpotifyShowLibX=!0,delete document.body.dataset.hideLibx):(delete localStorage.wmpotifyShowLibX,document.body.dataset.hideLibx=!0,Spicetify.Platform.LocalStorageAPI.setItem("ylx-sidebar-state",1))}),y.querySelector("#wmpotify-config-close").addEventListener("click",Ae),y.querySelector("#wmpotify-config-apply").addEventListener("click",rt),!f.query()?.speedModSupported)y.querySelector("[data-wh-speedmod-required=true]").remove();else{u.speed=y.querySelector("#wmpotify-config-speed"),u.speedValue=y.querySelector("#wmpotify-config-speed-value"),u.speed.addEventListener("pointerup",Mt),y.querySelector("#wmpotify-config-speed-slow").addEventListener("click",oe.bind(null,.5)),y.querySelector("#wmpotify-config-speed-normal").addEventListener("click",oe.bind(null,1)),y.querySelector("#wmpotify-config-speed-fast").addEventListener("click",oe.bind(null,1.4));let o=f.query()?.playbackSpeed||1;u.speedValue.textContent=Number.isInteger(o)?o+".0":o,u.speedValue.addEventListener("click",()=>{oe(parseFloat(prompt("Enter a playback speed (0.5 - 5.0)",o)))})}H=y.querySelectorAll(".wmpotify-config-tab-content"),u.title=y.querySelector("#wmpotify-config-title"),u.hue=y.querySelector("#wmpotify-config-hue"),u.sat=y.querySelector("#wmpotify-config-sat"),u.tintPb=y.querySelector("#wmpotify-config-tint-playerbar"),u.hue.addEventListener("input",Be),u.sat.addEventListener("input",Be),u.tintPb.addEventListener("change",Be),y.querySelector("#wmpotify-config-color-reset").addEventListener("click",xt),y.querySelector("#wmpotify-config-prev").addEventListener("click",ot),y.querySelector("#wmpotify-config-next").addEventListener("click",at),it.each(o=>{let a=document.createElement("option");a.textContent=o.name,a.value=o.name,o.name===(localStorage.wmpotifyFont||"Segoe UI")&&(a.selected=!0),o.name==="Segoe UI"?u.fontSelector.insertBefore(a,u.fontSelector.firstChild):u.fontSelector.insertBefore(a,u.fontCustom)}),localStorage.wmpotifyStyle&&(y.querySelector("#wmpotify-config-style").value=localStorage.wmpotifyStyle);let t=y.querySelector("#wmpotify-config-title-style");navigator.userAgent.includes("Windows")||t.querySelector("option[value=keepmenu]").remove(),navigator.userAgent.includes("Linux")&&t.querySelector("option[value=spotify]").remove(),localStorage.wmpotifyTitleStyle&&(t.value=localStorage.wmpotifyTitleStyle),localStorage.wmpotifyShowLibX&&(y.querySelector("#wmpotify-config-show-libx").checked=!0);let i=0,n=!1;u.topborder.addEventListener("pointerdown",function(){n=!0,i=y.getBoundingClientRect().bottom,document.body.style.cursor="ns-resize"},!0),document.addEventListener("pointerup",function(){n=!1,document.body.style.cursor="",localStorage.wmpotifyConfigHeight=y.style.height},!0),document.addEventListener("pointermove",function(o){n&&(y.style.height=i-o.clientY+"px")},!0),e.appendChild(y)}function Ct(){if(H){if(document.body.dataset.wmpotifyLibPageOpen)Spicetify.Config.custom_apps.includes("wmpvis")?document.querySelector("#wmpotify-tabs-container button[data-identifier='now-playing']")?.click():document.querySelector("#wmpotify-tabs-container button[data-identifier='home']")?.click();else if(y.style.display==="block"){Ae();return}if(y.style.display="block",localStorage.wmpotifyTintColor){let[e,t,i]=localStorage.wmpotifyTintColor.split(",");u.hue.value=parseInt(e)+180,u.sat.value=parseInt(t)*121/100,i&&(u.tintPb.checked=!0)}}}function Ae(){y.style.display="none"}function Fe(e){if(H){for(let t=0;t<H.length;t++){let i=H[t];i.style.display=t===e?"block":"none"}Ie=e,u.title.textContent=H[e].dataset.tabTitle}}function ot(){Fe((Ie-1+H.length)%H.length)}function at(){Fe((Ie+1)%H.length)}function Be(){let e=u.hue.value-180,t=u.sat.value*100/121;Z(e,t,u.tintPb.checked),localStorage.wmpotifyTintColor=e+","+t+","+(u.tintPb.checked?"1":"")}function xt(){u.hue.value=180,u.sat.value=121,Z(),delete localStorage.wmpotifyTintColor}function Mt(){u.speedValue.textContent=Number.isInteger(parseFloat(u.speed.value))?u.speed.value+".0":u.speed.value,he&&clearTimeout(he),he=setTimeout(()=>{oe(u.speed.value),he=null},500)}function oe(e){if(Spicetify.Platform.ConnectAPI.state.connectionStatus==="connected"){Spicetify.showNotification("Cannot change playback speed while playing from another device");return}e=parseFloat(e);let t=f.query().playbackSpeed||1;e!==t&&(u.speed.value=e,u.speedValue.textContent=Number.isInteger(e)?e+".0":e,f.setPlaybackSpeed(e))}function rt(){let e=y.querySelector("#wmpotify-config-style").value,t=y.querySelector("#wmpotify-config-title-style").value,i=u.showLibX.checked;e!=="auto"?localStorage.wmpotifyStyle=e:delete localStorage.wmpotifyStyle,t!=="auto"?localStorage.wmpotifyTitleStyle=t:delete localStorage.wmpotifyTitleStyle,i?localStorage.wmpotifyShowLibX=!0:delete localStorage.wmpotifyShowLibX,location.reload()}var Lt={init:vt,open:Ct,close:Ae,openTab:Fe,prevTab:ot,nextTab:at,apply:rt,isOpen:()=>y.style.display==="block"},Oe=Lt;var ae=new MutationObserver(re),Et=new ResizeObserver(re.bind(null,!0)),Tt={init(){ae.observe(document.documentElement,{attributes:!0,attributeFilter:["style"]}),Et.observe(document.querySelector(".Root__right-sidebar")),window.addEventListener("resize",re),window.addEventListener("load",re)},updateSidebarWidth:re};function re(e){if(!Spicetify.Platform.History.location.pathname.startsWith("/wmpotify-standalone-libx")&&!e){let n=getComputedStyle(document.documentElement).getPropertyValue("--right-sidebar-width");n&&(ae.disconnect(),document.documentElement.style.setProperty("--panel-width",n),ae.observe(document.documentElement,{attributes:!0,attributeFilter:["style"]}));return}ae.disconnect();let t=document.querySelector(".Root__right-sidebar aside");document.documentElement.style.setProperty("--panel-width",t?t.offsetWidth:8),getComputedStyle(document.documentElement).getPropertyValue("--right-sidebar-width")&&document.documentElement.style.setProperty("--right-sidebar-width",t?t.offsetWidth:8),ae.observe(document.documentElement,{attributes:!0,attributeFilter:["style"]})}var be=Tt;var We;function ge(){console.log("WMPotify: Trying to initialize queue panel");let e=document.querySelector(".Root__right-sidebar > div > div > div:has(aside)");if(e&&!We&&(We=new MutationObserver(ge),We.observe(e,{childList:!0})),!document.querySelector("#queue-panel")||document.querySelector("#wmpotify-queue-toolbar")||document.querySelectorAll('div[data-encore-id="tabPanel"]').length>2)return;let t=document.querySelector("#Desktop_PanelContainer_Id");t.classList.add("spotify-queue-panel");let i=document.querySelector("#Desktop_PanelContainer_Id > div > div:first-child > div:first-child"),n=document.querySelector("#Desktop_PanelContainer_Id > div > div:nth-child(2)");n.id="spotify-queue-panel-content";let o=document.createElement("div");o.id="wmpotify-queue-toolbar";let a=document.createElement("button");a.id="wmpotify-queue-playlist-button",a.classList.add("wmpotify-toolbar-button"),a.addEventListener("click",()=>{let h=Spicetify.Player.data?.context?.uri;h&&window.open(h)}),a.textContent=document.querySelector('#queue-panel div[data-flip-id*="section-header-"] a')?.textContent||"Now Playing",a.innerHTML+='<span class="expandMark">\u23F7</span>',o.appendChild(a);let r=document.createElement("button");r.id="wmpotify-queue-clear-button",r.classList.add("wmpotify-toolbar-button"),r.addEventListener("click",()=>{Spicetify.Platform.PlayerAPI.clearQueue(),Spicetify.Player.playUri("")}),o.appendChild(r),n.insertAdjacentElement("afterbegin",o);let l=getComputedStyle(document.documentElement).getPropertyValue("--album-art-placeholder").trim().slice(5,-2),s=document.createElement("div");s.id="wmpotify-queue-npv";let c=document.createElement("img");c.id="wmpotify-queue-album-art",c.src=document.querySelector(".main-nowPlayingWidget-coverArt .cover-art img")?.src||l,s.appendChild(c);let d=document.createElement("div");d.id="wmpotify-queue-song-title",d.textContent=document.querySelector(".main-trackInfo-name")?.textContent||"No items",s.appendChild(d),i.insertAdjacentElement("afterbegin",s),lt(),new MutationObserver(lt).observe(document.querySelector("#queue-panel"),{childList:!0});let m=document.querySelectorAll('#Desktop_PanelContainer_Id div[role="tablist"] button'),b=[],x;for(let h of m)b.push({text:h.textContent,click:function(){for(let g of x.menuItems)g.classList.remove("activeStyle");this.classList.add("activeStyle"),h.click()}});b[0].classList=["activeStyle"],document.querySelector("#wmpotifyQueueTabMenuBg")?.remove(),x=de("wmpotifyQueueTab",b);let k=new j(["wmpotifyQueueTab"]);t.addEventListener("contextmenu",h=>{h.preventDefault(),k.openMenu("wmpotifyQueueTab",{left:h.clientX+"px",top:h.clientY+"px"})}),Spicetify.Player.addEventListener("songchange",()=>{a.textContent=Spicetify.Player.data?.context?.metadata?.context_description||"Now Playing",a.innerHTML+='<span class="expandMark">\u23F7</span>',c.src=Spicetify.Player.data?.item?.album?.images?.[0]?.url?.replace("spotify:image:","https://i.scdn.co/image/")||l,d.textContent=Spicetify.Player.data?.item?.name||"No items"})}function lt(){let e=document.querySelectorAll("#queue-panel ul")[1];e&&(st(),new MutationObserver(st).observe(e,{childList:!0}))}function st(){if(!document.querySelector("#queue-panel")||!Spicetify.Queue)return;let e=document.querySelectorAll("#queue-panel li .HeaderArea");for(let t=0;t<e.length;t++){let i=e[t];if(i.querySelector(".wmpotify-queue-duration"))continue;let n=t===0?Spicetify.Queue.track?.contextTrack?.metadata?.duration:Spicetify.Queue.nextTracks?.[t-1]?.contextTrack?.metadata?.duration;if(!n)continue;let o=document.createElement("span");o.classList.add("wmpotify-queue-duration"),o.textContent=fe(n),i.appendChild(o)}}var Pt={getItem(e){let t=Spicetify._platform?.initialUser?.username,i=localStorage.getItem(t+":"+e);return isNaN(i)?i:parseFloat(i)},setItem(e,t){let i=Spicetify._platform?.initialUser?.username;localStorage.setItem(i+":"+e,t)},removeItem(e){let t=Spicetify._platform?.initialUser?.username;localStorage.removeItem(t+":"+e)}},_=Pt;var C,B=[],P={},F=new MutationObserver(Ne),ct=new MutationObserver(qt),I=!1,Re=!1,He=[],_e=[],kt={async init(){if(document.querySelector("#wmpotify-libx-sidebar"))return!1;Object.keys(Spicetify.Platform.Translations).filter(n=>n.startsWith("shared.library.filter.")).forEach(n=>{let o=Spicetify.Platform.Translations[n];P[n.split(".").pop()]={loc_id:n,value:o}}),B.length===0&&(B.push({identifier:"playlist",localized:P.playlist.value,elem:null}),B.push({identifier:"album",localized:P.album.value,elem:null}),B.push({identifier:"artist",localized:P.artist.value,elem:null}));let t=document.createElement("div");t.id="wmpotify-libx-header",document.querySelector(".main-yourLibraryX-libraryContainer").insertAdjacentElement("afterbegin",t);let i=document.createElement("div");return i.id="wmpotify-libx-sidebar",document.querySelector(".main-yourLibraryX-libraryItemContainer").insertAdjacentElement("afterbegin",i),await It(),C=document.querySelector('.main-yourLibraryX-filterArea .search-searchCategory-categoryGrid [role="presentation"]'),Ne(),F.observe(C,{childList:!0}),ct.observe(document.querySelector(".main-yourLibraryX-filterArea"),{childList:!0}),!0},uninit(){document.querySelector("#wmpotify-libx-header")?.remove(),document.querySelector("#wmpotify-libx-sidebar")?.remove(),F.disconnect(),ct.disconnect()},go(e){e||(e=Spicetify.Platform.History.location.pathname.split("/").slice(2)),e[0]!==void 0&&Bt(e)}};function ze(){let e=document.querySelector("#wmpotify-libx-header");e.innerHTML="";let t=document.createElement("div");t.classList.add("wmpotify-libx-header-root-icon"),t.classList.add("wmpotify-toolbar-button"),e.appendChild(t);let i=document.createElement("button");i.classList.add("wmpotify-libx-header-root-text"),i.classList.add("wmpotify-toolbar-button"),i.textContent="Music",i.addEventListener("click",U),e.appendChild(i);let n=De();if(n.forEach((o,a)=>{let r=document.createElement("button");r.classList.add("wmpotify-libx-header-category-text"),r.classList.add("wmpotify-toolbar-button"),r.textContent=o,r.addEventListener("click",async()=>{if(!r.nextElementSibling)return;I&&(le(),await se()),F.disconnect();let l=B.find(s=>s.localized===o);if(a===0)U(),await z();else{if(!l)return;let s=B.find(c=>c.localized===n[a-1]);(!ut(s)||!document.contains(l.elem))&&(Q()||(U(),await z()),s.elem.click(),await z())}G(l),l.elem.click(),F.observe(C,{childList:!0})}),e.appendChild(r)}),I){let o=document.querySelector(".main-yourLibraryX-collapseButton > div").textContent,a=document.createElement("button");a.classList.add("wmpotify-libx-header-category-text"),a.classList.add("wmpotify-toolbar-button"),a.textContent=o,e.appendChild(a)}}function Ne(){I=document.querySelector(".main-yourLibraryX-collapseButton").childElementCount>1;let e=De(!0);if(I){let n=Spicetify.Platform.LocalStorageAPI.getItem("opened-folder-uri");e.push(n)}if(!Re){let n="/wmpotify-standalone-libx/"+e.join("/");Spicetify.Platform.History.location.pathname==="/wmpotify-standalone-libx"?Spicetify.Platform.History.location.pathname=n:Spicetify.Platform.History.location.pathname!==n&&Spicetify.Platform.History.push({pathname:"/wmpotify-standalone-libx/"+e.join("/")})}if(I){ze();return}let t=!C.querySelector('button[class*="ChipClear"]:first-child'),i=Array.from(C.querySelectorAll("button"));if(t)i.forEach((n,o)=>{let a={};a.localized=n.textContent,a.identifier=Object.keys(P).find(r=>P[r].value===a.localized),a.elem=n,B.some(r=>r.localized===a.localized)||B.push(a)});else{i.shift();let n=i[0].textContent,o=B.find(a=>a.localized===n);if(!o){let a={};a.localized=n,a.identifier=Object.keys(P).find(r=>P[r].value===a.localized),a.elem=i[0],B.push(a),o=a}o.children||(o.children=[]),i.shift(),i.forEach((a,r)=>{let l={};l.localized=a.textContent,l.identifier=Object.keys(P).find(s=>P[s].value===l.localized),l.elem=a,o.children.some(s=>s.localized===l.localized)||o.children.push(l)})}ze(),dt()}function qt(){F.disconnect(),C=document.querySelector('.main-yourLibraryX-filterArea .search-searchCategory-categoryGrid [role="presentation"]'),Ne(),F.observe(C,{childList:!0})}function G(e){if(!document.contains(e.elem)){for(let t of C.querySelectorAll("button"))if(t.textContent===e.localized){e.elem=t;break}}}function Q(){return!C.querySelector('button[class*="ChipClear"]:first-child')}function ut(e){return Q()?!1:Array.from(C.querySelectorAll("button"))[1].textContent===e.localized}async function U(){I&&(le(),await se()),C.querySelector('button[class*="ChipClear"]:first-child')?.click()}function le(){Re=!0,document.querySelectorAll(".main-yourLibraryX-collapseButton button")?.[1]?.click()}function De(e=!1){let t=[];if(I=document.querySelector(".main-yourLibraryX-collapseButton").childElementCount>1,I)return e?_e:He;if(Q())return He=[],_e=[],t;{let n=Array.from(C.querySelectorAll("button")).slice(1)[0].textContent;e&&(n=Object.keys(P).find(a=>P[a].value===n)),t.push(n);let o=C.querySelector('button[class*="secondary-selected"]');o&&(e?t.push(Object.keys(P).find(a=>P[a].value===o.textContent)):t.push(o.textContent)),e?_e=structuredClone(t):He=structuredClone(t)}return t}async function Bt(e){if(I&&(le(),await se()),F.disconnect(),!Q()){if(U(),e.length===0)return;await z()}for(let t=0;t<e.length;t++)if(e[t].startsWith("spotify:user:"))await At(),document.querySelector('.main-yourLibraryX-libraryRootlist .main-rootlist-wrapper div[role="button"][aria-labelledby*="listrow-title-'+e[t]+'"]').click();else if(t===0){let i=B.find(n=>n.identifier===e[t]);if(!i)return;G(i),i.elem.click(),await z()}else{let i=B.find(o=>o.identifier===e[t-1]);if(!i)return;let n=i.children.find(o=>o.identifier===e[t]);if(!n)return;G(n),n.elem.click(),await z()}ze(),dt(),F.observe(C,{childList:!0})}function dt(){let e=document.querySelector("#wmpotify-libx-sidebar");e.innerHTML="";let t=document.createElement("div");t.classList.add("wmpotify-libx-sidebar-item-container");let i=document.createElement("button");i.classList.add("wmpotify-libx-sidebar-item"),i.id="wmpotify-libx-sidebar-root",i.textContent="Library",i.addEventListener("click",U);let n=document.createElement("div");n.classList.add("wmpotify-libx-sidebar-chevron"),n.addEventListener("click",()=>{e.classList.toggle("rootCollapsed")}),t.appendChild(n),t.appendChild(i),e.appendChild(t),B.forEach(a=>{let r=document.createElement("div");r.classList.add("wmpotify-libx-sidebar-item-container");let l=document.createElement("button");if(l.classList.add("wmpotify-libx-sidebar-item"),l.textContent=a.localized,l.dataset.identifier=a.identifier,l.addEventListener("click",async()=>{l.classList.contains("active")&&!I||(I&&(le(),await se()),F.disconnect(),Q()||(U(),await z()),G(a),a.elem.click(),F.observe(C,{childList:!0}))}),r.appendChild(l),e.appendChild(r),a.children&&a.children.length>0){let s=document.createElement("div");s.classList.add("wmpotify-libx-sidebar-chevron"),s.addEventListener("click",()=>{r.classList.toggle("collapsed")}),r.insertBefore(s,l);let c=document.createElement("div");c.classList.add("wmpotify-libx-sidebar-downlevel"),a.children.forEach(d=>{let m=document.createElement("button");m.classList.add("wmpotify-libx-sidebar-item"),m.textContent=d.localized,m.dataset.identifier=d.identifier,m.addEventListener("click",async()=>{m.classList.contains("active")&&!I||(I&&(le(),await se()),F.disconnect(),G(d),(!ut(a)||!document.contains(d.elem))&&(Q()||(U(),await z()),G(a),a.elem.click(),await z()),G(d),d.elem.click(),F.observe(C,{childList:!0}))}),c.appendChild(m)}),e.appendChild(c)}});let o=De();if(o.length>0){let a=o.pop();Array.from(e.querySelectorAll(".wmpotify-libx-sidebar-item")).find(l=>l.textContent===a).classList.add("active")}else i.classList.add("active")}function It(){if(!document.querySelector('.main-yourLibraryX-filterArea .search-searchCategory-categoryGrid [role="presentation"]'))return new Promise(e=>{let t=new MutationObserver(()=>{document.querySelector('.main-yourLibraryX-filterArea .search-searchCategory-categoryGrid [role="presentation"]')&&(e(),t.disconnect())});t.observe(document.querySelector(".main-yourLibraryX-libraryItemContainer"),{childList:!0,subtree:!0})})}function z(){return new Promise(e=>{let t=new MutationObserver(()=>{C.querySelector("button")&&(e(),t.disconnect())});t.observe(C,{childList:!0})})}function se(){return new Promise(e=>{let t=new MutationObserver(()=>{Re=!1,e(),t.disconnect()});t.observe(document.querySelector(".main-yourLibraryX-filterArea"),{childList:!0})})}function At(){if(!document.querySelector('.main-yourLibraryX-libraryRootlist .main-rootlist-wrapper [role="presentation"]:not([class])'))return new Promise(e=>{let t=new MutationObserver(()=>{document.querySelector('.main-yourLibraryX-libraryRootlist .main-rootlist-wrapper [role="presentation"]:not([class])')&&(e(),t.disconnect())});t.observe(document.querySelector(".main-yourLibraryX-libraryRootlist"),{childList:!0,subtree:!0})})}var we=kt;async function Se(e){let t=document.querySelector('section[data-testid="artist-page"]');if(!t){e&&(await ve.waitForPageRender(),Se(!1));return}if(await Ft(t),t.querySelector(".artist-artistDiscography-cardGrid"))return;let i=t.querySelector(".artist-artistDiscography-topBar a").textContent,n=t.dataset.testUri,o=t.querySelectorAll(".artist-artistDiscography-headerContainer");for(let l of o){if(l.querySelector(".artist-artistDiscography-headerTitle + div a"))continue;let s=l.querySelector(".main-entityHeader-image");if(!s)continue;s.addEventListener("dblclick",()=>{l.querySelector(".artist-artistDiscography-headerButtons div button").click()}),s.addEventListener("contextmenu",async d=>{l.querySelector(".artist-artistDiscography-headerButtons > button:last-child").click(),d.preventDefault(),d.stopPropagation(),await Ot();let m=document.querySelector("[data-tippy-root]");m.dataset.wmpotifyForceTransform=!0,m.style.setProperty("--tippy-force-transform",`translate(${d.clientX}px, ${d.clientY}px)`)});let c=document.createElement("a");c.href=n,c.textContent=i,l.querySelector(".artist-artistDiscography-headerTitle + div").appendChild(c)}let a=t.querySelectorAll(".artist-artistDiscography-tracklist");for(let l of a){if(l.querySelector(".wmpotify-discography-trackList-header"))continue;let s=l.querySelector('[role="grid"]');if(!s)continue;let c=s.getAttribute("aria-label"),d=document.createElement("div");d.className="wmpotify-discography-trackList-header",d.textContent=c,l.insertAdjacentElement("afterbegin",d)}let r=new MutationObserver(()=>{Se(!1),r.disconnect()});r.observe(t.querySelector('[data-testid="infinite-scroll-list"]'),{childList:!0})}function Ft(e){if(!e.querySelector(".artist-artistDiscography-tracklist"))return new Promise(t=>{let i=new MutationObserver(()=>{e.querySelector(".artist-artistDiscography-tracklist")&&(i.disconnect(),t())});i.observe(e,{childList:!0,subtree:!0})})}function Ot(){return new Promise(e=>{let t=new MutationObserver(()=>{document.querySelector("[data-tippy-root]")&&(t.disconnect(),e())});t.observe(document.body,{childList:!0})})}var Ge=0,Ce={waitForPageRender(){return new Promise(e=>{let t=new MutationObserver(()=>{document.querySelector(".main-loadingPage-container")||(e(),t.disconnect())});t.observe(document.querySelector(".main-view-container__scroll-node-child main"),{childList:!0})})},async handleLocChange(e){if(e?.pathname&&!(Ge&&Date.now()-Ge<2e3)){if(be.updateSidebarWidth(),e.pathname.startsWith("/wmpotify-standalone-libx")){document.body.dataset.wmpotifyLibPageOpen=!0;let t=_.getItem("ylx-sidebar-state"),i=_.getItem("ylx-expanded-state-nav-bar-width");Spicetify.Platform.LocalStorageAPI.setItem("ylx-sidebar-state",2),Spicetify.Platform.LocalStorageAPI.setItem("ylx-expanded-state-nav-bar-width",0),_.setItem("ylx-sidebar-state",t),_.setItem("ylx-expanded-state-nav-bar-width",i),await we.init()||Spicetify.Platform.History.action==="POP"&&we.go()}else if(document.body.dataset.wmpotifyLibPageOpen)if(delete document.body.dataset.wmpotifyLibPageOpen,we.uninit(),localStorage.wmpotifyShowLibX){let t=_.getItem("ylx-sidebar-state");_.removeItem("ylx-sidebar-state");let i=_.getItem("ylx-expanded-state-nav-bar-width");_.removeItem("ylx-expanded-state-nav-bar-width"),Spicetify.Platform.LocalStorageAPI.setItem("ylx-sidebar-state",parseInt(t)),Spicetify.Platform.LocalStorageAPI.setItem("ylx-expanded-state-nav-bar-width",parseInt(i))}else Spicetify.Platform.LocalStorageAPI.setItem("ylx-sidebar-state",1);e.pathname.match("/artist/.*/discography/.*")?Se(!0):e.pathname.startsWith("/playlist/")&&(document.querySelector(".playlist-playlist-playlist")||await Ce.waitForPageRender(),ie())}},init(){Ce.handleLocChange(Spicetify.Platform.History.location),Ge=Date.now(),Spicetify.Platform.History.listen(e=>Ce.handleLocChange(e))}},ve=Ce;var mt=[".Root__globalNav",".main-globalNav-historyButtons",".main-globalNav-searchSection",".main-globalNav-searchContainer > button",".main-globalNav-searchContainer div form button",'.main-globalNav-searchContainer div form input[type="search"]',".main-topBar-topbarContentRight > .main-actionButtons > button",".main-topBar-topbarContentRight > button:last-child",".Root__main-view",".main-view-container__scroll-node-child main",".main-nowPlayingBar-nowPlayingBar",".player-controls__left",'.player-controls__buttons button[data-testid="control-button-repeat"]','.player-controls__buttons button[data-testid="control-button-playpause"]',".player-controls__right",".playback-bar [class*=encore-text]",".volume-bar",".volume-bar__icon-button",".volume-bar .progress-bar",".main-nowPlayingBar-left",".Root__right-sidebar > div > div[class]"],Y="xp",A="spotify";function Wt(){localStorage.wmpotifyShowLibX||(document.body.dataset.hideLibx=!0),f.init();let e=f.query();switch(localStorage.wmpotifyTitleStyle&&["native","custom","spotify","keepmenu"].includes(localStorage.wmpotifyTitleStyle)?A=localStorage.wmpotifyTitleStyle:(console.log("WMPotify EarlyInit:",window.SpotEx,e),window.outerHeight-window.innerHeight>0||e?.options?.showframe||navigator.userAgent.includes("Linux")?A="native":(window.SpotEx||e)&&(e?.options?.showmenu&&!e.options.showcontrols?A="keepmenu":A="custom")),A==="keepmenu"&&!navigator.userAgent.includes("Windows")&&(A="spotify"),A==="spotify"&&navigator.userAgent.includes("Linux")&&(A="native"),document.documentElement.dataset.wmpotifyTitleStyle=A,e&&!localStorage.wmpotifyStyle&&A==="native"&&e.isThemingEnabled&&(e.options.transparentrendering&&e.isDwmEnabled?Y="aero":e.isDwmEnabled||(Y="basic")),localStorage.wmpotifyStyle&&["xp","aero","basic"].includes(localStorage.wmpotifyStyle)&&(Y=localStorage.wmpotifyStyle),f.setMinSize(358,A==="native"?60:90),f.setBackdrop("mica"),Y){case"xp":f.extendFrame(0,0,0,0);break;case"aero":f.extendFrame(0,0,0,60);break;case"basic":f.extendFrame(0,0,0,0),document.hasFocus()?document.body.style.backgroundColor="#b9d1ea":document.body.style.backgroundColor="#d7e4f2",window.addEventListener("focus",()=>{document.body.style.backgroundColor="#b9d1ea"}),window.addEventListener("blur",()=>{document.body.style.backgroundColor="#d7e4f2"});break}document.documentElement.dataset.wmpotifyStyle=Y,window.addEventListener("resize",()=>{Y==="aero"&&(window.innerHeight<62?f.extendFrame(-1,-1,-1,-1):f.extendFrame(0,0,0,60)),f.setMinSize(358,A==="native"?60:90)}),localStorage.wmpotifyFont&&document.documentElement.style.setProperty("--ui-font",localStorage.wmpotifyFont)}Wt();async function Ht(){if(await je(A),localStorage.wmpotifyShowLibX||Spicetify.Platform.LocalStorageAPI.setItem("ylx-sidebar-state",1),localStorage.wmpotifyTintColor){let[e,t,i]=localStorage.wmpotifyTintColor.split(",");Z(e,t,i)}V.init(),ve.init(),be.init(),Oe.init(),new Spicetify.Menu.Item("WMPotify Properties",!1,Oe.open).register(),Ke(),tt(),ge(),new MutationObserver(ge).observe(document.querySelector(".XOawmCGZcQx4cesyNfVO")||document.querySelector(".Root__right-sidebar > div > div[class]:first-child")||document.querySelector(".Root__right-sidebar div[class]"),{childList:!0})}function _t(){return window.Spicetify?.CosmosAsync&&window.Spicetify.Platform?.PlayerAPI&&window.Spicetify.AppTitle&&window.Spicetify.Player?.origin?._state&&window.Spicetify.Menu&&window.Spicetify.Platform.History?.listen&&window.Spicetify.Platform.LocalStorageAPI&&window.Spicetify.Platform.Translations&&mt.every(e=>document.querySelector(e))}window.addEventListener("load",()=>{let e=0,t=setInterval(async()=>{if(_t()){clearInterval(t);try{await Ht()}catch(i){(window.Spicetify?.showNotification||window.alert)("[WMPotify] An error occurred during initialization. Please check the console for more information."),console.error("WMPotify: Error during init:",i)}console.log("WMPotify: Theme loaded")}else if(e++>80){(window.Spicetify?.showNotification||window.alert)("[WMPotify] Theme loading failed. Please refresh the page to try again. Please make sure you have compatible Spoitfy version."),clearInterval(t);let i=[];for(let n of mt)document.querySelector(n)||i.push(n);console.log("WMPotify: Missing elements:",i)}},100)});document.addEventListener("scroll",function(){document.documentElement.scrollTo(0,0)});})();
