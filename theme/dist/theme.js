"use strict";(()=>{var Se=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,o)=>(typeof require<"u"?require:t)[o]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var ro={identifier:"en-US",UI_OK:"OK",UI_CANCEL:"Cancel",UI_APPLY:"Apply",UI_RESET:"Reset",UI_AUTO:"Auto",UI_CUSTOM:"Custom",UI_DEFAULT:"Default",UI_CLICK_HERE:"click here",MAIN_MSG_ERROR_OLD_SPOTIFY:"Your Spotify version is too old for WMPotify! Please update to Spotify 1.2.45 or newer.",MAIN_MSG_ERROR_LOAD_FAIL:"Theme loading failed. Please check the console for more information. Click OK to reload and try again.",MAIN_MSG_ERROR_LOAD_FAIL_GLOBALNAV:'Theme loading failed. Please check the console for more information. Make sure that the "Show Global nav bar with home button, search input and user avatar" option in the experimental features is set to "home-next-to-search". Click OK to reload and try again.',MAIN_MSG_ERROR_INIT:"An error occurred during initialization. Please check the console for more information. Click OK to reload and try again.",MAIN_MSG_ERROR_INCOMPAT_EXT:"Incompatible extension %s detected! Some features of WMPotify will be disabled.",TAB_NOW_PLAYING:"Now Playing",TAB_LIBRARY:"Library",TAB_RESET_ORDER:"Reset Tab Order",PB_TOOLTIP_STOP:"Stop",PB_TOOLTIP_SEEK_BK:"Right click: Skip back 15 seconds",PB_TOOLTIP_SEEK_FWD:"Right click: Skip forward 15 seconds",PB_TOOLTIP_FF:"Long click: Fast forward",PB_BTN_MINI_MODE:"Mini mode",PB_BTN_FULLSCREEN:"Full screen",LIBX_SIDEBAR_ROOT:"Library",LIBX_HEADER_ROOT:"Music",QUEUE_CURRENT_PLAYLIST_PLACEHOLDER:"Now Playing",MENU_CONF:"WMPotify Properties",CONF_COLOR_TITLE:"Color Chooser",CONF_COLOR_HUE:"Hue",CONF_COLOR_SAT:"Saturation",CONF_COLOR_TINTPB:"Apply color to the now playing bar buttons",CONF_COLOR_TINTMORE:"Apply color to more UI elements",CONF_GENERAL_TITLE:"General",CONF_GENERAL_STYLE:"Style",CONF_GENERAL_BASIC_CUSTOM_DLG_TITLE:"Set custom Basic colors",CONF_GENERAL_BASIC_CUSTOM_ACTIVE_MSG:"Enter a background color for an active window",CONF_GENERAL_BASIC_CUSTOM_INACTIVE_MSG:"Enter a background color for an inactive window",CONF_GENERAL_BASIC_CUSTOM_TEXT_MSG:"Enter a text color",CONF_GENERAL_BASIC_CUSTOM_PLACEHOLDER:"Enter as a CSS color",CONF_GENERAL_TITLE_STYLE:"Title style",CONF_GENERAL_TITLE_STYLE_NATIVE:"Native",CONF_GENERAL_TITLE_STYLE_CUSTOM:"Custom",CONF_GENERAL_TITLE_STYLE_KEEPMENU:"Keep Menu",CONF_GENERAL_APPLY:"Apply (reload required)",CONF_GENERAL_CONTROL_STYLE:"Control style",CONF_GENERAL_CONTROL_STYLE_CLASSIC:"Windows Classic",CONF_GENERAL_CONTROL_STYLE_STANDARD:"Windows Standard",CONF_GENERAL_CONTROL_STYLE_HC:"High Contrast",CONF_GENERAL_CONTROL_STYLE_CUSTOM:"Windows Classic (Custom)",CONF_GENERAL_MSG_INVALID_SCHEME_FILE:"The imported theme file does not contain valid colors.",CONF_GENERAL_MSG_UNSUPPORTED_SCHEME_FILE:"The imported theme file is not supported by WMPotify.",CONF_GENERAL_DARK_MODE:"Dark mode",CONF_GENERAL_DARK_MODE_FOLLOW_SCHEME:"Follow color scheme",CONF_GENERAL_DARK_MODE_SYSTEM:"Follow system setting",CONF_GENERAL_DARK_MODE_SYSTEM_MSG_WIN:"This option requires either installing the CEF/Spotify Tweaks Windhawk mod and enabling the 'Disable forced dark mode' option or manually patching the Spotify executable to remove the 'force-dark-mode' flag. Otherwise, dark mode will always be enabled. Are you sure you want to continue?",CONF_GENERAL_DARK_MODE_SYSTEM_MSG_UNIX:"This option requires manually patching the Spotify executable to remove the 'force-dark-mode' flag. Otherwise, dark mode will always be enabled. Are you sure you want to continue?",CONF_GENERAL_DARK_MODE_ALWAYS:"Always",CONF_GENERAL_DARK_MODE_NEVER:"Never",CONF_GENERAL_FONT:"UI font",CONF_GENERAL_FONT_RELOAD:"Reload font list",CONF_GENERAL_FONT_LOADSYS:"Load system font list",CONF_GENERAL_FONT_LOADSYS_DENIED_MSG:"It seems that the local font access permission has been denied. Please delete the Spotify CEF user data, or open the Spotify's Chromium settings UI and change xpui.app.spotify.com's Fonts permission to Allow in the Site settings.",CONF_GENERAL_CUSTOM_FONT_DLG_TITLE:"Set custom font",CONF_GENERAL_CUSTOM_FONT_MSG:"Enter a valid CSS font-family name",CONF_GENERAL_HIDE_PBLEFTBTN:"Hide the like button in the now playing bar",CONF_GENERAL_TOPMOST:"Always on top",CONF_GENERAL_TOPMOST_ALWAYS:"Always",CONF_GENERAL_TOPMOST_MINIMODE:"In mini mode",CONF_GENERAL_TOPMOST_NEVER:"Never",CONF_GENERAL_BACKDROP:"Backdrop",CONF_GENERAL_BACKDROP_NONE:"None (restart required)",CONF_GENERAL_BACKDROP_ACRYLIC:"Acrylic",CONF_GENERAL_BACKDROP_TABBED:"Tabbed",CONF_GENERAL_SHOW_LIBX:"Show Your Library X on the left sidebar",CONF_GENERAL_LOCK_TITLE:"Use static window title",CONF_GENERAL_WH_MESSAGE:'Some options require <a href="https://windhawk.net/mods/cef-titlebar-enabler-universal">CEF/Spotify Tweaks Windhawk mod</a> to work or look good.',CONF_SPEED_TITLE:"Play speed settings",CONF_SPEED_SLOW:"Slow",CONF_SPEED_NORMAL:"Normal",CONF_SPEED_FAST:"Fast",CONF_SPEED_CURRENT_LABEL:"Play speed",CONF_SPEED_CUSTOM_DLG_TITLE:"Set playback speed",CONF_SPEED_CUSTOM_MSG:"Enter a playback speed (0.5 - 5.0)",CONF_SPEED_NO_CONNECT_MSG:"Cannot change playback speed while playing from another device",CONF_SPEED_OUT_OF_RANGE_MSG:"Playback speed must be faster than 0 and less than or equal to 5.0",CONF_SPEED_UNSUPPORTED_MSG_WIN:"Changing the playback speed while playing music requires the x64 Windows Spotify client with the CEF/Spotify Tweaks Windhawk mod installed",CONF_SPEED_UNSUPPORTED_MSG_UNIX:"Changing the playback speed is only supported while playing podcasts",CONF_ABOUT_TITLE:"About",CONF_ABOUT_DESC:"A Windows Media Player 11 inspired Spicetify theme for Spotify",CONF_ABOUT_VERSION:"Version",CONF_ABOUT_CTEWH_VERSION:"CEF/Spotify Tweaks Windhawk mod %s available",CONF_ABOUT_AUTHOR:"Made by Ingan121",CONF_ABOUT_AUTO_UPDATES:"Automatically check for updates",WMPVIS_INSTALL_TITLE:"Install WMPotify NowPlaying?",WMPVIS_INSTALL_DESC:"WMPotify NowPlaying features WMP-like visualization screen and lyrics overlaid on top of it. We recommend installing it for the best experience with WMPotify.",WMPVIS_INSTALL_STEPS:"To install it, please follow these steps:",WMPVIS_INSTALL_STEP1:"Copy the following code:",WMPVIS_INSTALL_STEP2:"Open a PowerShell window",WMPVIS_INSTALL_STEP2_UNIX:"Open a terminal window",WMPVIS_INSTALL_STEP3:"Paste the code and press Enter",WMPVIS_INSTALL_MORE_INFO:"Or %s for more information, including manual installation instructions.",WMPVIS_INSTALL_HIDE:"If you don't want to install it, %s to hide this button.",WMPVIS_INSTALL_CODE_COPY:"Code copied to clipboard!",THEME_UPDATE_TITLE:"WMPotify has been updated!",THEME_UPDATE_INFO:"WMPotify has been updated to %s. Please read the changelog below.",THEME_UPDATE_STEPS:"To update it, please follow these steps:",THEME_CHANGELOG_PLACEHOLDER:"Failed to fetch changelog! Please %s for more information.",THEME_UPDATE_DISMISS:"Do not notify me again about this update",CTEWH_UPDATE_MSG:"CEF/Spotify Tweaks Windhawk mod can be updated to version %s. Please update it from the Windhawk UI for the best experience with WMPotify."},_t=ro;var ao={identifier:"ko-KR",UI_OK:"\uD655\uC778",UI_CANCEL:"\uCDE8\uC18C",UI_APPLY:"\uC801\uC6A9",UI_RESET:"\uC7AC\uC124\uC815",UI_AUTO:"\uC790\uB3D9",UI_CUSTOM:"\uC0AC\uC6A9\uC790 \uC9C0\uC815",UI_DEFAULT:"\uAE30\uBCF8\uAC12",UI_CLICK_HERE:"\uC5EC\uAE30\uB97C \uD074\uB9AD",MAIN_MSG_ERROR_OLD_SPOTIFY:"Spotify \uBC84\uC804\uC774 \uB108\uBB34 \uC624\uB798\uB418\uC5B4 WMPotify\uB97C \uC0AC\uC6A9\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4! Spotify\uB97C 1.2.45 \uC774\uC0C1\uC73C\uB85C \uC5C5\uB370\uC774\uD2B8\uD558\uC2ED\uC2DC\uC624.",MAIN_MSG_ERROR_LOAD_FAIL:"\uD14C\uB9C8 \uB85C\uB4DC\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4. OK\uB97C \uD074\uB9AD\uD558\uC5EC \uB2E4\uC2DC \uB85C\uB4DC\uD558\uC2ED\uC2DC\uC624.",MAIN_MSG_ERROR_LOAD_FAIL_GLOBALNAV:'\uD14C\uB9C8 \uB85C\uB4DC\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4. \uC2E4\uD5D8\uC801 \uAE30\uB2A5\uC5D0\uC11C "Show Global nav bar with home button, search input and user avatar"\uAC00 "home-next-to-search"\uB85C \uC124\uC815\uB418\uC5B4 \uC788\uB294\uC9C0 \uD655\uC778\uD558\uC2ED\uC2DC\uC624. OK\uB97C \uD074\uB9AD\uD558\uC5EC \uB2E4\uC2DC \uB85C\uB4DC\uD558\uC2ED\uC2DC\uC624.',MAIN_MSG_ERROR_INIT:"\uD14C\uB9C8 \uB85C\uB4DC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4. \uC790\uC138\uD55C \uB0B4\uC6A9\uC740 \uCF58\uC194\uC744 \uD655\uC778\uD558\uC2ED\uC2DC\uC624. OK\uB97C \uD074\uB9AD\uD558\uC5EC \uB2E4\uC2DC \uB85C\uB4DC\uD558\uC2ED\uC2DC\uC624.",MAIN_MSG_ERROR_INCOMPAT_EXT:"\uD638\uD658\uB418\uC9C0 \uC54A\uB294 \uD655\uC7A5 \uD504\uB85C\uADF8\uB7A8 %s\uC774(\uAC00) \uAC10\uC9C0\uB418\uC5C8\uC2B5\uB2C8\uB2E4! WMPotify\uC758 \uC77C\uBD80 \uAE30\uB2A5\uC774 \uBE44\uD65C\uC131\uD654\uB429\uB2C8\uB2E4.",TAB_NOW_PLAYING:"\uC9C0\uAE08 \uC7AC\uC0DD",TAB_LIBRARY:"\uB77C\uC774\uBE0C\uB7EC\uB9AC",TAB_RESET_ORDER:"\uD0ED \uC21C\uC11C \uCD08\uAE30\uD654",PB_TOOLTIP_STOP:"\uC815\uC9C0\uD558\uAE30",PB_TOOLTIP_SEEK_BK:"\uC624\uB978\uCABD \uD074\uB9AD: 15\uCD08 \uB4A4\uB85C \uAC74\uB108\uB6F0\uAE30",PB_TOOLTIP_SEEK_FWD:"\uC624\uB978\uCABD \uD074\uB9AD: 15\uCD08 \uC55E\uC73C\uB85C \uAC74\uB108\uB6F0\uAE30",PB_TOOLTIP_FF:"\uAE38\uAC8C \uD074\uB9AD: \uBE68\uB9AC \uAC10\uAE30",PB_BTN_MINI_MODE:"\uBBF8\uB2C8 \uBAA8\uB4DC",PB_BTN_FULLSCREEN:"\uC804\uCCB4 \uD654\uBA74",LIBX_SIDEBAR_ROOT:"\uB77C\uC774\uBE0C\uB7EC\uB9AC",LIBX_HEADER_ROOT:"\uC74C\uC545",QUEUE_CURRENT_PLAYLIST_PLACEHOLDER:"\uC9C0\uAE08 \uC7AC\uC0DD",MENU_CONF:"WMPotify \uC18D\uC131",CONF_COLOR_TITLE:"\uC0C9 \uC120\uD0DD",CONF_COLOR_HUE:"\uC0C9\uC0C1",CONF_COLOR_SAT:"\uCC44\uB3C4",CONF_COLOR_TINTPB:"\uC9C0\uAE08 \uC7AC\uC0DD \uB9C9\uB300\uC758 \uBC84\uD2BC\uC5D0 \uC0C9\uC0C1 \uC801\uC6A9",CONF_COLOR_TINTMORE:"\uB354 \uB9CE\uC740 UI \uC694\uC18C\uC5D0 \uC0C9\uC0C1 \uC801\uC6A9",CONF_GENERAL_TITLE:"\uC77C\uBC18",CONF_GENERAL_STYLE:"\uC2A4\uD0C0\uC77C",CONF_GENERAL_BASIC_CUSTOM_DLG_TITLE:"\uC0AC\uC6A9\uC790 \uC815\uC758 Basic \uC2A4\uD0C0\uC77C \uC0C9 \uC124\uC815",CONF_GENERAL_BASIC_CUSTOM_ACTIVE_MSG:"\uD65C\uC131 \uCC3D\uC758 \uBC30\uACBD\uC0C9\uC744 \uC785\uB825\uD558\uC138\uC694",CONF_GENERAL_BASIC_CUSTOM_INACTIVE_MSG:"\uBE44\uD65C\uC131 \uCC3D\uC758 \uBC30\uACBD\uC0C9\uC744 \uC785\uB825\uD558\uC138\uC694",CONF_GENERAL_BASIC_CUSTOM_TEXT_MSG:"\uD14D\uC2A4\uD2B8 \uC0C9\uC0C1\uC744 \uC785\uB825\uD558\uC138\uC694",CONF_GENERAL_BASIC_CUSTOM_PLACEHOLDER:"CSS \uC0C9\uC0C1\uC73C\uB85C \uC785\uB825\uD558\uC138\uC694",CONF_GENERAL_TITLE_STYLE:"\uC81C\uBAA9 \uC2A4\uD0C0\uC77C",CONF_GENERAL_TITLE_STYLE_NATIVE:"\uC2DC\uC2A4\uD15C",CONF_GENERAL_TITLE_STYLE_CUSTOM:"\uC790\uCCB4 \uAD6C\uD604",CONF_GENERAL_TITLE_STYLE_KEEPMENU:"\uBA54\uB274 \uC720\uC9C0",CONF_GENERAL_APPLY:"\uC801\uC6A9 (\uB2E4\uC2DC \uB85C\uB4DC \uD544\uC694)",CONF_GENERAL_CONTROL_STYLE:"\uCEE8\uD2B8\uB864 \uC2A4\uD0C0\uC77C",CONF_GENERAL_CONTROL_STYLE_CLASSIC:"Windows \uACE0\uC804",CONF_GENERAL_CONTROL_STYLE_STANDARD:"Windows \uD45C\uC900",CONF_GENERAL_CONTROL_STYLE_HC:"\uACE0\uB300\uBE44",CONF_GENERAL_CONTROL_STYLE_CUSTOM:"Windows \uACE0\uC804 (\uC0AC\uC6A9\uC790 \uC9C0\uC815)",CONF_GENERAL_MSG_INVALID_SCHEME_FILE:"\uAC00\uC838\uC628 \uD30C\uC77C\uC774 \uC62C\uBC14\uB978 \uC0C9\uC0C1\uC744 \uD3EC\uD568\uD558\uACE0 \uC788\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.",CONF_GENERAL_MSG_UNSUPPORTED_SCHEME_FILE:"\uAC00\uC838\uC628 \uD30C\uC77C\uC774 WMPotify\uC5D0\uC11C \uC9C0\uC6D0\uB418\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.",CONF_GENERAL_DARK_MODE:"\uB2E4\uD06C \uBAA8\uB4DC",CONF_GENERAL_DARK_MODE_FOLLOW_SCHEME:"\uC0C9 \uAD6C\uC131\uD45C \uB530\uB974\uAE30",CONF_GENERAL_DARK_MODE_SYSTEM:"\uC2DC\uC2A4\uD15C \uC124\uC815 \uB530\uB974\uAE30",CONF_GENERAL_DARK_MODE_SYSTEM_MSG_WIN:"\uC774 \uC635\uC158\uC744 \uC0AC\uC6A9\uD558\uB824\uBA74 CEF/Spotify Tweaks Windhawk \uBAA8\uB4DC\uB97C \uC124\uCE58\uD558\uACE0 'Disable forced dark mode' \uC635\uC158\uC744 \uD65C\uC131\uD654\uD558\uAC70\uB098 Spotify \uC2E4\uD589 \uD30C\uC77C\uC5D0\uC11C 'force-dark-mode' \uD50C\uB798\uADF8\uB97C \uC81C\uAC70\uD574\uC57C \uD569\uB2C8\uB2E4. \uADF8\uB807\uC9C0 \uC54A\uC73C\uBA74 \uD56D\uC0C1 \uB2E4\uD06C \uBAA8\uB4DC\uAC00 \uD65C\uC131\uD654\uB429\uB2C8\uB2E4. \uACC4\uC18D\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?",CONF_GENERAL_DARK_MODE_SYSTEM_MSG_UNIX:"\uC774 \uC635\uC158\uC744 \uC0AC\uC6A9\uD558\uB824\uBA74 Spotify \uC2E4\uD589 \uD30C\uC77C\uC5D0\uC11C 'force-dark-mode' \uD50C\uB798\uADF8\uB97C \uC81C\uAC70\uD574\uC57C \uD569\uB2C8\uB2E4. \uADF8\uB807\uC9C0 \uC54A\uC73C\uBA74 \uD56D\uC0C1 \uB2E4\uD06C \uBAA8\uB4DC\uAC00 \uD65C\uC131\uD654\uB429\uB2C8\uB2E4. \uACC4\uC18D\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?",CONF_GENERAL_DARK_MODE_ALWAYS:"\uD56D\uC0C1",CONF_GENERAL_DARK_MODE_NEVER:"\uC548\uD568",CONF_GENERAL_FONT:"UI \uAE00\uAF34",CONF_GENERAL_FONT_RELOAD:"\uAE00\uAF34 \uBAA9\uB85D \uB2E4\uC2DC \uBD88\uB7EC\uC624\uAE30",CONF_GENERAL_FONT_LOADSYS:"\uC2DC\uC2A4\uD15C \uAE00\uAF34 \uBAA9\uB85D \uBD88\uB7EC\uC624\uAE30",CONF_GENERAL_FONT_LOADSYS_DENIED_MSG:"\uB85C\uCEEC \uAE00\uAF34 \uC811\uADFC \uAD8C\uD55C\uC774 \uAC70\uBD80\uB41C \uAC83 \uAC19\uC2B5\uB2C8\uB2E4. Spotify CEF \uC0AC\uC6A9\uC790 \uB370\uC774\uD130\uB97C \uC0AD\uC81C\uD558\uAC70\uB098 Spotify\uC758 Chromium \uC124\uC815 UI\uB97C \uC5F4\uACE0 \uC0AC\uC774\uD2B8 \uC124\uC815\uC5D0\uC11C xpui.app.spotify.com\uC758 \uAE00\uAF34 \uC811\uADFC \uAD8C\uD55C\uC744 \uD5C8\uC6A9\uD574\uC8FC\uC138\uC694.",CONF_GENERAL_CUSTOM_FONT_DLG_TITLE:"\uC0AC\uC6A9\uC790 \uC815\uC758 \uAE00\uAF34 \uC124\uC815",CONF_GENERAL_CUSTOM_FONT_MSG:"\uC62C\uBC14\uB978 CSS font-family \uC774\uB984 \uC785\uB825",CONF_GENERAL_HIDE_PBLEFTBTN:"\uC9C0\uAE08 \uC7AC\uC0DD \uB9C9\uB300\uC758 \uC88B\uC544\uC694 \uBC84\uD2BC \uC228\uAE30\uAE30",CONF_GENERAL_TOPMOST:"\uD56D\uC0C1 \uC704\uC5D0 \uD45C\uC2DC",CONF_GENERAL_TOPMOST_ALWAYS:"\uD56D\uC0C1",CONF_GENERAL_TOPMOST_MINIMODE:"\uBBF8\uB2C8 \uBAA8\uB4DC\uC5D0\uC11C",CONF_GENERAL_TOPMOST_NEVER:"\uC548\uD568",CONF_GENERAL_BACKDROP:"\uBC30\uACBD \uC7AC\uC9C8",CONF_GENERAL_BACKDROP_NONE:"\uC5C6\uC74C (\uC7AC\uC2DC\uC791 \uD544\uC694)",CONF_GENERAL_BACKDROP_ACRYLIC:"\uC544\uD06C\uB9B4",CONF_GENERAL_BACKDROP_TABBED:"\uD0ED",CONF_GENERAL_SHOW_LIBX:"\uC67C\uCABD \uC0AC\uC774\uB4DC\uBC14\uC5D0 \uB77C\uC774\uBE0C\uB7EC\uB9AC X \uD45C\uC2DC",CONF_GENERAL_LOCK_TITLE:"\uC815\uC801 \uCC3D \uC81C\uBAA9 \uC0AC\uC6A9",CONF_GENERAL_WH_MESSAGE:'\uC77C\uBD80 \uC635\uC158\uC740 <a href="https://windhawk.net/mods/cef-titlebar-enabler-universal">CEF/Spotify Tweaks Windhawk \uBAA8\uB4DC</a>\uAC00 \uD544\uC694\uD569\uB2C8\uB2E4.',CONF_SPEED_TITLE:"\uC7AC\uC0DD \uC18D\uB3C4 \uC124\uC815",CONF_SPEED_SLOW:"\uB290\uB9AC\uAC8C",CONF_SPEED_NORMAL:"\uBCF4\uD1B5",CONF_SPEED_FAST:"\uBE60\uB974\uAC8C",CONF_SPEED_CURRENT_LABEL:"\uC7AC\uC0DD \uC18D\uB3C4",CONF_SPEED_CUSTOM_DLG_TITLE:"\uC7AC\uC0DD \uC18D\uB3C4 \uC124\uC815",CONF_SPEED_CUSTOM_MSG:"\uC7AC\uC0DD \uC18D\uB3C4\uB97C \uC785\uB825\uD558\uC2ED\uC2DC\uC624 (0.5 - 5.0)",CONF_SPEED_NO_CONNECT_MSG:"\uB2E4\uB978 \uC7A5\uCE58\uC5D0\uC11C \uC7AC\uC0DD \uC911\uC77C \uB54C\uB294 \uC7AC\uC0DD \uC18D\uB3C4\uB97C \uBCC0\uACBD\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4",CONF_SPEED_OUT_OF_RANGE_MSG:"\uC7AC\uC0DD \uC18D\uB3C4\uB294 0\uBCF4\uB2E4 \uD06C\uACE0 5 \uC774\uD558\uC5EC\uC57C \uD569\uB2C8\uB2E4",CONF_SPEED_UNSUPPORTED_MSG_WIN:"\uC74C\uC545\uC744 \uC7AC\uC0DD\uD558\uB294 \uB3D9\uC548 \uC7AC\uC0DD \uC18D\uB3C4\uB97C \uBCC0\uACBD\uD558\uB824\uBA74 CEF/Spotify Tweaks Windhawk \uBAA8\uB4DC\uAC00 \uC124\uCE58\uB41C x64 Windows Spotify \uD074\uB77C\uC774\uC5B8\uD2B8\uAC00 \uD544\uC694\uD569\uB2C8\uB2E4",CONF_SPEED_UNSUPPORTED_MSG_UNIX:"\uD31F\uCE90\uC2A4\uD2B8\uB97C \uC7AC\uC0C1\uD558\uB294 \uB3D9\uC548\uC5D0\uB9CC \uC7AC\uC0DD \uC18D\uB3C4\uB97C \uBCC0\uACBD\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4",CONF_ABOUT_TITLE:"\uC815\uBCF4",CONF_ABOUT_DESC:"Spotify\uC6A9 Windows Media Player 11 \uD14C\uB9C8",CONF_ABOUT_VERSION:"\uBC84\uC804",CONF_ABOUT_CTEWH_VERSION:"CEF/Spotify Tweaks Windhawk \uBAA8\uB4DC %s \uC0AC\uC6A9 \uAC00\uB2A5",CONF_ABOUT_AUTHOR:"\uC81C\uC791: Ingan121",CONF_ABOUT_AUTO_UPDATES:"\uC790\uB3D9\uC73C\uB85C \uC5C5\uB370\uC774\uD2B8 \uD655\uC778",WMPVIS_INSTALL_TITLE:"WMPotify NowPlaying\uC744 \uC124\uCE58\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?",WMPVIS_INSTALL_DESC:"WMPotify NowPlaying\uC740 WMP\uC640 \uAC19\uC740 \uC2DC\uAC01\uD654 \uD654\uBA74\uACFC \uADF8 \uC704\uC5D0 \uD45C\uC2DC\uB418\uB294 \uAC00\uC0AC \uCC3D\uC744 \uC81C\uACF5\uD569\uB2C8\uB2E4. WMPotify\uB97C \uCD5C\uC0C1\uC758 \uACBD\uD5D8\uC73C\uB85C \uC0AC\uC6A9\uD558\uB824\uBA74 WMPotify NowPlaying \uC124\uCE58\uB97C \uAD8C\uC7A5\uD569\uB2C8\uB2E4.",WMPVIS_INSTALL_STEPS:"\uC124\uCE58\uD558\uB824\uBA74 \uB2E4\uC74C \uB2E8\uACC4\uB97C \uB530\uB974\uC2ED\uC2DC\uC624:",WMPVIS_INSTALL_STEP1:"\uB2E4\uC74C \uCF54\uB4DC\uB97C \uBCF5\uC0AC\uD558\uC2ED\uC2DC\uC624:",WMPVIS_INSTALL_STEP2:"PowerShell\uC744 \uC5FD\uB2C8\uB2E4",WMPVIS_INSTALL_STEP2_UNIX:"\uD130\uBBF8\uB110 \uCC3D\uC744 \uC5FD\uB2C8\uB2E4",WMPVIS_INSTALL_STEP3:"\uCF54\uB4DC\uB97C \uBD99\uC5EC\uB123\uACE0 \uC5D4\uD130 \uD0A4\uB97C \uB204\uB985\uB2C8\uB2E4",WMPVIS_INSTALL_MORE_INFO:"\uB610\uB294 \uC218\uB3D9 \uC124\uCE58 \uC9C0\uCE68\uC744 \uD3EC\uD568\uD55C \uC790\uC138\uD55C \uC815\uBCF4\uB97C \uBCF4\uB824\uBA74 %s\uD558\uC2ED\uC2DC\uC624.",WMPVIS_INSTALL_HIDE:"\uC124\uCE58\uD558\uC9C0 \uC54A\uC73C\uB824\uBA74 %s\uD558\uC5EC \uC774 \uBC84\uD2BC\uC744 \uC228\uAE30\uC2ED\uC2DC\uC624.",WMPVIS_INSTALL_CODE_COPY:"\uCF54\uB4DC\uAC00 \uD074\uB9BD\uBCF4\uB4DC\uC5D0 \uBCF5\uC0AC\uB418\uC5C8\uC2B5\uB2C8\uB2E4!",THEME_UPDATE_TITLE:"WMPotify\uAC00 \uC5C5\uB370\uC774\uD2B8\uB418\uC5C8\uC2B5\uB2C8\uB2E4!",THEME_UPDATE_INFO:"WMPotify\uAC00 %s(\uC73C)\uB85C \uC5C5\uB370\uC774\uD2B8\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uC544\uB798\uC758 \uBCC0\uACBD \uB85C\uADF8\uB97C \uC77D\uC5B4\uC8FC\uC2ED\uC2DC\uC624.",THEME_UPDATE_STEPS:"\uC5C5\uB370\uC774\uD2B8\uD558\uB824\uBA74 \uB2E4\uC74C \uB2E8\uACC4\uB97C \uB530\uB974\uC2ED\uC2DC\uC624:",THEME_CHANGELOG_PLACEHOLDER:"\uBCC0\uACBD \uB0B4\uC5ED\uC744 \uAC00\uC838\uC624\uC9C0 \uBABB\uD588\uC2B5\uB2C8\uB2E4! \uC790\uC138\uD55C \uC815\uBCF4\uB97C \uBCF4\uB824\uBA74 %s\uD558\uC2ED\uC2DC\uC624.",THEME_UPDATE_DISMISS:"\uC774 \uC5C5\uB370\uC774\uD2B8\uC5D0 \uB300\uD55C \uC54C\uB9BC\uC744 \uB2E4\uC2DC \uD45C\uC2DC\uD558\uC9C0 \uC54A\uC74C",CTEWH_UPDATE_MSG:"CEF/Spotify Tweaks Windhawk \uBAA8\uB4DC\uB97C %s(\uC73C)\uB85C \uC5C5\uB370\uC774\uD2B8\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4. \uCD5C\uC0C1\uC758 \uACBD\uD5D8\uC744 \uC704\uD574 Windhawk UI\uC5D0\uC11C \uBAA8\uB4DC\uB97C \uC5C5\uB370\uC774\uD2B8\uD558\uC2ED\uC2DC\uC624."},vt=ao;var Qe={"en-US":"English","ko-KR":"\uD55C\uAD6D\uC5B4"},J=navigator.language;if(!(J in Qe)){for(let e in Qe)if(J.slice(0,2)===e.slice(0,2)){J=e;break}J in Qe||(J="en-US")}var Ne={"en-US":_t,"ko-KR":vt},ge=Ne["en-US"];J!=="en-US"&&Object.assign(ge,Ne[J]);ge.getString=lo;var s=ge;function lo(e){return ge[e]?he(ge[e],...Array.from(arguments).slice(1)):Ne["en-US"][e]?(console.info(`Fallback string used for locId ${e}`),he(Ne["en-US"][e],...Array.from(arguments).slice(1))):(console.error(`No string found for locId ${e}`),e)}function he(e){if(e=e.replace(/&([^&])/g,"<u>$1</u>").replace(/\\&/g,"&"),arguments.length>1)for(let t=1;t<arguments.length;t++)e=e.replace(/%s/,arguments[t]),e=e.replace(`%${t}s`,arguments[t]);return e}var Ae=1,co={setControlHeight(e){Ae=e||1},init(){if(Spicetify.Config.extensions.includes("noControls.js")){Spicetify.showNotification("[WMPotify] "+s.getString("MAIN_MSG_ERROR_INCOMPAT_EXT","No Controls"));return}let e=r=>{r&&(r._updateUiClient?.updateTitlebarHeight&&r._updateUiClient.updateTitlebarHeight({height:Ae}),r._updateUiClient?.setButtonsVisibility&&Ae<=1&&r._updateUiClient.setButtonsVisibility(!1),window.addEventListener("beforeunload",()=>{r._updateUiClient?.setButtonsVisibility&&r._updateUiClient.setButtonsVisibility({showButtons:!0})})),Spicetify.CosmosAsync?.post("sp://messages/v1/container/control",{type:"update_titlebar",height:Ae+"px"})};e(Spicetify.Platform.ControlMessageAPI),e(Spicetify.Platform.UpdateAPI);async function t(){e(Spicetify.Platform.ControlMessageAPI),e(Spicetify.Platform.UpdateAPI)}let o=setInterval(t,100);setTimeout(()=>{clearInterval(o)},1e4);let n=()=>{e(Spicetify.Platform.ControlMessageAPI),e(Spicetify.Platform.UpdateAPI)};document.addEventListener("fullscreenchange",n),window.addEventListener("resize",()=>{setTimeout(()=>{n()},100)})}},ce=co;var b=null,Ze=1,so={init(){return uo()},query(){return b?b.query():null},extendFrame(e,t,o,n){b?.extendFrame&&([e,t,o,n]=[e,t,o,n].map(r=>Math.round(r*window.devicePixelRatio)),Ze>1&&([e,t]=[e&&e-1,t&&t-1],[o,n]=[o&&o-1,n&&n-1]),b.extendFrame(e,t,o,n))},minimize(){b?.minimize&&b.minimize()},maximizeRestore(){b?.maximizeRestore&&b.maximizeRestore()},close(){b?.close&&b.close()},setLayered(e,t,o){b?.setLayered&&b.setLayered(e,t,o)},setBackdrop(e){b?.setBackdrop&&b.setBackdrop(e)},resizeTo(e,t){b?.resizeTo&&b.resizeTo(e,t)},setMinSize(e,t){b?.setMinSize&&([e,t]=[e,t].map(o=>Math.round(o*window.devicePixelRatio)),b.setMinSize(e,t))},setTopMost(e){b?.setTopMost&&b.setTopMost(e)},setTitle(e){b?.setTitle&&b.setTitle(e)},lockTitle(e){b?.lockTitle&&b.lockTitle(e)},openSpotifyMenu(){b?.openSpotifyMenu&&b.openSpotifyMenu()},setPlaybackSpeed(e){b?.setPlaybackSpeed&&b.setPlaybackSpeed(parseFloat(e))},available(){return!!b},getModule(){return b}};function uo(){if(navigator.userAgent.includes("Windows"))try{b=(window.cancelEsperantoCall||window._getSpotifyModule)("ctewh"),Ze=b.query().dpi/96;let{version:e,initialOptions:t}=b;return console.log(`CEF/Spotify Tweaks Windhawk mod available, Version: ${e}`),window.addEventListener("resize",()=>{Ze=b.query().dpi/96}),{version:e,initialOptions:t}}catch{b=null,console.log("Windhawk mod not available")}}var y=so;var ee=null;function Ct(){ee=document.createElement("div"),ee.id="wmpotify-title-bar";let e=document.createElement("div");e.id="wmpotify-title-icon",e.addEventListener("click",()=>{e.classList.toggle("logo2013"),e.classList.contains("logo2013")?localStorage.wmpotifyUse2013Icon=!0:delete localStorage.wmpotifyUse2013Icon}),localStorage.wmpotifyUse2013Icon&&e.classList.add("logo2013"),e.addEventListener("dblclick",()=>{Lt()}),ee.appendChild(e),document.body.appendChild(ee)}async function mo(e){let t=y.query();switch(e){case"native":ce.setControlHeight(0);break;case"custom":ce.setControlHeight(0);case"keepmenu":let o=document.createElement("div");if(o.id="wmpotify-title-buttons",window.SpotEx||t){let a=document.createElement("button");a.id="wmpotify-minimize-button",a.addEventListener("click",()=>{t?y.minimize():SpotEx.updateWindow({state:"minimized"})}),o.appendChild(a);let i=document.createElement("button");i.id="wmpotify-maximize-button",i.addEventListener("click",async()=>{t?y.maximizeRestore():(await SpotEx.getWindow()).state==="maximized"?SpotEx.updateWindow({state:"normal"}):SpotEx.updateWindow({state:"maximized"})}),o.appendChild(i),window.addEventListener("resize",l),l();async function l(){t?y.query().isMaximized?i.dataset.maximized=!0:delete i.dataset.maximized:(await SpotEx.getWindow()).state==="maximized"?i.dataset.maximized=!0:delete i.dataset.maximized}}let n=document.createElement("button");n.id="wmpotify-close-button",n.addEventListener("click",()=>{Lt()}),o.appendChild(n);case"spotify":ee===null&&Ct();let r=document.createElement("span");r.id="wmpotify-title-text",r.textContent=await Spicetify.AppTitle.get(),ee.appendChild(r),(e==="custom"||e==="keepmenu")&&ee.appendChild(o),(e==="keepmenu"||e==="spotify")&&ce.setControlHeight(25),Spicetify.AppTitle.sub(a=>{a?.trim()&&(r.textContent=a)});break}}async function Lt(){y.available()?y.close():window.close()}var po={earlyInit:Ct,init:mo},Je=po;function Ie(e="WMPotify",t,o=s.UI_OK,n=s.UI_CANCEL){return new Promise((r,a)=>{let i=document.createElement("div");i.id="wmpotify-confirm-modal";let l=document.createElement("p");l.textContent=t,i.appendChild(l);let u=new MutationObserver(()=>{document.contains(i)||(u.disconnect(),r(!1))}),m=document.createElement("div");m.classList.add("wmpotify-modal-bottom-buttons");let f=document.createElement("button");f.classList.add("wmpotify-aero"),f.textContent=o,f.addEventListener("click",h=>{u.disconnect(),Spicetify.PopupModal.hide(),r(!0),h.preventDefault(),h.stopPropagation()}),m.appendChild(f);let p=document.createElement("button");p.classList.add("wmpotify-aero"),p.textContent=n,p.addEventListener("click",h=>{u.disconnect(),Spicetify.PopupModal.hide(),r(!1),h.preventDefault(),h.stopPropagation()}),m.appendChild(p),i.appendChild(m),Spicetify.PopupModal.display({title:e,content:i}),u.observe(document.body,{childList:!0})})}function Y(e="WMPotify",t,o,n){return new Promise((r,a)=>{let i=document.createElement("div");i.id="wmpotify-prompt-modal";let l=document.createElement("p");l.textContent=t,i.appendChild(l);let u=document.createElement("input");u.classList.add("wmpotify-aero"),u.type="text",u.value=o,u.placeholder=n,u.style.width="100%",i.appendChild(u);let m=new MutationObserver(()=>{document.contains(i)||(m.disconnect(),r(null))}),f=document.createElement("div");f.classList.add("wmpotify-modal-bottom-buttons");let p=document.createElement("button");p.classList.add("wmpotify-aero"),p.textContent=s.UI_OK,p.addEventListener("click",E=>{m.disconnect(),Spicetify.PopupModal.hide(),r(u.value),E.preventDefault(),E.stopPropagation()}),f.appendChild(p);let h=document.createElement("button");h.classList.add("wmpotify-aero"),h.textContent=s.UI_CANCEL,h.addEventListener("click",E=>{m.disconnect(),Spicetify.PopupModal.hide(),r(null),E.preventDefault(),E.stopPropagation()}),f.appendChild(h),u.addEventListener("keydown",E=>{E.key==="Enter"?p.click():E.key==="Escape"&&h.click()}),i.appendChild(f),Spicetify.PopupModal.display({title:e,content:i}),u.focus(),m.observe(document.body,{childList:!0})})}async function xe(){let e=document.createElement("div");e.id="wmpotify-instructions-dialog",e.innerHTML=`
        <p>${s.WMPVIS_INSTALL_DESC}</p><br>
        <img src="https://raw.githubusercontent.com/Ingan121/WMPotify/refs/heads/master/screenshots/wmpvis_aero_2.png" alt="WMPotify NowPlaying screenshot"><br><br>
        <p>${s.WMPVIS_INSTALL_STEPS}</p><br>
        <ol>
            <li>1. ${s.WMPVIS_INSTALL_STEP1}</li>
            <div class="wmpotify-code-container">
                <button id="wmpotify-copy-code">
                    
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-copy" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM2 5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1h1v1a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1v1z"/>
                    </svg>
                </button>
                <code>
                ${navigator.userAgent.includes("Windows")?`iex "& { $(iwr -useb '<a href="https://raw.githubusercontent.com/Ingan121/WMPotify/master/installer/install.ps1">https://raw.githubusercontent.com/Ingan121/WMPotify/master/installer/install.ps1</a>') } -Install @('wmpvis')"`:'export SKIP_THEME=true; curl -fsSL <a href="https://raw.githubusercontent.com/Ingan121/WMPotify/master/installer/install.sh">https://raw.githubusercontent.com/Ingan121/WMPotify/master/installer/install.sh</a> | sh'}
                </code>
            </div>
            <li>2. ${s[navigator.userAgent.includes("Windows")?"WMPVIS_INSTALL_STEP2":"WMPVIS_INSTALL_STEP2_UNIX"]}</li>
            <li>3. ${s.WMPVIS_INSTALL_STEP3}</li>
        </ol><br>
        <p>${s.getString("WMPVIS_INSTALL_MORE_INFO",`<a href="https://github.com/Ingan121/Spicetify-CustomApps">${s.UI_CLICK_HERE}</a>`)}</p>
        <p>${s.getString("WMPVIS_INSTALL_HIDE",`<a href="javascript:localStorage.wmpotifyNoWmpvis=true;document.querySelector('#wmpotify-tabs-container button[data-identifier=now-playing]').dataset.hidden=true;Spicetify.PopupModal.hide();window.dispatchEvent(new Event('resize'))">${s.UI_CLICK_HERE}</a>`)}</p>
    `,Spicetify.PopupModal.display({title:s.WMPVIS_INSTALL_TITLE,content:e,isLarge:!0}),document.querySelector("#wmpotify-copy-code").addEventListener("click",()=>{let t=document.querySelector("#wmpotify-instructions-dialog code").textContent.trim();Spicetify.Platform.ClipboardAPI.copy(t)})}async function Ee(e,t,o){let n=t,r="Failed to fetch changelog!";if(o)r=o.replace(/\r\n/g,"<br>").replace(/\n/g,"<br>");else try{let l=await(await fetch("https://api.github.com/repos/Ingan121/WMPotify/releases/latest")).json();n=l.name,r=l.body?.replace(/\r\n/g,"<br>").replace(/\n/g,"<br>")||""}catch{r=s.getString("THEME_CHANGELOG_PLACEHOLDER",`<a href="https://github.com/Ingan121/WMPotify/releases/tag/${n}">${s.UI_CLICK_HERE}</a>`)}let a=document.createElement("div");a.id="wmpotify-instructions-dialog",a.innerHTML=`
        <p>${s.getString("THEME_UPDATE_INFO",n)}</p>
        <div class="wmpotify-code-container">
            <p>${r}</p>
        </div>
        ${e?"":`
            <p>${s.THEME_UPDATE_STEPS}</p><br>
            <ol>
                <li>1. ${s.WMPVIS_INSTALL_STEP1}</li>
                <div class="wmpotify-code-container">
                    <button id="wmpotify-copy-code">
                        
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-copy" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM2 5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1h1v1a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1v1z"/>
                        </svg>
                    </button>
                    <code>
                    ${navigator.userAgent.includes("Windows")?`iex "& { $(iwr -useb '<a href="https://raw.githubusercontent.com/Ingan121/WMPotify/master/installer/install.ps1">https://raw.githubusercontent.com/Ingan121/WMPotify/master/installer/install.ps1</a>') }"`:'curl -fsSL <a href="https://raw.githubusercontent.com/Ingan121/WMPotify/master/installer/install.sh">https://raw.githubusercontent.com/Ingan121/WMPotify/master/installer/install.sh</a> | sh'}
                    </code>
                </div>
                <li>2. ${s[navigator.userAgent.includes("Windows")?"WMPVIS_INSTALL_STEP2":"WMPVIS_INSTALL_STEP2_UNIX"]}</li>
                <li>3. ${s.WMPVIS_INSTALL_STEP3}</li>
            </ol><br>
            <p>${s.getString("WMPVIS_INSTALL_MORE_INFO",`<a href="https://github.com/Ingan121/WMPotify">${s.UI_CLICK_HERE}</a>`)}</p>
            <button class="wmpotify-aero" onclick="localStorage.wmpotifyIgnoreVersion='${t}';Spicetify.PopupModal.hide();">${s.THEME_UPDATE_DISMISS}</button>
        `}
    `,Spicetify.PopupModal.display({title:s.THEME_UPDATE_TITLE,content:a,isLarge:!e}),e||document.querySelector("#wmpotify-copy-code").addEventListener("click",()=>{let i=document.querySelector("#wmpotify-instructions-dialog code").textContent.trim();Spicetify.Platform.ClipboardAPI.copy(i)})}var X=class{constructor(t=[],o=[]){this.menuOrder=t,this.submenus=o,this.openedMenu=null,this.mouseOverMenu=!1,this.mouseOverSubmenu=!1,this.handlingPointerEvent=!1,this.handlingKeyEvent=!1,this.boundMenuNavigationHandler=this.menuNavigationHandler.bind(this),this.submenuOpenTimer=null,this.submenuCloseTimer=null,this.shouldNotCloseSubmenu=!1,this.menuHierarchy={},this.beforeMenuOpenEvent=new Event("beforemenuopen"),this.afterMenuCloseEvent=new Event("aftermenuclose");for(let n of t){this.menuHierarchy[n]=[];let r=document.getElementById(n+"MenuBg"),a=r.querySelectorAll(".contextMenuItem");for(let i of a)i.dataset.submenu&&this.menuHierarchy[n].push(i.dataset.submenu),i.addEventListener("pointerover",()=>{for(let l of a)delete l.dataset.active;i.dataset.active=!0,clearTimeout(this.submenuOpenTimer),i.dataset.submenu?this.submenuOpenTimer=setTimeout(()=>{this.openMenu(i.dataset.submenu)},300):this.menuHierarchy[n].length>0&&this.delayedCloseMenu(this.menuHierarchy[n][0])}),i.addEventListener("pointerleave",()=>{this.mouseOverSubmenu||(delete i.dataset.active,clearTimeout(this.submenuOpenTimer),i.dataset.submenu&&this.delayedCloseMenu(i.dataset.submenu))}),i.addEventListener("click",()=>{i.dataset.submenu&&!i.classList.contains("disabled")?this.openedMenu.id!==i.dataset.submenu+"MenuBg"?this.openMenu(i.dataset.submenu):document.getElementById(i.dataset.submenu+"MenuBg").focus():i.dataset.noClose||this.closeMenu(n)});r.addEventListener("focusout",i=>{top.ignoreFocusLoss||i.relatedTarget&&i.relatedTarget.dataset.submenuOf===n||this.closeMenu(n)}),r.addEventListener("pointermove",i=>{(i.clientX>0||i.clientY>0)&&(r.style.animation="none")})}for(let n of o){let r=document.getElementById(n+"MenuBg"),a=r.querySelectorAll(".contextMenuItem"),i=document.getElementById(r.dataset.submenuOf+"MenuBg"),l=Array.from(i.querySelectorAll(".contextMenuItem")).findIndex(m=>m.dataset.submenu===n),u=i.querySelectorAll(".contextMenuItem")[l];for(let m of a)m.addEventListener("pointerover",()=>{for(let f of a)delete f.dataset.active;m.dataset.active=!0}),m.addEventListener("pointerleave",()=>{delete m.dataset.active}),m.addEventListener("click",()=>{this.shouldNotCloseSubmenu=!1,this.closeMenu(n),this.closeMenu(r.dataset.submenuOf)});r.addEventListener("pointerover",()=>{this.mouseOverMenu=!0,this.mouseOverSubmenu=!0,this.shouldNotCloseSubmenu=!0,clearTimeout(this.submenuCloseTimer),u.dataset.active=!0}),r.addEventListener("pointerleave",()=>{this.mouseOverMenu=!1,this.mouseOverSubmenu=!1,this.shouldNotCloseSubmenu=!1}),r.addEventListener("focusout",m=>{if(top.ignoreFocusLoss||r.style.display==="none")return;this.shouldNotCloseSubmenu=!1;let f=!!r.dataset.openStandalone;m.relatedTarget&&m.relatedTarget.id&&m.relatedTarget.id===i.id||(this.closeMenu(n),!(m.relatedTarget&&m.relatedTarget.id&&m.relatedTarget.dataset.submenuOf===r.dataset.submenuOf)&&(f||this.closeMenu(r.dataset.submenuOf)))})}}openMenu(t,o){let n=document.getElementById(t+"MenuBg"),r=document.getElementById(t+"Menu"),a=!!n.dataset.submenuOf,i,l,u,m=n.querySelectorAll(".contextMenuItem.debug");if(localStorage.wmpotifyDebugMode){u=n.querySelectorAll(".contextMenuItem:not([data-hidden])");for(let p of m)p.style.display=""}else{u=n.querySelectorAll(".contextMenuItem:not([data-hidden]):not(.debug)");for(let p of m)p.style.display="none"}if(n.dispatchEvent(this.beforeMenuOpenEvent),o)n.dataset.openStandalone=!0;else{if(a){if(this.menuHierarchy[n.dataset.submenuOf].length>1)for(let h of this.menuHierarchy[n.dataset.submenuOf])h!==t&&this.closeMenu(h);if(i=document.getElementById(n.dataset.submenuOf+"MenuBg"),i.style.display==="none")return;let p=Array.from(i.querySelectorAll(".contextMenuItem")).findIndex(h=>h.dataset.submenu===t);if(l=i.querySelectorAll(".contextMenuItem")[p],l.classList.contains("disabled"))return}else for(let p of this.menuOrder)p!==t&&document.getElementById(p+"MenuBg").style.display==="block"&&this.closeMenu(p);delete n.dataset.openStandalone}n.style.animation="";for(let p of u)delete p.dataset.active;if(o)o.top&&(n.style.top=o.top),o.left&&(n.style.left=o.left),o.right&&(n.style.right=o.right),o.bottom&&(n.style.bottom=o.bottom);else{let p="",h=0;a&&(p=i.offsetTop+l.offsetTop,h=i.offsetLeft+i.offsetWidth-6),n.style.top=p+"px",n.style.left=h+"px"}n.style.display="block";let f=this.calcMenuWidth(t);n.style.width=f+")",n.style.minWidth=0,r.style.width=f+(["aero","10",void 0].includes(localStorage.wmpotifyControlStyle)?" - 2px)":")"),n.style.height=this.calcMenuHeight(t)+"px",o||a&&(l.dataset.active=!0),n.focus(),this.openedMenu=n,document.addEventListener("keydown",this.boundMenuNavigationHandler)}closeMenu(t){let o=document.getElementById(t+"MenuBg"),n=!!o.dataset.openStandalone,r=!!o.dataset.submenuOf&&!n;if(r&&this.shouldNotCloseSubmenu)return;let a,i;if(!n&&r){a=document.getElementById(o.dataset.submenuOf+"MenuBg");let l=Array.from(a.querySelectorAll(".contextMenuItem")).findIndex(u=>u.dataset.submenu===t);i=a.querySelectorAll(".contextMenuItem")[l]}this.submenuCloseTimer&&clearTimeout(this.submenuCloseTimer),o.style.display="none",n?delete o.dataset.openStandalone:r&&delete i.dataset.active,o.dispatchEvent(this.afterMenuCloseEvent),r&&a.style.display!=="none"?(a.focus(),this.openedMenu=a):(this.openedMenu=null,document.removeEventListener("keydown",this.boundMenuNavigationHandler))}delayedCloseMenu(t){this.submenuCloseTimer=setTimeout(()=>{this.closeMenu(t)},300)}menuNavigationHandler(t){if(!this.openedMenu)return;let o;localStorage.wmpotifyDebugMode?o=this.openedMenu.querySelectorAll(".contextMenuItem"):o=this.openedMenu.querySelectorAll(".contextMenuItem:not(.debug)");let n=this.openedMenu.querySelector(".contextMenuItem[data-active]"),r=Array.from(o).indexOf(n),a;switch(this.openedMenu.dataset.submenuOf&&(a=document.getElementById(this.openedMenu.dataset.submenuOf+"MenuBg").querySelector(".contextMenuItem[data-active]")),this.handlingKeyEvent=!0,this.openedMenu.style.animation="none",t.key){case"Escape":this.mouseOverMenu=!1,this.openedMenu.blur();break;case"ArrowUp":n?(delete n.dataset.active,r>0?o[r-1].dataset.active=!0:o[o.length-1].dataset.active=!0):o[o.length-1].dataset.active=!0;break;case"ArrowDown":n?(delete n.dataset.active,r<o.length-1?o[r+1].dataset.active=!0:o[0].dataset.active=!0):o[0].dataset.active=!0;break;case"ArrowLeft":if(this.openedMenu.dataset.submenuOf){this.closeMenu(this.openedMenu.id.slice(0,-6),!0),a.dataset.active=!0;break}if(this.menuOrder.length===1)break;let i=this.menuOrder[(this.menuOrder.indexOf(this.openedMenu.id.slice(0,-6))+this.menuOrder.length-1)%this.menuOrder.length];this.closeMenu(this.openedMenu.id.slice(0,-6)),this.openMenu(i),this.openedMenu.querySelector(".contextMenuItem").dataset.active=!0;break;case"ArrowRight":if(n&&n.dataset.submenu){this.openMenu(n.dataset.submenu),this.openedMenu.querySelector(".contextMenuItem").dataset.active=!0;break}if(this.menuOrder.length===1)break;let l;this.openedMenu.dataset.submenuOf?(l=this.menuOrder[(this.menuOrder.indexOf(this.openedMenu.dataset.submenuOf)+1)%this.menuOrder.length],this.closeMenu(this.openedMenu.id.slice(0,-6))):(l=this.menuOrder[(this.menuOrder.indexOf(this.openedMenu.id.slice(0,-6))+1)%this.menuOrder.length],this.closeMenu(this.openedMenu.id.slice(0,-6))),this.openMenu(l),this.openedMenu.querySelector(".contextMenuItem").dataset.active=!0;break;case"Enter":if(n)n.click();else{this.openedMenu.blur();break}break;default:let u=this.openedMenu.getElementsByTagName("u");for(let m of u)if(t.key===m.textContent.toLowerCase()){m.parentElement.click();break}}this.handlingKeyEvent=!1,t.preventDefault(),t.stopPropagation()}calcMenuWidth(t){let o=document.getElementById(t+"MenuBg"),n;localStorage.wmpotifyDebugMode?n=o.querySelectorAll(".contextMenuItem:not([data-hidden])"):n=o.querySelectorAll(".contextMenuItem:not([data-hidden]):not(.debug)"),o.style.minWidth="";let r=parseInt(getComputedStyle(o).minWidth)||0;return`calc(${Array.from(n).reduce((i,l)=>{let u=l.textContent,m=et(u);return Math.max(r,i,m)},0)}px + 4.5em`}calcMenuHeight(t){let o=document.getElementById(t+"MenuBg"),n=o.querySelectorAll("hr"),r;localStorage.wmpotifyDebugMode?r=o.querySelectorAll(".contextMenuItem:not([data-hidden])"):r=o.querySelectorAll(".contextMenuItem:not([data-hidden]):not(.debug)");let a=r[0].offsetHeight,i=0;if(n.length>0){let u=getComputedStyle(n[0]);i=n[0].offsetHeight+parseFloat(u.marginTop)+parseFloat(u.marginBottom)}return parseInt(r.length*a+n.length*i)}};function te(e,t,o){let n=document.createElement("div");return n.id=e+"MenuBg",n.className="contextMenuBg",n.tabIndex=-1,n.style.display="none",n.innerHTML=`<div id="${e}Menu" class="contextMenu"></div>`,o&&(n.dataset.submenuOf=o),t.forEach(r=>{if(r.hr){let i=document.createElement("hr");n.querySelector(".contextMenu").appendChild(i);return}let a=document.createElement("div");a.className="contextMenuItem",r.args?a.innerHTML="<p>"+he(r.text,...r.args)+"</p>":a.innerHTML="<p>"+he(r.text)+"</p>",r.classList&&a.classList.add(...r.classList),r.disabled&&a.classList.add("disabled"),r.hidden&&(a.dataset.hidden=!0),r.submenu&&(a.dataset.submenu=r.submenu,a.innerHTML+='<p class="submenuMark">\u23F5</p>'),r.noClose&&(a.dataset.noClose=!0),a.addEventListener("click",r.click),n.querySelector(".contextMenu").appendChild(a)}),document.body.appendChild(n),{menuBg:n,menu:n.querySelector(".contextMenu"),menuItems:n.querySelectorAll(".contextMenuItem")}}function et(e,t=getComputedStyle(document.documentElement).getPropertyValue("--menu-font")){let n=(et.canvas||(et.canvas=document.createElement("canvas"))).getContext("2d");return n.font=t,n.measureText(e).width}var A,I=[],j,fo={"Friend Activity":"Friends"};function Mt(){let e=document.querySelector(".Root__globalNav");A=document.createElement("div"),A.id="wmpotify-tabs-container",e.insertBefore(A,e.querySelector(".main-globalNav-searchSection"));let t=document.querySelector('.custom-navlinks-scrollable_container div[role="presentation"] > button:has(#wmpotify-nowplaying-icon)');t||(t=document.createElement("button"),t.addEventListener("click",()=>{Spicetify.Config.custom_apps.includes("wmpvis")?Spicetify.Platform.History.push({pathname:"/wmpvis"}):xe()}),localStorage.wmpotifyNoWmpvis&&!Spicetify.Config.custom_apps.includes("wmpvis")&&(t.dataset.extraHidden=!0)),t.setAttribute("aria-label",s.TAB_NOW_PLAYING),t.dataset.identifier="now-playing",oe(t);let o=document.querySelector(".main-globalNav-searchContainer > button");o.dataset.identifier="home",oe(o);let n=document.querySelector(".main-globalNav-searchContainer div form button");n.dataset.identifier="search",n.addEventListener("click",S=>{Spicetify.Platform.History.push({pathname:"/search"}),S.preventDefault(),S.stopPropagation()}),oe(n);let r=document.createElement("button");r.id="wmpotify-library-button",r.dataset.identifier="library",r.setAttribute("aria-label",s.TAB_LIBRARY),r.addEventListener("click",()=>{Spicetify.Platform.History.push({pathname:"/wmpotify-standalone-libx"})}),oe(r),I=[t,o,n,r];let a=document.querySelectorAll('.custom-navlinks-scrollable_container div[role="presentation"] > button');if(a.length>0)for(let S of a)oe(S),I.push(S);else{let S=document.querySelector(".main-globalNav-historyButtonsContainer"),C=new MutationObserver(()=>{console.log("WMPotify: Handling late custom apps buttons mount");for(let M of I)delete M.dataset.hidden;let _=document.querySelectorAll('.custom-navlinks-scrollable_container div[role="presentation"] > button');if(_.length>0){for(let M of _){if(M.querySelector("#wmpotify-nowplaying-icon")){delete t.dataset.hidden;continue}oe(M),I.push(M)}C.disconnect(),Tt()}});C.observe(S,{childList:!0,subtree:!0})}let i=document.querySelectorAll(".main-topBar-topbarContentRight > .main-actionButtons > button");for(let S of i)S.dataset.restoreFocusKey==="buddy_feed"?S.dataset.identifier="buddy-feed":i.length===2&&(S.dataset.identifier="content-feed"),oe(S),I.push(S);Tt();let l=[];for(let S of I)l.push({text:S.querySelector(".wmpotify-tab-label").textContent,click:()=>S.click()});te("wmpotifyTab",l),te("wmpotifyTabMenu",[{text:s.TAB_RESET_ORDER,click:()=>{localStorage.removeItem("wmpotifyTabOrder"),location.reload()}}]);let u=new X(["wmpotifyTab","wmpotifyTabMenu"]);j=document.createElement("button"),j.id="wmpotify-tabs-overflow-button";let m=document.querySelector("#wmpotify-title-bar")?"25px":"0";j.addEventListener("click",()=>{u.openMenu("wmpotifyTab",{top:m,left:j.getBoundingClientRect().left+"px"})}),A.appendChild(j),A.addEventListener("contextmenu",S=>{S.preventDefault(),u.openMenu("wmpotifyTabMenu",{top:S.clientY+"px",left:S.clientX+"px"})});let f=0;se();let p=setInterval(()=>{se(),f++>10&&clearInterval(p)},200);window.addEventListener("resize",se),new ResizeObserver(se).observe(A),document.addEventListener("fullscreenchange",se);let h=document.querySelector(".main-topBar-topbarContentRight > button:last-child"),E=document.createElement("span");E.textContent=h.getAttribute("aria-label"),E.classList.add("wmpotify-user-label"),h.appendChild(E);let L=document.createElement("div");L.id="wmpotify-search-container";let O=document.createElement("div");O.id="wmpotify-search-wrapper";let T=document.querySelector('.main-globalNav-searchContainer div form input[type="search"]');O.appendChild(T);let N=document.createElement("button");N.id="wmpotify-search-clear-button",N.setAttribute("aria-label","Clear search"),N.addEventListener("click",()=>{T.value="",T.focus(),Spicetify.Platform.History.push({pathname:"/search"})}),O.appendChild(N),L.appendChild(O),e.appendChild(L),e.addEventListener("pointerdown",S=>{S.button===2&&!S.target.closest("input")&&!S.target.closest("#wmpotify-tabs-container")&&y.openSpotifyMenu()});let v=getComputedStyle(document.documentElement).getPropertyValue("--right-sidebar-width");v&&document.documentElement.style.setProperty("--panel-width",v)}function oe(e){A.appendChild(e);let t=document.createElement("span"),o=e.getAttribute("aria-label");t.textContent=fo[o]||o,t.classList.add("wmpotify-tab-label"),e.draggable=!0,e.addEventListener("dragstart",n=>{A.classList.add("dragging"),n.dataTransfer.setData("text/plain",t.textContent),e.dataset.dragging=!0}),e.addEventListener("dragend",()=>{delete e.dataset.dragging,A.classList.remove("dragging")}),e.addEventListener("dragover",n=>{n.preventDefault(),n.stopPropagation()}),e.addEventListener("drop",n=>{n.preventDefault(),n.stopPropagation();let r=I.find(a=>a.dataset.dragging);r&&(n.offsetX>e.getBoundingClientRect().width/2?A.insertBefore(r,e.nextElementSibling):A.insertBefore(r,e),I=Array.from(A.querySelectorAll("button:not(#wmpotify-tabs-overflow-button)")),se(),localStorage.wmpotifyTabOrder=yo())}),e.appendChild(t)}function yo(){return I.map(e=>e.dataset.identifier||e.getAttribute("aria-label"))}function Tt(){if(localStorage.wmpotifyTabOrder){let e=localStorage.wmpotifyTabOrder.split(",");for(let t of e){let o=I.find(n=>n.dataset.identifier===t||n.getAttribute("aria-label")===t);o&&A.appendChild(o)}I=Array.from(A.querySelectorAll("button")),j&&A.appendChild(j)}}function se(){let e=document.querySelector(".main-globalNav-historyButtons").getBoundingClientRect().right,t=window.innerWidth-document.querySelector(".main-topBar-topbarContentRight").getBoundingClientRect().left,o=160,n=0;for(;window.innerWidth-e-t-o<A.getBoundingClientRect().width&&n<I.length;)I[I.length-1-n++].dataset.hidden=!0;for(n=document.querySelectorAll("#wmpotify-tabs-container button[data-hidden]").length;n>0&&window.innerWidth-e-t-o>A.getBoundingClientRect().width;)delete I[I.length-n--].dataset.hidden;j.style.display=n>0?"block":""}function ke(e,t){if(!e||isNaN(e))return"00:00";let o=Math.floor(e/1e3),n=Math.floor(o/60);if(o=String(o%60).padStart(2,"0"),n<60)return t&&(n=String(n).padStart(2,"0")),`${n}:${o}`;let r=Math.floor(n/60);return n=String(n%60).padStart(2,"0"),t&&(r=String(r).padStart(2,"0")),`${r}:${n}:${o}`}var Pt={};(function e(t,o,n){function r(l,u){if(!o[l]){if(!t[l]){var m=typeof Se=="function"&&Se;if(!u&&m)return m(l,!0);if(a)return a(l,!0);var f=new Error("Cannot find module '"+l+"'");throw f.code="MODULE_NOT_FOUND",f}var p=o[l]={exports:{}};t[l][0].call(p.exports,function(h){var E=t[l][1][h];return r(E||h)},p,p.exports,e,t,o,n)}return o[l].exports}for(var a=typeof Se=="function"&&Se,i=0;i<n.length;i++)r(n[i]);return r})({1:[function(e,t,o){var n,r,a;n=function(i,l){var u;return u=setTimeout(l,i),{stop:function(){return clearTimeout(u)}}},a=function(i,l){var u;return u=setInterval(l,i),{stop:function(){return clearInterval(u)}}},r=function(i){return/in/.test(document.readyState)?n(10,function(){return r(i)}):i()},function(i){var l,u,m,f,p,h,E,L,O,T,N;return l=i.FontDetective={},h=["serif","sans-serif","cursive","fantasy","monospace"],L="Helvetica,Lucida Grande,Lucida Sans,Tahoma,Arial,Geneva,Monaco,Verdana,Microsoft Sans Serif,Trebuchet MS,Courier New,Times New Roman,Courier,Lucida Bright,Lucida Sans Typewriter,URW Chancery L,Comic Sans MS,Georgia,Palatino Linotype,Lucida Sans Unicode,Times,Century Schoolbook L,URW Gothic L,Franklin Gothic Medium,Lucida Console,Impact,URW Bookman L,Helvetica Neue,Nimbus Sans L,URW Palladio L,Nimbus Mono L,Nimbus Roman No9 L,Arial Black,Sylfaen,MV Boli,Estrangelo Edessa,Tunga,Gautami,Raavi,Mangal,Shruti,Latha,Kartika,Vrinda,Arial Narrow,Century Gothic,Garamond,Book Antiqua,Bookman Old Style,Calibri,Cambria,Candara,Corbel,Monotype Corsiva,Cambria Math,Consolas,Constantia,MS Reference Sans Serif,MS Mincho,Segoe UI,Arial Unicode MS,Tempus Sans ITC,Kristen ITC,Mistral,Meiryo UI,Juice ITC,Papyrus,Bradley Hand ITC,French Script MT,Malgun Gothic,Microsoft YaHei,Gisha,Leelawadee,Microsoft JhengHei,Haettenschweiler,Microsoft Himalaya,Microsoft Uighur,MoolBoran,Jokerman,DFKai-SB,KaiTi,SimSun-ExtB,Freestyle Script,Vivaldi,FangSong,MingLiU-ExtB,MingLiU_HKSCS,MingLiU_HKSCS-ExtB,PMingLiU-ExtB,Copperplate Gothic Light,Copperplate Gothic Bold,Copperplate Gothic,Franklin Gothic Book,Maiandra GD,Perpetua,Eras Demi ITC,Felix Titling,Franklin Gothic Demi,Pristina,Edwardian Script ITC,OCR A Extended,OCR A,Engravers MT,Eras Light ITC,Franklin Gothic Medium Cond,Rockwell Extra Bold,Rockwell,Curlz MT,Blackadder ITC,Franklin Gothic Heavy,Franklin Gothic Demi Cond,Lucida Handwriting,Segoe UI Light,Segoe UI Semibold,Lucida Calligraphy,Cooper Black,Viner Hand ITC,Britannic Bold,Wide Latin,Old English Text MT,Broadway,Footlight MT Light,Harrington,Snap ITC,Onyx,Playbill,Bauhaus 93,Baskerville Old Face,Algerian,Matura MT Script Capitals,Stencil,Batang,Chiller,Harlow Solid Italic,Kunstler Script,Bernard MT Condensed,Informal Roman,Vladimir Script,Bell MT,Colonna MT,High Tower Text,Californian FB,Ravie,Segoe Script,Brush Script MT,SimSun,Arial Rounded MT Bold,Berlin Sans FB,Centaur,Niagara Solid,Showcard Gothic,Niagara Engraved,Segoe Print,Gabriola,Gill Sans MT,Iskoola Pota,Calisto MT,Script MT Bold,Century Schoolbook,Berlin Sans FB Demi,Magneto,Arabic Typesetting,DaunPenh,Mongolian Baiti,DokChampa,Euphemia,Kalinga,Microsoft Yi Baiti,Nyala,Bodoni MT Poster Compressed,Goudy Old Style,Imprint MT Shadow,Gill Sans MT Condensed,Gill Sans Ultra Bold,Palace Script MT,Lucida Fax,Gill Sans MT Ext Condensed Bold,Goudy Stout,Eras Medium ITC,Rage Italic,Rockwell Condensed,Castellar,Eras Bold ITC,Forte,Gill Sans Ultra Bold Condensed,Perpetua Titling MT,Agency FB,Tw Cen MT,Gigi,Tw Cen MT Condensed,Aparajita,Gloucester MT Extra Condensed,Tw Cen MT Condensed Extra Bold,PMingLiU,Bodoni MT,Bodoni MT Black,Bodoni MT Condensed,MS Gothic,GulimChe,MS UI Gothic,MS PGothic,Gulim,MS PMincho,BatangChe,Dotum,DotumChe,Gungsuh,GungsuhChe,MingLiU,NSimSun,SimHei,DejaVu Sans,DejaVu Sans Condensed,DejaVu Sans Mono,DejaVu Serif,DejaVu Serif Condensed,Eurostile,Matisse ITC,Bitstream Vera Sans Mono,Bitstream Vera Sans,Staccato222 BT,Bitstream Vera Serif,Broadway BT,ParkAvenue BT,Square721 BT,Calligraph421 BT,MisterEarl BT,Cataneo BT,Ruach LET,Rage Italic LET,La Bamba LET,Blackletter686 BT,John Handy LET,Scruff LET,Westwood LET,Yu Gothic,Yu Gothic UI".split(",").sort(),N=[],f=!1,O=!1,m=document.createElement("div"),m.id="font-detective",u=function(){function v(S,C,_){this.name=S,this.type=C,this.style=_}return v.prototype.toString=function(){return'"'+this.name.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'},v}(),p=function(){var v,S,C,_;return v=["monospace","sans-serif","serif"],_=document.createElement("span"),_.innerHTML="mmmmmmmmmmlli",_.style.fontSize="72px",C={},S={},{init:function(){var M,F,$,B;for(document.body.appendChild(m),B=[],F=0,$=v.length;F<$;F++)M=v[F],_.style.fontFamily=M,m.appendChild(_),C[M]=_.offsetWidth,S[M]=_.offsetHeight,B.push(m.removeChild(_));return B},check:function(M){var F,$,B,Z;for(B=0,Z=v.length;B<Z;B++)if(F=v[B],_.style.fontFamily=M+", "+F,m.appendChild(_),$=_.offsetWidth!==C[F]||_.offsetHeight!==S[F],m.removeChild(_),$)return!0;return!1}}}(),E=function(){if(!O)return O=!0,l.incomplete=!0,r(function(v){return function(){var S;return T(function(){var C,_,M;for(M=[],C=0,_=L.length;C<_;C++)S=L[C],M.push(new u(S));return M}())}}(this))},T=function(v){var S,C;return p.init(),S=0,C=a(20,function(){var _,M,F,$,B,Z,bt,wt,Xe,je;for($=0;$<=5;$++){if(F=v[S],_=p.check(F),_)for(N.push(F),Xe=l.each.callbacks,B=0,bt=Xe.length;B<bt;B++)M=Xe[B],M(F);if(S++,S>=v.length){for(C.stop(),je=l.all.callbacks,Z=0,wt=je.length;Z<wt;Z++)M=je[Z],M(N);l.all.callbacks=[],l.each.callbacks=[],f=!0;return}}})},l.preload=E,l.each=function(v){var S,C,_;for(C=0,_=N.length;C<_;C++)S=N[C],v(S);if(!f)return l.each.callbacks.push(v),E()},l.each.callbacks=[],l.all=function(v){return f?v(N):(l.all.callbacks.push(v),E())},l.all.callbacks=[]}(Pt)},{}]},{},[1]);var tt=Pt.FontDetective;var ot=document.createElement("canvas");ot.width=1;ot.height=1;var Re=ot.getContext("2d",{alpha:!1,willReadFrequently:!0});function d(e,t,o="#EEF3FA"){return Re.fillStyle=o,Re.filter=`hue-rotate(${e}deg) saturate(${t}%)`,Re.fillRect(0,0,1,1),"rgba("+Re.getImageData(0,0,1,1).data+")"}function q(e,t,o,n){if(!e&&!t){document.documentElement.style.setProperty("--spice-main","#EEF3FA"),document.documentElement.style.removeProperty("--wmpotify-tint-hue"),document.documentElement.style.removeProperty("--wmpotify-tint-sat"),Ot();return}window.matchMedia("(forced-colors: active)").matches&&(o=!1,n=!1);let a=document.querySelector(".main-nowPlayingBar-nowPlayingBar");if(a&&(o?a.classList.add("tinted"):a.classList.remove("tinted")),document.documentElement.style.setProperty("--spice-main",d(e,t)),document.documentElement.style.setProperty("--wmpotify-tint-hue",e+"deg"),document.documentElement.style.setProperty("--wmpotify-tint-sat",t/100),n){document.documentElement.dataset.wmpotifyTintMore=!0;let i=d(e,t,"#0067d0");if(document.documentElement.style.setProperty("--spice-button",i),document.documentElement.style.setProperty("--spice-button-active",i),document.documentElement.style.setProperty("--spice-accent",i),document.documentElement.style.setProperty("--wmp11-text-hilight",i),document.documentElement.style.setProperty("--wmp11-config-link-color",i),document.documentElement.style.setProperty("--hilight",i),document.documentElement.style.setProperty("--hot-tracking-color",i),document.documentElement.style.setProperty("--menu-hilight",i),document.documentElement.style.setProperty("--wmp11-header-line",d(e,t,"#a6b9dd")),document.documentElement.dataset.wmpotifyDarkMode)document.documentElement.style.setProperty("--item-hover-background",`linear-gradient(to bottom,${d(e,t,"#272f3a")} 0%,${d(e,t,"#272f39")} 10%,${d(e,t,"#272e38")} 20%,${d(e,t,"#272d36")} 30%,${d(e,t,"#272e34")} 40%,${d(e,t,"#272c33")} 50%,${d(e,t,"#272b31")} 60%,${d(e,t,"#272c30")} 70%,${d(e,t,"#272a2e")} 80%,${d(e,t,"#272b2d")} 90%,${d(e,t,"#27282b")} 100%)`),document.documentElement.style.setProperty("--item-selection-background",`linear-gradient(to bottom,${d(e,t,"#2d425b")} 0%,${d(e,t,"#2d425b")} 10%,${d(e,t,"#2d3f58")} 20%,${d(e,t,"#2d3f55")} 30%,${d(e,t,"#2d3d51")} 40%,${d(e,t,"#2d3c4f")} 50%,${d(e,t,"#2d3c4c")} 60%,${d(e,t,"#2d3949")} 70%,${d(e,t,"#2d3946")} 80%,${d(e,t,"#2d3643")} 90%,${d(e,t,"#2d3440")} 100%)`),document.documentElement.style.setProperty("--item-selection-hover-background",`linear-gradient(to bottom,${d(e,t,"#2e496a")} 0%,${d(e,t,"#2e496a")} 10%,${d(e,t,"#2e4667")} 20%,${d(e,t,"#2e4664")} 30%,${d(e,t,"#2e435e")} 40%,${d(e,t,"#2e435e")} 50%,${d(e,t,"#2e435b")} 60%,${d(e,t,"#2e4058")} 70%,${d(e,t,"#2e4055")} 80%,${d(e,t,"#2e3d52")} 90%,${d(e,t,"#2e3d4f")} 100%)`),document.documentElement.style.setProperty("--item-hover-border",d(e,t,"#2f4d73")),document.documentElement.style.setProperty("--item-active-border",d(e,t,"#5176ac")),document.documentElement.style.setProperty("--item-selection-hover-border",d(e,t,"#6286b5")),document.documentElement.style.setProperty("--menu-item-hover-background",`linear-gradient(to bottom,${d(e,t,"#303b4499")},${d(e,t,"#30383dcc")} 75%,${d(e,t,"#30373ccc")})`),document.documentElement.style.setProperty("--menu-item-hover-border-color",d(e,t,"#375273")),document.documentElement.style.removeProperty("--wmp11-separator-shadow"),document.documentElement.style.removeProperty("--wmp11-separator-light"),document.documentElement.style.setProperty("--wmp11-header-text",d(e,t,"#abd5fd")),document.documentElement.style.removeProperty("--button-border-color-inner-focus"),document.documentElement.style.removeProperty("--menu-item-hover-color"),localStorage.wmpotifyControlStyle!=="10"?(document.documentElement.style.setProperty("--button-face-hover",d(e,t,"#484e60")),document.documentElement.style.setProperty("--button-face-active",d(e,t,"#384058")),document.documentElement.style.setProperty("--button-shade-light-hovered",d(e,t,"#3b4255")),document.documentElement.style.setProperty("--button-shade-light-active",d(e,t,"#2a344d")),document.documentElement.style.setProperty("--button-shade-dark-hovered",d(e,t,"#366685")),document.documentElement.style.setProperty("--button-shade-top-active",d(e,t,"#4b5166")),document.documentElement.style.setProperty("--button-shade-bottom-active",d(e,t,"#2a5579")),document.documentElement.style.setProperty("--button-border-color-default",d(e,t,"#9fa7bf")),document.documentElement.style.setProperty("--button-border-color-hovered",d(e,t,"#9ea6be")),document.documentElement.style.setProperty("--button-border-color-active",d(e,t,"#8e96ae")),document.documentElement.style.setProperty("--textbox-border-color-focused",d(e,t,"#506a81")),document.documentElement.style.setProperty("--textbox-border-top-color-focused",d(e,t,"#6aa9db")),document.documentElement.style.setProperty("--menu-icon-background-border-color",d(e,t,"#32537c")),document.documentElement.style.setProperty("--menu-icon-checkmark-color",d(e,t,"#aac9fe")),document.documentElement.style.setProperty("--menu-icon-radio-dot-outer-color",d(e,t,"#b8c6e2")),document.documentElement.style.setProperty("--menu-icon-radio-dot-inner-color",d(e,t,"#d5d4ea")),document.documentElement.style.setProperty("--menu-icon-radio-dot-border-color",d(e,t,"#9fabca")),document.documentElement.style.setProperty("--menu-item-hover-border-color",d(e,t,"#375273"))):(document.documentElement.style.removeProperty("--button-face-hover"),document.documentElement.style.removeProperty("--button-face-active"),document.documentElement.style.removeProperty("--button-shade-light-hovered"),document.documentElement.style.removeProperty("--button-shade-light-active"),document.documentElement.style.removeProperty("--button-shade-dark-hovered"),document.documentElement.style.removeProperty("--button-shade-top-active"),document.documentElement.style.removeProperty("--button-shade-bottom-active"),document.documentElement.style.removeProperty("--button-border-color-default"),document.documentElement.style.removeProperty("--button-border-color-hovered"),document.documentElement.style.removeProperty("--button-border-color-active"),document.documentElement.style.removeProperty("--textbox-border-color-focused"),document.documentElement.style.removeProperty("--textbox-border-top-color-focused"),document.documentElement.style.removeProperty("--menu-icon-background-border-color"),document.documentElement.style.removeProperty("--menu-icon-checkmark-color"),document.documentElement.style.removeProperty("--menu-icon-radio-dot-outer-color"),document.documentElement.style.removeProperty("--menu-icon-radio-dot-inner-color"),document.documentElement.style.removeProperty("--menu-icon-radio-dot-border-color"),document.documentElement.style.removeProperty("--menu-item-hover-border-color"));else if(document.documentElement.style.setProperty("--item-hover-background",`linear-gradient(to bottom,${d(e,t,"#ebf4fc")} 0%,${d(e,t,"#eaf4fc")} 10%,${d(e,t,"#e9f3fc")} 20%,${d(e,t,"#e8f3fc")} 30%,${d(e,t,"#e7f2fc")} 40%,${d(e,t,"#e5f2fc")} 50%,${d(e,t,"#e2f1fc")} 60%,${d(e,t,"#e1f1fc")} 70%,${d(e,t,"#e0f0fc")} 80%,${d(e,t,"#dff0fc")} 90%,${d(e,t,"#def0fc")} 100%)`),document.documentElement.style.setProperty("--item-selection-background",`linear-gradient(to bottom,${d(e,t,"#edf5fd")} 0%,${d(e,t,"#ebf5fd")} 10%,${d(e,t,"#e9f4fd")} 20%,${d(e,t,"#e6f3fd")} 30%,${d(e,t,"#e4f3fd")} 40%,${d(e,t,"#e1f1fd")} 50%,${d(e,t,"#daeefc")} 60%,${d(e,t,"#d8eefc")} 70%,${d(e,t,"#d5edfc")} 80%,${d(e,t,"#d3ecfc")} 90%,${d(e,t,"#d2ecfc")} 100%)`),document.documentElement.style.setProperty("--item-selection-hover-background",`linear-gradient(to bottom,${d(e,t,"#e4f3fd")} 0%,${d(e,t,"#e2f2fd")} 10%,${d(e,t,"#dff0fc")} 20%,${d(e,t,"#dceffc")} 30%,${d(e,t,"#daeefc")} 40%,${d(e,t,"#d4ecfb")} 50%,${d(e,t,"#cce9fa")} 60%,${d(e,t,"#cae8fa")} 70%,${d(e,t,"#c6e7fa")} 80%,${d(e,t,"#c4e5fa")} 90%,${d(e,t,"#c2e5fa")} 100%)`),document.documentElement.style.setProperty("--item-hover-border",d(e,t,"#cde9f8")),document.documentElement.style.setProperty("--item-active-border",d(e,t,"#95dbfd")),document.documentElement.style.setProperty("--item-selection-hover-border",d(e,t,"#b2e3fb")),document.documentElement.style.setProperty("--menu-item-hover-background",`linear-gradient(to bottom,#fff9,${d(e,t,"#e6ecf5cc")} 90%,#fffc)`),document.documentElement.style.setProperty("--menu-item-hover-border-color",d(e,t,"#b8d6fb")),document.documentElement.style.setProperty("--wmp11-separator-shadow",d(e,t,"#a9b7c9")),document.documentElement.style.setProperty("--wmp11-separator-light",d(e,t,"#f2f7fc")),document.documentElement.style.setProperty("--wmp11-header-text",d(e,t,"#003399")),localStorage.wmpotifyControlStyle==="10"){document.documentElement.style.setProperty("--button-face-hover",d(e,t,"#e5f1fb")),document.documentElement.style.setProperty("--button-face-active",d(e,t,"#cce4f7"));let l=d(e,t,"#0078d7");document.documentElement.style.setProperty("--button-border-color-hovered",l),document.documentElement.style.setProperty("--button-border-color-active",d(e,t,"#005499")),document.documentElement.style.setProperty("--button-border-color-inner-focus",l),document.documentElement.style.setProperty("--textbox-border-color-focused",l),document.documentElement.style.setProperty("--menu-item-hover-color",d(e,t,"#91c9f7"))}else{document.documentElement.style.removeProperty("--button-border-color-inner-focus"),document.documentElement.style.removeProperty("--menu-item-hover-color"),document.documentElement.style.setProperty("--button-face-hover",d(e,t,"#eaf6fd")),document.documentElement.style.setProperty("--button-face-active",d(e,t,"#c4e5f6"));let l=d(e,t,"#bee6fd"),u=d(e,t,"#98d1ef");document.documentElement.style.setProperty("--button-shade-light-hovered",l),document.documentElement.style.setProperty("--button-shade-light-active",u),document.documentElement.style.setProperty("--button-shade-dark-hovered",d(e,t,"#a7d9f5")),document.documentElement.style.setProperty("--button-shade-top-active",d(e,t,"#e5f4fc")),document.documentElement.style.setProperty("--button-shade-bottom-active",d(e,t,"#68b3db")),document.documentElement.style.setProperty("--button-border-color-default",d(e,t,"#5586a3")),document.documentElement.style.setProperty("--button-border-color-hovered",d(e,t,"#3c7fb1")),document.documentElement.style.setProperty("--button-border-color-active",d(e,t,"#6d91ab")),document.documentElement.style.setProperty("--textbox-border-color-focused",l),document.documentElement.style.setProperty("--textbox-border-top-color-focused",u),document.documentElement.style.setProperty("--menu-icon-background-border-color",d(e,t,"#b3d3f9")),document.documentElement.style.setProperty("--menu-icon-checkmark-color",d(e,t,"#0c12a1")),document.documentElement.style.setProperty("--menu-icon-radio-dot-outer-color",d(e,t,"#333583")),document.documentElement.style.setProperty("--menu-icon-radio-dot-border-color",d(e,t,"#1a1490"))}localStorage.wmpotifyControlStyle!=="10"?(document.documentElement.style.setProperty("--checkbox-hover-background",d(e,t,"#e9f7fe")),document.documentElement.style.setProperty("--checkbox-hover-shadow","inset 0 0 0 1px "+d(e,t,"#def9fa")+",inset 1px 1px 0 1px "+d(e,t,"#79c6f9")+",inset -1px -1px 0 1px "+d(e,t,"#c6e9fc")+",inset 3px 3px 6px "+d(e,t,"#b1dffd")),document.documentElement.style.setProperty("--checkbox-checkmark-color",d(e,t,"#4a5f97"))):(document.documentElement.style.setProperty("--checkbox-hover-border",d(e,t,"#0078d7")),document.documentElement.style.setProperty("--checkbox-active-border",d(e,t,"#005499")),document.documentElement.style.setProperty("--checkbox-active-background",d(e,t,"#cce4f7")))}else delete document.documentElement.dataset.wmpotifyTintMore,Ot()}function Ot(){document.documentElement.style.removeProperty("--spice-button"),document.documentElement.style.removeProperty("--spice-button-active"),document.documentElement.style.removeProperty("--spice-accent"),document.documentElement.style.removeProperty("--wmp11-text-hilight"),document.documentElement.style.removeProperty("--wmp11-config-link-color"),document.documentElement.style.removeProperty("--hilight"),document.documentElement.style.removeProperty("--hot-tracking-color"),document.documentElement.style.removeProperty("--menu-hilight"),document.documentElement.style.removeProperty("--wmp11-header-line"),document.documentElement.style.removeProperty("--item-hover-background"),document.documentElement.style.removeProperty("--item-selection-background"),document.documentElement.style.removeProperty("--item-selection-hover-background"),document.documentElement.style.removeProperty("--item-hover-border"),document.documentElement.style.removeProperty("--item-active-border"),document.documentElement.style.removeProperty("--item-selection-hover-border"),document.documentElement.style.removeProperty("--menu-item-hover-background"),document.documentElement.style.removeProperty("--menu-item-hover-border-color"),document.documentElement.style.removeProperty("--wmp11-separator-shadow"),document.documentElement.style.removeProperty("--wmp11-separator-light"),document.documentElement.style.removeProperty("--wmp11-header-text"),document.documentElement.style.removeProperty("--button-border-color-inner-focus"),document.documentElement.style.removeProperty("--menu-item-hover-color"),document.documentElement.style.removeProperty("--button-face-hover"),document.documentElement.style.removeProperty("--button-face-active"),document.documentElement.style.removeProperty("--button-shade-light-hovered"),document.documentElement.style.removeProperty("--button-shade-light-active"),document.documentElement.style.removeProperty("--button-shade-dark-hovered"),document.documentElement.style.removeProperty("--button-shade-top-active"),document.documentElement.style.removeProperty("--button-shade-bottom-active"),document.documentElement.style.removeProperty("--button-border-color-default"),document.documentElement.style.removeProperty("--button-border-color-hovered"),document.documentElement.style.removeProperty("--button-border-color-active"),document.documentElement.style.removeProperty("--textbox-border-color-focused"),document.documentElement.style.removeProperty("--textbox-border-top-color-focused"),document.documentElement.style.removeProperty("--menu-icon-background-border-color"),document.documentElement.style.removeProperty("--menu-icon-checkmark-color"),document.documentElement.style.removeProperty("--menu-icon-radio-dot-outer-color"),document.documentElement.style.removeProperty("--menu-icon-radio-dot-inner-color"),document.documentElement.style.removeProperty("--menu-icon-radio-dot-border-color"),document.documentElement.style.removeProperty("--checkbox-hover-background"),document.documentElement.style.removeProperty("--checkbox-hover-shadow"),document.documentElement.style.removeProperty("--checkbox-checkmark-color"),document.documentElement.style.removeProperty("--checkbox-hover-border"),document.documentElement.style.removeProperty("--checkbox-active-border"),document.documentElement.style.removeProperty("--checkbox-active-background")}var de="1.1";async function be(){try{let e=!!document.querySelector("style.marketplaceUserCSS"),t=y.available(),o=y.getModule()?.version,r=await(await fetch("https://www.ingan121.com/wmpotify/latest.txt")).text(),a=r.match("wmpotify=(.*)")[1],i=r.match("cte=(.*)")[1];!e&&Fe(de,a)<0&&localStorage.wmpotifyIgnoreVersion!==a&&Ee(!1,a),t&&Fe(o,i)<0&&localStorage.wmpotifyLastCheckedWhVer!==i&&Spicetify.showNotification("[WMPotify] "+s.getString("CTEWH_UPDATE_MSG",i)),localStorage.wmpotifyLastCheckedWhVer=i}catch(e){console.error(e)}}function Fe(e,t){let o={"":1,b:0,a:-1},n=i=>{let l=i.match(/(\d+)\.(\d+)([ab]?)(\d*)/);return{major:parseInt(l[1]),minor:parseInt(l[2]),type:o[l[3]||""],extra:parseInt(l[4])||0}},r=n(e),a=n(t);return r.major!==a.major?r.major-a.major:r.minor!==a.minor?r.minor-a.minor:r.type!==a.type?r.type-a.type:r.extra-a.extra}function ue(e){let t=window?.Spicetify?.Platform?.version?.split(".").map(Number);if(t||(t=navigator.userAgent.match(/Spotify\/(\d+\.\d+\.\d+\.\d+)/)?.[1].split(".").map(Number)),!t||!e)return 0;let o=e.split(".").map(Number);for(let n=0;n<o.length;n++)if(t[n]!==o[n])return t[n]-o[n];return 0}var Nt=window.matchMedia("(prefers-color-scheme: dark)"),At=new MutationObserver(e=>{for(let t of e)if(t.type==="childList"){let o=Array.from(t.addedNodes);if((r=>r.some(a=>a.nodeType===Node.ELEMENT_NODE&&a.matches(".marketplaceCSS.marketplaceScheme")))(o)&&(Spicetify.Config.color_scheme==="dark"?document.documentElement.dataset.wmpotifyDarkMode=!0:delete document.documentElement.dataset.wmpotifyDarkMode,localStorage.wmpotifyTintColor)){let[r,a,i,l]=localStorage.wmpotifyTintColor.split(",");q(r,a,i,l)}}});function It(e){if(e.matches?document.documentElement.dataset.wmpotifyDarkMode=!0:delete document.documentElement.dataset.wmpotifyDarkMode,localStorage.wmpotifyTintColor){let[t,o,n,r]=localStorage.wmpotifyTintColor.split(",");q(t,o,n,r)}}var So={addSystemDarkModeListener:function(){Nt.addEventListener("change",It)},removeSystemDarkModeListener:function(){Nt.removeEventListener("change",It)},addMarketplaceSchemeObserver:function(){At.observe(document.body,{childList:!0})},removeMarketplaceSchemeObserver:function(){At.disconnect()}},z=So;var go={getItem(e){let t=Spicetify._platform?.initialUser?.username,o=localStorage.getItem(t+":"+e);return isNaN(o)?o:parseFloat(o)},setItem(e,t){let o=Spicetify._platform?.initialUser?.username;localStorage.setItem(o+":"+e,t)},removeItem(e){let t=Spicetify._platform?.initialUser?.username;localStorage.removeItem(t+":"+e)}},U=go;var P,D=[],x={},W=new MutationObserver(lt),xt=new MutationObserver(Eo),H=!1,at=!1,nt=[],it=[],k=ue("1.2.58")>=0?"left":"ylx",re=ue("1.2.58")>=0?"left-sidebar-expanded-state-width":"ylx-expanded-state-nav-bar-width",ho={async init(){if(document.querySelector("#wmpotify-libx-sidebar"))return!1;Object.keys(Spicetify.Platform.Translations).filter(n=>n.startsWith("shared.library.filter.")).forEach(n=>{let r=Spicetify.Platform.Translations[n];x[n.split(".").pop()]={loc_id:n,value:r}}),x.podcasts={loc_id:"search.title.shows",value:Spicetify.Platform.Translations["search.title.shows"]},D.length===0&&(D.push({identifier:"playlist",localized:x.playlist.value,elem:null}),D.push({identifier:"album",localized:x.album.value,elem:null}),D.push({identifier:"artist",localized:x.artist.value,elem:null}));let t=document.createElement("div");t.id="wmpotify-libx-header",document.querySelector(".main-yourLibraryX-libraryContainer").insertAdjacentElement("afterbegin",t);let o=document.createElement("div");return o.id="wmpotify-libx-sidebar",document.querySelector(".main-yourLibraryX-libraryItemContainer").insertAdjacentElement("afterbegin",o),await wo(),P=document.querySelector('.main-yourLibraryX-filterArea .search-searchCategory-categoryGrid [role="presentation"]'),lt(),W.observe(P,{childList:!0}),xt.observe(document.querySelector(".main-yourLibraryX-filterArea"),{childList:!0}),window.addEventListener("resize",kt),!0},uninit(){document.querySelector("#wmpotify-libx-header")?.remove(),document.querySelector("#wmpotify-libx-sidebar")?.remove(),W.disconnect(),xt.disconnect(),window.removeEventListener("resize",kt)},go(e){e||(e=Spicetify.Platform.History.location.pathname.split("/").slice(2)),e[0]!==void 0&&bo(e)}};function rt(){let e=document.querySelector("#wmpotify-libx-header");e.innerHTML="";let t=document.createElement("div");t.classList.add("wmpotify-libx-header-root-icon"),t.classList.add("wmpotify-toolbar-button"),e.appendChild(t);let o=document.createElement("button");o.classList.add("wmpotify-libx-header-root-text"),o.classList.add("wmpotify-toolbar-button"),o.textContent=s.LIBX_HEADER_ROOT,o.addEventListener("click",ie),e.appendChild(o);let n=ct();if(n.forEach((r,a)=>{let i=document.createElement("button");i.classList.add("wmpotify-libx-header-category-text"),i.classList.add("wmpotify-toolbar-button"),i.textContent=r,i.addEventListener("click",async()=>{if(!i.nextElementSibling)return;H&&(we(),await _e()),W.disconnect();let l=D.find(u=>u.localized===r);if(a===0)ie(),await K();else{if(!l)return;let u=D.find(m=>m.localized===n[a-1]);(!Rt(u)||!document.contains(l.elem))&&(me()||(ie(),await K()),u.elem.click(),await K())}ne(l),l.elem.click(),W.observe(P,{childList:!0})}),e.appendChild(i)}),H){let r=(document.querySelector(".main-yourLibraryX-collapseButton h2")||document.querySelector(".main-yourLibraryX-collapseButton [class*=encore-text]")).textContent,a=document.createElement("button");a.classList.add("wmpotify-libx-header-category-text"),a.classList.add("wmpotify-toolbar-button"),a.textContent=r,e.appendChild(a)}}function lt(){H=document.querySelector(".main-yourLibraryX-collapseButton").childElementCount>1;let e=ct(!0);if(H){let n=Spicetify.Platform.LocalStorageAPI.getItem("opened-folder-uri");e.push(n)}if(!at){let n="/wmpotify-standalone-libx/"+e.join("/");Spicetify.Platform.History.location.pathname==="/wmpotify-standalone-libx"?Spicetify.Platform.History.location.pathname=n:Spicetify.Platform.History.location.pathname!==n&&Spicetify.Platform.History.push({pathname:"/wmpotify-standalone-libx/"+e.join("/")})}if(H){rt();return}let t=!P.querySelector('button[class*="ChipClear"]:first-child'),o=Array.from(P.querySelectorAll("button"));if(t)o.forEach((n,r)=>{let a={};a.localized=n.textContent,a.identifier=Object.keys(x).find(i=>x[i].value===a.localized),a.elem=n,D.some(i=>i.localized===a.localized)||D.push(a)});else{o.shift();let n=o[0].textContent,r=D.find(a=>a.localized===n);if(!r){let a={};a.localized=n,a.identifier=Object.keys(x).find(i=>x[i].value===a.localized),a.elem=o[0],D.push(a),r=a}r.children||(r.children=[]),o.shift(),o.forEach((a,i)=>{let l={};l.localized=a.textContent,l.identifier=Object.keys(x).find(u=>x[u].value===l.localized),l.elem=a,r.children.some(u=>u.localized===l.localized)||r.children.push(l)})}rt(),Ft()}function Eo(){W.disconnect(),P=document.querySelector('.main-yourLibraryX-filterArea .search-searchCategory-categoryGrid [role="presentation"]'),lt(),W.observe(P,{childList:!0})}function ne(e){if(!document.contains(e.elem)){for(let t of P.querySelectorAll("button"))if(t.textContent===e.localized){e.elem=t;break}}}function me(){return!P.querySelector('button[class*="ChipClear"]:first-child')}function Rt(e){return me()?!1:Array.from(P.querySelectorAll("button"))[1].textContent===e.localized}async function ie(){H&&(we(),await _e()),P.querySelector('button[class*="ChipClear"]:first-child')?.click()}function we(){at=!0,document.querySelectorAll(".main-yourLibraryX-collapseButton button")?.[1]?.click()}function ct(e=!1){let t=[];if(H=document.querySelector(".main-yourLibraryX-collapseButton").childElementCount>1,H)return e?it:nt;if(me())return nt=[],it=[],t;{let n=Array.from(P.querySelectorAll("button")).slice(1)[0].textContent;e&&(n=Object.keys(x).find(a=>x[a].value===n)),t.push(n);let r=P.querySelector('button[class*="secondary-selected"]');r&&(e?t.push(Object.keys(x).find(a=>x[a].value===r.textContent)):t.push(r.textContent)),e?it=structuredClone(t):nt=structuredClone(t)}return t}async function bo(e){if(H&&(we(),await _e()),W.disconnect(),!me()){if(ie(),e.length===0)return;await K()}for(let t=0;t<e.length;t++)if(e[t].startsWith("spotify:user:"))await _o(),document.querySelector('.main-yourLibraryX-libraryRootlist .main-rootlist-wrapper div[role="button"][aria-labelledby*="listrow-title-'+e[t]+'"]').click();else if(t===0){let o=D.find(n=>n.identifier===e[t]);if(!o)return;ne(o),o.elem.click(),await K()}else{let o=D.find(r=>r.identifier===e[t-1]);if(!o)return;let n=o.children.find(r=>r.identifier===e[t]);if(!n)return;ne(n),n.elem.click(),await K()}rt(),Ft(),W.observe(P,{childList:!0})}function Ft(){let e=document.querySelector("#wmpotify-libx-sidebar");e.innerHTML="";let t=document.createElement("div");t.classList.add("wmpotify-libx-sidebar-item-container");let o=document.createElement("button");o.classList.add("wmpotify-libx-sidebar-item"),o.id="wmpotify-libx-sidebar-root",o.textContent=s.LIBX_SIDEBAR_ROOT,o.addEventListener("click",ie);let n=document.createElement("div");n.classList.add("wmpotify-libx-sidebar-chevron"),n.addEventListener("click",()=>{e.classList.toggle("rootCollapsed")}),t.appendChild(n),t.appendChild(o),e.appendChild(t),D.forEach(a=>{let i=document.createElement("div");i.classList.add("wmpotify-libx-sidebar-item-container");let l=document.createElement("button");if(l.classList.add("wmpotify-libx-sidebar-item"),l.textContent=a.localized,l.dataset.identifier=a.identifier,l.addEventListener("click",async()=>{l.classList.contains("active")&&!H||(H&&(we(),await _e()),W.disconnect(),me()||(ie(),await K()),ne(a),a.elem.click(),W.observe(P,{childList:!0}))}),i.appendChild(l),e.appendChild(i),a.children&&a.children.length>0){let u=document.createElement("div");u.classList.add("wmpotify-libx-sidebar-chevron"),u.addEventListener("click",()=>{i.classList.toggle("collapsed")}),i.insertBefore(u,l);let m=document.createElement("div");m.classList.add("wmpotify-libx-sidebar-downlevel"),a.children.forEach(f=>{let p=document.createElement("button");p.classList.add("wmpotify-libx-sidebar-item"),p.textContent=f.localized,p.dataset.identifier=f.identifier,p.addEventListener("click",async()=>{p.classList.contains("active")&&!H||(H&&(we(),await _e()),W.disconnect(),ne(f),(!Rt(a)||!document.contains(f.elem))&&(me()||(ie(),await K()),ne(a),a.elem.click(),await K()),ne(f),f.elem.click(),W.observe(P,{childList:!0}))}),m.appendChild(p)}),e.appendChild(m)}});let r=ct();if(r.length>0){let a=r.pop();Array.from(e.querySelectorAll(".wmpotify-libx-sidebar-item")).find(l=>l.textContent===a).classList.add("active")}else o.classList.add("active")}function kt(){let e=U.getItem(`${k}-sidebar-state`);Spicetify.Platform.LocalStorageAPI.setItem(`${k}-sidebar-state`,2),U.setItem(`${k}-sidebar-state`,e)}function wo(){if(!document.querySelector('.main-yourLibraryX-filterArea .search-searchCategory-categoryGrid [role="presentation"]'))return new Promise(e=>{let t=new MutationObserver(()=>{document.querySelector('.main-yourLibraryX-filterArea .search-searchCategory-categoryGrid [role="presentation"]')&&(e(),t.disconnect())});t.observe(document.querySelector(".main-yourLibraryX-libraryItemContainer"),{childList:!0,subtree:!0})})}function K(){return new Promise(e=>{let t=new MutationObserver(()=>{P.querySelector("button")&&(e(),t.disconnect())});t.observe(P,{childList:!0})})}function _e(){return new Promise(e=>{let t=new MutationObserver(()=>{at=!1,e(),t.disconnect()});t.observe(document.querySelector(".main-yourLibraryX-filterArea"),{childList:!0})})}function _o(){if(!document.querySelector('.main-yourLibraryX-libraryRootlist .main-rootlist-wrapper [role="presentation"]:not([class])'))return new Promise(e=>{let t=new MutationObserver(()=>{document.querySelector('.main-yourLibraryX-libraryRootlist .main-rootlist-wrapper [role="presentation"]:not([class])')&&(e(),t.disconnect())});t.observe(document.querySelector(".main-yourLibraryX-libraryRootlist"),{childList:!0,subtree:!0})})}var pe=ho;async function Dt(){let e={types:[{description:"All Supported Types",accept:{"application/x-windows-theme":[".theme",".themepack"],"application/x-windows-registry":[".reg"],"application/json":[".json"],"text/css":[".css"]}},{description:"Theme Files",accept:{"application/x-windows-theme":[".theme",".themepack"]}},{description:"Registry Files (HKCU\\CPL\\Colors or WCTC)",accept:{"application/x-windows-registry":[".reg"]}},{description:"ModernActiveDesktop JSON Files",accept:{"application/json":[".json"]}},{description:"CSS Files",accept:{"text/css":[".css"]}}],excludeAcceptAllOption:!1,multiple:!1},[t]=await window.showOpenFilePicker(e),o=await t.getFile(),n=await o.arrayBuffer(),r=new Uint8Array(n),a="utf-8";r[0]===255&&r[1]===254?a="utf-16le":r[0]===254&&r[1]===255&&(a="utf-16be");let i=new TextDecoder(a).decode(n);if(i.match("--.*:.*;")||o.name.endsWith(".css")){let l=i;if(!l.includes("wmpotify-compatible")){l=i.replace("--button-face:","--surface:").replace("--button-shadow:","--button-shadow-color:").replace("--ui-font:","--ui-font-default:");for(let m of l.split(`
`)){if(m.length>500)return Spicetify.showNotification(s.CONF_GENERAL_MSG_UNSUPPORTED_SCHEME_FILE),-1;!m.includes("!important")&&m.includes(":")&&(l=l.replace(m,m.replace(/:\s*(.*);/,": $1 !important;")))}let u=[];u.surface=l.match(/--surface:\s*(.*);/)?.[1].replace(/ !important/,""),u["button-shadow-color"]=l.match(/--button-shadow-color:\s*(.*);/)?.[1].replace(/ !important/,""),u["button-dk-shadow"]=l.match(/--button-dk-shadow:\s*(.*);/)?.[1].replace(/ !important/,""),u["button-hilight"]=l.match(/--button-hilight:\s*(.*);/)?.[1].replace(/ !important/,""),u["button-light"]=l.match(/--button-light:\s*(.*);/)?.[1].replace(/ !important/,""),u["button-text"]=l.match(/--button-text:\s*(.*);/)?.[1].replace(/ !important/,""),u["menu-text"]=l.match(/--menu-text:\s*(.*);/)?.[1].replace(/ !important/,""),u["hilight-text"]=l.match(/--hilight-text:\s*(.*);/)?.[1].replace(/ !important/,""),l+=":root {"+Ht(u)+"}",l=l.replace(/  |\n/g,"")}ve(l),localStorage.wmpotifyControlStyle="custom",localStorage.wmpotifyCustomScheme=l}else try{let l=JSON.parse(i),u=Bt(l);ve(u),localStorage.wmpotifyControlStyle="custom",localStorage.wmpotifyCustomScheme=u}catch{let l=!!i.split(`
`)[0].match(/(?=.*REG)(?=.*EDIT)/i),u=l&&i.includes("\\Control Panel\\Appearance\\ClassicSchemes\\");try{let m={"active-border":w(i,"ActiveBorder",l,u),"active-title":w(i,"ActiveTitle",l,u),"app-workspace":w(i,"AppWorkspace",l,u),background:w(i,"Background",l,u),"button-alternate-face":w(i,"ButtonAlternateFace",l,u),"button-dk-shadow":w(i,"ButtonDkShadow",l,u),"button-face":w(i,"ButtonFace",l,u),"button-hilight":w(i,"ButtonHilight",l,u),"button-light":w(i,"ButtonLight",l,u),"button-shadow":w(i,"ButtonShadow",l,u),"button-text":w(i,"ButtonText",l,u),"gradient-active-title":w(i,"GradientActiveTitle",l,u),"gradient-inactive-title":w(i,"GradientInactiveTitle",l,u),"gray-text":w(i,"GrayText",l,u),hilight:w(i,"Hilight",l,u),"hilight-text":w(i,"HilightText",l,u),"hot-tracking-color":w(i,"HotTrackingColor",l,u),"inactive-border":w(i,"InactiveBorder",l,u),"inactive-title":w(i,"InactiveTitle",l,u),"inactive-title-text":w(i,"InactiveTitleText",l,u),"info-text":w(i,"InfoText",l,u),"info-window":w(i,"InfoWindow",l,u),menu:w(i,"Menu",l,u),"menu-bar":w(i,"MenuBar",l,u),"menu-hilight":w(i,"MenuHilight",l,u),"menu-text":w(i,"MenuText",l,u),scrollbar:w(i,"Scrollbar",l,u),"title-text":w(i,"TitleText",l,u),window:w(i,"Window",l,u),"window-frame":w(i,"WindowFrame",l,u),"window-text":w(i,"WindowText",l,u)};if(u){let p=i.match(`\\n"Size1"=dword:0000(.*)\r
`);p?m["scrollbar-size"]=parseInt(p[1],16)+"px":m["scrollbar-size"]="16px";let h=i.match(`\\n"Size8"=dword:0000(.*)\r
`);h?m["menu-height"]=parseInt(h[1],16)+"px":m["menu-height"]="18px",i.match(`\\n"Gradients"=dword:00000000\r
`)&&(m["gradient-active-title"]=m["active-title"],m["gradient-inactive-title"]=m["inactive-title"]),i.match(`\\n"FlatMenus"=dword:00000000\r
`)?m["flat-menus"]="none":m["flat-menus"]="mbcm"}else m["scrollbar-size"]="16px",m["menu-height"]="18px";let f=Bt(m);ve(f),localStorage.wmpotifyControlStyle="custom",localStorage.wmpotifyCustomScheme=f}catch{return Spicetify.showNotification(s.CONF_GENERAL_MSG_INVALID_SCHEME_FILE),-1}}}async function ve(e){let t=document.getElementById("wmpotify-scheme");t||(t=document.createElement("style"),t.id="wmpotify-scheme",document.body.appendChild(t)),t.textContent=e,document.documentElement.dataset.wmpotifyControlStyle="custom",e.includes("--flat-menus: mbcm")&&(document.documentElement.dataset.wmpotifyFlatMenus=!0)}function Bt(e){let t=["extra-border-bottom","supports-win-shadow","extra-title-height","extra-border-size","menu-animation","menu-shadow","supports-colorization","win-open-anim","win-close-anim","palette-title-height"],o={"button-face":"surface","button-shadow":"button-shadow-color","ui-font":"ui-font-default"},n=`:root {
`;for(let r in e)if(!t.includes(r)){if(o[r]){n+=`--${o[r]}: ${e[r]} !important;
`;continue}n+=`--${r}: ${e[r]} !important;
`}return n+=Ht(e),n+="}",n}function Ht(e){let t=e.surface||e["button-face"],o=e["button-dk-shadow"],n=e["button-hilight"],r=e["button-light"],a=e["button-shadow-color"]||e["button-shadow"],i=e["button-text"],l=e["menu-text"],u=e["hilight-text"],m=`
        <svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M15 0H0V1V16H1V1H15V0Z" fill="${r}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M2 1H1V15H2V2H14V1H2Z" fill="${n}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M16 17H15H0V16H15V0H16V17Z" fill="${o}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M15 1H14V15H1V16H14H15V1Z" fill="${a}"/>
            <rect x="2" y="2" width="12" height="13" fill="${t}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M8 6H7V7H6V8H5V9H4V10H11V9H10V8H9V7H8V6Z" fill="${i}"/>
        </svg>`.replace(/  |\n/g,""),f=`
        <svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M15 0H0V1V16H1V1H15V0Z" fill="${r}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M2 1H1V15H2V2H14V1H2Z" fill="${n}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M16 17H15H0V16H15V0H16V17Z" fill="${o}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M15 1H14V15H1V16H14H15V1Z" fill="${a}"/>
            <rect x="2" y="2" width="12" height="13" fill="${t}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M9 6H4V7H5V8H6V9H7V10H8V9H9V8H10V7H11V6Z" fill="${i}"/>
        </svg>`.replace(/  |\n/g,""),p=`
        <svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M15 0H0V1V16H1V1H15V0Z" fill="${r}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M2 1H1V15H2V2H14V1H2Z" fill="${n}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M16 17H15H0V16H15V0H16V17Z" fill="${o}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M15 1H14V15H1V16H14H15V1Z" fill="${a}"/>
            <rect x="2" y="2" width="12" height="13" fill="${t}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M9 4H8V5H7V6H6V7H5V8H6V9H7V10H8V11H9V4Z" fill="${i}"/>
        </svg>`.replace(/  |\n/g,""),h=`
        <svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M15 0H0V1V16H1V1H15V0Z" fill="${r}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M2 1H1V15H2V2H14V1H2Z" fill="${n}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M16 17H15H0V16H15V0H16V17Z" fill="${o}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M15 1H14V15H1V16H14H15V1Z" fill="${a}"/>
            <rect x="2" y="2" width="12" height="13" fill="${t}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M7 4H6V11H7V10H8V9H9V8H10V7H9V6H8V5H7V4Z" fill="${i}"/>
        </svg>`.replace(/  |\n/g,""),E=`
        <svg width="2" height="2" viewBox="0 0 2 2" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M1 0H0V1H1V2H2V1H1V0Z" fill="${t}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M2 0H1V1H0V2H1V1H2V0Z" fill="${n}"/>
        </svg>`.replace(/  |\n/g,""),L=`
        <svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M0 0H15H16V17H15H0V16V1V0ZM1 16H15V1H1V16Z" fill="${a}"/>
            <rect x="1" y="1" width="14" height="15" fill="${t}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M12 7H5V8H6V9H7V10H8V11H9V10H10V9H11V8H12V7Z" fill="${i}"/>
        </svg>`.replace(/  |\n/g,""),O=`
        <svg width="7" height="7" viewBox="0 0 7 7" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M7 0H6V1H5V2H4V3H3V4H2V3H1V2H0V5H1V6H2V7H3V6H4V5H5V4H6V3H7V0Z" fill="${i}"/>
        </svg>`.replace(/  |\n/g,""),T=`
        <svg width="7" height="7" viewBox="0 0 7 7" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M7 0H6V1H5V2H4V3H3V4H2V3H1V2H0V5H1V6H2V7H3V6H4V5H5V4H6V3H7V0Z" fill="${a}"/>
        </svg>`.replace(/  |\n/g,""),N=`
        <?xml version="1.0" standalone="no"?>
        <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd" >
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="-10 0 2058 2048" shape-rendering="crispEdges">
            <path fill="${l}" d="M512 832l320 319l576 -575v384l-576 576l-320 -320v-384z" />
        </svg>`.replace(/  |\n/g,""),v=`
        <?xml version="1.0" standalone="no"?>
        <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd" >
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="-10 0 2058 2048" shape-rendering="crispEdges">
            <path fill="${u}" d="M512 832l320 319l576 -575v384l-576 576l-320 -320v-384z" />
        </svg>`.replace(/  |\n/g,"");return`
        --scroll-up: url("data:image/svg+xml,${encodeURIComponent(m)}") !important;
        --scroll-down: url("data:image/svg+xml,${encodeURIComponent(f)}") !important;
        --scroll-left: url("data:image/svg+xml,${encodeURIComponent(p)}") !important;
        --scroll-right: url("data:image/svg+xml,${encodeURIComponent(h)}") !important;
        --scroll-track: url("data:image/svg+xml,${encodeURIComponent(E)}") !important;
        --dropdown-button-pressed: url("data:image/svg+xml,${encodeURIComponent(L)}") !important;
        --checkmark: url("data:image/svg+xml,${encodeURIComponent(O)}") !important;
        --checkmark-disabled: url("data:image/svg+xml,${encodeURIComponent(T)}") !important;
        --checkmark-menu: url("data:image/svg+xml,${encodeURIComponent(N)}") !important;
        --checkmark-menu-hover: url("data:image/svg+xml,${encodeURIComponent(v)}") !important;
    `.replace(/  |\n/g,"")}function w(e,t,o,n){let r=["Scrollbar","Background","ActiveTitle","InactiveTitle","Menu","Window","WindowFrame","MenuText","WindowText","TitleText","ActiveBorder","InactiveBorder","AppWorkspace","Hilight","HilightText","ButtonFace","ButtonShadow","GrayText","ButtonText","InactiveTitleText","ButtonHilight","ButtonDkShadow","ButtonLight","InfoText","InfoWindow","ButtonAlternateFace","HotTrackingColor","GradientActiveTitle","GradientInactiveTitle","MenuHilight","MenuBar"],a;n?a=new RegExp(`\\n"Color${r.indexOf(t)}"=dword:00(.*)\r
`):o?a=new RegExp(`\\n"${t}"="(.*)"\r
`):a=new RegExp(`\\n${t}=(.*)\r
`);let i=e.match(a);if(n){if(i)return"#"+i[1].trim().match(/.{2}/g).reverse().join("");throw new Error(`Color not found for ${t}`)}if(!i)switch(t){case"ButtonAlternateFace":return"#B5B5B5";case"GradientActiveTitle":return w(e,"ActiveTitle",o);case"GradientInactiveTitle":return w(e,"InactiveTitle",o);case"MenuBar":return w(e,"Menu",o);case"MenuHilight":return w(e,"Hilight",o);case"HotTrackingColor":return"#008080";default:throw new Error(`Color not found for ${t}`)}return"#"+i[1].trim().split(" ").map(l=>parseInt(l).toString(16).padStart(2,"0")).join("")}var g=document.createElement("div"),V=null,st=0,Be=null,Ue=!1,He=null,Ge=null,qe=null,c={};function vo(){if(document.getElementById("wmpotify-config"))return;let e=y.query(),t=document.querySelector(".Root__main-view"),o=window.matchMedia("(forced-colors: active)");g.id="wmpotify-config",g.innerHTML=`
        <div id="wmpotify-config-topborder" class="wmpotify-tintable"></div>
        <button id="wmpotify-config-prev"></button>
        <button id="wmpotify-config-next"></button>
        <p id="wmpotify-config-title">${s.CONF_GENERAL_TITLE}</p>
        <span id="wmpotify-config-wh-message">${s.CONF_GENERAL_WH_MESSAGE}</span>
        <button id="wmpotify-config-close"></button>
        <section id="wmpotify-config-tab-general" class="wmpotify-config-tab-content" data-tab-title="${s.CONF_GENERAL_TITLE}" style="display: block;">
            <label for="wmpotify-config-style">${s.CONF_GENERAL_STYLE}</label>
            <select id="wmpotify-config-style" class="wmpotify-aero">
                <option value="auto">${s.UI_AUTO}</option>
                <option value="xp">XP</option>
                <option value="aero">Aero</option>
                <option value="basic">Basic</option>
                <option value="basic_custom">Basic (${s.UI_CUSTOM})</option>
            </select>
            <label for="wmpotify-config-title-style">${s.CONF_GENERAL_TITLE_STYLE}</label>
            <select id="wmpotify-config-title-style" class="wmpotify-aero">
                <option value="auto">${s.UI_AUTO}</option>
                <option value="native">${s.CONF_GENERAL_TITLE_STYLE_NATIVE}</option>
                <option value="custom">${s.CONF_GENERAL_TITLE_STYLE_CUSTOM}</option>
                <option value="spotify">Spotify</option>
                <option value="keepmenu">${s.CONF_GENERAL_TITLE_STYLE_KEEPMENU}</option>
            </select>
            <button id="wmpotify-config-apply" class="wmpotify-aero">${s.CONF_GENERAL_APPLY}</button><br>
            <label for="wmpotify-config-control-style">${s.CONF_GENERAL_CONTROL_STYLE}</label>
            <select id="wmpotify-config-control-style" class="wmpotify-aero">
                <option value="classic">${s.CONF_GENERAL_CONTROL_STYLE_CLASSIC}</option>
                <option value="standard">${s.CONF_GENERAL_CONTROL_STYLE_STANDARD}</option>
                <option value="xp">Windows XP</option>
                <option value="aero" selected>Windows Aero</option>
                <option value="10">Windows 10</option>
                <option value="custom">${s.CONF_GENERAL_CONTROL_STYLE_CUSTOM}</option>
            </select>
            <label for="wmpotify-config-dark-mode">${s.CONF_GENERAL_DARK_MODE}</label>
            <select id="wmpotify-config-dark-mode" class="wmpotify-aero">
                <option value="follow_scheme" selected>${s.CONF_GENERAL_DARK_MODE_FOLLOW_SCHEME}</option>
                <option value="system">${s.CONF_GENERAL_DARK_MODE_SYSTEM}</option>
                <option value="always">${s.CONF_GENERAL_DARK_MODE_ALWAYS}</option>
                <option value="never">${s.CONF_GENERAL_DARK_MODE_NEVER}</option>
            </select><br>
            <label for="wmpotify-config-font">${s.CONF_GENERAL_FONT}</label>
            <select id="wmpotify-config-font" class="wmpotify-aero">
                <option value="default">${s.UI_DEFAULT}</option>
                <option value="custom">${s.UI_CUSTOM}</option>
                <option value="reload">${s.CONF_GENERAL_FONT_RELOAD}</option>
                ${window.queryLocalFonts?`
                    <option value="loadsys">${s.CONF_GENERAL_FONT_LOADSYS}</option>
                `:""}
            </select><br>
            <label for="wmpotify-config-topmost">${s.CONF_GENERAL_TOPMOST}</label>
            <select id="wmpotify-config-topmost" class="wmpotify-aero" disabled>
                <option value="always">${s.CONF_GENERAL_TOPMOST_ALWAYS}</option>
                <option value="minimode">${s.CONF_GENERAL_TOPMOST_MINIMODE}</option>
                <option value="never" selected>${s.CONF_GENERAL_TOPMOST_NEVER}</option>
            </select>
            <label for="wmpotify-config-backdrop">${s.CONF_GENERAL_BACKDROP}</label>
            <select id="wmpotify-config-backdrop" class="wmpotify-aero" disabled>
                <option value="none" selected>${s.CONF_GENERAL_BACKDROP_NONE}</option>
                <option value="mica">Mica</option>
                <option value="acrylic">${s.CONF_GENERAL_BACKDROP_ACRYLIC}</option>
                <option value="tabbed">${s.CONF_GENERAL_BACKDROP_TABBED}</option>
            </select><br>
            <input type="checkbox" id="wmpotify-config-hide-pbleftbtn" class="wmpotify-aero">
            <label for="wmpotify-config-hide-pbleftbtn">${s.CONF_GENERAL_HIDE_PBLEFTBTN}</label><br>
            <input type="checkbox" id="wmpotify-config-show-libx" class="wmpotify-aero">
            <label for="wmpotify-config-show-libx">${s.CONF_GENERAL_SHOW_LIBX}</label><br>
            <input type="checkbox" id="wmpotify-config-lock-title" class="wmpotify-aero" disabled>
            <label for="wmpotify-config-lock-title">${s.CONF_GENERAL_LOCK_TITLE}</label>
        </section>
        <section id="wmpotify-config-tab-color" class="wmpotify-config-tab-content" data-tab-title="${s.CONF_COLOR_TITLE}">
            <section class="field-row">
                <a href="#" id="wmpotify-config-color-reset">${s.UI_RESET}</a>
                <input type="checkbox" id="wmpotify-config-tint-playerbar" class="wmpotify-aero">
                <label for="wmpotify-config-tint-playerbar">${s.CONF_COLOR_TINTPB}</label>
                <input type="checkbox" id="wmpotify-config-tint-more" class="wmpotify-aero">
                <label for="wmpotify-config-tint-more">${s.CONF_COLOR_TINTMORE}</label>
            </section>
            <label>${s.CONF_COLOR_HUE}</label><br>
            <input type="range" id="wmpotify-config-hue" class="wmpotify-aero no-track" min="0" max="360" step="1" value="180"><br>
            <label>${s.CONF_COLOR_SAT}</label><br>
            <input type="range" id="wmpotify-config-sat" class="wmpotify-aero no-track" min="0" max="354" step="1" value="121"><br>
        </section>
        <section id="wmpotify-config-tab-speed" class="wmpotify-config-tab-content" data-tab-title="${s.CONF_SPEED_TITLE}" data-wh-speedmod-required="true">
            <a href="#" id="wmpotify-config-speed-slow">${s.CONF_SPEED_SLOW}</a>
            <a href="#" id="wmpotify-config-speed-normal">${s.CONF_SPEED_NORMAL}</a>
            <a href="#" id="wmpotify-config-speed-fast">${s.CONF_SPEED_FAST}</a><br>
            <input type="range" id="wmpotify-config-speed" class="wmpotify-aero" min="0.5" max="2.0" step="0.1" value="1"><br>
            ${s.CONF_SPEED_CURRENT_LABEL}: <span id="wmpotify-config-speed-value">1.0</span>
        </section>
        <section id="wmpotify-config-tab-about" class="wmpotify-config-tab-content" data-tab-title="${s.CONF_ABOUT_TITLE}">
            <div id="wmpotify-about-logo"></div>
            <p id="wmpotify-about-title">WMPotify</p>
            <button id="wmpotify-about-github" onclick="window.open('https://github.com/Ingan121/WMPotify', '_blank')">
                
                <svg version="1.0" xmlns="http://www.w3.org/2000/svg"
                    width="240.000000pt" height="240.000000pt" viewBox="0 0 240.000000 240.000000"
                    preserveAspectRatio="xMidYMid meet">

                    <g transform="translate(0.000000,240.000000) scale(0.100000,-0.100000)"
                    fill="white" stroke="none">
                    <path d="M970 2301 c-305 -68 -555 -237 -727 -493 -301 -451 -241 -1056 143
                    -1442 115 -116 290 -228 422 -271 49 -16 55 -16 77 -1 24 16 25 20 25 135 l0
                    118 -88 -5 c-103 -5 -183 13 -231 54 -17 14 -50 62 -73 106 -38 74 -66 108
                    -144 177 -26 23 -27 24 -9 37 43 32 130 1 185 -65 96 -117 133 -148 188 -160
                    49 -10 94 -6 162 14 9 3 21 24 27 48 6 23 22 58 35 77 l24 35 -81 16 c-170 35
                    -275 96 -344 200 -64 96 -85 179 -86 334 0 146 16 206 79 288 28 36 31 47 23
                    68 -15 36 -11 188 5 234 13 34 20 40 47 43 45 5 129 -24 214 -72 l73 -42 64
                    15 c91 21 364 20 446 0 l62 -16 58 35 c77 46 175 82 224 82 39 0 39 -1 55 -52
                    17 -59 20 -166 5 -217 -8 -30 -6 -39 16 -68 109 -144 121 -383 29 -579 -62
                    -129 -193 -219 -369 -252 l-84 -16 31 -55 32 -56 3 -223 4 -223 25 -16 c23
                    -15 28 -15 76 2 80 27 217 101 292 158 446 334 590 933 343 1431 -145 293
                    -419 518 -733 602 -137 36 -395 44 -525 15z"/>
                    </g>
                </svg>
            </button>
            <p>${s.CONF_ABOUT_DESC}</p>
            <p>${s.CONF_ABOUT_VERSION}: 1.1 Release Candidate<span id="wmpotify-about-ctewh-ver"></span></p>
            <p>${s.CONF_ABOUT_AUTHOR} - <a href="https://www.ingan121.com/" target="_blank">www.ingan121.com</a></p>
            <input type="checkbox" id="wmpotify-config-auto-updates" class="wmpotify-aero" checked>
            <label for="wmpotify-config-auto-updates">${s.CONF_ABOUT_AUTO_UPDATES}</label>
        </section>
    `,V=g.querySelectorAll(".wmpotify-config-tab-content"),c.topborder=g.querySelector("#wmpotify-config-topborder"),c.title=g.querySelector("#wmpotify-config-title"),c.hue=g.querySelector("#wmpotify-config-hue"),c.sat=g.querySelector("#wmpotify-config-sat"),c.tintPb=g.querySelector("#wmpotify-config-tint-playerbar"),c.tintMore=g.querySelector("#wmpotify-config-tint-more"),c.style=g.querySelector("#wmpotify-config-style"),c.titleStyle=g.querySelector("#wmpotify-config-title-style"),c.controlStyle=g.querySelector("#wmpotify-config-control-style"),c.darkMode=g.querySelector("#wmpotify-config-dark-mode"),c.fontSelector=g.querySelector("#wmpotify-config-font"),c.fontDefault=g.querySelector('#wmpotify-config-font option[value="default"]'),c.fontCustom=g.querySelector('#wmpotify-config-font option[value="custom"]'),c.fontReload=g.querySelector('#wmpotify-config-font option[value="reload"]'),c.fontLoadSys=g.querySelector('#wmpotify-config-font option[value="loadsys"]'),c.hidePbLeftBtn=g.querySelector("#wmpotify-config-hide-pbleftbtn"),c.topmost=g.querySelector("#wmpotify-config-topmost"),c.backdrop=g.querySelector("#wmpotify-config-backdrop"),c.showLibX=g.querySelector("#wmpotify-config-show-libx"),c.lockTitle=g.querySelector("#wmpotify-config-lock-title"),c.whMessage=g.querySelector("#wmpotify-config-wh-message"),c.whVer=g.querySelector("#wmpotify-about-ctewh-ver"),c.autoUpdates=g.querySelector("#wmpotify-config-auto-updates");let n=localStorage.wmpotifyConfigHeight;n&&parseInt(n)>=24&&(g.style.height=localStorage.wmpotifyConfigHeight),qt(o),o.addEventListener("change",qt),c.style.addEventListener("change",async()=>{if(c.style.value==="basic_custom"){let m=await Y(s.CONF_GENERAL_BASIC_CUSTOM_DLG_TITLE,s.CONF_GENERAL_BASIC_CUSTOM_ACTIVE_MSG,"",s.CONF_GENERAL_BASIC_CUSTOM_PLACEHOLDER);if(!m){c.style.value=localStorage.wmpotifyStyle||"auto";return}let f=await Y(s.CONF_GENERAL_BASIC_CUSTOM_DLG_TITLE,s.CONF_GENERAL_BASIC_CUSTOM_INACTIVE_MSG,"",s.CONF_GENERAL_BASIC_CUSTOM_PLACEHOLDER);if(!f){c.style.value=localStorage.wmpotifyStyle||"auto";return}let p=await Y(s.CONF_GENERAL_BASIC_CUSTOM_DLG_TITLE,s.CONF_GENERAL_BASIC_CUSTOM_TEXT_MSG,"",s.CONF_GENERAL_BASIC_CUSTOM_PLACEHOLDER);if(!p){c.style.value=localStorage.wmpotifyStyle||"auto";return}He=m,Ge=f,qe=p}}),c.controlStyle.addEventListener("change",async()=>{if(c.controlStyle.value==="custom"){try{await Dt()===-1&&(c.controlStyle.value=localStorage.wmpotifyControlStyle||"aero")}catch{c.controlStyle.value=localStorage.wmpotifyControlStyle||"aero"}return}if(document.getElementById("wmpotify-scheme")?.remove(),delete localStorage.wmpotifyCustomScheme,delete document.documentElement.dataset.wmpotifyFlatMenus,localStorage.wmpotifyControlStyle=c.controlStyle.value,document.documentElement.dataset.wmpotifyControlStyle=c.controlStyle.value,localStorage.wmpotifyTintColor){let[m,f,p,h]=localStorage.wmpotifyTintColor.split(",");q(m,f,p,h)}}),c.darkMode.addEventListener("change",async()=>{let m=c.darkMode.value,f=window.matchMedia("(prefers-color-scheme: dark)");if(m==="system"&&!y.getModule()?.initialOptions.noforceddarkmode&&f.matches){let p="CONF_GENERAL_DARK_MODE_SYSTEM_MSG_"+(navigator.userAgent.includes("Windows")?"WIN":"UNIX");if(!await Ie(s.CONF_GENERAL_DARK_MODE_SYSTEM,s[p])){c.darkMode.value=localStorage.wmpotifyDarkMode||"follow_scheme";return}}if(localStorage.wmpotifyDarkMode=m,m==="always"||m==="follow_scheme"&&window.Spicetify?.Config?.color_scheme==="dark"||m==="system"&&f.matches?document.documentElement.dataset.wmpotifyDarkMode=!0:delete document.documentElement.dataset.wmpotifyDarkMode,m==="system"?z.addSystemDarkModeListener():z.removeSystemDarkModeListener(),m==="follow_scheme"?z.addMarketplaceSchemeObserver():z.removeMarketplaceSchemeObserver(),localStorage.wmpotifyTintColor){let[p,h,E,L]=localStorage.wmpotifyTintColor.split(",");q(p,h,E,L)}}),c.fontSelector.addEventListener("change",async()=>{if(c.fontSelector.value==="custom"){let m=await Y(s.CONF_GENERAL_CUSTOM_FONT_DLG_TITLE,s.CONF_GENERAL_CUSTOM_FONT_MSG,"",localStorage.wmpotifyFont||"Segoe UI");if(!m){c.fontSelector.value=localStorage.wmpotifyFont||"default";return}c.fontCustom.textContent=m,localStorage.wmpotifyFont=m}else if(c.fontCustom.textContent=s.UI_CUSTOM,c.fontSelector.value==="reload"||c.fontSelector.value==="loadsys"){let m;if(c.fontSelector.value==="loadsys"&&window.queryLocalFonts&&(m=await window.queryLocalFonts(),m.length===0)){Spicetify.showNotification(s.CONF_GENERAL_FONT_LOADSYS_DENIED_MSG);return}delete localStorage.wmpotifyFontCache;let f=c.fontSelector.options.length-2-+!!window.queryLocalFonts-+g.contains(c.fontReload);for(let p=0;p<f;p++)c.fontSelector.options[2].remove();c.fontSelector.value==="loadsys"?Mo(m):Gt()}else c.fontSelector.value==="default"?delete localStorage.wmpotifyFont:localStorage.wmpotifyFont=c.fontSelector.value;localStorage.wmpotifyFont?document.documentElement.style.setProperty("--ui-font",localStorage.wmpotifyFont):document.documentElement.style.removeProperty("--ui-font")}),c.hidePbLeftBtn.addEventListener("change",()=>{c.hidePbLeftBtn.checked?(localStorage.wmpotifyHidePbLeftBtn=!0,document.body.dataset.hidePbLeftBtn=!0):(delete localStorage.wmpotifyHidePbLeftBtn,delete document.body.dataset.hidePbLeftBtn)}),c.showLibX.addEventListener("change",()=>{c.showLibX.checked?(localStorage.wmpotifyShowLibX=!0,delete document.body.dataset.hideLibx):(delete localStorage.wmpotifyShowLibX,document.body.dataset.hideLibx=!0,Spicetify.Platform.LocalStorageAPI.setItem(`${k}-sidebar-state`,1))}),g.querySelector("#wmpotify-config-close").addEventListener("click",dt),g.querySelector("#wmpotify-config-apply").addEventListener("click",Vt),c.autoUpdates.addEventListener("change",()=>{c.autoUpdates.checked?(delete localStorage.wmpotifyNoUpdateCheck,be()):localStorage.wmpotifyNoUpdateCheck=!0}),Ue=e?.speedModSupported,c.speed=g.querySelector("#wmpotify-config-speed"),c.speedValue=g.querySelector("#wmpotify-config-speed-value"),c.speed.addEventListener("pointerup",To),g.querySelector("#wmpotify-config-speed-slow").addEventListener("click",Ce.bind(null,.5)),g.querySelector("#wmpotify-config-speed-normal").addEventListener("click",Ce.bind(null,1)),g.querySelector("#wmpotify-config-speed-fast").addEventListener("click",Ce.bind(null,1.4));let r=Spicetify.Player.origin.getState().speed||1;c.speedValue.textContent=Number.isInteger(r)?r+".0":r,c.speedValue.addEventListener("click",async()=>{let m=await Y(s.CONF_SPEED_CUSTOM_DLG_TITLE,s.CONF_SPEED_CUSTOM_MSG,r.toString(),"1.0");m&&Ce(m)});let a=Spicetify.Platform.PlatformData.os_version.split(".")[2]>=22e3;e&&(c.topmost.disabled=!1,c.topmost.value=localStorage.wmpotifyTopMost||"never",c.topmost.addEventListener("change",()=>{localStorage.wmpotifyTopMost=c.topmost.value,c.topmost.value==="always"||c.topmost.value==="minimode"&&Q.isMiniMode()?y.setTopMost(!0):y.setTopMost(!1)}),c.lockTitle.disabled=!1,c.lockTitle.checked=localStorage.wmpotifyLockTitle,c.lockTitle.addEventListener("change",async()=>{if(y.lockTitle(c.lockTitle.checked),c.lockTitle.checked)y.setTitle(await Spicetify.AppTitle.get()),localStorage.wmpotifyLockTitle=!0;else{delete localStorage.wmpotifyLockTitle;let m=Spicetify.Player.data?.item.metadata;m&&Spicetify.Player.isPlaying()&&y.setTitle(m.artist_name+" - "+m.title)}}),a&&(c.backdrop.disabled=!1,c.backdrop.value=localStorage.wmpotifyBackdrop||"mica",c.backdrop.addEventListener("change",()=>{localStorage.wmpotifyBackdrop=c.backdrop.value,y.setBackdrop(c.backdrop.value)})),c.whMessage.style.display="none",c.whVer.textContent=", "+s.getString("CONF_ABOUT_CTEWH_VERSION",y.getModule().version)),a||(c.backdrop.style.display="none",c.backdrop.previousElementSibling.style.display="none"),navigator.userAgent.includes("Windows")||(c.topmost.style.display="none",c.topmost.previousElementSibling.style.display="none",c.lockTitle.style.display="none",c.lockTitle.nextElementSibling.style.display="none",c.whMessage.style.display="none"),c.hue.addEventListener("input",De),c.sat.addEventListener("input",De),c.tintPb.addEventListener("change",De),c.tintMore.addEventListener("change",De),g.querySelector("#wmpotify-config-color-reset").addEventListener("click",Lo),g.querySelector("#wmpotify-config-prev").addEventListener("click",Ut),g.querySelector("#wmpotify-config-next").addEventListener("click",Wt),Gt(),localStorage.wmpotifyStyle&&(localStorage.wmpotifyStyle==="basic"&&localStorage.wmpotifyBasicActiveColor&&localStorage.wmpotifyBasicInactiveColor&&localStorage.wmpotifyBasicTextColor?(He=localStorage.wmpotifyBasicActiveColor,Ge=localStorage.wmpotifyBasicInactiveColor,qe=localStorage.wmpotifyBasicTextColor,c.style.value="basic_custom"):c.style.value=localStorage.wmpotifyStyle),navigator.userAgent.includes("Windows")||c.titleStyle.querySelector("option[value=keepmenu]").remove(),navigator.userAgent.includes("Linux")&&c.titleStyle.querySelector("option[value=spotify]").remove(),localStorage.wmpotifyTitleStyle&&(c.titleStyle.value=localStorage.wmpotifyTitleStyle),o.matches||(localStorage.wmpotifyControlStyle&&(c.controlStyle.value=localStorage.wmpotifyControlStyle),["follow_scheme","system","always","never"].includes(localStorage.wmpotifyDarkMode)?c.darkMode.value=localStorage.wmpotifyDarkMode:y.getModule()?.initialOptions.noforceddarkmode&&(c.darkMode.value="system")),localStorage.wmpotifyHidePbLeftBtn&&(c.hidePbLeftBtn.checked=!0),localStorage.wmpotifyShowLibX&&(g.querySelector("#wmpotify-config-show-libx").checked=!0),localStorage.wmpotifyNoUpdateCheck&&(c.autoUpdates.checked=!1);let i=0,l=!1;c.topborder.addEventListener("pointerdown",function(){l=!0,i=g.getBoundingClientRect().bottom,document.body.style.cursor="ns-resize"},!0),document.addEventListener("pointerup",function(){l&&(l=!1,document.body.style.cursor="",g.offsetHeight<24&&(g.style.height="24px"),localStorage.wmpotifyConfigHeight=g.style.height)},!0),document.addEventListener("pointermove",function(m){l&&g.offsetHeight>=24&&(g.style.height=i-m.clientY+"px")},!0),t.appendChild(g);let u=setInterval(()=>{try{new Spicetify.Menu.Item(s.MENU_CONF,!1,$t.open).register(),clearInterval(u)}catch{}},100)}function Co(){if(V){if(document.body.dataset.wmpotifyLibPageOpen||document.querySelector(".QdB2YtfEq0ks5O4QbtwX"))Spicetify.Config.custom_apps.includes("wmpvis")?Spicetify.Platform.History.push({pathname:"/wmpvis"}):Spicetify.Platform.History.push({pathname:"/"});else if(g.style.display==="block"){dt();return}if(g.style.display="block",localStorage.wmpotifyTintColor){let[e,t,o,n]=localStorage.wmpotifyTintColor.split(",");c.hue.value=parseInt(e)+180,c.sat.value=parseInt(t)*121/100,o&&(c.tintPb.checked=!0),n&&(c.tintMore.checked=!0)}}}function dt(){g.style.display="none"}function ut(e){if(V){for(let t=0;t<V.length;t++){let o=V[t];o.style.display=t===e?"block":"none"}st=e,c.title.textContent=V[e].dataset.tabTitle}}function Ut(){let e=(st-1+V.length)%V.length;V[e].dataset.whSpeedmodRequired&&!Ue&&!document.querySelector('button[data-testid="control-button-playback-speed"]')&&e--,ut(e)}function Wt(){let e=(st+1)%V.length;V[e].dataset.whSpeedmodRequired&&!Ue&&!document.querySelector('button[data-testid="control-button-playback-speed"]')&&e++,ut(e)}function De(){let e=c.hue.value-180,t=c.sat.value*100/121;q(e,t,c.tintPb.checked,c.tintMore.checked),localStorage.wmpotifyTintColor=e+","+t+","+(c.tintPb.checked?"1":"")+","+(c.tintMore.checked?"1":"")}function Lo(){c.hue.value=180,c.sat.value=121,q(),delete localStorage.wmpotifyTintColor}function To(){c.speedValue.textContent=Number.isInteger(parseFloat(c.speed.value))?c.speed.value+".0":c.speed.value,Be&&clearTimeout(Be),Be=setTimeout(()=>{Ce(c.speed.value),Be=null},500)}function Ce(e){let t=document.querySelector('button[data-testid="control-button-playback-speed"]');if(!Ue&&!t){Spicetify.showNotification(s["CONF_SPEED_UNSUPPORTED_MSG_"+(navigator.userAgent.includes("Windows")?"WIN":"UNIX")]);return}if(Spicetify.Platform.ConnectAPI.state.connectionStatus==="connected"&&!t){Spicetify.showNotification(s.CONF_SPEED_NO_CONNECT_MSG);return}e=parseFloat(e);let o=Spicetify.Player.origin.getState().speed||1;if(e!==o){if(e<=0||e>5){Spicetify.showNotification(s.CONF_SPEED_OUT_OF_RANGE_MSG);return}c.speed.value=e,c.speedValue.textContent=Number.isInteger(e)?e+".0":e;try{t?Spicetify.Player.origin.setSpeed(e):y.setPlaybackSpeed(e)}catch(n){Spicetify.showNotification(n.message)}}}function Vt(){let e=c.style.value,t=c.titleStyle.value;e!=="auto"?(e!=="basic_custom"||!He||!Ge||!qe?(delete localStorage.wmpotifyBasicActiveColor,delete localStorage.wmpotifyBasicInactiveColor,delete localStorage.wmpotifyBasicTextColor):(localStorage.wmpotifyBasicActiveColor=He,localStorage.wmpotifyBasicInactiveColor=Ge,localStorage.wmpotifyBasicTextColor=qe),localStorage.wmpotifyStyle=e==="basic_custom"?"basic":e):delete localStorage.wmpotifyStyle,t!=="auto"?localStorage.wmpotifyTitleStyle=t:delete localStorage.wmpotifyTitleStyle,location.reload()}function Gt(){let e=localStorage.wmpotifyFontCache?.split(",")||[];e.length?(e.forEach(t=>{let o=document.createElement("option");o.textContent=t,o.value=t,t===localStorage.wmpotifyFont&&(o.selected=!0),t==="Segoe UI"?c.fontSelector.insertBefore(o,c.fontCustom.nextElementSibling):c.fontSelector.insertBefore(o,c.fontReload)}),e.includes(localStorage.wmpotifyFont)||(localStorage.wmpotifyFont?(c.fontSelector.value="custom",c.fontCustom.textContent=localStorage.wmpotifyFont):c.fontSelector.value="default")):(tt.each(t=>{let o=document.createElement("option");o.textContent=t.name,o.value=t.name,t.name===localStorage.wmpotifyFont&&(o.selected=!0),t.name==="Segoe UI"?c.fontSelector.insertBefore(o,c.fontCustom.nextElementSibling):c.fontSelector.insertBefore(o,c.fontReload),e.push(t.name)}),tt.all(()=>{e.includes(localStorage.wmpotifyFont)||(localStorage.wmpotifyFont?(c.fontSelector.value="custom",c.fontCustom.textContent=localStorage.wmpotifyFont):c.fontSelector.value="default"),localStorage.wmpotifyFontCache=e.join(","),c.fontReload.remove()}))}async function Mo(e){let t=[...new Set(e.map(o=>o.family))];for(let o of t){let n=document.createElement("option");n.textContent=o,n.value=o,o===localStorage.wmpotifyFont&&(n.selected=!0),o==="Segoe UI"?c.fontSelector.insertBefore(n,c.fontCustom.nextElementSibling):c.fontSelector.insertBefore(n,c.fontLoadSys)}t.includes(localStorage.wmpotifyFont)||(localStorage.wmpotifyFont?(c.fontSelector.value="custom",c.fontCustom.textContent=localStorage.wmpotifyFont):c.fontSelector.value="default"),localStorage.wmpotifyFontCache=t.join(",")}function qt(e){if(e.matches){if(c.controlStyle.innerHTML=`
            <option value="classic">${s.CONF_GENERAL_CONTROL_STYLE_HC}</option>
            <option value="custom">${s.CONF_GENERAL_CONTROL_STYLE_CUSTOM}</option>
        `,localStorage.wmpotifyControlStyle!=="custom"?(c.controlStyle.value="classic",document.documentElement.dataset.wmpotifyControlStyle="classic"):c.controlStyle.value="custom",c.darkMode.innerHTML=`
            <option value="never">${s.CONF_GENERAL_CONTROL_STYLE_HC}</option>
        `,c.darkMode.value="never",c.darkMode.disabled=!0,c.tintPb.disabled=!0,c.tintMore.disabled=!0,localStorage.wmpotifyTintColor){let[t,o,n,r]=localStorage.wmpotifyTintColor.split(",");q(t,o,!1,!1)}}else{c.controlStyle.innerHTML=`
            <option value="classic">${s.CONF_GENERAL_CONTROL_STYLE_CLASSIC}</option>
            <option value="standard">${s.CONF_GENERAL_CONTROL_STYLE_STANDARD}</option>
            <option value="xp">Windows XP</option>
            <option value="aero" selected>Windows Aero</option>
            <option value="10">Windows 10</option>
            <option value="custom">${s.CONF_GENERAL_CONTROL_STYLE_CUSTOM}</option>
        `,c.controlStyle.value=localStorage.wmpotifyControlStyle||"aero",document.documentElement.dataset.wmpotifyControlStyle=c.controlStyle.value,c.darkMode.innerHTML=`
            <option value="follow_scheme" selected>${s.CONF_GENERAL_DARK_MODE_FOLLOW_SCHEME}</option>
            <option value="system">${s.CONF_GENERAL_DARK_MODE_SYSTEM}</option>
            <option value="always">${s.CONF_GENERAL_DARK_MODE_ALWAYS}</option>
            <option value="never">${s.CONF_GENERAL_DARK_MODE_NEVER}</option>
        `,c.darkMode.disabled=!1;let t=y.getModule()?.initialOptions.noforceddarkmode?"system":"follow_scheme";if(c.darkMode.value=localStorage.wmpotifyDarkMode||t,c.tintPb.disabled=!1,c.tintMore.disabled=!1,localStorage.wmpotifyTintColor){let[o,n,r,a]=localStorage.wmpotifyTintColor.split(",");q(o,n,r,a)}}}var $t={init:vo,open:Co,close:dt,openTab:ut,prevTab:Ut,nextTab:Wt,apply:Vt,isOpen:()=>g.style.display==="block"},Le=$t;var zt=null;function Po(){if(y.available())if(pt()){let e=localStorage.wmpotifyPreMiniModeSize?.split(",");e&&e.length===2&&window.resizeTo(parseInt(e[0]),parseInt(e[1]))}else document.fullscreenElement&&document.exitFullscreen(),y.query().isMaximized&&y.maximizeRestore(),localStorage.wmpotifyPreMiniModeSize=[window.outerWidth,window.outerHeight],y.resizeTo(358,60)}function Oo(){if(document.fullscreenElement)document.exitFullscreen(),We();else{if(Spicetify.Config.custom_apps.includes("wmpvis"))Spicetify.Platform.History.push({pathname:"/wmpvis"});else{let e=document.querySelector('.main-nowPlayingBar-extraControls button[data-testid="lyrics-button"]');e&&e.click()}Le.close(),document.documentElement.requestFullscreen(),document.body.classList.add("wmpotify-playerbar-visible"),setTimeout(()=>{document.addEventListener("pointermove",mt),mt()},200)}document.addEventListener("fullscreenchange",()=>{document.fullscreenElement||We()},{once:!0}),document.addEventListener("resize",()=>{We()},{once:!0})}function pt(){let e=!!document.querySelector("#wmpotify-title-bar");return window.innerWidth<360&&window.innerHeight<(e?92:62)}function mt(){if(!document.fullscreenElement){We();return}document.body.classList.add("wmpotify-playerbar-visible"),clearTimeout(zt),zt=setTimeout(()=>{document.body.classList.remove("wmpotify-playerbar-visible")},2e3)}function We(){document.body.classList.remove("wmpotify-playerbar-visible"),document.removeEventListener("pointermove",mt)}window.addEventListener("resize",()=>{localStorage.wmpotifyTopMost==="minimode"&&y.setTopMost(pt())});var No={toggleMiniMode:Po,toggleFullscreen:Oo,isMiniMode:pt},Q=No;var Me,ft,Ve,ae,R,Kt=null,Te=!1;function Qt(){let e=document.querySelector(".main-nowPlayingBar-nowPlayingBar");Yt(),new MutationObserver(Yt).observe(document.querySelector(".main-nowPlayingBar-left"),{childList:!0});let t=document.querySelector(".player-controls__left"),o=document.createElement("button"),n=["playback-control.enable-repeat","playback-control.enable-repeat-one","playback-control.disable-repeat"],r=Spicetify.Player.getRepeat(),a=Spicetify.Platform.Translations[n[r]];o.setAttribute("aria-label",a),o.setAttribute("aria-checked",!!r),o.id="wmpotify-repeat-button",o.addEventListener("click",()=>{Spicetify.Player.toggleRepeat()}),Spicetify.Tippy(o,{...Spicetify.TippyProps,content:a}),Spicetify.Platform.PlayerAPI._events.addListener("update",({data:S})=>{o.setAttribute("aria-checked",!!S.repeat);let C=Spicetify.Platform.Translations[n[S.repeat]];o.setAttribute("aria-label",C),o._tippy.setContent(C)}),t.appendChild(o);let i=y.query(),l=document.querySelector('.player-controls__buttons button[data-testid="control-button-skip-back"]'),u=document.querySelector('.player-controls__buttons button[data-testid="control-button-skip-forward"]');l&&(l.addEventListener("contextmenu",S=>{Spicetify.Player.seek(Spicetify.Player.getProgress()-15e3),S.preventDefault()}),Spicetify.Platform.Translations["playback-control.skip-back"]+=`
`+s.PB_TOOLTIP_SEEK_BK),u&&(u.addEventListener("contextmenu",S=>{Spicetify.Player.seek(Spicetify.Player.getProgress()+15e3),S.preventDefault()}),Spicetify.Platform.Translations["playback-control.skip-forward"]+=`
`+s.PB_TOOLTIP_SEEK_FWD,i?.speedModSupported&&i.immediateSpeedChange&&(u.addEventListener("pointerdown",()=>{u.disabled||Spicetify.Platform.ConnectAPI.state.connectionStatus==="connected"||(Kt=setTimeout(()=>{u.dataset.fastForward=!0,y.setPlaybackSpeed(5),Spicetify.Player.play()},1e3))}),document.addEventListener("pointerup",S=>{clearTimeout(Kt),u.dataset.fastForward&&(delete u.dataset.fastForward,y.setPlaybackSpeed(1),S.preventDefault(),S.stopPropagation())}),Spicetify.Platform.Translations["playback-control.skip-forward"]+=`
`+s.PB_TOOLTIP_FF));let m=document.createElement("button");m.setAttribute("aria-label",s.PB_TOOLTIP_STOP),m.id="wmpotify-stop-button",m.addEventListener("click",()=>{Spicetify.Platform.PlayerAPI.clearQueue(),Spicetify.Player.playUri("")}),Spicetify.Tippy(m,{...Spicetify.TippyProps,content:s.PB_TOOLTIP_STOP}),t.appendChild(m);let f=document.querySelector(".player-controls__right"),p=document.querySelector(".volume-bar");Me=p.querySelector(".volume-bar__icon-button"),ft=p.querySelector(".progress-bar"),Xt(),new MutationObserver(Xt).observe(ft,{attributes:!0,attributeFilter:["style"]}),f.appendChild(p);let h=document.querySelector(".volume-bar__slider-container"),E=h.children[0];h.addEventListener("click",()=>{if(window.innerWidth<750){E.dataset.visible=!0;let S=setTimeout(()=>{delete E.dataset.visible},5e3);E.addEventListener("pointerup",()=>{clearTimeout(S),setTimeout(()=>{delete E.dataset.visible},100)},{once:!0})}}),Ve=document.querySelectorAll(".playback-bar [class*=encore-text]");let L=document.createElement("div");L.classList.add("wmpotify-time-text-container"),R=document.createElement("span"),R.classList.add("wmpotify-time-text"),ae=parseInt(localStorage.wmpotifyTimeTextMode||0),jt(),R.dataset.mode=ae,R.addEventListener("click",()=>{ae=(ae+1)%3,R.dataset.mode=ae,localStorage.wmpotifyTimeTextMode=ae}),L.appendChild(R),e.insertAdjacentElement("afterbegin",L),Spicetify.Player.addEventListener("onprogress",jt);let O=document.querySelector("#wmpotify-title-bar"),T=document.querySelector("#wmpotify-title-buttons");if(O&&(v(),window.addEventListener("resize",v)),i){let S=new Spicetify.Playbar.Button(s.PB_BTN_MINI_MODE,"",()=>Q.toggleMiniMode());S.element.id="wmpotify-mini-mode-button"}let N=new Spicetify.Playbar.Button(s.PB_BTN_FULLSCREEN,"",()=>Q.toggleFullscreen());N.element.id="wmpotify-fullscreen-button";function v(){window.innerWidth<800?O.contains(R)||(T?O.insertBefore(R,T):O.appendChild(R)):e.contains(R)||L.appendChild(R)}}async function Yt(){let e=!!document.querySelector("#wmpotify-title-bar"),t=y.available(),o=await Spicetify.AppTitle.get(),n=document.querySelector("#wmpotify-title-text"),r=document.querySelector(".main-nowPlayingWidget-trackInfo");if(!r||document.querySelector(".wmpotify-track-info"))return;let a=document.createElement("p");a.classList.add("wmpotify-track-info"),a.textContent=document.querySelector(".main-trackInfo-name")?.textContent||"",r.appendChild(a),window.innerWidth<420&&window.innerHeight<(e?92:62)&&(e?n.textContent=a.textContent:t&&y.setTitle(a.textContent),Te=!0);let i=1;setInterval(()=>{if(!Spicetify.Player.isPlaying())return;let l=Spicetify.Player.data?.item.metadata;l&&(i===0?a.textContent=l.title:i===1?a.textContent=l.artist_name:i===2&&(a.textContent=l.album_title),i=(i+1)%3,window.innerWidth<420&&window.innerHeight<(e?92:62)?(e?n.textContent=a.textContent:t&&(y.lockTitle(!0),y.setTitle(a.textContent)),Te=!0):Te&&(Te=!1,e&&(n.textContent=o),localStorage.wmpotifyLockTitle||y.lockTitle(!1),Spicetify.Player.isPlaying()&&!localStorage.wmpotifyLockTitle?y.setTitle(l.artist_name+" - "+l.title):y.setTitle(o)))},3e3),Spicetify.Player.addEventListener("songchange",()=>{i=0,a.textContent=Spicetify.Player.data?.item.metadata.title,window.innerWidth<420&&window.innerHeight<(e?92:62)&&(e?n.textContent=a.textContent:t&&y.setTitle(a.textContent),Te=!0)})}function Xt(){let e=getComputedStyle(ft).getPropertyValue("--progress-bar-transform").replace("%","")/100;e===0?Me.dataset.vol="muted":e<=.3?Me.dataset.vol="low":e<=.6?Me.dataset.vol="mid":Me.dataset.vol="high"}function jt(){switch(ae){case 0:try{let e=Spicetify.Player.data?.item?.metadata?.duration-Spicetify.Player.getProgress();R.textContent=ke(e,!0)}catch(e){console.error("WMPotify: Error getting remaining time:",e),R.textContent="00:00"}break;case 1:{let e=Ve[0].textContent;(e.length===4||e.length===7)&&(e="0"+e),R.textContent=e}break;case 2:{let e=Ve[0].textContent;(e.length===4||e.length===7)&&(e="0"+e);let t=Ve[1].textContent;(t.length===4||t.length===7)&&(t="0"+t),R.textContent=`${e} / ${t}`}break}}var Pe=new MutationObserver(fe),Ao=new ResizeObserver(fe.bind(null,!0)),Io=new MutationObserver(Zt),xo={init(){Pe.observe(document.documentElement,{attributes:!0,attributeFilter:["style"]}),Ao.observe(document.querySelector(".Root__right-sidebar")),Io.observe(document.querySelector("#Desktop_LeftSidebar_Id"),{attributes:!0,attributeFilter:["style"]}),window.addEventListener("resize",fe),window.addEventListener("load",fe),fe(!0),Zt()},updateSidebarWidth:fe};function fe(e){if(!Spicetify.Platform.History.location.pathname.startsWith("/wmpotify-standalone-libx")&&!e){let n=getComputedStyle(document.documentElement).getPropertyValue("--right-sidebar-width");n&&(Pe.disconnect(),document.documentElement.style.setProperty("--panel-width",n),Pe.observe(document.documentElement,{attributes:!0,attributeFilter:["style"]}));return}Pe.disconnect();let t=document.querySelector(".Root__right-sidebar");document.documentElement.style.setProperty("--panel-width",t?t.offsetWidth:8),getComputedStyle(document.documentElement).getPropertyValue("--right-sidebar-width")&&document.documentElement.style.setProperty("--right-sidebar-width",t?t.offsetWidth:8),t.querySelector("aside")?(document.body.classList.add("sidebar-open"),document.querySelector(".QdB2YtfEq0ks5O4QbtwX")&&!t.querySelector("aside.NowPlayingView")?document.body.classList.add("sidebar-open-in-cinema"):document.body.classList.remove("sidebar-open-in-cinema")):(document.body.classList.remove("sidebar-open"),document.body.classList.remove("sidebar-open-in-cinema")),Pe.observe(document.documentElement,{attributes:!0,attributeFilter:["style"]})}function Zt(){let t=document.querySelector("#Desktop_LeftSidebar_Id").style.getPropertyValue("--left-sidebar-width");t&&document.documentElement.style.setProperty("--wmpotify-left-sidebar-width",t)}var ye=xo;var yt;function $e(){console.log("WMPotify: Trying to initialize queue panel"),ye.updateSidebarWidth(!0);let e=document.querySelector(".Root__right-sidebar > div > div > div:has(aside)");if(e&&!yt&&(yt=new MutationObserver($e),yt.observe(e,{childList:!0})),!document.querySelector("#queue-panel")||document.querySelector("#wmpotify-queue-toolbar")||document.querySelectorAll('div[data-encore-id="tabPanel"]').length>2)return;let t=document.querySelector("#Desktop_PanelContainer_Id:has(#queue-panel)"),o=document.querySelector("#Desktop_PanelContainer_Id:not(:has(#queue-panel))");t&&o&&(o.style.display="none"),t.dataset.identifier="spotify-queue-panel";let n=document.querySelector("#Desktop_PanelContainer_Id:has(#queue-panel) > div > div:first-child > div:first-child"),r=document.querySelector("#Desktop_PanelContainer_Id:has(#queue-panel) > div > div:nth-child(2)");r.id="spotify-queue-panel-content";let a=document.createElement("div");a.id="wmpotify-queue-toolbar";let i=document.createElement("button");i.id="wmpotify-queue-playlist-button",i.classList.add("wmpotify-toolbar-button"),i.addEventListener("click",()=>{let T=Spicetify.Player.data?.context?.uri;T&&window.open(T)}),i.textContent=document.querySelector('#queue-panel div[data-flip-id*="section-header-"] a')?.textContent||s.QUEUE_CURRENT_PLAYLIST_PLACEHOLDER,i.innerHTML+='<span class="expandMark">\u23F7</span>',a.appendChild(i);let l=document.createElement("button");l.id="wmpotify-queue-clear-button",l.classList.add("wmpotify-toolbar-button"),l.addEventListener("click",()=>{Spicetify.Platform.PlayerAPI.clearQueue(),Spicetify.Player.playUri("")}),a.appendChild(l),r.insertAdjacentElement("afterbegin",a);let u=getComputedStyle(document.documentElement).getPropertyValue("--album-art-placeholder").trim().slice(5,-2),m=document.createElement("div");m.id="wmpotify-queue-npv";let f=document.createElement("img");f.id="wmpotify-queue-album-art",f.src=document.querySelector(".main-nowPlayingWidget-coverArt .cover-art img")?.src||u,m.appendChild(f);let p=document.createElement("div");p.id="wmpotify-queue-song-title",p.textContent=document.querySelector(".main-trackInfo-name")?.textContent||"No items",m.appendChild(p),n.insertAdjacentElement("afterbegin",m),Jt(),new MutationObserver(Jt).observe(document.querySelector("#queue-panel"),{childList:!0});let h=document.querySelectorAll('#Desktop_PanelContainer_Id:has(#queue-panel) div[role="tablist"] button'),E=[],L;for(let T of h)E.push({text:T.textContent,click:function(){for(let N of L.menuItems)N.classList.remove("activeStyle");this.classList.add("activeStyle"),T.click()}});E[0].classList=["activeStyle"],document.querySelector("#wmpotifyQueueTabMenuBg")?.remove(),L=te("wmpotifyQueueTab",E);let O=new X(["wmpotifyQueueTab"]);t.addEventListener("contextmenu",T=>{T.preventDefault(),O.openMenu("wmpotifyQueueTab",{left:T.clientX+"px",top:T.clientY+"px"})}),Spicetify.Player.addEventListener("songchange",()=>{i.textContent=Spicetify.Player.data?.context?.metadata?.context_description||s.QUEUE_CURRENT_PLAYLIST_PLACEHOLDER,i.innerHTML+='<span class="expandMark">\u23F7</span>',f.src=Spicetify.Player.data?.item?.album?.images?.[0]?.url||u,p.textContent=Spicetify.Player.data?.item?.name||"No items"})}function Jt(){let e=document.querySelector("#queue-panel > div:first-child");if(!e)return;let t=e?.querySelectorAll("#queue-panel ul")[1];t?(delete e.dataset.nothingInQueue,eo(),new MutationObserver(eo).observe(t,{childList:!0})):document.querySelector("#queue-panel > div:first-child > svg:first-child")?e.dataset.nothingInQueue=!0:delete e.dataset.nothingInQueue}function eo(){if(!document.querySelector("#queue-panel")||!Spicetify.Queue)return;let e=document.querySelectorAll("#queue-panel li .HeaderArea");for(let t=0;t<e.length;t++){let o=e[t];if(o.querySelector(".wmpotify-queue-duration"))continue;let n=t===0?Spicetify.Queue.track?.contextTrack?.metadata?.duration:Spicetify.Queue.nextTracks?.[t-1]?.contextTrack?.metadata?.duration;if(!n)continue;let r=document.createElement("span");r.classList.add("wmpotify-queue-duration"),r.textContent=ke(n),o.appendChild(r)}}async function ze(e){let t=document.querySelector('section[data-test-uri^="spotify:artist:"]');if(!t){e&&(await Oe.waitForPageRender(),ze(!1));return}await to(t);let o=t.querySelector(".artist-artistDiscography-topBar")||t.querySelector("section div:has(> .x-sortBox-sortDropdown)");if(o?(o.dataset.identifier="discography-topbar",document.querySelector(".main-topBar-topbarContent").appendChild(o)):o=document.querySelector('[data-identifier="discography-topbar"]'),!o)return;t.querySelector(".artist-artistDiscography-cardGrid")&&await to(t,!0);let n=o.querySelector("a").textContent,r=t.dataset.testUri,a=t.querySelectorAll(".artist-artistDiscography-headerContainer");for(let f of a){if(f.querySelector(".artist-artistDiscography-headerTitle + div a"))continue;let p=f.querySelector(".main-entityHeader-image");if(!p)continue;p.addEventListener("dblclick",()=>{f.querySelector(".artist-artistDiscography-headerButtons div button").click()}),p.addEventListener("contextmenu",async E=>{f.querySelector(".artist-artistDiscography-headerButtons > button:last-child").click(),E.preventDefault(),E.stopPropagation(),await ko();let L=document.querySelector("[data-tippy-root]");L.dataset.wmpotifyForceTransform=!0,L.style.setProperty("--tippy-force-transform",`translate(${E.clientX}px, ${E.clientY}px)`)});let h=document.createElement("a");h.href=r,h.textContent=n,f.querySelector(".artist-artistDiscography-headerTitle + div").appendChild(h)}let i=t.querySelectorAll(".artist-artistDiscography-tracklist");for(let f of i){if(f.querySelector(".wmpotify-discography-trackList-header"))continue;let p=f.querySelector('[role="grid"]');if(!p)continue;let h=p.getAttribute("aria-label"),E=document.createElement("div");E.className="wmpotify-discography-trackList-header",E.textContent=h,f.insertAdjacentElement("afterbegin",E)}let l=new MutationObserver(()=>{ze(!1),l.disconnect()}),u=!1,m=t.querySelector('[data-testid="infinite-scroll-list"]');m||(m=t.querySelector("section"),u=!0),l.observe(m,{childList:!0,subtree:u})}function to(e,t){if(!e.querySelector(".artist-artistDiscography-tracklist")&&(t||!e.querySelector(".artist-artistDiscography-cardGrid")))return new Promise(o=>{let n=new MutationObserver(()=>{(e.querySelector(".artist-artistDiscography-tracklist")||!t&&e.querySelector(".artist-artistDiscography-cardGrid"))&&(n.disconnect(),o())});n.observe(e,{childList:!0,subtree:!0})})}function ko(){return new Promise(e=>{let t=new MutationObserver(()=>{document.querySelector("[data-tippy-root]")&&(t.disconnect(),e())});t.observe(document.body,{childList:!0})})}var Ke=null;async function St(){let e=document.querySelector("main [role=presentation]");if(!e)return;let t=e.querySelector(".main-actionBar-ActionBarRow > div:last-child"),o=document.querySelector(".main-topBar-topbarContent");if(!t||!o)return;console.log("WMPotify: Initializing playlist page"),t.id="playlist-search-box-container";let n=t.parentElement;Ke&&Ke.disconnect(),Ke=new MutationObserver(a=>{for(let i of a)if(i.type==="attributes"&&i.attributeName==="class"){let l=i.target;l.classList.contains("main-entityHeader-topbarContentFadeIn")?l.appendChild(t):n.appendChild(t)}}),Ke.observe(o,{attributes:!0,attributeFilter:["class"]});let r=e.querySelector(".main-trackList-trackListHeaderRow");if(r){for(let a of r.querySelectorAll(":scope > div"))if(a.querySelector("button")){a.classList.add("has-button"),(a.querySelector('svg:has(path[d="m14 6-6 6-6-6h12z"])')||a.querySelector('svg:has(path[d="M14 10 8 4l-6 6h12z"])'))&&a.classList.add("selected");let i=new MutationObserver(()=>{i.disconnect(),a.querySelector('svg:has(path[d="m14 6-6 6-6-6h12z"])')||a.querySelector('svg:has(path[d="M14 10 8 4l-6 6h12z"])')?a.classList.add("selected"):a.classList.remove("selected"),i.observe(a,{childList:!0,subtree:!0})});i.observe(a,{childList:!0,subtree:!0})}}}var gt=0,Ye={waitForPageRender(){return new Promise(e=>{let t=new MutationObserver(()=>{document.querySelector(".main-loadingPage-container")||(e(),t.disconnect())});t.observe(document.querySelector(".main-view-container__scroll-node-child main"),{childList:!0})})},async onLocChange(e){if(e?.pathname&&!(gt&&Date.now()-gt<2e3)){if(document.documentElement.dataset.page=e.pathname,ye.updateSidebarWidth(!0),e.pathname.startsWith("/wmpotify-standalone-libx")){document.body.dataset.wmpotifyLibPageOpen=!0;let t=U.getItem(`${k}-sidebar-state`),o=U.getItem(re);Spicetify.Platform.LocalStorageAPI.setItem(`${k}-sidebar-state`,2),Spicetify.Platform.LocalStorageAPI.setItem(re,0),U.setItem(`${k}-sidebar-state`,t),U.setItem(re,o),await pe.init()||Spicetify.Platform.History.action==="POP"&&pe.go()}else if(document.body.dataset.wmpotifyLibPageOpen)if(delete document.body.dataset.wmpotifyLibPageOpen,pe.uninit(),localStorage.wmpotifyShowLibX){let t=U.getItem(`${k}-sidebar-state`);U.removeItem(`${k}-sidebar-state`);let o=U.getItem(re);U.removeItem(re),Spicetify.Platform.LocalStorageAPI.setItem(`${k}-sidebar-state`,parseInt(t)),Spicetify.Platform.LocalStorageAPI.setItem(re,parseInt(o))}else Spicetify.Platform.LocalStorageAPI.setItem(`${k}-sidebar-state`,1);e.pathname.match("/artist/.*/discography.*")&&ze(!0)}},async onMainContentMount(){console.debug("WMPotify: onMainContentMount"),St(!0)},init(){Ye.onLocChange(Spicetify.Platform.History.location),gt=Date.now(),Spicetify.Platform.History.listen(e=>Ye.onLocChange(e)),new MutationObserver(Ye.onMainContentMount).observe(document.querySelector("main"),{childList:!0})},initPlaylistPage:St},Oe=Ye;var oo=[".Root__globalNav",".main-globalNav-historyButtons",".main-globalNav-searchSection",".main-globalNav-searchContainer > button",".main-globalNav-searchContainer div form button",'.main-globalNav-searchContainer div form input[type="search"]',".main-topBar-topbarContentRight > .main-actionButtons > button",".main-topBar-topbarContentRight > button:last-child",".Root__main-view",".main-view-container__scroll-node-child main",".main-nowPlayingBar-nowPlayingBar",".player-controls__left",'.player-controls__buttons button[data-testid="control-button-playpause"]',".player-controls__right",".playback-bar [class*=encore-text]",".volume-bar",".volume-bar__icon-button",".volume-bar .progress-bar",".main-nowPlayingBar-left"],Ro=performance.now(),le="xp",G="spotify";function Fo(){localStorage.wmpotifyShowLibX||(document.body.dataset.hideLibx=!0),y.init();let e=y.query();e&&(localStorage.wmpotifyTopMost==="always"||localStorage.wmpotifyTopMost==="minimode"&&Q.isMiniMode()?y.setTopMost(!0):y.setTopMost(!1)),localStorage.wmpotifyTitleStyle&&["native","custom","spotify","keepmenu"].includes(localStorage.wmpotifyTitleStyle)?G=localStorage.wmpotifyTitleStyle:(console.log("WMPotify EarlyInit:",window.SpotEx,e),window.outerHeight-window.innerHeight>0||e?.options?.showframe||navigator.userAgent.includes("Linux")?G="native":(window.SpotEx||e)&&(G="custom")),G==="keepmenu"&&!navigator.userAgent.includes("Windows")&&(G="spotify"),G==="spotify"&&navigator.userAgent.includes("Linux")&&(G="native"),document.documentElement.dataset.wmpotifyTitleStyle=G,G!=="native"&&Je.earlyInit();let t=window.matchMedia("(forced-colors: active)");switch(!localStorage.wmpotifyStyle&&G==="native"&&(t.matches?le="basic":e&&e.isThemingEnabled&&(y.getModule()?.initialOptions.transparentrendering&&e.isDwmEnabled?le="aero":e.isDwmEnabled||(le="basic"))),localStorage.wmpotifyStyle&&["xp","aero","basic"].includes(localStorage.wmpotifyStyle)&&(le=localStorage.wmpotifyStyle),y.setMinSize(358,G==="native"?60:90),le){case"xp":y.extendFrame(0,0,0,0);break;case"aero":y.extendFrame(0,0,0,60);break;case"basic":y.extendFrame(0,0,0,0),localStorage.wmpotifyBasicTextColor&&document.body.style.setProperty("--basic-pb-text",localStorage.wmpotifyBasicTextColor),localStorage.wmpotifyBasicActiveColor&&document.body.style.setProperty("--basic-pb-active-bg",localStorage.wmpotifyBasicActiveColor),localStorage.wmpotifyBasicInactiveColor&&document.body.style.setProperty("--basic-pb-inactive-bg",localStorage.wmpotifyBasicInactiveColor),document.hasFocus()?document.body.style.backgroundColor="var(--basic-pb-active-bg, #b9d1ea)":document.body.style.backgroundColor="var(--basic-pb-inactive-bg, #d7e4f2)",window.addEventListener("focus",()=>{document.body.style.backgroundColor="var(--basic-pb-active-bg, #b9d1ea)"}),window.addEventListener("blur",()=>{document.body.style.backgroundColor="var(--basic-pb-inactive-bg, #d7e4f2)"});break}document.documentElement.dataset.wmpotifyStyle=le,document.documentElement.dataset.wmpotifyControlStyle=localStorage.wmpotifyControlStyle||"aero",localStorage.wmpotifyCustomScheme&&ve(localStorage.wmpotifyCustomScheme),window.addEventListener("resize",()=>{le==="aero"&&(window.innerHeight<62?y.extendFrame(-1,-1,-1,-1):y.extendFrame(0,0,0,60)),y.setMinSize(358,G==="native"?60:90)}),localStorage.wmpotifyFont&&document.documentElement.style.setProperty("--ui-font",localStorage.wmpotifyFont),localStorage.wmpotifyHidePbLeftBtn&&(document.body.dataset.hidePbLeftBtn=!0),e&&localStorage.wmpotifyLockTitle&&y.lockTitle(!0);let o="follow_scheme";["follow_scheme","system","always","never"].includes(localStorage.wmpotifyDarkMode)?o=localStorage.wmpotifyDarkMode:y.getModule()?.initialOptions.noforceddarkmode&&(o="system");let n=window.matchMedia("(prefers-color-scheme: dark)");(o==="always"||o==="follow_scheme"&&window.Spicetify?.Config?.color_scheme==="dark"||o==="system"&&n.matches)&&(document.documentElement.dataset.wmpotifyDarkMode=!0),o==="system"?z.addSystemDarkModeListener():o==="follow_scheme"&&z.addMarketplaceSchemeObserver(),io("WMPotify: earlyInit end")}Fo();globalThis.WMPotify={ver:de,Strings:s,Config:Le,WindowManager:Q,ThemeManager:z,PageManager:Oe,WindhawkComm:y,CustomLibX:pe,Dialog:{openUpdateDialog:Ee,openWmpvisInstallDialog:xe,promptModal:Y,confirmModal:Ie},MadMenu:{createMadMenu:te,MadMenu:X},setTintColor:q,checkUpdates:be};async function Bo(){await Je.init(G),y.available()&&localStorage.wmpotifyLockTitle&&y.setTitle(await Spicetify.AppTitle.get()),localStorage.wmpotifyShowLibX||Spicetify.Platform.LocalStorageAPI.setItem(`${k}-sidebar-state`,1),Spicetify.Platform.PlatformData.os_version?.split(".")[2]>=22e3&&localStorage.wmpotifyBackdrop!=="none"&&y.setBackdrop(localStorage.wmpotifyBackdrop||"mica"),ce.init(),Oe.init(),ye.init(),Le.init(),Mt(),Qt(),$e(),new MutationObserver($e).observe(document.querySelector(".XOawmCGZcQx4cesyNfVO")||document.querySelector(".Root__right-sidebar > div > div[class]:first-child")||document.querySelector(".Root__right-sidebar div[class]"),{childList:!0}),(!localStorage.wmpotifyLastVer||Fe(localStorage.wmpotifyLastVer,de)<0)&&Ee(!0,de),localStorage.wmpotifyLastVer=de,localStorage.wmpotifyNoUpdateCheck||be()}async function ht(){try{await Bo(),io("WMPotify: Theme loaded"),document.documentElement.dataset.wmpotifyInitComplete=!0}catch(e){console.error("WMPotify: Error during init:",e);let t="[WMPotify] "+s.MAIN_MSG_ERROR_INIT+`

`+e.stack;window.confirm(t)&&window.location.reload(),document.documentElement.dataset.wmpotifyJsFail=!0}}function Et(){return window.Spicetify?.Platform?.PlayerAPI&&window.Spicetify.AppTitle&&window.Spicetify.Menu&&window.Spicetify.Platform.History?.listen&&window.Spicetify.Platform.LocalStorageAPI&&window.Spicetify.Platform.Translations&&window.Spicetify.Platform.PlatformData&&window.Spicetify.Player.origin?._state?.repeat!=null?!!oo.every(e=>document.querySelector(e)):null}document.readyState==="complete"&&no();window.addEventListener("load",()=>{no()});function no(){let e=0;Et()?ht():Spicetify.Events.platformLoaded.on(()=>{if(Et())ht();else{let t=setInterval(()=>{let o=Et();if(o)clearInterval(t),ht();else if(e++>80){if(ue("1.2.45")<0)(window.Spicetify?.showNotification||window.alert)("[WMPotify] "+s.MAIN_MSG_ERROR_OLD_SPOTIFY);else if(ue("1.2.45")===0&&!document.querySelector(".Root__globalNav"))window.confirm("[WMPotify] "+s.MAIN_MSG_ERROR_LOAD_FAIL_GLOBALNAV)&&window.location.reload();else{let n="[WMPotify] "+s.MAIN_MSG_ERROR_LOAD_FAIL+`

`,r="";o===!1?r+=`Missing elements:
`+oo.filter(a=>!document.querySelector(a)).join(`
`):r+=`Missing API objects:
`+Object.entries({"Spicetify.Platform.PlayerAPI":window.Spicetify?.Platform?.PlayerAPI,"Spicetify.AppTitle":window.Spicetify.AppTitle,"Spicetify.Menu":window.Spicetify.Menu,"Spicetify.Platform.History.listen":window.Spicetify.Platform.History?.listen,"Spicetify.Platform.LocalStorageAPI":window.Spicetify.Platform.LocalStorageAPI,"Spicetify.Platform.Translations":window.Spicetify.Platform.Translations,"Spicetify.Platform.PlatformData":window.Spicetify.Platform.PlatformData,"Spicetify.Player.origin._state.repeat":window.Spicetify.Player.origin?._state?.repeat!=null}).filter(([a,i])=>!i).map(([a,i])=>a).join(`
`),window.confirm(n+r)&&window.location.reload(),console.error("WMPotify:",r)}document.querySelector(".Root__globalNav")||(document.documentElement.dataset.wmpotifyNoGlobalNav=!0,delete document.body.dataset.hideLibx,console.error("WMPotify: Global nav not found")),clearInterval(t)}},100)}})}document.addEventListener("scroll",function(){document.documentElement.scrollTo(0,0)});function io(e){let t=performance.now()-Ro;console.log(`[${t.toFixed(6)}ms] ${e}`)}})();
