"use strict";(()=>{var no={identifier:"en-US",UI_OK:"OK",UI_CANCEL:"Cancel",UI_APPLY:"Apply",UI_RESET:"Reset",UI_AUTO:"Auto",UI_CUSTOM:"Custom",UI_DEFAULT:"Default",UI_CLICK_HERE:"click here",MAIN_MSG_ERROR_OLD_SPOTIFY:"Your Spotify version is too old for WMPotify! Please update to Spotify 1.2.45 or newer.",MAIN_MSG_ERROR_NEW_SPOTIFY:"Your Spotify version is not supported by this version of WMPotify. Some features may not work as expected. Please consider downgrading to a supported version, or try using the pre-release version of WMPotify from the Spicetify Marketplace.",MAIN_MSG_ERROR_NEW_SPOTIFY_PREREL:"Your Spotify version is not yet supported by WMPotify. Some features may not work as expected. Please consider downgrading to a supported version. If a problem occurs, please report the issue on the WMPotify GitHub issues page.",MAIN_MSG_ERROR_LOAD_FAIL_GLOBALNAV:'Theme loading failed. Please check the console for more information. Make sure that the "Show Global nav bar with home button, search input and user avatar" option in the experimental features is set to "home-next-to-search". Click OK to reload and try again.',MAIN_MSG_ERROR_INCOMPAT_EXT:"Incompatible extension %s detected! Some features of WMPotify will be disabled.",ERRDLG_TITLE:"WMPotify Load Error",ERRDLG_MAIN_MSG:"WMPotify failed to initialize due to an error. Please consult the below details and report it on the GitHub issues page if necessary.",ERRDLG_DETAIL_TITLE:"Details",ERRDLG_DETAIL_MISSING_ELEMENTS:"Some UI elements required by WMPotify are missing.",ERRDLG_DETAIL_MISSING_API:"Some Spicetify APIs required by WMPotify are not available.",ERRDLG_DETAIL_EXCEPTION:`An unknown error occurred during initialization:

%s

Please check the console for more information.`,ERRDLG_DIAG_TITLE:"WMPotify Diagnostic Information",ERRDLG_VERSION:"%s version",ERRDLG_UNKNOWN:"Unknown",ERRDLG_UA:"User Agent",ERRDLG_SUPPORTED:"Supported",ERRDLG_UNSUPPORTED:"Not supported",ERRDLG_EXT:"Extensions",ERRDLG_APP:"Custom apps",ERRDLG_IS_MARKETPLACE:"Spicetify Marketplace distribution",ERRDLG_UNSUPPORTED_INFO_STABLE:'This version of Spotify is not supported by this version of WMPotify. Possible solutions:<br>- Downgrade or update Spotify to a supported version. Supported versions: %s<br>- Try using the pre-release version of WMPotify from the Spicetify Marketplace.<br>- Update Spicetify with "spicetify update", or refresh the CSS map with "spicetify restore backup apply".',ERRDLG_UNSUPPORTED_INFO_PREREL:'This version of Spotify is not yet supported by WMPotify. Possible solutions:<br>- Downgrade or update Spotify to a supported version. Supported versions: %s<br>- Update Spicetify with "spicetify update", or refresh the CSS map with "spicetify restore backup apply".<br>- Report this issue on the WMPotify GitHub issues page and wait for a fix.',ERRDLG_SUPPORTED_INFO_CSSMAP:'Possible solutions:<br>- Update Spicetify with "spicetify update", or refresh the CSS map with "spicetify restore backup apply".',ERRDLG_MISSING_ELEMENTS:"Missing elements",ERRDLG_MISSING_API:"Missing API Objects",ERRDLG_REPORT_GUIDE:"To report the issue, please copy the above details and submit it on the %s.",ERRDLG_REPORT_LINK:"GitHub issues page",ERRDLG_COPY:"Copy",ERRDLG_ABORT:"Abort",ERRDLG_RETRY:"Retry",ERRDLG_IGNORE:"Ignore",TAB_NOW_PLAYING:"Now Playing",TAB_LIBRARY:"Library",TAB_RESET_ORDER:"Reset Tab Order",PB_TOOLTIP_STOP:"Stop",PB_TOOLTIP_SEEK_BK:"Right click: Skip back 15 seconds",PB_TOOLTIP_SEEK_FWD:"Right click: Skip forward 15 seconds",PB_TOOLTIP_FF:"Long click: Fast forward",PB_BTN_MINI_MODE:"Mini mode",PB_BTN_FULLSCREEN:"Full screen",LIBX_SIDEBAR_ROOT:"Library",LIBX_HEADER_ROOT:"Music",QUEUE_CURRENT_PLAYLIST_PLACEHOLDER:"Now Playing",QUEUE_CURRENT_TRACK_PLACEHOLDER:"No items",MENU_CONF:"WMPotify Properties",CONF_COLOR_TITLE:"Color Chooser",CONF_COLOR_HUE:"Hue",CONF_COLOR_SAT:"Saturation",CONF_COLOR_TINTPB:"Apply color to the now playing bar buttons",CONF_COLOR_TINTMORE:"Apply color to more UI elements",CONF_GENERAL_TITLE:"General",CONF_GENERAL_STYLE:"Style",CONF_GENERAL_BASIC_CUSTOM_DLG_TITLE:"Set custom Basic colors",CONF_GENERAL_BASIC_CUSTOM_ACTIVE_MSG:"Enter a background color for an active window",CONF_GENERAL_BASIC_CUSTOM_INACTIVE_MSG:"Enter a background color for an inactive window",CONF_GENERAL_BASIC_CUSTOM_TEXT_MSG:"Enter a text color",CONF_GENERAL_BASIC_CUSTOM_PLACEHOLDER:"Enter as a CSS color",CONF_GENERAL_TITLE_STYLE:"Title style",CONF_GENERAL_TITLE_STYLE_NATIVE:"Native",CONF_GENERAL_TITLE_STYLE_CUSTOM:"Custom",CONF_GENERAL_TITLE_STYLE_KEEPMENU:"Keep Menu",CONF_GENERAL_APPLY:"Apply (reload required)",CONF_GENERAL_CONTROL_STYLE:"Control style",CONF_GENERAL_CONTROL_STYLE_CLASSIC:"Windows Classic",CONF_GENERAL_CONTROL_STYLE_STANDARD:"Windows Standard",CONF_GENERAL_CONTROL_STYLE_HC:"High Contrast",CONF_GENERAL_CONTROL_STYLE_CUSTOM:"Windows Classic (Custom)",CONF_GENERAL_MSG_INVALID_SCHEME_FILE:"The imported theme file does not contain valid colors.",CONF_GENERAL_MSG_UNSUPPORTED_SCHEME_FILE:"The imported theme file is not supported by WMPotify.",CONF_GENERAL_DARK_MODE:"Dark mode",CONF_GENERAL_DARK_MODE_FOLLOW_SCHEME:"Follow color scheme",CONF_GENERAL_DARK_MODE_SYSTEM:"Follow system setting",CONF_GENERAL_DARK_MODE_SYSTEM_MSG_WIN:"This option requires either installing the CEF/Spotify Tweaks Windhawk mod and enabling the 'Disable forced dark mode' option or manually patching the Spotify executable to remove the 'force-dark-mode' flag. Otherwise, dark mode will always be enabled. Are you sure you want to continue?",CONF_GENERAL_DARK_MODE_SYSTEM_MSG_UNIX:"This option requires manually patching the Spotify executable to remove the 'force-dark-mode' flag. Otherwise, dark mode will always be enabled. Are you sure you want to continue?",CONF_GENERAL_DARK_MODE_ALWAYS:"Always",CONF_GENERAL_DARK_MODE_NEVER:"Never",CONF_GENERAL_FONT:"UI font",CONF_GENERAL_CUSTOM_FONT_DLG_TITLE:"Set custom font",CONF_GENERAL_CUSTOM_FONT_MSG:"Enter a valid CSS font-family name",CONF_GENERAL_FONT_EXTERNAL:"External font",CONF_GENERAL_EXTERNAL_FONT_DLG_TITLE:"Set external font",CONF_GENERAL_EXTERNAL_FONT_URL_MSG:"Enter a URL for an external font stylesheet, such as Google Fonts",CONF_GENERAL_EXTERNAL_FONT_NAME_MSG:"Enter the family name of the external font",CONF_GENERAL_FONT_RELOAD:"Reload font list",CONF_GENERAL_FONT_LOADSYS:"Load system font list",CONF_GENERAL_FONT_PERM_RECOVERY_DESC:"It seems that the local font access permission has been denied. To allow it again, please follow the following steps:",CONF_GENERAL_FONT_PERM_RECOVERY_STEP1:"Click here",CONF_GENERAL_FONT_PERM_RECOVERY_STEP2:"Click the \u24D8 button on the top left",CONF_GENERAL_FONT_PERM_RECOVERY_STEP3:"Enable the Fonts permission",CONF_GENERAL_FONT_PERM_RECOVERY_STEP4:"Click here to close the windows",CONF_GENERAL_FONT_PERM_RECOVERY_STEP5:"Try loading the system fonts again",CONF_GENERAL_TOPMOST:"Always on top",CONF_GENERAL_TOPMOST_ALWAYS:"Always",CONF_GENERAL_TOPMOST_MINIMODE:"In mini mode",CONF_GENERAL_TOPMOST_NEVER:"Never",CONF_GENERAL_BACKDROP:"Backdrop",CONF_GENERAL_BACKDROP_NONE:"None",CONF_GENERAL_BACKDROP_ACRYLIC:"Acrylic",CONF_GENERAL_BACKDROP_TABBED:"Tabbed",CONF_GENERAL_PBLEFTBTN:"Like button in the now playing bar",CONF_GENERAL_PBLEFTBTN_HIDE:"Hide",CONF_GENERAL_PBLEFTBTN_LEFTALIGN:"Left align",CONF_GENERAL_PBLEFTBTN_RIGHTALIGN:"Right align",CONF_GENERAL_SHOW_LIBX:"Show Your Library X on the left sidebar",CONF_GENERAL_LOCK_TITLE:"Use static window title",CONF_GENERAL_WH_MESSAGE:'Some options require <a href="https://windhawk.net/mods/cef-titlebar-enabler-universal">CEF/Spotify Tweaks Windhawk mod</a> to work or look good.',CONF_SPEED_TITLE:"Play speed settings",CONF_SPEED_SLOW:"Slow",CONF_SPEED_NORMAL:"Normal",CONF_SPEED_FAST:"Fast",CONF_SPEED_CURRENT_LABEL:"Play speed",CONF_SPEED_CUSTOM_DLG_TITLE:"Set playback speed",CONF_SPEED_CUSTOM_MSG:"Enter a playback speed (0.5 - 5.0)",CONF_SPEED_NO_CONNECT_MSG:"Cannot change playback speed while playing from another device",CONF_SPEED_OUT_OF_RANGE_MSG:"Playback speed must be faster than 0 and less than or equal to 5.0",CONF_SPEED_UNSUPPORTED_MSG_WIN:"Changing the playback speed while playing music requires the x64 Windows Spotify client with the CEF/Spotify Tweaks Windhawk mod installed",CONF_SPEED_UNSUPPORTED_MSG_UNIX:"Changing the playback speed is only supported while playing podcasts",CONF_ABOUT_TITLE:"About",CONF_ABOUT_DESC:"A Windows Media Player 11 inspired Spicetify theme for Spotify",CONF_ABOUT_VERSION:"Version",CONF_ABOUT_CTEWH_VERSION:"CEF/Spotify Tweaks Windhawk mod %s available",CONF_ABOUT_AUTHOR:"Made by Ingan121",CONF_ABOUT_AUTO_UPDATES:"Automatically check for updates",CONF_ABOUT_DIAG:"Show diagnostic information",WMPVIS_INSTALL_TITLE:"Install WMPotify NowPlaying?",WMPVIS_INSTALL_DESC:"WMPotify NowPlaying features WMP-like visualization screen and lyrics overlaid on top of it. We recommend installing it for the best experience with WMPotify.",WMPVIS_INSTALL_STEPS:"To install it, please follow these steps:",WMPVIS_INSTALL_STEP1:"Copy the following code:",WMPVIS_INSTALL_STEP2:"Open a PowerShell window",WMPVIS_INSTALL_STEP2_UNIX:"Open a terminal window",WMPVIS_INSTALL_STEP3:"Paste the code and press Enter",WMPVIS_INSTALL_MORE_INFO:"Or %s for more information, including manual installation instructions.",WMPVIS_INSTALL_HIDE:"If you don't want to install it, %s to hide this button.",WMPVIS_INSTALL_CODE_COPY:"Code copied to clipboard!",THEME_UPDATE_TITLE:"WMPotify has been updated!",THEME_UPDATE_INFO:"WMPotify has been updated to %s. Please read the changelog below.",THEME_UPDATE_STEPS:"To update it, please follow these steps:",THEME_CHANGELOG_PLACEHOLDER:"Failed to fetch changelog! Please %s for more information.",THEME_UPDATE_DISMISS:"Do not notify me again about this update",CTEWH_UPDATE_MSG:"CEF/Spotify Tweaks Windhawk mod can be updated to version %s. Please update it from the Windhawk UI for the best experience with WMPotify."},bt=no;var io={identifier:"ko-KR",UI_OK:"\uD655\uC778",UI_CANCEL:"\uCDE8\uC18C",UI_APPLY:"\uC801\uC6A9",UI_RESET:"\uC7AC\uC124\uC815",UI_AUTO:"\uC790\uB3D9",UI_CUSTOM:"\uC0AC\uC6A9\uC790 \uC9C0\uC815",UI_DEFAULT:"\uAE30\uBCF8\uAC12",UI_CLICK_HERE:"\uC5EC\uAE30\uB97C \uD074\uB9AD",MAIN_MSG_ERROR_OLD_SPOTIFY:"Spotify \uBC84\uC804\uC774 \uB108\uBB34 \uC624\uB798\uB418\uC5B4 WMPotify\uB97C \uC0AC\uC6A9\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4! Spotify\uB97C 1.2.45 \uC774\uC0C1\uC73C\uB85C \uC5C5\uB370\uC774\uD2B8\uD558\uC2ED\uC2DC\uC624.",MAIN_MSG_ERROR_NEW_SPOTIFY:"Spotify \uBC84\uC804\uC774 \uC774 \uBC84\uC804\uC758 WMPotify\uC5D0\uC11C \uC9C0\uC6D0\uB418\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4. \uC77C\uBD80 \uAE30\uB2A5\uC774 \uC608\uC0C1\uB300\uB85C \uC791\uB3D9\uD558\uC9C0 \uC54A\uC744 \uC218 \uC788\uC2B5\uB2C8\uB2E4. \uC9C0\uC6D0\uB418\uB294 \uBC84\uC804\uC73C\uB85C \uB2E4\uC6B4\uADF8\uB808\uC774\uB4DC\uD558\uAC70\uB098 Spicetify Marketplace\uC5D0\uC11C WMPotify\uC758 \uC0AC\uC804 \uB9B4\uB9AC\uC2A4 \uBC84\uC804\uC744 \uC0AC\uC6A9\uD574 \uBCF4\uC2ED\uC2DC\uC624.",MAIN_MSG_ERROR_NEW_SPOTIFY_PREREL:"Spotify \uBC84\uC804\uC774 \uC544\uC9C1 WMPotify\uC5D0\uC11C \uC9C0\uC6D0\uB418\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4. \uC77C\uBD80 \uAE30\uB2A5\uC774 \uC608\uC0C1\uB300\uB85C \uC791\uB3D9\uD558\uC9C0 \uC54A\uC744 \uC218 \uC788\uC2B5\uB2C8\uB2E4. \uC9C0\uC6D0\uB418\uB294 \uBC84\uC804\uC73C\uB85C \uB2E4\uC6B4\uADF8\uB808\uC774\uB4DC\uD558\uB294 \uAC83\uC744 \uACE0\uB824\uD558\uC2ED\uC2DC\uC624. \uBB38\uC81C\uAC00 \uBC1C\uC0DD\uD558\uBA74 WMPotify GitHub \uC774\uC288 \uD398\uC774\uC9C0\uC5D0 \uBB38\uC81C\uB97C \uBCF4\uACE0\uD558\uC2ED\uC2DC\uC624.",MAIN_MSG_ERROR_LOAD_FAIL_GLOBALNAV:'\uD14C\uB9C8 \uB85C\uB4DC\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4. \uC2E4\uD5D8\uC801 \uAE30\uB2A5\uC5D0\uC11C "Show Global nav bar with home button, search input and user avatar"\uAC00 "home-next-to-search"\uB85C \uC124\uC815\uB418\uC5B4 \uC788\uB294\uC9C0 \uD655\uC778\uD558\uC2ED\uC2DC\uC624. OK\uB97C \uD074\uB9AD\uD558\uC5EC \uB2E4\uC2DC \uB85C\uB4DC\uD558\uC2ED\uC2DC\uC624.',MAIN_MSG_ERROR_INCOMPAT_EXT:"\uD638\uD658\uB418\uC9C0 \uC54A\uB294 \uD655\uC7A5 \uD504\uB85C\uADF8\uB7A8 %s\uC774(\uAC00) \uAC10\uC9C0\uB418\uC5C8\uC2B5\uB2C8\uB2E4! WMPotify\uC758 \uC77C\uBD80 \uAE30\uB2A5\uC774 \uBE44\uD65C\uC131\uD654\uB429\uB2C8\uB2E4.",ERRDLG_TITLE:"WMPotify \uB85C\uB4DC \uC624\uB958",ERRDLG_MAIN_MSG:"\uC624\uB958\uB85C \uC778\uD574 WMPotify\uB97C \uB85C\uB4DC\uD558\uC9C0 \uBABB\uD588\uC2B5\uB2C8\uB2E4. \uC544\uB798 \uC138\uBD80 \uC815\uBCF4\uB97C \uCC38\uC870\uD558\uACE0 \uD544\uC694\uD55C \uACBD\uC6B0 GitHub \uC774\uC288 \uD398\uC774\uC9C0\uC5D0 \uBCF4\uACE0\uD558\uC2ED\uC2DC\uC624.",ERRDLG_DETAIL_TITLE:"\uC138\uBD80 \uC815\uBCF4",ERRDLG_DETAIL_MISSING_ELEMENTS:"WMPotify\uC5D0 \uD544\uC694\uD55C \uC77C\uBD80 UI \uC694\uC18C\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4.",ERRDLG_DETAIL_MISSING_API:"WMPotify\uC5D0 \uD544\uC694\uD55C \uC77C\uBD80 Spicetify API\uB97C \uC0AC\uC6A9\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4.",ERRDLG_DETAIL_EXCEPTION:`\uCD08\uAE30\uD654 \uC911\uC5D0 \uC54C \uC218 \uC5C6\uB294 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4:

%s

\uC790\uC138\uD55C \uB0B4\uC6A9\uC740 \uCF58\uC194\uC744 \uD655\uC778\uD558\uC2ED\uC2DC\uC624.`,ERRDLG_DIAG_TITLE:"WMPotify \uC9C4\uB2E8 \uC815\uBCF4",ERRDLG_VERSION:"%s \uBC84\uC804",ERRDLG_UNKNOWN:"\uC54C \uC218 \uC5C6\uC74C",ERRDLG_UA:"\uC0AC\uC6A9\uC790 \uC5D0\uC774\uC804\uD2B8",ERRDLG_SUPPORTED:"\uC9C0\uC6D0\uB428",ERRDLG_UNSUPPORTED:"\uC9C0\uC6D0\uB418\uC9C0 \uC54A\uC74C",ERRDLG_EXT:"\uD655\uC7A5 \uD504\uB85C\uADF8\uB7A8",ERRDLG_APP:"\uCEE4\uC2A4\uD140 \uC571",ERRDLG_IS_MARKETPLACE:"Spicetify Marketplace \uBC30\uD3EC\uD310",ERRDLG_UNSUPPORTED_INFO_STABLE:'\uC774 \uBC84\uC804\uC758 Spotify\uB294 \uC774 \uBC84\uC804\uC758 WMPotify\uC5D0\uC11C \uC9C0\uC6D0\uB418\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4. \uAC00\uB2A5\uD55C \uD574\uACB0\uCC45:<br>- Spotify\uB97C \uC9C0\uC6D0\uB418\uB294 \uBC84\uC804\uC73C\uB85C \uB2E4\uC6B4\uADF8\uB808\uC774\uB4DC\uD558\uAC70\uB098 \uC5C5\uB370\uC774\uD2B8\uD558\uC2ED\uC2DC\uC624. \uC9C0\uC6D0\uB418\uB294 \uBC84\uC804: %s<br>- Spicetify Marketplace\uC5D0\uC11C WMPotify\uC758 \uC0AC\uC804 \uB9B4\uB9AC\uC2A4 \uBC84\uC804\uC744 \uC0AC\uC6A9\uD574 \uBCF4\uC2ED\uC2DC\uC624.<br>- Spicetify\uB97C "spicetify update"\uB85C \uC5C5\uB370\uC774\uD2B8\uD558\uAC70\uB098 "spicetify restore backup apply"\uB85C CSS \uB9F5\uC744 \uC0C8\uB85C \uACE0\uCE58\uC2ED\uC2DC\uC624.',ERRDLG_UNSUPPORTED_INFO_PREREL:'\uC774 \uBC84\uC804\uC758 Spotify\uB294 \uC544\uC9C1 WMPotify\uC5D0\uC11C \uC9C0\uC6D0\uB418\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4. \uAC00\uB2A5\uD55C \uD574\uACB0\uCC45:<br>- Spotify\uB97C \uC9C0\uC6D0\uB418\uB294 \uBC84\uC804\uC73C\uB85C \uB2E4\uC6B4\uADF8\uB808\uC774\uB4DC\uD558\uAC70\uB098 \uC5C5\uB370\uC774\uD2B8\uD558\uC2ED\uC2DC\uC624. \uC9C0\uC6D0\uB418\uB294 \uBC84\uC804: %s<br>- Spicetify\uB97C "spicetify update"\uB85C \uC5C5\uB370\uC774\uD2B8\uD558\uAC70\uB098 "spicetify restore backup apply"\uB85C CSS \uB9F5\uC744 \uC0C8\uB85C \uACE0\uCE58\uC2ED\uC2DC\uC624.<br>- WMPotify GitHub \uC774\uC288 \uD398\uC774\uC9C0\uC5D0 \uC774 \uBB38\uC81C\uB97C \uBCF4\uACE0\uD558\uACE0 \uC218\uC815\uB420 \uB54C\uAE4C\uC9C0 \uAE30\uB2E4\uB9AC\uC2ED\uC2DC\uC624.',ERRDLG_SUPPORTED_INFO_CSSMAP:'\uAC00\uB2A5\uD55C \uD574\uACB0\uCC45:<br>- Spicetify\uB97C "spicetify update"\uB85C \uC5C5\uB370\uC774\uD2B8\uD558\uAC70\uB098 "spicetify restore backup apply"\uB85C CSS \uB9F5\uC744 \uC0C8\uB85C \uACE0\uCE58\uC2ED\uC2DC\uC624.',ERRDLG_MISSING_ELEMENTS:"\uB204\uB77D\uB41C \uC694\uC18C",ERRDLG_MISSING_API:"\uB204\uB77D\uB41C API \uAC1D\uCCB4",ERRDLG_REPORT_GUIDE:"\uBB38\uC81C\uB97C \uBCF4\uACE0\uD558\uB824\uBA74 \uC704\uC758 \uC138\uBD80 \uC815\uBCF4\uB97C \uBCF5\uC0AC\uD558\uC5EC %s\uC5D0 \uC791\uC131\uD558\uC2ED\uC2DC\uC624.",ERRDLG_REPORT_LINK:"GitHub \uC774\uC288 \uD398\uC774\uC9C0",ERRDLG_COPY:"\uBCF5\uC0AC",ERRDLG_ABORT:"\uC911\uB2E8",ERRDLG_RETRY:"\uC7AC\uC2DC\uB3C4",ERRDLG_IGNORE:"\uBB34\uC2DC",TAB_NOW_PLAYING:"\uC9C0\uAE08 \uC7AC\uC0DD",TAB_LIBRARY:"\uB77C\uC774\uBE0C\uB7EC\uB9AC",TAB_RESET_ORDER:"\uD0ED \uC21C\uC11C \uCD08\uAE30\uD654",PB_TOOLTIP_STOP:"\uC815\uC9C0\uD558\uAE30",PB_TOOLTIP_SEEK_BK:"\uC624\uB978\uCABD \uD074\uB9AD: 15\uCD08 \uB4A4\uB85C \uAC74\uB108\uB6F0\uAE30",PB_TOOLTIP_SEEK_FWD:"\uC624\uB978\uCABD \uD074\uB9AD: 15\uCD08 \uC55E\uC73C\uB85C \uAC74\uB108\uB6F0\uAE30",PB_TOOLTIP_FF:"\uAE38\uAC8C \uD074\uB9AD: \uBE68\uB9AC \uAC10\uAE30",PB_BTN_MINI_MODE:"\uBBF8\uB2C8 \uBAA8\uB4DC",PB_BTN_FULLSCREEN:"\uC804\uCCB4 \uD654\uBA74",LIBX_SIDEBAR_ROOT:"\uB77C\uC774\uBE0C\uB7EC\uB9AC",LIBX_HEADER_ROOT:"\uC74C\uC545",QUEUE_CURRENT_PLAYLIST_PLACEHOLDER:"\uC9C0\uAE08 \uC7AC\uC0DD",QUEUE_CURRENT_TRACK_PLACEHOLDER:"\uD56D\uBAA9 \uC5C6\uC74C",MENU_CONF:"WMPotify \uC18D\uC131",CONF_COLOR_TITLE:"\uC0C9 \uC120\uD0DD",CONF_COLOR_HUE:"\uC0C9\uC0C1",CONF_COLOR_SAT:"\uCC44\uB3C4",CONF_COLOR_TINTPB:"\uC9C0\uAE08 \uC7AC\uC0DD \uB9C9\uB300\uC758 \uBC84\uD2BC\uC5D0 \uC0C9\uC0C1 \uC801\uC6A9",CONF_COLOR_TINTMORE:"\uB354 \uB9CE\uC740 UI \uC694\uC18C\uC5D0 \uC0C9\uC0C1 \uC801\uC6A9",CONF_GENERAL_TITLE:"\uC77C\uBC18",CONF_GENERAL_STYLE:"\uC2A4\uD0C0\uC77C",CONF_GENERAL_BASIC_CUSTOM_DLG_TITLE:"\uC0AC\uC6A9\uC790 \uC815\uC758 Basic \uC2A4\uD0C0\uC77C \uC0C9 \uC124\uC815",CONF_GENERAL_BASIC_CUSTOM_ACTIVE_MSG:"\uD65C\uC131 \uCC3D\uC758 \uBC30\uACBD\uC0C9\uC744 \uC785\uB825\uD558\uC138\uC694",CONF_GENERAL_BASIC_CUSTOM_INACTIVE_MSG:"\uBE44\uD65C\uC131 \uCC3D\uC758 \uBC30\uACBD\uC0C9\uC744 \uC785\uB825\uD558\uC138\uC694",CONF_GENERAL_BASIC_CUSTOM_TEXT_MSG:"\uD14D\uC2A4\uD2B8 \uC0C9\uC0C1\uC744 \uC785\uB825\uD558\uC138\uC694",CONF_GENERAL_BASIC_CUSTOM_PLACEHOLDER:"CSS \uC0C9\uC0C1\uC73C\uB85C \uC785\uB825\uD558\uC138\uC694",CONF_GENERAL_TITLE_STYLE:"\uC81C\uBAA9 \uC2A4\uD0C0\uC77C",CONF_GENERAL_TITLE_STYLE_NATIVE:"\uC2DC\uC2A4\uD15C",CONF_GENERAL_TITLE_STYLE_CUSTOM:"\uC790\uCCB4 \uAD6C\uD604",CONF_GENERAL_TITLE_STYLE_KEEPMENU:"\uBA54\uB274 \uC720\uC9C0",CONF_GENERAL_APPLY:"\uC801\uC6A9 (\uB2E4\uC2DC \uB85C\uB4DC \uD544\uC694)",CONF_GENERAL_CONTROL_STYLE:"\uCEE8\uD2B8\uB864 \uC2A4\uD0C0\uC77C",CONF_GENERAL_CONTROL_STYLE_CLASSIC:"Windows \uACE0\uC804",CONF_GENERAL_CONTROL_STYLE_STANDARD:"Windows \uD45C\uC900",CONF_GENERAL_CONTROL_STYLE_HC:"\uACE0\uB300\uBE44",CONF_GENERAL_CONTROL_STYLE_CUSTOM:"Windows \uACE0\uC804 (\uC0AC\uC6A9\uC790 \uC9C0\uC815)",CONF_GENERAL_MSG_INVALID_SCHEME_FILE:"\uAC00\uC838\uC628 \uD30C\uC77C\uC774 \uC62C\uBC14\uB978 \uC0C9\uC0C1\uC744 \uD3EC\uD568\uD558\uACE0 \uC788\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.",CONF_GENERAL_MSG_UNSUPPORTED_SCHEME_FILE:"\uAC00\uC838\uC628 \uD30C\uC77C\uC774 WMPotify\uC5D0\uC11C \uC9C0\uC6D0\uB418\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.",CONF_GENERAL_DARK_MODE:"\uB2E4\uD06C \uBAA8\uB4DC",CONF_GENERAL_DARK_MODE_FOLLOW_SCHEME:"\uC0C9 \uAD6C\uC131\uD45C \uB530\uB974\uAE30",CONF_GENERAL_DARK_MODE_SYSTEM:"\uC2DC\uC2A4\uD15C \uC124\uC815 \uB530\uB974\uAE30",CONF_GENERAL_DARK_MODE_SYSTEM_MSG_WIN:"\uC774 \uC635\uC158\uC744 \uC0AC\uC6A9\uD558\uB824\uBA74 CEF/Spotify Tweaks Windhawk \uBAA8\uB4DC\uB97C \uC124\uCE58\uD558\uACE0 'Disable forced dark mode' \uC635\uC158\uC744 \uD65C\uC131\uD654\uD558\uAC70\uB098 Spotify \uC2E4\uD589 \uD30C\uC77C\uC5D0\uC11C 'force-dark-mode' \uD50C\uB798\uADF8\uB97C \uC81C\uAC70\uD574\uC57C \uD569\uB2C8\uB2E4. \uADF8\uB807\uC9C0 \uC54A\uC73C\uBA74 \uD56D\uC0C1 \uB2E4\uD06C \uBAA8\uB4DC\uAC00 \uD65C\uC131\uD654\uB429\uB2C8\uB2E4. \uACC4\uC18D\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?",CONF_GENERAL_DARK_MODE_SYSTEM_MSG_UNIX:"\uC774 \uC635\uC158\uC744 \uC0AC\uC6A9\uD558\uB824\uBA74 Spotify \uC2E4\uD589 \uD30C\uC77C\uC5D0\uC11C 'force-dark-mode' \uD50C\uB798\uADF8\uB97C \uC81C\uAC70\uD574\uC57C \uD569\uB2C8\uB2E4. \uADF8\uB807\uC9C0 \uC54A\uC73C\uBA74 \uD56D\uC0C1 \uB2E4\uD06C \uBAA8\uB4DC\uAC00 \uD65C\uC131\uD654\uB429\uB2C8\uB2E4. \uACC4\uC18D\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?",CONF_GENERAL_DARK_MODE_ALWAYS:"\uD56D\uC0C1",CONF_GENERAL_DARK_MODE_NEVER:"\uC548\uD568",CONF_GENERAL_FONT:"UI \uAE00\uAF34",CONF_GENERAL_CUSTOM_FONT_DLG_TITLE:"\uC0AC\uC6A9\uC790 \uC815\uC758 \uAE00\uAF34 \uC124\uC815",CONF_GENERAL_CUSTOM_FONT_MSG:"\uC62C\uBC14\uB978 CSS font-family \uC774\uB984 \uC785\uB825",CONF_GENERAL_FONT_EXTERNAL:"\uC678\uBD80 \uAE00\uAF34",CONF_GENERAL_EXTERNAL_FONT_DLG_TITLE:"\uC678\uBD80 \uAE00\uAF34 \uC124\uC815",CONF_GENERAL_EXTERNAL_FONT_URL_MSG:"Google Fonts\uC640 \uAC19\uC740 \uC678\uBD80 \uAE00\uAF34 \uC2A4\uD0C0\uC77C\uC2DC\uD2B8\uC758 URL\uC744 \uC785\uB825\uD558\uC138\uC694",CONF_GENERAL_EXTERNAL_FONT_NAME_MSG:"\uC678\uBD80 \uAE00\uAF34\uC758 \uD328\uBC00\uB9AC \uC774\uB984\uC744 \uC785\uB825\uD558\uC138\uC694",CONF_GENERAL_FONT_RELOAD:"\uAE00\uAF34 \uBAA9\uB85D \uB2E4\uC2DC \uBD88\uB7EC\uC624\uAE30",CONF_GENERAL_FONT_LOADSYS:"\uC2DC\uC2A4\uD15C \uAE00\uAF34 \uBAA9\uB85D \uBD88\uB7EC\uC624\uAE30",CONF_GENERAL_FONT_PERM_RECOVERY_DESC:"\uB85C\uCEEC \uAE00\uAF34 \uC811\uADFC \uAD8C\uD55C\uC774 \uAC70\uBD80\uB41C \uAC83 \uAC19\uC2B5\uB2C8\uB2E4. \uD5C8\uC6A9\uD558\uB824\uBA74 \uB2E4\uC74C \uB2E8\uACC4\uB97C \uB530\uB974\uC2ED\uC2DC\uC624:",CONF_GENERAL_FONT_PERM_RECOVERY_STEP1:"\uC5EC\uAE30\uB97C \uD074\uB9AD\uD558\uC138\uC694",CONF_GENERAL_FONT_PERM_RECOVERY_STEP2:"\uC88C\uCE21 \uC0C1\uB2E8\uC758 \u24D8 \uBC84\uD2BC\uC744 \uB204\uB974\uC138\uC694",CONF_GENERAL_FONT_PERM_RECOVERY_STEP3:"Fonts \uAD8C\uD55C\uC744 \uD65C\uC131\uD654\uD558\uC138\uC694",CONF_GENERAL_FONT_PERM_RECOVERY_STEP4:"\uC5EC\uAE30\uB97C \uD074\uB9AD\uD558\uC5EC \uCC3D\uB4E4\uC744 \uB2EB\uC73C\uC138\uC694",CONF_GENERAL_FONT_PERM_RECOVERY_STEP5:"\uC2DC\uC2A4\uD15C \uAE00\uAF34 \uBAA9\uB85D\uC744 \uB2E4\uC2DC \uBD88\uB7EC\uC640\uBCF4\uC138\uC694",CONF_GENERAL_TOPMOST:"\uD56D\uC0C1 \uC704\uC5D0 \uD45C\uC2DC",CONF_GENERAL_TOPMOST_ALWAYS:"\uD56D\uC0C1",CONF_GENERAL_TOPMOST_MINIMODE:"\uBBF8\uB2C8 \uBAA8\uB4DC\uC5D0\uC11C",CONF_GENERAL_TOPMOST_NEVER:"\uC548\uD568",CONF_GENERAL_BACKDROP:"\uBC30\uACBD \uC7AC\uC9C8",CONF_GENERAL_BACKDROP_NONE:"\uC5C6\uC74C",CONF_GENERAL_BACKDROP_ACRYLIC:"\uC544\uD06C\uB9B4",CONF_GENERAL_BACKDROP_TABBED:"\uD0ED",CONF_GENERAL_PBLEFTBTN:"\uC9C0\uAE08 \uC7AC\uC0DD \uB9C9\uB300\uC758 \uC88B\uC544\uC694 \uBC84\uD2BC",CONF_GENERAL_PBLEFTBTN_HIDE:"\uC228\uAE30\uAE30",CONF_GENERAL_PBLEFTBTN_LEFTALIGN:"\uC67C\uCABD \uC815\uB82C",CONF_GENERAL_PBLEFTBTN_RIGHTALIGN:"\uC624\uB978\uCABD \uC815\uB82C",CONF_GENERAL_SHOW_LIBX:"\uC67C\uCABD \uC0AC\uC774\uB4DC\uBC14\uC5D0 \uB77C\uC774\uBE0C\uB7EC\uB9AC X \uD45C\uC2DC",CONF_GENERAL_LOCK_TITLE:"\uC815\uC801 \uCC3D \uC81C\uBAA9 \uC0AC\uC6A9",CONF_GENERAL_WH_MESSAGE:'\uC77C\uBD80 \uC635\uC158\uC740 <a href="https://windhawk.net/mods/cef-titlebar-enabler-universal">CEF/Spotify Tweaks Windhawk \uBAA8\uB4DC</a>\uAC00 \uD544\uC694\uD569\uB2C8\uB2E4.',CONF_SPEED_TITLE:"\uC7AC\uC0DD \uC18D\uB3C4 \uC124\uC815",CONF_SPEED_SLOW:"\uB290\uB9AC\uAC8C",CONF_SPEED_NORMAL:"\uBCF4\uD1B5",CONF_SPEED_FAST:"\uBE60\uB974\uAC8C",CONF_SPEED_CURRENT_LABEL:"\uC7AC\uC0DD \uC18D\uB3C4",CONF_SPEED_CUSTOM_DLG_TITLE:"\uC7AC\uC0DD \uC18D\uB3C4 \uC124\uC815",CONF_SPEED_CUSTOM_MSG:"\uC7AC\uC0DD \uC18D\uB3C4\uB97C \uC785\uB825\uD558\uC2ED\uC2DC\uC624 (0.5 - 5.0)",CONF_SPEED_NO_CONNECT_MSG:"\uB2E4\uB978 \uC7A5\uCE58\uC5D0\uC11C \uC7AC\uC0DD \uC911\uC77C \uB54C\uB294 \uC7AC\uC0DD \uC18D\uB3C4\uB97C \uBCC0\uACBD\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4",CONF_SPEED_OUT_OF_RANGE_MSG:"\uC7AC\uC0DD \uC18D\uB3C4\uB294 0\uBCF4\uB2E4 \uD06C\uACE0 5 \uC774\uD558\uC5EC\uC57C \uD569\uB2C8\uB2E4",CONF_SPEED_UNSUPPORTED_MSG_WIN:"\uC74C\uC545\uC744 \uC7AC\uC0DD\uD558\uB294 \uB3D9\uC548 \uC7AC\uC0DD \uC18D\uB3C4\uB97C \uBCC0\uACBD\uD558\uB824\uBA74 CEF/Spotify Tweaks Windhawk \uBAA8\uB4DC\uAC00 \uC124\uCE58\uB41C x64 Windows Spotify \uD074\uB77C\uC774\uC5B8\uD2B8\uAC00 \uD544\uC694\uD569\uB2C8\uB2E4",CONF_SPEED_UNSUPPORTED_MSG_UNIX:"\uD31F\uCE90\uC2A4\uD2B8\uB97C \uC7AC\uC0C1\uD558\uB294 \uB3D9\uC548\uC5D0\uB9CC \uC7AC\uC0DD \uC18D\uB3C4\uB97C \uBCC0\uACBD\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4",CONF_ABOUT_TITLE:"\uC815\uBCF4",CONF_ABOUT_DESC:"Spotify\uC6A9 Windows Media Player 11 \uD14C\uB9C8",CONF_ABOUT_VERSION:"\uBC84\uC804",CONF_ABOUT_CTEWH_VERSION:"CEF/Spotify Tweaks Windhawk \uBAA8\uB4DC %s \uC0AC\uC6A9 \uAC00\uB2A5",CONF_ABOUT_AUTHOR:"\uC81C\uC791: Ingan121",CONF_ABOUT_AUTO_UPDATES:"\uC790\uB3D9\uC73C\uB85C \uC5C5\uB370\uC774\uD2B8 \uD655\uC778",CONF_ABOUT_DIAG:"\uC9C4\uB2E8 \uC815\uBCF4 \uD45C\uC2DC",WMPVIS_INSTALL_TITLE:"WMPotify NowPlaying\uC744 \uC124\uCE58\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?",WMPVIS_INSTALL_DESC:"WMPotify NowPlaying\uC740 WMP\uC640 \uAC19\uC740 \uC2DC\uAC01\uD654 \uD654\uBA74\uACFC \uADF8 \uC704\uC5D0 \uD45C\uC2DC\uB418\uB294 \uAC00\uC0AC \uCC3D\uC744 \uC81C\uACF5\uD569\uB2C8\uB2E4. WMPotify\uB97C \uCD5C\uC0C1\uC758 \uACBD\uD5D8\uC73C\uB85C \uC0AC\uC6A9\uD558\uB824\uBA74 WMPotify NowPlaying \uC124\uCE58\uB97C \uAD8C\uC7A5\uD569\uB2C8\uB2E4.",WMPVIS_INSTALL_STEPS:"\uC124\uCE58\uD558\uB824\uBA74 \uB2E4\uC74C \uB2E8\uACC4\uB97C \uB530\uB974\uC2ED\uC2DC\uC624:",WMPVIS_INSTALL_STEP1:"\uB2E4\uC74C \uCF54\uB4DC\uB97C \uBCF5\uC0AC\uD558\uC2ED\uC2DC\uC624:",WMPVIS_INSTALL_STEP2:"PowerShell\uC744 \uC5FD\uB2C8\uB2E4",WMPVIS_INSTALL_STEP2_UNIX:"\uD130\uBBF8\uB110 \uCC3D\uC744 \uC5FD\uB2C8\uB2E4",WMPVIS_INSTALL_STEP3:"\uCF54\uB4DC\uB97C \uBD99\uC5EC\uB123\uACE0 \uC5D4\uD130 \uD0A4\uB97C \uB204\uB985\uB2C8\uB2E4",WMPVIS_INSTALL_MORE_INFO:"\uB610\uB294 \uC218\uB3D9 \uC124\uCE58 \uC9C0\uCE68\uC744 \uD3EC\uD568\uD55C \uC790\uC138\uD55C \uC815\uBCF4\uB97C \uBCF4\uB824\uBA74 %s\uD558\uC2ED\uC2DC\uC624.",WMPVIS_INSTALL_HIDE:"\uC124\uCE58\uD558\uC9C0 \uC54A\uC73C\uB824\uBA74 %s\uD558\uC5EC \uC774 \uBC84\uD2BC\uC744 \uC228\uAE30\uC2ED\uC2DC\uC624.",WMPVIS_INSTALL_CODE_COPY:"\uCF54\uB4DC\uAC00 \uD074\uB9BD\uBCF4\uB4DC\uC5D0 \uBCF5\uC0AC\uB418\uC5C8\uC2B5\uB2C8\uB2E4!",THEME_UPDATE_TITLE:"WMPotify\uAC00 \uC5C5\uB370\uC774\uD2B8\uB418\uC5C8\uC2B5\uB2C8\uB2E4!",THEME_UPDATE_INFO:"WMPotify\uAC00 %s(\uC73C)\uB85C \uC5C5\uB370\uC774\uD2B8\uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uC544\uB798\uC758 \uBCC0\uACBD \uB85C\uADF8\uB97C \uC77D\uC5B4\uC8FC\uC2ED\uC2DC\uC624.",THEME_UPDATE_STEPS:"\uC5C5\uB370\uC774\uD2B8\uD558\uB824\uBA74 \uB2E4\uC74C \uB2E8\uACC4\uB97C \uB530\uB974\uC2ED\uC2DC\uC624:",THEME_CHANGELOG_PLACEHOLDER:"\uBCC0\uACBD \uB0B4\uC5ED\uC744 \uAC00\uC838\uC624\uC9C0 \uBABB\uD588\uC2B5\uB2C8\uB2E4! \uC790\uC138\uD55C \uC815\uBCF4\uB97C \uBCF4\uB824\uBA74 %s\uD558\uC2ED\uC2DC\uC624.",THEME_UPDATE_DISMISS:"\uC774 \uC5C5\uB370\uC774\uD2B8\uC5D0 \uB300\uD55C \uC54C\uB9BC\uC744 \uB2E4\uC2DC \uD45C\uC2DC\uD558\uC9C0 \uC54A\uC74C",CTEWH_UPDATE_MSG:"CEF/Spotify Tweaks Windhawk \uBAA8\uB4DC\uB97C %s(\uC73C)\uB85C \uC5C5\uB370\uC774\uD2B8\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4. \uCD5C\uC0C1\uC758 \uACBD\uD5D8\uC744 \uC704\uD574 Windhawk UI\uC5D0\uC11C \uBAA8\uB4DC\uB97C \uC5C5\uB370\uC774\uD2B8\uD558\uC2ED\uC2DC\uC624."},gt=io;var Ue={"en-US":"English","ko-KR":"\uD55C\uAD6D\uC5B4"},V=navigator.language;if(!(V in Ue)){for(let t in Ue)if(V.slice(0,2)===t.slice(0,2)){V=t;break}V in Ue||(V="en-US")}var _e={"en-US":bt,"ko-KR":gt},we=_e["en-US"];V!=="en-US"&&Object.assign(we,_e[V]);var ro={...we,getString:ao},a=ro;function ao(t,...e){return we[t]?de(we[t],...e):_e["en-US"][t]?(console.info(`Fallback string used for locId ${t}`),de(_e["en-US"][t],...e)):(console.error(`No string found for locId ${t}`),t)}function de(t,...e){if(t=t.replace(/&([^&])/g,"<u>$1</u>").replace(/\\&/g,"&"),e.length>0)for(let o=0;o<e.length;o++)t=t.replace(/%s/,e[o]),t=t.replace(`%${o+1}s`,e[o]);return t}var We=class{controlHeight;constructor(e=1){if(this.controlHeight=e,Spicetify.Config.extensions.includes("noControls.js")){Spicetify.showNotification("[WMPotify] "+a.getString("MAIN_MSG_ERROR_INCOMPAT_EXT","No Controls"));return}let o=i=>{i&&(i._updateUiClient?.updateTitlebarHeight&&i._updateUiClient.updateTitlebarHeight({height:this.controlHeight}),i._updateUiClient?.setButtonsVisibility&&this.controlHeight<=1&&i._updateUiClient.setButtonsVisibility(!1),window.addEventListener("beforeunload",()=>{i._updateUiClient?.setButtonsVisibility&&i._updateUiClient.setButtonsVisibility({showButtons:!0})})),Spicetify.CosmosAsync?.post("sp://messages/v1/container/control",{type:"update_titlebar",height:this.controlHeight+"px"})};o(Spicetify.Platform.ControlMessageAPI),o(Spicetify.Platform.UpdateAPI);async function n(){o(Spicetify.Platform.ControlMessageAPI),o(Spicetify.Platform.UpdateAPI)}let r=setInterval(n,100);setTimeout(()=>{clearInterval(r)},1e4);let l=()=>{o(Spicetify.Platform.ControlMessageAPI),o(Spicetify.Platform.UpdateAPI)};document.addEventListener("fullscreenchange",l),window.addEventListener("resize",()=>{setTimeout(()=>{l()},100)})}setControlHeight(e){this.controlHeight=e||1}},Le=We;var $e=class t{static module=null;static lastDpi=1;static init(){if(navigator.userAgent.includes("Windows"))try{if(t.module=(window.cancelEsperantoCall||window._getSpotifyModule)("ctewh"),!t.module){console.log("Windhawk mod not available");return}t.lastDpi=t.module.query().dpi/96;let{version:e,initialOptions:o}=t.module;console.log(`CEF/Spotify Tweaks Windhawk mod available, Version: ${e}`),window.addEventListener("resize",()=>{t.module&&(t.lastDpi=t.module.query().dpi/96)})}catch{t.module=null,console.log("Windhawk mod not available")}}static query(){return t.module?t.module.query():null}static extendFrame(e,o,n,r){t.module?.extendFrame&&([e,o,n,r]=[e,o,n,r].map(l=>Math.round(l*window.devicePixelRatio)),t.lastDpi>1&&([e,o]=[e&&e-1,o&&o-1],[n,r]=[n&&n-1,r&&r-1]),t.module.extendFrame(e,o,n,r))}static minimize(){t.module?.minimize&&t.module.minimize()}static maximizeRestore(){t.module?.maximizeRestore&&t.module.maximizeRestore()}static close(){t.module?.close&&t.module.close()}static setLayered(e,o,n){t.module?.setLayered&&t.module.setLayered(e,o,n)}static setTransparent(e){t.module?.setTransparent&&t.module.setTransparent(e)}static setBackdrop(e){t.module?.setBackdrop&&t.module.setBackdrop(e)}static resizeTo(e,o){t.module?.resizeTo&&t.module.resizeTo(e,o)}static setMinSize(e,o){t.module?.setMinSize&&([e,o]=[e,o].map(n=>Math.round(n*window.devicePixelRatio)),t.module.setMinSize(e,o))}static setTopMost(e){t.module?.setTopMost&&t.module.setTopMost(e)}static setTitle(e){t.module?.setTitle&&t.module.setTitle(e)}static lockTitle(e){t.module?.lockTitle&&t.module.lockTitle(e)}static openSpotifyMenu(){t.module?.openSpotifyMenu&&t.module.openSpotifyMenu()}static setPlaybackSpeed(e){t.module?.setPlaybackSpeed&&(typeof e=="string"&&(e=parseFloat(e)),t.module.setPlaybackSpeed(e))}static available(){return!!t.module}static getModule(){return t.module}},y=$e;var U=null,Y=null;function _t(){U=document.createElement("div"),U.id="wmpotify-title-bar";let t=document.createElement("div");t.id="wmpotify-title-icon",t.addEventListener("click",()=>{t.classList.toggle("logo2013"),t.classList.contains("logo2013")?localStorage.wmpotifyUse2013Icon=!0:delete localStorage.wmpotifyUse2013Icon}),localStorage.wmpotifyUse2013Icon&&t.classList.add("logo2013"),t.addEventListener("dblclick",()=>{wt()}),U.appendChild(t),document.body.appendChild(U)}async function lo(t){let e=y.query();switch(t){case"native":new Le(1);break;case"custom":new Le(1);case"keepmenu":if(Y=document.createElement("div"),Y.id="wmpotify-title-buttons",window.SpotEx||e){let r=document.createElement("button");r.id="wmpotify-minimize-button",r.addEventListener("click",()=>{e?y.minimize():SpotEx.updateWindow({state:"minimized"})}),Y.appendChild(r);let l=document.createElement("button");l.id="wmpotify-maximize-button",l.addEventListener("click",async()=>{e?y.maximizeRestore():(await SpotEx.getWindow()).state==="maximized"?SpotEx.updateWindow({state:"normal"}):SpotEx.updateWindow({state:"maximized"})}),Y.appendChild(l),window.addEventListener("resize",i),i();async function i(){e?y.query()?.isMaximized?l.dataset.maximized="true":delete l.dataset.maximized:(await SpotEx.getWindow()).state==="maximized"?l.dataset.maximized="true":delete l.dataset.maximized}}let o=document.createElement("button");o.id="wmpotify-close-button",o.addEventListener("click",()=>{wt()}),Y.appendChild(o);case"spotify":if(U===null&&(_t(),U===null))return;let n=document.createElement("span");n.id="wmpotify-title-text",n.textContent=await Spicetify.AppTitle.get(),U.appendChild(n),(t==="custom"||t==="keepmenu")&&Y&&U.appendChild(Y),(t==="keepmenu"||t==="spotify")&&new Le(25),Spicetify.AppTitle.sub(r=>{r?.trim()&&(n.textContent=r)});break}}async function wt(){y.available()?y.close():window.close()}var qe=class{static earlyInit=_t;static init=lo},Ve=qe;var so="1.3 Pre-release (2026/01/29)",Z="1.2.80",J=class t{major;minor;patch;extra;constructor(e){let o=e.split(" "),n=o[0].split(".");this.major=parseInt(n[0]),this.minor=parseInt(n[1]),this.patch=parseInt(n[2])||0,this.extra=o.length===1?"":o.slice(1).join(" ")}toString(e){switch(e){case 0:return`${this.major}.${this.minor}.${this.patch}${this.extra?` ${this.extra}`:""}`;case 1:return`${this.major}.${this.minor}.${this.patch}`;case 2:return`${this.major}.${this.minor}`;case 3:return`${this.major}`;default:return this.toString(1)}}compare(e,o=!1){let n=new t(e);return this.major!==n.major?this.major-n.major>0?1:-1:this.minor!==n.minor?this.minor-n.minor>0?1:-1:this.patch!==n.patch?this.patch-n.patch>0?1:-1:o||this.extra&&n.extra?0:this.extra?-1:n.extra?1:0}},P=new J(so);async function ue(){try{let t=!!document.querySelector("style.marketplaceUserCSS"),e=y.available(),o=new J(y.module?.version||"0.0"),r=await(await fetch("https://www.ingan121.com/wmpotify/latest.txt")).text(),l=r.match("wmpotify_new=(.*)")[1],i=r.match("cte=(.*)")[1];if(!P.extra){let s=r.match("last_spotify=(.*)")?.[1];s&&(Z=s)}!t&&P.compare(l)<0&&localStorage.wmpotifyIgnoreVersion!==l&&me(!1,l),e&&o.compare(i)<0&&localStorage.wmpotifyLastCheckedWhVer!==i&&Spicetify.showNotification("[WMPotify] "+a.getString("CTEWH_UPDATE_MSG",i)),localStorage.wmpotifyLastCheckedWhVer=i,x(Z)>0&&(localStorage.wmpotifyLastCompatNotifiedVer!==Spicetify.Platform?.version&&Spicetify.showNotification(a[P.extra?"MAIN_MSG_ERROR_NEW_SPOTIFY_PREREL":"MAIN_MSG_ERROR_NEW_SPOTIFY"]),localStorage.wmpotifyLastCompatNotifiedVer=Spicetify.Platform?.version)}catch(t){console.error(t)}}function x(t){let e=Spicetify.Platform?.version?.split(".").map(Number);if(e||(e=navigator.userAgent.match(/Spotify\/(\d+\.\d+\.\d+\.\d+)/)?.[1].split(".").map(Number)),!e||!t)return 0;let o=t.split(".").map(Number);for(let n=0;n<o.length;n++)if(e[n]!==o[n])return e[n]-o[n];return 0}function Te(t="WMPotify",e,o=a.UI_OK,n=a.UI_CANCEL){return new Promise((r,l)=>{let i=document.createElement("div");i.id="wmpotify-confirm-modal";let s=document.createElement("p");s.textContent=e,i.appendChild(s);let u=new MutationObserver(()=>{document.contains(i)||(u.disconnect(),r(!1))}),m=document.createElement("div");m.classList.add("wmpotify-modal-bottom-buttons");let p=document.createElement("button");p.classList.add("wmpotify-aero"),p.textContent=o,p.addEventListener("click",E=>{u.disconnect(),Spicetify.PopupModal.hide(),r(!0),E.preventDefault(),E.stopPropagation()}),m.appendChild(p);let f=document.createElement("button");f.classList.add("wmpotify-aero"),f.textContent=n,f.addEventListener("click",E=>{u.disconnect(),Spicetify.PopupModal.hide(),r(!1),E.preventDefault(),E.stopPropagation()}),m.appendChild(f),i.appendChild(m),Spicetify.PopupModal.display({title:t,content:i}),u.observe(document.body,{childList:!0})})}function B(t="WMPotify",e,o,n){return new Promise((r,l)=>{let i=document.createElement("div");i.id="wmpotify-prompt-modal";let s=document.createElement("p");s.textContent=e,i.appendChild(s);let u=document.createElement("input");u.classList.add("wmpotify-aero"),u.type="text",u.value=o,u.placeholder=n,u.style.width="100%",i.appendChild(u);let m=new MutationObserver(()=>{document.contains(i)||(m.disconnect(),r(null))}),p=document.createElement("div");p.classList.add("wmpotify-modal-bottom-buttons");let f=document.createElement("button");f.classList.add("wmpotify-aero"),f.textContent=a.UI_OK,f.addEventListener("click",b=>{m.disconnect(),Spicetify.PopupModal.hide(),r(u.value),b.preventDefault(),b.stopPropagation()}),p.appendChild(f);let E=document.createElement("button");E.classList.add("wmpotify-aero"),E.textContent=a.UI_CANCEL,E.addEventListener("click",b=>{m.disconnect(),Spicetify.PopupModal.hide(),r(null),b.preventDefault(),b.stopPropagation()}),p.appendChild(E),u.addEventListener("keydown",b=>{b.key==="Enter"?f.click():b.key==="Escape"&&E.click()}),i.appendChild(p),Spicetify.PopupModal.display({title:t,content:i}),u.focus(),m.observe(document.body,{childList:!0})})}async function ve(){let t=document.createElement("div");t.id="wmpotify-instructions-dialog",t.innerHTML=`
        <p>${a.WMPVIS_INSTALL_DESC}</p><br>
        <img src="https://raw.githubusercontent.com/Ingan121/WMPotify/refs/heads/master/screenshots/wmpvis_aero_2.png" alt="WMPotify NowPlaying screenshot"><br><br>
        <p>${a.WMPVIS_INSTALL_STEPS}</p><br>
        <ol>
            <li>1. ${a.WMPVIS_INSTALL_STEP1}</li>
            <div class="wmpotify-code-container">
                <button id="wmpotify-copy-code">
                    
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-copy" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM2 5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1h1v1a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1v1z"/>
                    </svg>
                </button>
                <code>
                ${navigator.userAgent.includes("Windows")?`iex "& { $(iwr -useb '<a href="https://raw.githubusercontent.com/Ingan121/WMPotify/master/installer/install.ps1">https://raw.githubusercontent.com/Ingan121/WMPotify/master/installer/install.ps1</a>') } -Install @('wmpvis')"`:'export SKIP_THEME=true; curl -fsSL <a href="https://raw.githubusercontent.com/Ingan121/WMPotify/master/installer/install.sh">https://raw.githubusercontent.com/Ingan121/WMPotify/master/installer/install.sh</a> | sh'}
                </code>
            </div>
            <li>2. ${a[navigator.userAgent.includes("Windows")?"WMPVIS_INSTALL_STEP2":"WMPVIS_INSTALL_STEP2_UNIX"]}</li>
            <li>3. ${a.WMPVIS_INSTALL_STEP3}</li>
        </ol><br>
        <p>${a.getString("WMPVIS_INSTALL_MORE_INFO",`<a href="https://github.com/Ingan121/Spicetify-CustomApps">${a.UI_CLICK_HERE}</a>`)}</p>
        <p>${a.getString("WMPVIS_INSTALL_HIDE",`<a href="javascript:localStorage.wmpotifyNoWmpvis=true;document.querySelector('#wmpotify-tabs-container button[data-identifier=now-playing]').dataset.hidden=true;Spicetify.PopupModal.hide();window.dispatchEvent(new Event('resize'))">${a.UI_CLICK_HERE}</a>`)}</p>
    `,Spicetify.PopupModal.display({title:a.WMPVIS_INSTALL_TITLE,content:t,isLarge:!0}),document.querySelector("#wmpotify-copy-code")?.addEventListener("click",()=>{let e=document.querySelector("#wmpotify-instructions-dialog code")?.textContent?.trim();e&&Spicetify.Platform.ClipboardAPI.copy(e)})}async function me(t=!1,e,o){let n=e,r="Failed to fetch changelog!";if(o)r=o.replace(/\r\n/g,"<br>").replace(/\n/g,"<br>");else try{let s=await(await fetch("https://api.github.com/repos/Ingan121/WMPotify/releases/latest")).json();n=s.name,r=s.body?.replace(/\r\n/g,"<br>").replace(/\n/g,"<br>")||""}catch{r=a.getString("THEME_CHANGELOG_PLACEHOLDER",`<a href="https://github.com/Ingan121/WMPotify/releases/tag/${n}">${a.UI_CLICK_HERE}</a>`)}let l=document.createElement("div");l.id="wmpotify-instructions-dialog",l.innerHTML=`
        <p>${a.getString("THEME_UPDATE_INFO",n)}</p>
        <div class="wmpotify-code-container">
            <p>${r}</p>
        </div>
        ${t?"":`
            <p>${a.THEME_UPDATE_STEPS}</p><br>
            <ol>
                <li>1. ${a.WMPVIS_INSTALL_STEP1}</li>
                <div class="wmpotify-code-container">
                    <button id="wmpotify-copy-code">
                        
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-copy" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM2 5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1h1v1a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1v1z"/>
                        </svg>
                    </button>
                    <code>
                    ${navigator.userAgent.includes("Windows")?`iex "& { $(iwr -useb '<a href="https://raw.githubusercontent.com/Ingan121/WMPotify/master/installer/install.ps1">https://raw.githubusercontent.com/Ingan121/WMPotify/master/installer/install.ps1</a>') }"`:'curl -fsSL <a href="https://raw.githubusercontent.com/Ingan121/WMPotify/master/installer/install.sh">https://raw.githubusercontent.com/Ingan121/WMPotify/master/installer/install.sh</a> | sh'}
                    </code>
                </div>
                <li>2. ${a[navigator.userAgent.includes("Windows")?"WMPVIS_INSTALL_STEP2":"WMPVIS_INSTALL_STEP2_UNIX"]}</li>
                <li>3. ${a.WMPVIS_INSTALL_STEP3}</li>
            </ol><br>
            <p>${a.getString("WMPVIS_INSTALL_MORE_INFO",`<a href="https://github.com/Ingan121/WMPotify">${a.UI_CLICK_HERE}</a>`)}</p>
            <button class="wmpotify-aero" onclick="localStorage.wmpotifyIgnoreVersion='${e}';Spicetify.PopupModal.hide();">${a.THEME_UPDATE_DISMISS}</button>
        `}
    `,Spicetify.PopupModal.display({title:a.THEME_UPDATE_TITLE,content:l,isLarge:!t}),t||document.querySelector("#wmpotify-copy-code")?.addEventListener("click",()=>{let i=document.querySelector("#wmpotify-instructions-dialog code")?.textContent?.trim();i&&Spicetify.Platform.ClipboardAPI.copy(i)})}function Ce(t,e=[]){let o=document.createElement("div");o.id="wmpotify-error-dialog";let n=x("1.2.45")>=0&&x(Z)<=0,r=Object.entries({"Spicetify.Platform.PlayerAPI":Spicetify.Platform?.PlayerAPI,"Spicetify.AppTitle":Spicetify.AppTitle,"Spicetify.Menu":Spicetify.Menu,"Spicetify.Platform.History.listen":Spicetify.Platform.History?.listen,"Spicetify.Platform.LocalStorageAPI":Spicetify.Platform.LocalStorageAPI,"Spicetify.Platform.Translations":Spicetify.Platform.Translations,"Spicetify.Platform.PlatformData":Spicetify.Platform.PlatformData,"Spicetify.Player.origin._state.repeat":Spicetify.Player.origin?._state?.repeat!=null}).filter(([l,i])=>!i).map(([l,i])=>l).join("<br>");o.innerHTML=`
        <div class="main-trackCreditsModal-header">
            <h1>${a.ERRDLG_TITLE}</h1>
        </div>
        <div class="main-trackCreditsModal-mainSection">
            <p>${a.ERRDLG_MAIN_MSG}</p><br>
            <p>${a.ERRDLG_DETAIL_TITLE}:</p>
            <div id="wmpotify-error-dialog-details">
                <div class="wmpotify-code-container">
                    <code id="wmpotify-error-dialog-message" style="white-space: pre-wrap;">${t}</code>
                </div>
                <hr>
                ${Lt()}
                ${e.length>0?`<hr><p>${a.ERRDLG_MISSING_ELEMENTS}: <div class="wmpotify-code-container">${e.join("<br>")}</div></p>`:""}
                ${r?`<hr><p>${a.ERRDLG_MISSING_API}: <div class="wmpotify-code-container">${r}</div></p>`:""}
            </div>
            ${n?"":`<hr><p>${a.getString(P.extra?"ERRDLG_UNSUPPORTED_INFO_PREREL":"ERRDLG_UNSUPPORTED_INFO_STABLE",`1.2.45 - ${Z}`)}</p>`}
            ${n&&e.length>0?`<hr><p>${a.ERRDLG_SUPPORTED_INFO_CSSMAP}</p>`:""}
            <hr>
            <p>${a.getString("ERRDLG_REPORT_GUIDE",`<a href="https://github.com/Ingan121/WMPotify/issues">${a.ERRDLG_REPORT_LINK}</a>`)}</p>
            <div class="wmpotify-modal-bottom-buttons" style="justify-content: flex-end;">
                <button class="wmpotify-aero" id="wmpotify-error-copy">${a.ERRDLG_COPY}</button>
                <button class="wmpotify-aero" id="wmpotify-error-abort">${a.ERRDLG_ABORT}</button>
                <button class="wmpotify-aero" id="wmpotify-error-retry">${a.ERRDLG_RETRY}</button>
                <button class="wmpotify-aero" id="wmpotify-error-ignore">${a.ERRDLG_IGNORE}</button>
            </div>
        </div>
    `,document.body.appendChild(o),console.error("WMPotify initialization error:",t,e,r),document.querySelector("#wmpotify-error-copy")?.addEventListener("click",()=>{let l=document.querySelector("#wmpotify-error-dialog-details")?.innerText.replaceAll(`

`,`
`).trim();l&&(navigator.clipboard.writeText(l),Spicetify.Platform.ClipboardAPI.copy(l))}),document.querySelector("#wmpotify-error-abort")?.addEventListener("click",()=>{window.close()}),document.querySelector("#wmpotify-error-retry")?.addEventListener("click",()=>{location.reload()}),document.querySelector("#wmpotify-error-ignore")?.addEventListener("click",()=>{document.querySelector("#wmpotify-error-dialog")?.remove()})}function Me(){let t=document.createElement("div");t.id="wmpotify-diag-dialog",t.innerHTML=`
        <div id="wmpotify-diag-dialog-details">
            ${Lt()}
        </div>
        <hr>
        <p>${a.getString("ERRDLG_REPORT_GUIDE",`<a href="https://github.com/Ingan121/WMPotify/issues">${a.ERRDLG_REPORT_LINK}</a>`)}</p>
        <div class="wmpotify-modal-bottom-buttons" style="justify-content: flex-end;">
            <button class="wmpotify-aero" id="wmpotify-error-copy">${a.ERRDLG_COPY}</button>
            <button class="wmpotify-aero" id="wmpotify-error-close">${a.UI_OK}</button>
        </div>`,Spicetify.PopupModal.display({title:a.ERRDLG_DIAG_TITLE,content:t,isLarge:!0}),document.querySelector("#wmpotify-error-copy")?.addEventListener("click",()=>{let e=document.querySelector("#wmpotify-diag-dialog-details")?.innerText.replaceAll(`

`,`
`).trim();e&&Spicetify.Platform.ClipboardAPI.copy(e)}),document.querySelector("#wmpotify-error-close")?.addEventListener("click",()=>{Spicetify.PopupModal.hide()})}function Lt(){let t=x("1.2.45")>=0&&x(Z)<=0;return`
        <p>${a.getString("ERRDLG_VERSION","Spotify")}: ${Spicetify.Platform?.version||navigator.userAgent.match(/Spotify\/\d+\.\d+\.\d+/)?.[1]||a.ERRDLG_UNKNOWN} (${t?a.ERRDLG_SUPPORTED:a.ERRDLG_UNSUPPORTED})</p>
        <p>${a.getString("ERRDLG_VERSION","Spicetify")}: ${Spicetify.Config.version||a.ERRDLG_UNKNOWN}</p>
        <p>${a.getString("ERRDLG_VERSION","Spicetify Marketplace")}: ${window.Marketplace?.version||a.ERRDLG_UNKNOWN}</p>
        <p>${a.getString("ERRDLG_UA")}: ${navigator.userAgent}</p>
        <p>${a.getString("ERRDLG_VERSION","WMPotify")}: ${P.toString(0)}</p>
        <p>${a.getString("ERRDLG_VERSION","CEF/Spotify Tweaks")}: ${y.getModule()?.version||a.ERRDLG_UNKNOWN}</p>
        <hr>
        <p>${a.ERRDLG_EXT}: ${Spicetify.Config.extensions?.join(", ")??a.ERRDLG_UNKNOWN}</p>
        <p>${a.ERRDLG_APP}: ${Spicetify.Config.custom_apps?.join(", ")??a.ERRDLG_UNKNOWN}</p>
        <p>${a.ERRDLG_IS_MARKETPLACE}: ${!!document.querySelector("style.marketplaceUserCSS")}</p>
    `}var W=class{menuOrder;submenus;openedMenu;mouseOverMenu;mouseOverSubmenu;handlingPointerEvent;handlingKeyEvent;boundMenuNavigationHandler;submenuOpenTimer;submenuCloseTimer;shouldNotCloseSubmenu;menuHierarchy;beforeMenuOpenEvent;afterMenuCloseEvent;constructor(e=[],o=[]){this.menuOrder=e,this.submenus=o,this.openedMenu=null,this.mouseOverMenu=!1,this.mouseOverSubmenu=!1,this.handlingPointerEvent=!1,this.handlingKeyEvent=!1,this.boundMenuNavigationHandler=this.menuNavigationHandler.bind(this),this.submenuOpenTimer=void 0,this.submenuCloseTimer=void 0,this.shouldNotCloseSubmenu=!1,this.menuHierarchy={},this.beforeMenuOpenEvent=new Event("beforemenuopen"),this.afterMenuCloseEvent=new Event("aftermenuclose");for(let n of e){this.menuHierarchy[n]=[];let r=document.getElementById(n+"MenuBg");if(!r)continue;let l=r.querySelectorAll(".contextMenuItem");for(let i of l)!i||!(i instanceof HTMLElement)||(i.dataset.submenu&&this.menuHierarchy[n].push(i.dataset.submenu),i.addEventListener("pointerover",()=>{for(let s of l)s instanceof HTMLElement&&delete s.dataset.active;i.dataset.active="true",clearTimeout(this.submenuOpenTimer),i.dataset.submenu?this.submenuOpenTimer=setTimeout(()=>{i.dataset.submenu&&this.openMenu(i.dataset.submenu)},300):this.menuHierarchy[n].length>0&&this.delayedCloseMenu(this.menuHierarchy[n][0])}),i.addEventListener("pointerleave",()=>{this.mouseOverSubmenu||(delete i.dataset.active,clearTimeout(this.submenuOpenTimer),i.dataset.submenu&&this.delayedCloseMenu(i.dataset.submenu))}),i.addEventListener("click",()=>{i.dataset.submenu&&!i.classList.contains("disabled")?this.openedMenu?.id!==i.dataset.submenu+"MenuBg"?this.openMenu(i.dataset.submenu):document.getElementById(i.dataset.submenu+"MenuBg")?.focus():i.dataset.noClose||this.closeMenu(n)}));r.addEventListener("focusout",i=>{window.ignoreFocusLoss||i.relatedTarget&&i.relatedTarget instanceof HTMLElement&&i.relatedTarget.dataset.submenuOf===n||this.closeMenu(n)}),r.addEventListener("pointermove",i=>{(i.clientX>0||i.clientY>0)&&(r.style.animation="none")})}for(let n of o){let r=document.getElementById(n+"MenuBg");if(!r)continue;let l=r.querySelectorAll(".contextMenuItem"),i=document.getElementById(r.dataset.submenuOf+"MenuBg");if(!i)continue;let s=Array.from(i.querySelectorAll(".contextMenuItem")).findIndex(m=>m.dataset.submenu===n),u=i.querySelectorAll(".contextMenuItem")[s];for(let m of l)m.addEventListener("pointerover",()=>{for(let p of l)p instanceof HTMLElement&&delete p.dataset.active;m instanceof HTMLElement&&(m.dataset.active="true")}),m.addEventListener("pointerleave",()=>{m instanceof HTMLElement&&delete m.dataset.active}),m.addEventListener("click",()=>{this.shouldNotCloseSubmenu=!1,this.closeMenu(n),this.closeMenu(r.dataset.submenuOf)});r.addEventListener("pointerover",()=>{this.mouseOverMenu=!0,this.mouseOverSubmenu=!0,this.shouldNotCloseSubmenu=!0,clearTimeout(this.submenuCloseTimer),u.dataset.active="true"}),r.addEventListener("pointerleave",()=>{this.mouseOverMenu=!1,this.mouseOverSubmenu=!1,this.shouldNotCloseSubmenu=!1}),r.addEventListener("focusout",m=>{if(window.ignoreFocusLoss||r.style.display==="none")return;this.shouldNotCloseSubmenu=!1;let p=!!r.dataset.openStandalone;m.relatedTarget&&m.relatedTarget instanceof HTMLElement&&m.relatedTarget.id&&m.relatedTarget.id===i.id||(this.closeMenu(n),!(m.relatedTarget&&m.relatedTarget instanceof HTMLElement&&m.relatedTarget.id&&m.relatedTarget.dataset.submenuOf===r.dataset.submenuOf)&&(p||this.closeMenu(r.dataset.submenuOf)))})}}openMenu(e,o=null){let n=document.getElementById(e+"MenuBg");if(!n)return;let r=document.getElementById(e+"Menu");if(!r)return;let l=!!n.dataset.submenuOf,i=null,s=null,u=null,m=n.querySelectorAll(".contextMenuItem.debug");if(localStorage.wmpotifyDebugMode){u=n.querySelectorAll(".contextMenuItem:not([data-hidden])");for(let f of m)f instanceof HTMLElement&&(f.style.display="")}else{u=n.querySelectorAll(".contextMenuItem:not([data-hidden]):not(.debug)");for(let f of m)f instanceof HTMLElement&&(f.style.display="none")}if(n.dispatchEvent(this.beforeMenuOpenEvent),o)n.dataset.openStandalone="true";else{if(l){if(this.menuHierarchy[n.dataset.submenuOf||""].length>1)for(let E of this.menuHierarchy[n.dataset.submenuOf||""])E!==e&&this.closeMenu(E);if(i=document.getElementById(n.dataset.submenuOf+"MenuBg"),!i||i.style.display==="none")return;let f=Array.from(i.querySelectorAll(".contextMenuItem")).findIndex(E=>E.dataset.submenu===e);if(s=i.querySelectorAll(".contextMenuItem")[f],s.classList.contains("disabled"))return}else for(let f of this.menuOrder)f!==e&&document.getElementById(f+"MenuBg").style.display==="block"&&this.closeMenu(f);delete n.dataset.openStandalone}n.style.animation="";for(let f of u||[])f instanceof HTMLElement&&delete f.dataset.active;if(o)o.top&&(n.style.top=o.top),o.left&&(n.style.left=o.left),o.right&&(n.style.right=o.right),o.bottom&&(n.style.bottom=o.bottom);else{let f="",E=0;l&&i&&s&&(f=(i.offsetTop+s.offsetTop).toString(),E=i.offsetLeft+i.offsetWidth-6),n.style.top=f+"px",n.style.left=E+"px"}n.style.display="block";let p=this.calcMenuWidth(e);n.style.width=p+")",n.style.minWidth="0",r.style.width=p+(["aero","10",void 0].includes(localStorage.wmpotifyControlStyle)?" - 2px)":")"),n.style.height=this.calcMenuHeight(e)+"px",o||l&&s&&(s.dataset.active="true"),n.focus(),this.openedMenu=n,document.addEventListener("keydown",this.boundMenuNavigationHandler)}closeMenu(e){let o=document.getElementById(e+"MenuBg"),n=!!o.dataset.openStandalone,r=!!o.dataset.submenuOf&&!n;if(r&&this.shouldNotCloseSubmenu)return;let l,i;if(!n&&r){l=document.getElementById(o.dataset.submenuOf+"MenuBg");let s=Array.from(l.querySelectorAll(".contextMenuItem")).findIndex(u=>u.dataset.submenu===e);i=l.querySelectorAll(".contextMenuItem")[s]}this.submenuCloseTimer&&clearTimeout(this.submenuCloseTimer),o.style.display="none",n?delete o.dataset.openStandalone:r&&delete i.dataset.active,o.dispatchEvent(this.afterMenuCloseEvent),r&&l.style.display!=="none"?(l.focus(),this.openedMenu=l):(this.openedMenu=null,document.removeEventListener("keydown",this.boundMenuNavigationHandler))}delayedCloseMenu(e){this.submenuCloseTimer=setTimeout(()=>{this.closeMenu(e)},300)}menuNavigationHandler(e){if(!this.openedMenu)return;let o;localStorage.wmpotifyDebugMode?o=this.openedMenu.querySelectorAll(".contextMenuItem"):o=this.openedMenu.querySelectorAll(".contextMenuItem:not(.debug)");let n=this.openedMenu.querySelector(".contextMenuItem[data-active]"),r=Array.from(o).indexOf(n),l;switch(this.openedMenu.dataset.submenuOf&&(l=document.getElementById(this.openedMenu.dataset.submenuOf+"MenuBg")?.querySelector(".contextMenuItem[data-active]")),this.handlingKeyEvent=!0,this.openedMenu.style.animation="none",e.key){case"Escape":this.mouseOverMenu=!1,this.openedMenu.blur();break;case"ArrowUp":n&&n instanceof HTMLElement?(delete n.dataset.active,r>0?o[r-1].dataset.active="true":o[o.length-1].dataset.active="true"):o[o.length-1].dataset.active="true";break;case"ArrowDown":n&&n instanceof HTMLElement?(delete n.dataset.active,r<o.length-1?o[r+1].dataset.active="true":o[0].dataset.active="true"):o[0].dataset.active="true";break;case"ArrowLeft":{if(this.openedMenu.dataset.submenuOf){this.closeMenu(this.openedMenu.id.slice(0,-6)),l.dataset.active="true";break}if(this.menuOrder.length===1)break;let s=this.menuOrder[(this.menuOrder.indexOf(this.openedMenu.id.slice(0,-6))+this.menuOrder.length-1)%this.menuOrder.length];this.closeMenu(this.openedMenu.id.slice(0,-6)),this.openMenu(s);let u=this.openedMenu.querySelector(".contextMenuItem");u.dataset.active="true";break}case"ArrowRight":{if(n&&n instanceof HTMLElement&&n.dataset.submenu){this.openMenu(n.dataset.submenu);let m=this.openedMenu.querySelector(".contextMenuItem");m.dataset.active="true";break}if(this.menuOrder.length===1)break;let s="";this.openedMenu.dataset.submenuOf?(s=this.menuOrder[(this.menuOrder.indexOf(this.openedMenu.dataset.submenuOf)+1)%this.menuOrder.length],this.closeMenu(this.openedMenu.id.slice(0,-6))):(s=this.menuOrder[(this.menuOrder.indexOf(this.openedMenu.id.slice(0,-6))+1)%this.menuOrder.length],this.closeMenu(this.openedMenu.id.slice(0,-6))),this.openMenu(s);let u=this.openedMenu.querySelector(".contextMenuItem");u.dataset.active="true";break}case"Enter":if(n&&n instanceof HTMLElement)n.click();else{this.openedMenu.blur();break}break;default:let i=this.openedMenu.getElementsByTagName("u");for(let s of i)if(e.key===s.textContent.toLowerCase()){s.parentElement?.click();break}}this.handlingKeyEvent=!1,e.preventDefault(),e.stopPropagation()}calcMenuWidth(e){let o=document.getElementById(e+"MenuBg");if(!o)return"200px";let n;localStorage.wmpotifyDebugMode?n=o.querySelectorAll(".contextMenuItem:not([data-hidden])"):n=o.querySelectorAll(".contextMenuItem:not([data-hidden]):not(.debug)"),o.style.minWidth="";let r=parseInt(getComputedStyle(o).minWidth)||0;return`calc(${Array.from(n).reduce((i,s)=>{let u=s.textContent,m=co(u);return Math.max(r,i,m)},0)}px + 4.5em`}calcMenuHeight(e){let o=document.getElementById(e+"MenuBg");if(!o)return 0;let n=o.querySelectorAll("hr"),r;localStorage.wmpotifyDebugMode?r=o.querySelectorAll(".contextMenuItem:not([data-hidden])"):r=o.querySelectorAll(".contextMenuItem:not([data-hidden]):not(.debug)");let l=r[0].offsetHeight,i=0;if(n.length>0){let u=getComputedStyle(n[0]);i=n[0].offsetHeight+parseFloat(u.marginTop)+parseFloat(u.marginBottom)}return Math.round(r.length*l+n.length*i)}};function K(t,e,o){let n=document.createElement("div");return n.id=t+"MenuBg",n.className="contextMenuBg",n.tabIndex=-1,n.style.display="none",n.innerHTML=`<div id="${t}Menu" class="contextMenu"></div>`,o&&(n.dataset.submenuOf=o),e.forEach(r=>{if(r.hr){let i=document.createElement("hr");n.querySelector(".contextMenu")?.appendChild(i);return}let l=document.createElement("div");l.className="contextMenuItem",r.text&&(r.args?l.innerHTML="<p>"+de(r.text,...r.args)+"</p>":l.innerHTML="<p>"+de(r.text)+"</p>"),r.classList&&l.classList.add(...r.classList),r.disabled&&l.classList.add("disabled"),r.hidden&&(l.dataset.hidden="true"),r.submenu&&(l.dataset.submenu=r.submenu,l.innerHTML+='<p class="submenuMark">\u23F5</p>'),r.noClose&&(l.dataset.noClose="true"),r.click&&l.addEventListener("click",r.click),n.querySelector(".contextMenu")?.appendChild(l)}),document.body.appendChild(n),{menuBg:n,menu:n.querySelector(".contextMenu"),menuItems:n.querySelectorAll(".contextMenuItem")}}var Tt=null;function co(t,e=getComputedStyle(document.documentElement).getPropertyValue("--menu-font")){let n=(Tt||(Tt=document.createElement("canvas"))).getContext("2d");return n?(n.font=e,n.measureText(t).width):0}var uo={"Friend Activity":"Friends"},Ye=class{tabsContainer;tabs;overflowButton;constructor(){let e=document.querySelector(".Root__globalNav");this.tabsContainer=document.createElement("div"),this.tabsContainer.id="wmpotify-tabs-container",e&&(e.insertBefore(this.tabsContainer,e.querySelector(".main-globalNav-searchSection")),e.dataset.wmpotifyTabsCreated="true");let o=document.querySelector('.custom-navlinks-scrollable_container div[role="presentation"] > button:has(#wmpotify-nowplaying-icon)');o||(o=document.createElement("button"),o.addEventListener("click",()=>{Spicetify.Config.custom_apps.includes("wmpvis")?Spicetify.Platform.History.push({pathname:"/wmpvis"}):ve()}),localStorage.wmpotifyNoWmpvis&&!Spicetify.Config.custom_apps.includes("wmpvis")&&(o.dataset.extraHidden="true")),this.tabs=[o],o.setAttribute("aria-label",a.TAB_NOW_PLAYING),o.dataset.identifier="now-playing",this.addTab(o);let n=document.querySelector(".main-globalNav-searchContainer > button");n&&(n.dataset.identifier="home",this.addTab(n),this.tabs.push(n));let r=document.querySelector(".main-globalNav-searchContainer div form button");r&&(r.dataset.identifier="search",r.addEventListener("click",g=>{Spicetify.Platform.History.push({pathname:"/search"}),g.preventDefault(),g.stopPropagation()}),this.addTab(r),this.tabs.push(r));let l=document.createElement("button");l.id="wmpotify-library-button",l.dataset.identifier="library",l.setAttribute("aria-label",a.TAB_LIBRARY),l.addEventListener("click",()=>{Spicetify.Platform.History.push({pathname:"/wmpotify-standalone-libx"})}),this.addTab(l),this.tabs.push(l);let i=document.querySelectorAll('.custom-navlinks-scrollable_container div[role="presentation"] > button');if(i.length>0)for(let g of i)this.addTab(g),this.tabs.push(g);else{let g=document.querySelector(".main-globalNav-historyButtonsContainer");if(g){let se=new MutationObserver(()=>{console.log("WMPotify: Handling late custom apps buttons mount");for(let ce of this.tabs)delete ce.dataset.hidden;let St=document.querySelectorAll('.custom-navlinks-scrollable_container div[role="presentation"] > button');if(St.length>0){for(let ce of St){if(ce.querySelector("#wmpotify-nowplaying-icon")){delete o.dataset.hidden;continue}this.addTab(ce),this.tabs.push(ce)}se.disconnect(),this.loadOrder()}});se.observe(g,{childList:!0,subtree:!0})}}let s=document.querySelectorAll(".main-topBar-topbarContentRight > .main-actionButtons > button");for(let g of s)g.dataset.restoreFocusKey==="buddy_feed"?g.dataset.identifier="buddy-feed":s.length===2&&(g.dataset.identifier="content-feed"),this.addTab(g),this.tabs.push(g);this.loadOrder();let u=[];for(let g of this.tabs)u.push({text:g.querySelector(".wmpotify-tab-label")?.textContent,click:()=>g.click()});K("wmpotifyTab",u),K("wmpotifyTabMenu",[{text:a.TAB_RESET_ORDER,click:()=>{localStorage.removeItem("wmpotifyTabOrder"),location.reload()}}]);let m=new W(["wmpotifyTab","wmpotifyTabMenu"]);this.overflowButton=document.createElement("button"),this.overflowButton.id="wmpotify-tabs-overflow-button";let p=document.querySelector("#wmpotify-title-bar")?"25px":"0";this.overflowButton.addEventListener("click",()=>{m.openMenu("wmpotifyTab",{top:p,left:this.overflowButton.getBoundingClientRect().left+"px"})}),this.tabsContainer.appendChild(this.overflowButton),this.tabsContainer.addEventListener("contextmenu",g=>{g.preventDefault(),m.openMenu("wmpotifyTabMenu",{top:g.clientY+"px",left:g.clientX+"px"})});let f=0;this.handleTabOverflow();let E=setInterval(()=>{this.handleTabOverflow(),f++>10&&clearInterval(E)},200);window.addEventListener("resize",this.handleTabOverflow.bind(this)),new ResizeObserver(this.handleTabOverflow.bind(this)).observe(this.tabsContainer),document.addEventListener("fullscreenchange",this.handleTabOverflow.bind(this));let b=document.querySelector(".main-topBar-topbarContentRight > button:last-child"),T=document.createElement("span");T.textContent=b?.getAttribute("aria-label")||"User",T.classList.add("wmpotify-user-label"),b?.appendChild(T);let _=document.createElement("div");_.id="wmpotify-search-container";let M=document.createElement("div");M.id="wmpotify-search-wrapper";let L=document.querySelector('.main-globalNav-searchContainer div form input[type="search"]');if(L){M.appendChild(L);let g=document.createElement("button");g.id="wmpotify-search-clear-button",g.setAttribute("aria-label","Clear search"),g.addEventListener("click",()=>{L.value="",L.focus(),Spicetify.Platform.History.push({pathname:"/search"})}),M.appendChild(g)}_.appendChild(M),e?.appendChild(_),e?.addEventListener("pointerdown",g=>{if(g.button===2){let se=g.target;if(se.closest("input")||se.closest("#wmpotify-tabs-container"))return;y.openSpotifyMenu()}});let le=getComputedStyle(document.documentElement).getPropertyValue("--right-sidebar-width");le&&document.documentElement.style.setProperty("--panel-width",le)}addTab(e){this.tabsContainer.appendChild(e);let o=document.createElement("span"),n=e.getAttribute("aria-label");o.textContent=uo[n]||n,o.classList.add("wmpotify-tab-label"),e.draggable=!0,e.addEventListener("dragstart",r=>{this.tabsContainer.classList.add("dragging"),r.dataTransfer.setData("text/plain",o.textContent),e.dataset.dragging=!0}),e.addEventListener("dragend",()=>{delete e.dataset.dragging,this.tabsContainer.classList.remove("dragging")}),e.addEventListener("dragover",r=>{r.preventDefault(),r.stopPropagation()}),e.addEventListener("drop",r=>{r.preventDefault(),r.stopPropagation();let l=this.tabs.find(i=>i.dataset.dragging);l&&(r.offsetX>e.getBoundingClientRect().width/2?this.tabsContainer.insertBefore(l,e.nextElementSibling):this.tabsContainer.insertBefore(l,e),this.tabs=Array.from(this.tabsContainer.querySelectorAll("button:not(#wmpotify-tabs-overflow-button)")),this.handleTabOverflow(),localStorage.wmpotifyTabOrder=this.getTabOrder())}),e.appendChild(o)}getTabOrder(){return this.tabs.map(e=>e.dataset.identifier||e.getAttribute("aria-label"))}loadOrder(){if(localStorage.wmpotifyTabOrder){let e=localStorage.wmpotifyTabOrder.split(",");for(let o of e){let n=this.tabs.find(r=>r.dataset.identifier===o||r.getAttribute("aria-label")===o);n&&this.tabsContainer.appendChild(n)}this.tabs=Array.from(this.tabsContainer.querySelectorAll("button")),this.overflowButton&&this.tabsContainer.appendChild(this.overflowButton)}}handleTabOverflow(){let e=document.querySelector(".main-globalNav-historyButtons")?.getBoundingClientRect().right||0,o=window.innerWidth-(document.querySelector(".main-topBar-topbarContentRight")?.getBoundingClientRect().left||0),n=160,r=0;for(;window.innerWidth-e-o-n<this.tabsContainer.getBoundingClientRect().width&&r<this.tabs.length;)this.tabs[this.tabs.length-1-r++].dataset.hidden="true";for(r=document.querySelectorAll("#wmpotify-tabs-container button[data-hidden]").length;r>0&&window.innerWidth-e-o-n>this.tabsContainer.getBoundingClientRect().width;)delete this.tabs[this.tabs.length-r--].dataset.hidden;this.overflowButton.style.display=r>0?"block":""}},vt=Ye;function Pe(t,e=!1){if(!t||isNaN(t))return"00:00";let o=String(Math.floor(t/1e3)),n=String(Math.floor(parseInt(o)/60));if(o=String(parseInt(o)%60).padStart(2,"0"),parseInt(n)<60)return e&&(n=String(n).padStart(2,"0")),`${n}:${o}`;let r=String(Math.floor(parseInt(n)/60));return n=String(parseInt(n)%60).padStart(2,"0"),e&&(r=String(r).padStart(2,"0")),`${r}:${n}:${o}`}function mo(t,e){let o=setTimeout(e,t);return{stop:function(){return clearTimeout(o)}}}function po(t,e){let o=setInterval(e,t);return{stop:function(){return clearInterval(o)}}}function Ot(t){return/in/.test(document.readyState)?mo(10,function(){return Ot(t)}):t()}var O={},Ct=["Helvetica","Lucida Grande","Lucida Sans","Tahoma","Arial","Geneva","Monaco","Verdana","Microsoft Sans Serif","Trebuchet MS","Courier New","Times New Roman","Courier","Lucida Bright","Lucida Sans Typewriter","URW Chancery L","Comic Sans MS","Georgia","Palatino Linotype","Lucida Sans Unicode","Times","Century Schoolbook L","URW Gothic L","Franklin Gothic Medium","Lucida Console","Impact","URW Bookman L","Helvetica Neue","Nimbus Sans L","URW Palladio L","Nimbus Mono L","Nimbus Roman No9 L","Arial Black","Sylfaen","MV Boli","Estrangelo Edessa","Tunga","Gautami","Raavi","Mangal","Shruti","Latha","Kartika","Vrinda","Arial Narrow","Century Gothic","Garamond","Book Antiqua","Bookman Old Style","Calibri","Cambria","Candara","Corbel","Monotype Corsiva","Cambria Math","Consolas","Constantia","MS Reference Sans Serif","MS Mincho","Segoe UI","Arial Unicode MS","Tempus Sans ITC","Kristen ITC","Mistral","Meiryo UI","Juice ITC","Papyrus","Bradley Hand ITC","French Script MT","Malgun Gothic","Microsoft YaHei","Gisha","Leelawadee","Microsoft JhengHei","Haettenschweiler","Microsoft Himalaya","Microsoft Uighur","MoolBoran","Jokerman","DFKai-SB","KaiTi","SimSun-ExtB","Freestyle Script","Vivaldi","FangSong","MingLiU-ExtB","MingLiU_HKSCS","MingLiU_HKSCS-ExtB","PMingLiU-ExtB","Copperplate Gothic Light","Copperplate Gothic Bold","Copperplate Gothic","Franklin Gothic Book","Maiandra GD","Perpetua","Eras Demi ITC","Felix Titling","Franklin Gothic Demi","Pristina","Edwardian Script ITC","OCR A Extended","OCR A","Engravers MT","Eras Light ITC","Franklin Gothic Medium Cond","Rockwell Extra Bold","Rockwell","Curlz MT","Blackadder ITC","Franklin Gothic Heavy","Franklin Gothic Demi Cond","Lucida Handwriting","Segoe UI Light","Segoe UI Semibold","Lucida Calligraphy","Cooper Black","Viner Hand ITC","Britannic Bold","Wide Latin","Old English Text MT","Broadway","Footlight MT Light","Harrington","Snap ITC","Onyx","Playbill","Bauhaus 93","Baskerville Old Face","Algerian","Matura MT Script Capitals","Stencil","Batang","Chiller","Harlow Solid Italic","Kunstler Script","Bernard MT Condensed","Informal Roman","Vladimir Script","Bell MT","Colonna MT","High Tower Text","Californian FB","Ravie","Segoe Script","Brush Script MT","SimSun","Arial Rounded MT Bold","Berlin Sans FB","Centaur","Niagara Solid","Showcard Gothic","Niagara Engraved","Segoe Print","Gabriola","Gill Sans MT","Iskoola Pota","Calisto MT","Script MT Bold","Century Schoolbook","Berlin Sans FB Demi","Magneto","Arabic Typesetting","DaunPenh","Mongolian Baiti","DokChampa","Euphemia","Kalinga","Microsoft Yi Baiti","Nyala","Bodoni MT Poster Compressed","Goudy Old Style","Imprint MT Shadow","Gill Sans MT Condensed","Gill Sans Ultra Bold","Palace Script MT","Lucida Fax","Gill Sans MT Ext Condensed Bold","Goudy Stout","Eras Medium ITC","Rage Italic","Rockwell Condensed","Castellar","Eras Bold ITC","Forte","Gill Sans Ultra Bold Condensed","Perpetua Titling MT","Agency FB","Tw Cen MT","Gigi","Tw Cen MT Condensed","Aparajita","Gloucester MT Extra Condensed","Tw Cen MT Condensed Extra Bold","PMingLiU","Bodoni MT","Bodoni MT Black","Bodoni MT Condensed","MS Gothic","GulimChe","MS UI Gothic","MS PGothic","Gulim","MS PMincho","BatangChe","Dotum","DotumChe","Gungsuh","GungsuhChe","MingLiU","NSimSun","SimHei","DejaVu Sans","DejaVu Sans Condensed","DejaVu Sans Mono","DejaVu Serif","DejaVu Serif Condensed","Eurostile","Matisse ITC","Bitstream Vera Sans Mono","Bitstream Vera Sans","Staccato222 BT","Bitstream Vera Serif","Broadway BT","ParkAvenue BT","Square721 BT","Calligraph421 BT","MisterEarl BT","Cataneo BT","Ruach LET","Rage Italic LET","La Bamba LET","Blackletter686 BT","John Handy LET","Scruff LET","Westwood LET","Yu Gothic","Yu Gothic UI"],pe=[],ze=!1,Mt=!1,ee=document.createElement("div");ee.id="font-detective";var Ke=class{name;type;style;constructor(e,o,n){this.name=e,this.type=o,this.style=n}toString(){return'"'+this.name.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}},Pt=(function(){let t=["monospace","sans-serif","serif"],e=document.createElement("span");e.innerHTML="mmmmmmmmmmlli",e.style.fontSize="72px";let o={},n={};return{init:function(){document.body.appendChild(ee);let r=[];for(let l=0,i=t.length;l<i;l++){let s=t[l];e.style.fontFamily=s,ee.appendChild(e),o[s]=e.offsetWidth,n[s]=e.offsetHeight,r.push(ee.removeChild(e))}return r},check:function(r){for(let l=0,i=t.length;l<i;l++){let s=t[l];e.style.fontFamily=`${r}, ${s}`,ee.appendChild(e);let u=e.offsetWidth!==o[s]||e.offsetHeight!==n[s];if(ee.removeChild(e),u)return!0}return!1}}})(),Xe=function(){if(!Mt)return Mt=!0,O.incomplete=!0,Ot(()=>fo((function(){let t=[];for(let e=0,o=Ct.length;e<o;e++){let n=Ct[e];t.push(new Ke(n))}return t})()))},fo=function(t){Pt.init();let e=0,o=po(20,function(){for(let n=0;n<=5;n++){let r=t[e];if(Pt.check(r)){pe.push(r);let i=O.eachCallbacks;for(let s=0,u=i.length;s<u;s++){let m=i[s];m(r)}}if(e++,e>=t.length){o.stop();let i=O.allCallbacks;for(let s=0,u=i.length;s<u;s++){let m=i[s];m(pe)}O.allCallbacks=[],O.eachCallbacks=[],ze=!0;return}}});return o};O.preload=Xe;O.each=function(t){for(let e=0,o=pe.length;e<o;e++){let n=pe[e];t(n)}if(!ze)return O.eachCallbacks.push(t),Xe()};O.eachCallbacks=[];O.all=function(t){return ze?t(pe):(O.allCallbacks.push(t),Xe())};O.allCallbacks=[];var je=O;var Qe=document.createElement("canvas");Qe.width=1;Qe.height=1;var fe=Qe.getContext("2d",{alpha:!1,willReadFrequently:!0});function d(t,e,o="#EEF3FA"){return fe?(fe.fillStyle=o,fe.filter=`hue-rotate(${t}deg) saturate(${e}%)`,fe.fillRect(0,0,1,1),"rgba("+fe.getImageData(0,0,1,1).data+")"):o}function k(t,e,o,n){if(!t||!e){document.documentElement.style.setProperty("--spice-main","#EEF3FA"),document.documentElement.style.removeProperty("--wmpotify-tint-hue"),document.documentElement.style.removeProperty("--wmpotify-tint-sat"),Nt();return}window.matchMedia("(forced-colors: active)").matches&&(o=!1,n=!1);let l=document.querySelector(".main-nowPlayingBar-nowPlayingBar");if(l&&(o?l.classList.add("tinted"):l.classList.remove("tinted")),document.documentElement.style.setProperty("--spice-main",d(t,e)),document.documentElement.style.setProperty("--wmpotify-tint-hue",t+"deg"),document.documentElement.style.setProperty("--wmpotify-tint-sat",e/100+""),n){document.documentElement.dataset.wmpotifyTintMore="true";let i=d(t,e,"#0067d0");if(document.documentElement.style.setProperty("--spice-button",i),document.documentElement.style.setProperty("--spice-button-active",i),document.documentElement.style.setProperty("--spice-accent",i),document.documentElement.style.setProperty("--wmp11-text-hilight",i),document.documentElement.style.setProperty("--wmp11-config-link-color",i),document.documentElement.style.setProperty("--hilight",i),document.documentElement.style.setProperty("--hot-tracking-color",i),document.documentElement.style.setProperty("--menu-hilight",i),document.documentElement.style.setProperty("--wmp11-header-line",d(t,e,"#a6b9dd")),document.documentElement.dataset.wmpotifyDarkMode)document.documentElement.style.setProperty("--item-hover-background",`linear-gradient(to bottom,${d(t,e,"#272f3a")} 0%,${d(t,e,"#272f39")} 10%,${d(t,e,"#272e38")} 20%,${d(t,e,"#272d36")} 30%,${d(t,e,"#272e34")} 40%,${d(t,e,"#272c33")} 50%,${d(t,e,"#272b31")} 60%,${d(t,e,"#272c30")} 70%,${d(t,e,"#272a2e")} 80%,${d(t,e,"#272b2d")} 90%,${d(t,e,"#27282b")} 100%)`),document.documentElement.style.setProperty("--item-selection-background",`linear-gradient(to bottom,${d(t,e,"#2d425b")} 0%,${d(t,e,"#2d425b")} 10%,${d(t,e,"#2d3f58")} 20%,${d(t,e,"#2d3f55")} 30%,${d(t,e,"#2d3d51")} 40%,${d(t,e,"#2d3c4f")} 50%,${d(t,e,"#2d3c4c")} 60%,${d(t,e,"#2d3949")} 70%,${d(t,e,"#2d3946")} 80%,${d(t,e,"#2d3643")} 90%,${d(t,e,"#2d3440")} 100%)`),document.documentElement.style.setProperty("--item-selection-hover-background",`linear-gradient(to bottom,${d(t,e,"#2e496a")} 0%,${d(t,e,"#2e496a")} 10%,${d(t,e,"#2e4667")} 20%,${d(t,e,"#2e4664")} 30%,${d(t,e,"#2e435e")} 40%,${d(t,e,"#2e435e")} 50%,${d(t,e,"#2e435b")} 60%,${d(t,e,"#2e4058")} 70%,${d(t,e,"#2e4055")} 80%,${d(t,e,"#2e3d52")} 90%,${d(t,e,"#2e3d4f")} 100%)`),document.documentElement.style.setProperty("--item-hover-border",d(t,e,"#2f4d73")),document.documentElement.style.setProperty("--item-active-border",d(t,e,"#5176ac")),document.documentElement.style.setProperty("--item-selection-hover-border",d(t,e,"#6286b5")),document.documentElement.style.setProperty("--menu-item-hover-background",`linear-gradient(to bottom,${d(t,e,"#303b4499")},${d(t,e,"#30383dcc")} 75%,${d(t,e,"#30373ccc")})`),document.documentElement.style.setProperty("--menu-item-hover-border-color",d(t,e,"#375273")),document.documentElement.style.removeProperty("--wmp11-separator-shadow"),document.documentElement.style.removeProperty("--wmp11-separator-light"),document.documentElement.style.setProperty("--wmp11-header-text",d(t,e,"#abd5fd")),document.documentElement.style.removeProperty("--button-border-color-inner-focus"),document.documentElement.style.removeProperty("--menu-item-hover-color"),localStorage.wmpotifyControlStyle!=="10"?(document.documentElement.style.setProperty("--button-face-hover",d(t,e,"#484e60")),document.documentElement.style.setProperty("--button-face-active",d(t,e,"#384058")),document.documentElement.style.setProperty("--button-shade-light-hovered",d(t,e,"#3b4255")),document.documentElement.style.setProperty("--button-shade-light-active",d(t,e,"#2a344d")),document.documentElement.style.setProperty("--button-shade-dark-hovered",d(t,e,"#366685")),document.documentElement.style.setProperty("--button-shade-top-active",d(t,e,"#4b5166")),document.documentElement.style.setProperty("--button-shade-bottom-active",d(t,e,"#2a5579")),document.documentElement.style.setProperty("--button-border-color-default",d(t,e,"#9fa7bf")),document.documentElement.style.setProperty("--button-border-color-hovered",d(t,e,"#9ea6be")),document.documentElement.style.setProperty("--button-border-color-active",d(t,e,"#8e96ae")),document.documentElement.style.setProperty("--textbox-border-color-focused",d(t,e,"#506a81")),document.documentElement.style.setProperty("--textbox-border-top-color-focused",d(t,e,"#6aa9db")),document.documentElement.style.setProperty("--menu-icon-background-border-color",d(t,e,"#32537c")),document.documentElement.style.setProperty("--menu-icon-checkmark-color",d(t,e,"#aac9fe")),document.documentElement.style.setProperty("--menu-icon-radio-dot-outer-color",d(t,e,"#b8c6e2")),document.documentElement.style.setProperty("--menu-icon-radio-dot-inner-color",d(t,e,"#d5d4ea")),document.documentElement.style.setProperty("--menu-icon-radio-dot-border-color",d(t,e,"#9fabca")),document.documentElement.style.setProperty("--menu-item-hover-border-color",d(t,e,"#375273"))):(document.documentElement.style.removeProperty("--button-face-hover"),document.documentElement.style.removeProperty("--button-face-active"),document.documentElement.style.removeProperty("--button-shade-light-hovered"),document.documentElement.style.removeProperty("--button-shade-light-active"),document.documentElement.style.removeProperty("--button-shade-dark-hovered"),document.documentElement.style.removeProperty("--button-shade-top-active"),document.documentElement.style.removeProperty("--button-shade-bottom-active"),document.documentElement.style.removeProperty("--button-border-color-default"),document.documentElement.style.removeProperty("--button-border-color-hovered"),document.documentElement.style.removeProperty("--button-border-color-active"),document.documentElement.style.removeProperty("--textbox-border-color-focused"),document.documentElement.style.removeProperty("--textbox-border-top-color-focused"),document.documentElement.style.removeProperty("--menu-icon-background-border-color"),document.documentElement.style.removeProperty("--menu-icon-checkmark-color"),document.documentElement.style.removeProperty("--menu-icon-radio-dot-outer-color"),document.documentElement.style.removeProperty("--menu-icon-radio-dot-inner-color"),document.documentElement.style.removeProperty("--menu-icon-radio-dot-border-color"),document.documentElement.style.removeProperty("--menu-item-hover-border-color"));else if(document.documentElement.style.setProperty("--item-hover-background",`linear-gradient(to bottom,${d(t,e,"#ebf4fc")} 0%,${d(t,e,"#eaf4fc")} 10%,${d(t,e,"#e9f3fc")} 20%,${d(t,e,"#e8f3fc")} 30%,${d(t,e,"#e7f2fc")} 40%,${d(t,e,"#e5f2fc")} 50%,${d(t,e,"#e2f1fc")} 60%,${d(t,e,"#e1f1fc")} 70%,${d(t,e,"#e0f0fc")} 80%,${d(t,e,"#dff0fc")} 90%,${d(t,e,"#def0fc")} 100%)`),document.documentElement.style.setProperty("--item-selection-background",`linear-gradient(to bottom,${d(t,e,"#edf5fd")} 0%,${d(t,e,"#ebf5fd")} 10%,${d(t,e,"#e9f4fd")} 20%,${d(t,e,"#e6f3fd")} 30%,${d(t,e,"#e4f3fd")} 40%,${d(t,e,"#e1f1fd")} 50%,${d(t,e,"#daeefc")} 60%,${d(t,e,"#d8eefc")} 70%,${d(t,e,"#d5edfc")} 80%,${d(t,e,"#d3ecfc")} 90%,${d(t,e,"#d2ecfc")} 100%)`),document.documentElement.style.setProperty("--item-selection-hover-background",`linear-gradient(to bottom,${d(t,e,"#e4f3fd")} 0%,${d(t,e,"#e2f2fd")} 10%,${d(t,e,"#dff0fc")} 20%,${d(t,e,"#dceffc")} 30%,${d(t,e,"#daeefc")} 40%,${d(t,e,"#d4ecfb")} 50%,${d(t,e,"#cce9fa")} 60%,${d(t,e,"#cae8fa")} 70%,${d(t,e,"#c6e7fa")} 80%,${d(t,e,"#c4e5fa")} 90%,${d(t,e,"#c2e5fa")} 100%)`),document.documentElement.style.setProperty("--item-hover-border",d(t,e,"#cde9f8")),document.documentElement.style.setProperty("--item-active-border",d(t,e,"#95dbfd")),document.documentElement.style.setProperty("--item-selection-hover-border",d(t,e,"#b2e3fb")),document.documentElement.style.setProperty("--menu-item-hover-background",`linear-gradient(to bottom,#fff9,${d(t,e,"#e6ecf5cc")} 90%,#fffc)`),document.documentElement.style.setProperty("--menu-item-hover-border-color",d(t,e,"#b8d6fb")),document.documentElement.style.setProperty("--wmp11-separator-shadow",d(t,e,"#a9b7c9")),document.documentElement.style.setProperty("--wmp11-separator-light",d(t,e,"#f2f7fc")),document.documentElement.style.setProperty("--wmp11-header-text",d(t,e,"#003399")),localStorage.wmpotifyControlStyle==="10"){document.documentElement.style.setProperty("--button-face-hover",d(t,e,"#e5f1fb")),document.documentElement.style.setProperty("--button-face-active",d(t,e,"#cce4f7"));let s=d(t,e,"#0078d7");document.documentElement.style.setProperty("--button-border-color-hovered",s),document.documentElement.style.setProperty("--button-border-color-active",d(t,e,"#005499")),document.documentElement.style.setProperty("--button-border-color-inner-focus",s),document.documentElement.style.setProperty("--textbox-border-color-focused",s),document.documentElement.style.setProperty("--menu-item-hover-color",d(t,e,"#91c9f7"))}else{document.documentElement.style.removeProperty("--button-border-color-inner-focus"),document.documentElement.style.removeProperty("--menu-item-hover-color"),document.documentElement.style.setProperty("--button-face-hover",d(t,e,"#eaf6fd")),document.documentElement.style.setProperty("--button-face-active",d(t,e,"#c4e5f6"));let s=d(t,e,"#bee6fd"),u=d(t,e,"#98d1ef");document.documentElement.style.setProperty("--button-shade-light-hovered",s),document.documentElement.style.setProperty("--button-shade-light-active",u),document.documentElement.style.setProperty("--button-shade-dark-hovered",d(t,e,"#a7d9f5")),document.documentElement.style.setProperty("--button-shade-top-active",d(t,e,"#e5f4fc")),document.documentElement.style.setProperty("--button-shade-bottom-active",d(t,e,"#68b3db")),document.documentElement.style.setProperty("--button-border-color-default",d(t,e,"#5586a3")),document.documentElement.style.setProperty("--button-border-color-hovered",d(t,e,"#3c7fb1")),document.documentElement.style.setProperty("--button-border-color-active",d(t,e,"#6d91ab")),document.documentElement.style.setProperty("--textbox-border-color-focused",s),document.documentElement.style.setProperty("--textbox-border-top-color-focused",u),document.documentElement.style.setProperty("--menu-icon-background-border-color",d(t,e,"#b3d3f9")),document.documentElement.style.setProperty("--menu-icon-checkmark-color",d(t,e,"#0c12a1")),document.documentElement.style.setProperty("--menu-icon-radio-dot-outer-color",d(t,e,"#333583")),document.documentElement.style.setProperty("--menu-icon-radio-dot-border-color",d(t,e,"#1a1490"))}localStorage.wmpotifyControlStyle!=="10"?(document.documentElement.style.setProperty("--checkbox-hover-background",d(t,e,"#e9f7fe")),document.documentElement.style.setProperty("--checkbox-hover-shadow","inset 0 0 0 1px "+d(t,e,"#def9fa")+",inset 1px 1px 0 1px "+d(t,e,"#79c6f9")+",inset -1px -1px 0 1px "+d(t,e,"#c6e9fc")+",inset 3px 3px 6px "+d(t,e,"#b1dffd")),document.documentElement.style.setProperty("--checkbox-checkmark-color",d(t,e,"#4a5f97"))):(document.documentElement.style.setProperty("--checkbox-hover-border",d(t,e,"#0078d7")),document.documentElement.style.setProperty("--checkbox-active-border",d(t,e,"#005499")),document.documentElement.style.setProperty("--checkbox-active-background",d(t,e,"#cce4f7")))}else delete document.documentElement.dataset.wmpotifyTintMore,Nt()}function Nt(){document.documentElement.style.removeProperty("--spice-button"),document.documentElement.style.removeProperty("--spice-button-active"),document.documentElement.style.removeProperty("--spice-accent"),document.documentElement.style.removeProperty("--wmp11-text-hilight"),document.documentElement.style.removeProperty("--wmp11-config-link-color"),document.documentElement.style.removeProperty("--hilight"),document.documentElement.style.removeProperty("--hot-tracking-color"),document.documentElement.style.removeProperty("--menu-hilight"),document.documentElement.style.removeProperty("--wmp11-header-line"),document.documentElement.style.removeProperty("--item-hover-background"),document.documentElement.style.removeProperty("--item-selection-background"),document.documentElement.style.removeProperty("--item-selection-hover-background"),document.documentElement.style.removeProperty("--item-hover-border"),document.documentElement.style.removeProperty("--item-active-border"),document.documentElement.style.removeProperty("--item-selection-hover-border"),document.documentElement.style.removeProperty("--menu-item-hover-background"),document.documentElement.style.removeProperty("--menu-item-hover-border-color"),document.documentElement.style.removeProperty("--wmp11-separator-shadow"),document.documentElement.style.removeProperty("--wmp11-separator-light"),document.documentElement.style.removeProperty("--wmp11-header-text"),document.documentElement.style.removeProperty("--button-border-color-inner-focus"),document.documentElement.style.removeProperty("--menu-item-hover-color"),document.documentElement.style.removeProperty("--button-face-hover"),document.documentElement.style.removeProperty("--button-face-active"),document.documentElement.style.removeProperty("--button-shade-light-hovered"),document.documentElement.style.removeProperty("--button-shade-light-active"),document.documentElement.style.removeProperty("--button-shade-dark-hovered"),document.documentElement.style.removeProperty("--button-shade-top-active"),document.documentElement.style.removeProperty("--button-shade-bottom-active"),document.documentElement.style.removeProperty("--button-border-color-default"),document.documentElement.style.removeProperty("--button-border-color-hovered"),document.documentElement.style.removeProperty("--button-border-color-active"),document.documentElement.style.removeProperty("--textbox-border-color-focused"),document.documentElement.style.removeProperty("--textbox-border-top-color-focused"),document.documentElement.style.removeProperty("--menu-icon-background-border-color"),document.documentElement.style.removeProperty("--menu-icon-checkmark-color"),document.documentElement.style.removeProperty("--menu-icon-radio-dot-outer-color"),document.documentElement.style.removeProperty("--menu-icon-radio-dot-inner-color"),document.documentElement.style.removeProperty("--menu-icon-radio-dot-border-color"),document.documentElement.style.removeProperty("--checkbox-hover-background"),document.documentElement.style.removeProperty("--checkbox-hover-shadow"),document.documentElement.style.removeProperty("--checkbox-checkmark-color"),document.documentElement.style.removeProperty("--checkbox-hover-border"),document.documentElement.style.removeProperty("--checkbox-active-border"),document.documentElement.style.removeProperty("--checkbox-active-background")}var Rt=window.matchMedia("(prefers-color-scheme: dark)"),It=new MutationObserver(t=>{for(let e of t)if(e.type==="childList"){let o=Array.from(e.addedNodes);if((r=>r.some(l=>l.nodeType===Node.ELEMENT_NODE&&l.matches(".marketplaceCSS.marketplaceScheme")))(o)&&(Spicetify.Config.color_scheme==="dark"?document.documentElement.dataset.wmpotifyDarkMode="true":delete document.documentElement.dataset.wmpotifyDarkMode,localStorage.wmpotifyTintColor)){let[r,l,i,s]=localStorage.wmpotifyTintColor.split(",");k(r,l,i,s)}}});function At(t){if(t.matches?document.documentElement.dataset.wmpotifyDarkMode="true":delete document.documentElement.dataset.wmpotifyDarkMode,localStorage.wmpotifyTintColor){let[e,o,n,r]=localStorage.wmpotifyTintColor.split(",");k(e,o,n,r)}}var yo={addSystemDarkModeListener:function(){Rt.addEventListener("change",At)},removeSystemDarkModeListener:function(){Rt.removeEventListener("change",At)},addMarketplaceSchemeObserver:function(){It.observe(document.body,{childList:!0})},removeMarketplaceSchemeObserver:function(){It.disconnect()}},D=yo;var Eo={getItem(t){let e=Spicetify._platform?.initialUser?.username;if(!e)return null;let o=localStorage.getItem(e+":"+t);return isNaN(Number(o))?o:o===null?null:parseFloat(o)},setItem(t,e){let o=Spicetify._platform?.initialUser?.username;o&&localStorage.setItem(o+":"+t,e.toString())},removeItem(t){let e=Spicetify._platform?.initialUser?.username;e&&localStorage.removeItem(e+":"+t)}},F=Eo;var w,N=[],v={},H=new MutationObserver(ot),xt=new MutationObserver(So),R=!1,tt=!1,Ze=[],Je=[],C=x("1.2.58")>=0?"left":"ylx",j=x("1.2.58")>=0?"left-sidebar-expanded-state-width":"ylx-expanded-state-nav-bar-width",ho={async init(){if(document.querySelector("#wmpotify-libx-sidebar"))return!1;Object.keys(Spicetify.Platform.Translations).filter(l=>l.startsWith("shared.library.filter.")).forEach(l=>{let i=Spicetify.Platform.Translations[l];v[l.split(".").pop()]={loc_id:l,value:i}}),v.podcasts={loc_id:"search.title.shows",value:Spicetify.Platform.Translations["search.title.shows"]},N.length===0&&(N.push({identifier:"playlist",localized:v.playlist.value,elem:null}),N.push({identifier:"album",localized:v.album.value,elem:null}),N.push({identifier:"artist",localized:v.artist.value,elem:null}));let e=document.querySelector(".main-yourLibraryX-libraryContainer"),o=document.createElement("div");o.id="wmpotify-libx-header",e.insertAdjacentElement("afterbegin",o);let n=document.createElement("div");n.id="wmpotify-libx-sidebar",document.querySelector(".main-yourLibraryX-libraryItemContainer").insertAdjacentElement("afterbegin",n),await go(),e.dataset.treegrid=!!e.querySelector('ul[role="treegrid"]'),e.dataset.gridcell=!!e.querySelector('div[role="gridcell"]'),Spicetify.Platform.LocalStorageAPI._events.addListener("update",({data:l})=>{l.key==="items-view"&&(e.dataset.treegrid=!!e.querySelector('ul[role="treegrid"]'),e.dataset.gridcell=!!e.querySelector('div[role="gridcell"]'))}),w=document.querySelector('.main-yourLibraryX-filterArea .search-searchCategory-categoryGrid [role="presentation"]');let r=w.querySelector('div[role="listbox"]');return r&&(w=r),ot(),H.observe(w,{childList:!0}),xt.observe(document.querySelector(".main-yourLibraryX-filterArea"),{childList:!0}),window.addEventListener("resize",kt),!0},uninit(){document.querySelector("#wmpotify-libx-header")?.remove(),document.querySelector("#wmpotify-libx-sidebar")?.remove(),H.disconnect(),xt.disconnect(),window.removeEventListener("resize",kt)},go(t){t||(t=Spicetify.Platform.History.location.pathname.split("/").slice(2)),t[0]!==void 0&&bo(t)}};function et(){let t=document.querySelector("#wmpotify-libx-header");t.innerHTML="";let e=document.createElement("div");e.classList.add("wmpotify-libx-header-root-icon"),e.classList.add("wmpotify-toolbar-button"),t.appendChild(e);let o=document.createElement("button");o.classList.add("wmpotify-libx-header-root-text"),o.classList.add("wmpotify-toolbar-button"),o.textContent=a.LIBX_HEADER_ROOT,o.addEventListener("click",X),t.appendChild(o);let n=nt();if(n.forEach((r,l)=>{let i=document.createElement("button");i.classList.add("wmpotify-libx-header-category-text"),i.classList.add("wmpotify-toolbar-button"),i.textContent=r,i.addEventListener("click",async()=>{if(!i.nextElementSibling)return;R&&(ye(),await Ee()),H.disconnect();let s=N.find(u=>u.localized===r);if(l===0)X(),await G();else{if(!s)return;let u=N.find(m=>m.localized===n[l-1]);(!Ft(u)||!document.contains(s.elem))&&(te()||(X(),await G()),u.elem.click(),await G())}z(s),s.elem.click(),H.observe(w,{childList:!0})}),t.appendChild(i)}),R){let r=(document.querySelector(".main-yourLibraryX-collapseButton h2")||document.querySelector(".main-yourLibraryX-collapseButton [class*=encore-text]")).textContent,l=document.createElement("button");l.classList.add("wmpotify-libx-header-category-text"),l.classList.add("wmpotify-toolbar-button"),l.textContent=r,t.appendChild(l)}}function ot(){R=document.querySelector(".main-yourLibraryX-collapseButton").childElementCount>1;let t=nt(!0);if(R){let n=Spicetify.Platform.LocalStorageAPI.getItem("opened-folder-uri");t.push(n)}if(!tt){let n="/wmpotify-standalone-libx/"+t.join("/");Spicetify.Platform.History.location.pathname==="/wmpotify-standalone-libx"?Spicetify.Platform.History.location.pathname=n:Spicetify.Platform.History.location.pathname!==n&&Spicetify.Platform.History.push({pathname:"/wmpotify-standalone-libx/"+t.join("/")})}if(R){et();return}let e=!w.querySelector('button[class*="ChipClear"]:first-child, div[role="option"]:has(div[class*="ChipClear"]):first-child'),o=Array.from(w.querySelectorAll('button, div[role="option"]'));if(e)o.forEach((n,r)=>{let l={};l.localized=n.textContent,l.identifier=Object.keys(v).find(i=>v[i].value===l.localized),l.elem=n,N.some(i=>i.localized===l.localized)||N.push(l)});else{o.shift();let n=o[0].textContent,r=N.find(l=>l.localized===n);if(!r){let l={};l.localized=n,l.identifier=Object.keys(v).find(i=>v[i].value===l.localized),l.elem=o[0],N.push(l),r=l}r.children||(r.children=[]),o.shift(),o.forEach((l,i)=>{let s={};s.localized=l.textContent,s.identifier=Object.keys(v).find(u=>v[u].value===s.localized),s.elem=l,r.children.some(u=>u.localized===s.localized)||r.children.push(s)})}et(),Ht()}function So(){H.disconnect(),w=document.querySelector('.main-yourLibraryX-filterArea .search-searchCategory-categoryGrid [role="presentation"]');let t=w.querySelector('div[role="listbox"]');t&&(w=t),ot(),H.observe(w,{childList:!0})}function z(t){if(!document.contains(t.elem)){for(let e of w.querySelectorAll('button, div[role="option"]'))if(e.textContent===t.localized){t.elem=e;break}}}function te(){return!w.querySelector('button[class*="ChipClear"]:first-child, div[role="option"]:has(div[class*="ChipClear"]):first-child')}function Ft(t){return te()?!1:Array.from(w.querySelectorAll('button, div[role="option"]'))[1].textContent===t.localized}async function X(){R&&(ye(),await Ee()),w.querySelector('button[class*="ChipClear"]:first-child, div[role="option"]:has(div[class*="ChipClear"]):first-child')?.click()}function ye(){tt=!0,document.querySelectorAll(".main-yourLibraryX-collapseButton button")?.[1]?.click()}function nt(t=!1){let e=[];if(R=document.querySelector(".main-yourLibraryX-collapseButton").childElementCount>1,R)return t?Je:Ze;if(te())return Ze=[],Je=[],e;{let n=Array.from(w.querySelectorAll('button, div[role="option"]')).slice(1)[0].textContent;t&&(n=Object.keys(v).find(l=>v[l].value===n)),e.push(n);let r=w.querySelector('button[class*="secondary-selected"], div[role="option"]:has(div[class*="secondary-selected"])');r&&(t?e.push(Object.keys(v).find(l=>v[l].value===r.textContent)):e.push(r.textContent)),t?Je=structuredClone(e):Ze=structuredClone(e)}return e}async function bo(t){if(R&&(ye(),await Ee()),H.disconnect(),!te()){if(X(),t.length===0)return;await G()}for(let e=0;e<t.length;e++)if(t[e].startsWith("spotify:user:"))await _o(),document.querySelector('.main-yourLibraryX-libraryRootlist .main-rootlist-wrapper div[role="button"][aria-labelledby*="listrow-title-'+t[e]+'"]').click();else if(e===0){let o=N.find(n=>n.identifier===t[e]);if(!o)return;z(o),o.elem.click(),await G()}else{let o=N.find(r=>r.identifier===t[e-1]);if(!o)return;let n=o.children.find(r=>r.identifier===t[e]);if(!n)return;z(n),n.elem.click(),await G()}et(),Ht(),H.observe(w,{childList:!0})}function Ht(){let t=document.querySelector("#wmpotify-libx-sidebar");t.innerHTML="";let e=document.createElement("div");e.classList.add("wmpotify-libx-sidebar-item-container");let o=document.createElement("button");o.classList.add("wmpotify-libx-sidebar-item"),o.id="wmpotify-libx-sidebar-root",o.textContent=a.LIBX_SIDEBAR_ROOT,o.addEventListener("click",X);let n=document.createElement("div");n.classList.add("wmpotify-libx-sidebar-chevron"),n.addEventListener("click",()=>{t.classList.toggle("rootCollapsed")}),e.appendChild(n),e.appendChild(o),t.appendChild(e),N.forEach(l=>{let i=document.createElement("div");i.classList.add("wmpotify-libx-sidebar-item-container");let s=document.createElement("button");if(s.classList.add("wmpotify-libx-sidebar-item"),s.textContent=l.localized,s.dataset.identifier=l.identifier,s.addEventListener("click",async()=>{s.classList.contains("active")&&!R||(R&&(ye(),await Ee()),H.disconnect(),te()||(X(),await G()),z(l),l.elem.click(),H.observe(w,{childList:!0}))}),i.appendChild(s),t.appendChild(i),l.children&&l.children.length>0){let u=document.createElement("div");u.classList.add("wmpotify-libx-sidebar-chevron"),u.addEventListener("click",()=>{i.classList.toggle("collapsed")}),i.insertBefore(u,s);let m=document.createElement("div");m.classList.add("wmpotify-libx-sidebar-downlevel"),l.children.forEach(p=>{let f=document.createElement("button");f.classList.add("wmpotify-libx-sidebar-item"),f.textContent=p.localized,f.dataset.identifier=p.identifier,f.addEventListener("click",async()=>{f.classList.contains("active")&&!R||(R&&(ye(),await Ee()),H.disconnect(),z(p),(!Ft(l)||!document.contains(p.elem))&&(te()||(X(),await G()),z(l),l.elem.click(),await G()),z(p),p.elem.click(),H.observe(w,{childList:!0}))}),m.appendChild(f)}),t.appendChild(m)}});let r=nt();if(r.length>0){let l=r.pop();Array.from(t.querySelectorAll(".wmpotify-libx-sidebar-item")).find(s=>s.textContent===l).classList.add("active")}else o.classList.add("active")}function kt(){let t=F.getItem(`${C}-sidebar-state`);Spicetify.Platform.LocalStorageAPI.setItem(`${C}-sidebar-state`,2),F.setItem(`${C}-sidebar-state`,t)}function go(){if(!document.querySelector('.main-yourLibraryX-filterArea .search-searchCategory-categoryGrid [role="presentation"]'))return new Promise(t=>{let e=new MutationObserver(()=>{document.querySelector('.main-yourLibraryX-filterArea .search-searchCategory-categoryGrid [role="presentation"]')&&(t(),e.disconnect())});e.observe(document.querySelector(".main-yourLibraryX-libraryItemContainer"),{childList:!0,subtree:!0})})}function G(){return new Promise(t=>{let e=new MutationObserver(()=>{w.querySelector('button, div[role="option"]')&&(t(),e.disconnect())});e.observe(w,{childList:!0})})}function Ee(){return new Promise(t=>{let e=new MutationObserver(()=>{tt=!1,t(),e.disconnect()});e.observe(document.querySelector(".main-yourLibraryX-filterArea"),{childList:!0})})}function _o(){if(!document.querySelector('.main-yourLibraryX-libraryRootlist .main-rootlist-wrapper [role="presentation"]:not([class])'))return new Promise(t=>{let e=new MutationObserver(()=>{document.querySelector('.main-yourLibraryX-libraryRootlist .main-rootlist-wrapper [role="presentation"]:not([class])')&&(t(),e.disconnect())});e.observe(document.querySelector(".main-yourLibraryX-libraryRootlist"),{childList:!0,subtree:!0})})}var oe=ho;async function Dt(){let t={types:[{description:"All Supported Types",accept:{"application/x-windows-theme":[".theme",".themepack"],"application/x-windows-registry":[".reg"],"application/json":[".json"],"text/css":[".css"]}},{description:"Theme Files",accept:{"application/x-windows-theme":[".theme",".themepack"]}},{description:"Registry Files (HKCU\\CPL\\Colors or WCTC)",accept:{"application/x-windows-registry":[".reg"]}},{description:"ModernActiveDesktop JSON Files",accept:{"application/json":[".json"]}},{description:"CSS Files",accept:{"text/css":[".css"]}}],excludeAcceptAllOption:!1,multiple:!1},[e]=await window.showOpenFilePicker(t),o=await e.getFile(),n=await o.arrayBuffer(),r=new Uint8Array(n),l="utf-8";r[0]===255&&r[1]===254?l="utf-16le":r[0]===254&&r[1]===255&&(l="utf-16be");let i=new TextDecoder(l).decode(n);if(i.match("--.*:.*;")||o.name.endsWith(".css")){let s=i;if(!s.includes("wmpotify-compatible")){s=i.replace("--button-face:","--surface:").replace("--button-shadow:","--button-shadow-color:").replace("--ui-font:","--ui-font-default:");for(let m of s.split(`
`)){if(m.length>500)return Spicetify.showNotification(a.CONF_GENERAL_MSG_UNSUPPORTED_SCHEME_FILE),-1;!m.includes("!important")&&m.includes(":")&&(s=s.replace(m,m.replace(/:\s*(.*);/,": $1 !important;")))}let u={};u.surface=s.match(/--surface:\s*(.*);/)?.[1].replace(/ !important/,""),u["button-shadow-color"]=s.match(/--button-shadow-color:\s*(.*);/)?.[1].replace(/ !important/,""),u["button-dk-shadow"]=s.match(/--button-dk-shadow:\s*(.*);/)?.[1].replace(/ !important/,""),u["button-hilight"]=s.match(/--button-hilight:\s*(.*);/)?.[1].replace(/ !important/,""),u["button-light"]=s.match(/--button-light:\s*(.*);/)?.[1].replace(/ !important/,""),u["button-text"]=s.match(/--button-text:\s*(.*);/)?.[1].replace(/ !important/,""),u["menu-text"]=s.match(/--menu-text:\s*(.*);/)?.[1].replace(/ !important/,""),u["hilight-text"]=s.match(/--hilight-text:\s*(.*);/)?.[1].replace(/ !important/,""),s+=":root {"+Gt(u)+"}",s=s.replace(/  |\n/g,"")}he(s),localStorage.wmpotifyControlStyle="custom",localStorage.wmpotifyCustomScheme=s}else try{let s=JSON.parse(i),u=Bt(s);he(u),localStorage.wmpotifyControlStyle="custom",localStorage.wmpotifyCustomScheme=u}catch{let s=!!i.split(`
`)[0].match(/(?=.*REG)(?=.*EDIT)/i),u=s&&i.includes("\\Control Panel\\Appearance\\ClassicSchemes\\");try{let m={"active-border":S(i,"ActiveBorder",s,u),"active-title":S(i,"ActiveTitle",s,u),"app-workspace":S(i,"AppWorkspace",s,u),background:S(i,"Background",s,u),"button-alternate-face":S(i,"ButtonAlternateFace",s,u),"button-dk-shadow":S(i,"ButtonDkShadow",s,u),"button-face":S(i,"ButtonFace",s,u),"button-hilight":S(i,"ButtonHilight",s,u),"button-light":S(i,"ButtonLight",s,u),"button-shadow":S(i,"ButtonShadow",s,u),"button-text":S(i,"ButtonText",s,u),"gradient-active-title":S(i,"GradientActiveTitle",s,u),"gradient-inactive-title":S(i,"GradientInactiveTitle",s,u),"gray-text":S(i,"GrayText",s,u),hilight:S(i,"Hilight",s,u),"hilight-text":S(i,"HilightText",s,u),"hot-tracking-color":S(i,"HotTrackingColor",s,u),"inactive-border":S(i,"InactiveBorder",s,u),"inactive-title":S(i,"InactiveTitle",s,u),"inactive-title-text":S(i,"InactiveTitleText",s,u),"info-text":S(i,"InfoText",s,u),"info-window":S(i,"InfoWindow",s,u),menu:S(i,"Menu",s,u),"menu-bar":S(i,"MenuBar",s,u),"menu-hilight":S(i,"MenuHilight",s,u),"menu-text":S(i,"MenuText",s,u),scrollbar:S(i,"Scrollbar",s,u),"title-text":S(i,"TitleText",s,u),window:S(i,"Window",s,u),"window-frame":S(i,"WindowFrame",s,u),"window-text":S(i,"WindowText",s,u)};if(u){let f=i.match(`\\n"Size1"=dword:0000(.*)\r
`);f?m["scrollbar-size"]=parseInt(f[1],16)+"px":m["scrollbar-size"]="16px";let E=i.match(`\\n"Size8"=dword:0000(.*)\r
`);E?m["menu-height"]=parseInt(E[1],16)+"px":m["menu-height"]="18px",i.match(`\\n"Gradients"=dword:00000000\r
`)&&(m["gradient-active-title"]=m["active-title"],m["gradient-inactive-title"]=m["inactive-title"]),i.match(`\\n"FlatMenus"=dword:00000000\r
`)?m["flat-menus"]="none":m["flat-menus"]="mbcm"}else m["scrollbar-size"]="16px",m["menu-height"]="18px";let p=Bt(m);he(p),localStorage.wmpotifyControlStyle="custom",localStorage.wmpotifyCustomScheme=p}catch{return Spicetify.showNotification(a.CONF_GENERAL_MSG_INVALID_SCHEME_FILE),-1}}}async function he(t){let e=document.getElementById("wmpotify-scheme");e||(e=document.createElement("style"),e.id="wmpotify-scheme",document.body.appendChild(e)),e.textContent=t,document.documentElement.dataset.wmpotifyControlStyle="custom",t.includes("--flat-menus: mbcm")&&(document.documentElement.dataset.wmpotifyFlatMenus="true")}function Bt(t){let e=["extra-border-bottom","supports-win-shadow","extra-title-height","extra-border-size","menu-animation","menu-shadow","supports-colorization","win-open-anim","win-close-anim","palette-title-height"],o={"button-face":"surface","button-shadow":"button-shadow-color","ui-font":"ui-font-default"},n=`:root {
`;for(let r in t)if(!e.includes(r)){if(o[r]){n+=`--${o[r]}: ${t[r]} !important;
`;continue}n+=`--${r}: ${t[r]} !important;
`}return n+=Gt(t),n+="}",n}function Gt(t){let e=t.surface||t["button-face"],o=t["button-dk-shadow"],n=t["button-hilight"],r=t["button-light"],l=t["button-shadow-color"]||t["button-shadow"],i=t["button-text"],s=t["menu-text"],u=t["hilight-text"],m=`
        <svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M15 0H0V1V16H1V1H15V0Z" fill="${r}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M2 1H1V15H2V2H14V1H2Z" fill="${n}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M16 17H15H0V16H15V0H16V17Z" fill="${o}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M15 1H14V15H1V16H14H15V1Z" fill="${l}"/>
            <rect x="2" y="2" width="12" height="13" fill="${e}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M8 6H7V7H6V8H5V9H4V10H11V9H10V8H9V7H8V6Z" fill="${i}"/>
        </svg>`.replace(/  |\n/g,""),p=`
        <svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M15 0H0V1V16H1V1H15V0Z" fill="${r}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M2 1H1V15H2V2H14V1H2Z" fill="${n}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M16 17H15H0V16H15V0H16V17Z" fill="${o}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M15 1H14V15H1V16H14H15V1Z" fill="${l}"/>
            <rect x="2" y="2" width="12" height="13" fill="${e}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M9 6H4V7H5V8H6V9H7V10H8V9H9V8H10V7H11V6Z" fill="${i}"/>
        </svg>`.replace(/  |\n/g,""),f=`
        <svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M15 0H0V1V16H1V1H15V0Z" fill="${r}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M2 1H1V15H2V2H14V1H2Z" fill="${n}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M16 17H15H0V16H15V0H16V17Z" fill="${o}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M15 1H14V15H1V16H14H15V1Z" fill="${l}"/>
            <rect x="2" y="2" width="12" height="13" fill="${e}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M9 4H8V5H7V6H6V7H5V8H6V9H7V10H8V11H9V4Z" fill="${i}"/>
        </svg>`.replace(/  |\n/g,""),E=`
        <svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M15 0H0V1V16H1V1H15V0Z" fill="${r}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M2 1H1V15H2V2H14V1H2Z" fill="${n}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M16 17H15H0V16H15V0H16V17Z" fill="${o}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M15 1H14V15H1V16H14H15V1Z" fill="${l}"/>
            <rect x="2" y="2" width="12" height="13" fill="${e}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M7 4H6V11H7V10H8V9H9V8H10V7H9V6H8V5H7V4Z" fill="${i}"/>
        </svg>`.replace(/  |\n/g,""),b=`
        <svg width="2" height="2" viewBox="0 0 2 2" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M1 0H0V1H1V2H2V1H1V0Z" fill="${e}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M2 0H1V1H0V2H1V1H2V0Z" fill="${n}"/>
        </svg>`.replace(/  |\n/g,""),T=`
        <svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M0 0H15H16V17H15H0V16V1V0ZM1 16H15V1H1V16Z" fill="${l}"/>
            <rect x="1" y="1" width="14" height="15" fill="${e}"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M12 7H5V8H6V9H7V10H8V11H9V10H10V9H11V8H12V7Z" fill="${i}"/>
        </svg>`.replace(/  |\n/g,""),_=`
        <svg width="7" height="7" viewBox="0 0 7 7" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M7 0H6V1H5V2H4V3H3V4H2V3H1V2H0V5H1V6H2V7H3V6H4V5H5V4H6V3H7V0Z" fill="${i}"/>
        </svg>`.replace(/  |\n/g,""),M=`
        <svg width="7" height="7" viewBox="0 0 7 7" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M7 0H6V1H5V2H4V3H3V4H2V3H1V2H0V5H1V6H2V7H3V6H4V5H5V4H6V3H7V0Z" fill="${l}"/>
        </svg>`.replace(/  |\n/g,""),L=`
        <?xml version="1.0" standalone="no"?>
        <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd" >
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="-10 0 2058 2048" shape-rendering="crispEdges">
            <path fill="${s}" d="M512 832l320 319l576 -575v384l-576 576l-320 -320v-384z" />
        </svg>`.replace(/  |\n/g,""),le=`
        <?xml version="1.0" standalone="no"?>
        <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd" >
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="-10 0 2058 2048" shape-rendering="crispEdges">
            <path fill="${u}" d="M512 832l320 319l576 -575v384l-576 576l-320 -320v-384z" />
        </svg>`.replace(/  |\n/g,"");return`
        --scroll-up: url("data:image/svg+xml,${encodeURIComponent(m)}") !important;
        --scroll-down: url("data:image/svg+xml,${encodeURIComponent(p)}") !important;
        --scroll-left: url("data:image/svg+xml,${encodeURIComponent(f)}") !important;
        --scroll-right: url("data:image/svg+xml,${encodeURIComponent(E)}") !important;
        --scroll-track: url("data:image/svg+xml,${encodeURIComponent(b)}") !important;
        --dropdown-button-pressed: url("data:image/svg+xml,${encodeURIComponent(T)}") !important;
        --checkmark: url("data:image/svg+xml,${encodeURIComponent(_)}") !important;
        --checkmark-disabled: url("data:image/svg+xml,${encodeURIComponent(M)}") !important;
        --checkmark-menu: url("data:image/svg+xml,${encodeURIComponent(L)}") !important;
        --checkmark-menu-hover: url("data:image/svg+xml,${encodeURIComponent(le)}") !important;
    `.replace(/  |\n/g,"")}function S(t,e,o,n=!1){let r=["Scrollbar","Background","ActiveTitle","InactiveTitle","Menu","Window","WindowFrame","MenuText","WindowText","TitleText","ActiveBorder","InactiveBorder","AppWorkspace","Hilight","HilightText","ButtonFace","ButtonShadow","GrayText","ButtonText","InactiveTitleText","ButtonHilight","ButtonDkShadow","ButtonLight","InfoText","InfoWindow","ButtonAlternateFace","HotTrackingColor","GradientActiveTitle","GradientInactiveTitle","MenuHilight","MenuBar"],l;n?l=new RegExp(`\\n"Color${r.indexOf(e)}"=dword:00(.*)\r
`):o?l=new RegExp(`\\n"${e}"="(.*)"\r
`):l=new RegExp(`\\n${e}=(.*)\r
`);let i=t.match(l);if(n){if(i)return"#"+i[1].trim().match(/.{2}/g).reverse().join("");throw new Error(`Color not found for ${e}`)}if(!i)switch(e){case"ButtonAlternateFace":return"#B5B5B5";case"GradientActiveTitle":return S(t,"ActiveTitle",o);case"GradientInactiveTitle":return S(t,"InactiveTitle",o);case"MenuBar":return S(t,"Menu",o);case"MenuHilight":return S(t,"Hilight",o);case"HotTrackingColor":return"#008080";default:throw new Error(`Color not found for ${e}`)}return"#"+i[1].trim().split(" ").map(s=>parseInt(s).toString(16).padStart(2,"0")).join("")}var Se=navigator.userAgent.includes("Windows"),h=document.createElement("div"),I=null,it=0,Oe=null,ke=!1,Ie=null,Ae=null,xe=null,Q=0,c=null;function wo(){if(document.getElementById("wmpotify-config"))return;let t=y.query(),e=document.querySelector(".Root__main-view");if(!e)return;let o=window.matchMedia("(forced-colors: active)");h.id="wmpotify-config",h.innerHTML=`
        <div id="wmpotify-config-topborder" class="wmpotify-tintable"></div>
        <button id="wmpotify-config-prev"></button>
        <button id="wmpotify-config-next"></button>
        <p id="wmpotify-config-title">${a.CONF_GENERAL_TITLE}</p>
        <span id="wmpotify-config-wh-message">${a.CONF_GENERAL_WH_MESSAGE}</span>
        <button id="wmpotify-config-close"></button>
        <section id="wmpotify-config-tab-general" class="wmpotify-config-tab-content" data-tab-title="${a.CONF_GENERAL_TITLE}" style="display: block;">
            <label for="wmpotify-config-style">${a.CONF_GENERAL_STYLE}</label>
            <select id="wmpotify-config-style" class="wmpotify-aero">
                <option value="auto">${a.UI_AUTO}</option>
                <option value="xp">XP</option>
                <option value="aero">Aero</option>
                <option value="basic">Basic</option>
                <option value="basic_custom">Basic (${a.UI_CUSTOM})</option>
            </select>
            <label for="wmpotify-config-title-style">${a.CONF_GENERAL_TITLE_STYLE}</label>
            <select id="wmpotify-config-title-style" class="wmpotify-aero">
                <option value="auto">${a.UI_AUTO}</option>
                <option value="native">${a.CONF_GENERAL_TITLE_STYLE_NATIVE}</option>
                <option value="custom">${a.CONF_GENERAL_TITLE_STYLE_CUSTOM}</option>
                <option value="spotify">Spotify</option>
                <option value="keepmenu">${a.CONF_GENERAL_TITLE_STYLE_KEEPMENU}</option>
            </select>
            <button id="wmpotify-config-apply" class="wmpotify-aero">${a.CONF_GENERAL_APPLY}</button><br>
            <label for="wmpotify-config-control-style">${a.CONF_GENERAL_CONTROL_STYLE}</label>
            <select id="wmpotify-config-control-style" class="wmpotify-aero">
                <option value="classic">${a.CONF_GENERAL_CONTROL_STYLE_CLASSIC}</option>
                <option value="standard">${a.CONF_GENERAL_CONTROL_STYLE_STANDARD}</option>
                <option value="xp">Windows XP</option>
                <option value="aero" selected>Windows Aero</option>
                <option value="10">Windows 10</option>
                <option value="custom">${a.CONF_GENERAL_CONTROL_STYLE_CUSTOM}</option>
            </select>
            <label for="wmpotify-config-dark-mode">${a.CONF_GENERAL_DARK_MODE}</label>
            <select id="wmpotify-config-dark-mode" class="wmpotify-aero">
                <option value="follow_scheme" selected>${a.CONF_GENERAL_DARK_MODE_FOLLOW_SCHEME}</option>
                <option value="system">${a.CONF_GENERAL_DARK_MODE_SYSTEM}</option>
                <option value="always">${a.CONF_GENERAL_DARK_MODE_ALWAYS}</option>
                <option value="never">${a.CONF_GENERAL_DARK_MODE_NEVER}</option>
            </select><br>
            <label for="wmpotify-config-font">${a.CONF_GENERAL_FONT}</label>
            <select id="wmpotify-config-font" class="wmpotify-aero">
                <option value="default">${a.UI_DEFAULT}</option>
                <option value="custom">${a.UI_CUSTOM}</option>
                <option value="external">${a.CONF_GENERAL_FONT_EXTERNAL}</option>
                <option value="reload">${a.CONF_GENERAL_FONT_RELOAD}</option>
                ${globalThis.documentPictureInPicture?`
                    <option value="loadsys">${a.CONF_GENERAL_FONT_LOADSYS}</option>
                `:""}
            </select><br>
            <label for="wmpotify-config-topmost">${a.CONF_GENERAL_TOPMOST}</label>
            <select id="wmpotify-config-topmost" class="wmpotify-aero" disabled>
                <option value="always">${a.CONF_GENERAL_TOPMOST_ALWAYS}</option>
                <option value="minimode">${a.CONF_GENERAL_TOPMOST_MINIMODE}</option>
                <option value="never" selected>${a.CONF_GENERAL_TOPMOST_NEVER}</option>
            </select>
            <label for="wmpotify-config-backdrop">${a.CONF_GENERAL_BACKDROP}</label>
            <select id="wmpotify-config-backdrop" class="wmpotify-aero" disabled>
                <option value="none" selected>${a.CONF_GENERAL_BACKDROP_NONE}</option>
                <option value="mica">Mica</option>
                <option value="acrylic">${a.CONF_GENERAL_BACKDROP_ACRYLIC}</option>
                <option value="tabbed">${a.CONF_GENERAL_BACKDROP_TABBED}</option>
            </select><br id="wmpotify-config-topmost-backdrop-br">
            <label for="wmpotify-config-pbleftbtn">${a.CONF_GENERAL_PBLEFTBTN}</label>
            <select id="wmpotify-config-pbleftbtn" class="wmpotify-aero">
                <option value="hide">${a.CONF_GENERAL_PBLEFTBTN_HIDE}</option>
                <option value="left" selected>${a.CONF_GENERAL_PBLEFTBTN_LEFTALIGN}</option>
                <option value="right">${a.CONF_GENERAL_PBLEFTBTN_RIGHTALIGN}</option>
            </select><br>
            <input type="checkbox" id="wmpotify-config-show-libx" class="wmpotify-aero">
            <label for="wmpotify-config-show-libx">${a.CONF_GENERAL_SHOW_LIBX}</label><br>
            <input type="checkbox" id="wmpotify-config-lock-title" class="wmpotify-aero" disabled>
            <label for="wmpotify-config-lock-title">${a.CONF_GENERAL_LOCK_TITLE}</label>
        </section>
        <section id="wmpotify-config-tab-color" class="wmpotify-config-tab-content" data-tab-title="${a.CONF_COLOR_TITLE}">
            <section class="field-row">
                <a href="#" id="wmpotify-config-color-reset">${a.UI_RESET}</a>
                <input type="checkbox" id="wmpotify-config-tint-playerbar" class="wmpotify-aero">
                <label for="wmpotify-config-tint-playerbar">${a.CONF_COLOR_TINTPB}</label>
                <input type="checkbox" id="wmpotify-config-tint-more" class="wmpotify-aero">
                <label for="wmpotify-config-tint-more">${a.CONF_COLOR_TINTMORE}</label>
            </section>
            <label>${a.CONF_COLOR_HUE}</label><br>
            <input type="range" id="wmpotify-config-hue" class="wmpotify-aero no-track" min="0" max="360" step="1" value="180"><br>
            <label>${a.CONF_COLOR_SAT}</label><br>
            <input type="range" id="wmpotify-config-sat" class="wmpotify-aero no-track" min="0" max="354" step="1" value="121"><br>
        </section>
        <section id="wmpotify-config-tab-speed" class="wmpotify-config-tab-content" data-tab-title="${a.CONF_SPEED_TITLE}" data-wh-speedmod-required="true">
            <a href="#" id="wmpotify-config-speed-slow">${a.CONF_SPEED_SLOW}</a>
            <a href="#" id="wmpotify-config-speed-normal">${a.CONF_SPEED_NORMAL}</a>
            <a href="#" id="wmpotify-config-speed-fast">${a.CONF_SPEED_FAST}</a><br>
            <input type="range" id="wmpotify-config-speed" class="wmpotify-aero" min="0.5" max="2.0" step="0.1" value="1"><br>
            ${a.CONF_SPEED_CURRENT_LABEL}: <span id="wmpotify-config-speed-value">1.0</span>
        </section>
        <section id="wmpotify-config-tab-about" class="wmpotify-config-tab-content" data-tab-title="${a.CONF_ABOUT_TITLE}">
            <div id="wmpotify-about-logo"></div>
            <p id="wmpotify-about-title">WMPotify</p>
            <button id="wmpotify-about-github" onclick="window.open('https://github.com/Ingan121/WMPotify', '_blank')">
                
                <svg version="1.0" xmlns="http://www.w3.org/2000/svg"
                    width="240.000000pt" height="240.000000pt" viewBox="0 0 240.000000 240.000000"
                    preserveAspectRatio="xMidYMid meet">

                    <g transform="translate(0.000000,240.000000) scale(0.100000,-0.100000)"
                    fill="white" stroke="none">
                    <path d="M970 2301 c-305 -68 -555 -237 -727 -493 -301 -451 -241 -1056 143
                    -1442 115 -116 290 -228 422 -271 49 -16 55 -16 77 -1 24 16 25 20 25 135 l0
                    118 -88 -5 c-103 -5 -183 13 -231 54 -17 14 -50 62 -73 106 -38 74 -66 108
                    -144 177 -26 23 -27 24 -9 37 43 32 130 1 185 -65 96 -117 133 -148 188 -160
                    49 -10 94 -6 162 14 9 3 21 24 27 48 6 23 22 58 35 77 l24 35 -81 16 c-170 35
                    -275 96 -344 200 -64 96 -85 179 -86 334 0 146 16 206 79 288 28 36 31 47 23
                    68 -15 36 -11 188 5 234 13 34 20 40 47 43 45 5 129 -24 214 -72 l73 -42 64
                    15 c91 21 364 20 446 0 l62 -16 58 35 c77 46 175 82 224 82 39 0 39 -1 55 -52
                    17 -59 20 -166 5 -217 -8 -30 -6 -39 16 -68 109 -144 121 -383 29 -579 -62
                    -129 -193 -219 -369 -252 l-84 -16 31 -55 32 -56 3 -223 4 -223 25 -16 c23
                    -15 28 -15 76 2 80 27 217 101 292 158 446 334 590 933 343 1431 -145 293
                    -419 518 -733 602 -137 36 -395 44 -525 15z"/>
                    </g>
                </svg>
            </button>
            <p>${a.CONF_ABOUT_DESC}</p>
            <p>${a.CONF_ABOUT_VERSION}: ${P.toString(0)}<span id="wmpotify-about-ctewh-ver"></span></p>
            <p>${a.CONF_ABOUT_AUTHOR} - <a href="https://www.ingan121.com/" target="_blank">www.ingan121.com</a></p>
            <input type="checkbox" id="wmpotify-config-auto-updates" class="wmpotify-aero" checked>
            <label for="wmpotify-config-auto-updates">${a.CONF_ABOUT_AUTO_UPDATES}</label>
            <span>/ <a href="#" id="wmpotify-config-show-diag">${a.CONF_ABOUT_DIAG}</a></span>
        </section>
    `,I=h.querySelectorAll(".wmpotify-config-tab-content"),c={topborder:h.querySelector("#wmpotify-config-topborder"),prev:h.querySelector("#wmpotify-config-prev"),next:h.querySelector("#wmpotify-config-next"),title:h.querySelector("#wmpotify-config-title"),whMessage:h.querySelector("#wmpotify-config-wh-message"),close:h.querySelector("#wmpotify-config-close"),style:h.querySelector("#wmpotify-config-style"),titleStyle:h.querySelector("#wmpotify-config-title-style"),apply:h.querySelector("#wmpotify-config-apply"),controlStyle:h.querySelector("#wmpotify-config-control-style"),darkMode:h.querySelector("#wmpotify-config-dark-mode"),fontSelector:h.querySelector("#wmpotify-config-font"),fontCustom:h.querySelector('#wmpotify-config-font option[value="custom"]'),fontReload:h.querySelector('#wmpotify-config-font option[value="reload"]'),topmost:h.querySelector("#wmpotify-config-topmost"),topmostLabel:h.querySelector('label[for="wmpotify-config-topmost"]'),backdrop:h.querySelector("#wmpotify-config-backdrop"),backdropLabel:h.querySelector('label[for="wmpotify-config-backdrop"]'),backdropBr:h.querySelector("#wmpotify-config-topmost-backdrop-br"),pbLeftBtn:h.querySelector("#wmpotify-config-pbleftbtn"),showLibX:h.querySelector("#wmpotify-config-show-libx"),lockTitle:h.querySelector("#wmpotify-config-lock-title"),lockTitleLabel:h.querySelector("#wmpotify-config-lock-title + label"),resetColor:h.querySelector("#wmpotify-config-color-reset"),hue:h.querySelector("#wmpotify-config-hue"),sat:h.querySelector("#wmpotify-config-sat"),tintPb:h.querySelector("#wmpotify-config-tint-playerbar"),tintMore:h.querySelector("#wmpotify-config-tint-more"),speed:h.querySelector("#wmpotify-config-speed"),speedValue:h.querySelector("#wmpotify-config-speed-value"),speedSlow:h.querySelector("#wmpotify-config-speed-slow"),speedNormal:h.querySelector("#wmpotify-config-speed-normal"),speedFast:h.querySelector("#wmpotify-config-speed-fast"),whVer:h.querySelector("#wmpotify-about-ctewh-ver"),autoUpdates:h.querySelector("#wmpotify-config-auto-updates"),showDiag:h.querySelector("#wmpotify-config-show-diag")},Q=3+ +!!globalThis.documentPictureInPicture+ +h.contains(c.fontReload);let n=localStorage.wmpotifyConfigHeight;n&&parseInt(n)>=24&&(h.style.height=localStorage.wmpotifyConfigHeight),Wt(o),o.addEventListener("change",Wt),c.style.addEventListener("change",async()=>{if(c.style.value==="basic_custom"){let p=await B(a.CONF_GENERAL_BASIC_CUSTOM_DLG_TITLE,a.CONF_GENERAL_BASIC_CUSTOM_ACTIVE_MSG,"",a.CONF_GENERAL_BASIC_CUSTOM_PLACEHOLDER);if(!p){c.style.value=localStorage.wmpotifyStyle||"auto";return}let f=await B(a.CONF_GENERAL_BASIC_CUSTOM_DLG_TITLE,a.CONF_GENERAL_BASIC_CUSTOM_INACTIVE_MSG,"",a.CONF_GENERAL_BASIC_CUSTOM_PLACEHOLDER);if(!f){c.style.value=localStorage.wmpotifyStyle||"auto";return}let E=await B(a.CONF_GENERAL_BASIC_CUSTOM_DLG_TITLE,a.CONF_GENERAL_BASIC_CUSTOM_TEXT_MSG,"",a.CONF_GENERAL_BASIC_CUSTOM_PLACEHOLDER);if(!E){c.style.value=localStorage.wmpotifyStyle||"auto";return}Ie=p,Ae=f,xe=E}}),c.controlStyle.addEventListener("change",async()=>{if(c.controlStyle.value==="custom"){try{await Dt()===-1&&(c.controlStyle.value=localStorage.wmpotifyControlStyle||"aero")}catch{c.controlStyle.value=localStorage.wmpotifyControlStyle||"aero"}return}if(document.getElementById("wmpotify-scheme")?.remove(),delete localStorage.wmpotifyCustomScheme,delete document.documentElement.dataset.wmpotifyFlatMenus,localStorage.wmpotifyControlStyle=c.controlStyle.value,document.documentElement.dataset.wmpotifyControlStyle=c.controlStyle.value,localStorage.wmpotifyTintColor){let[p,f,E,b]=localStorage.wmpotifyTintColor.split(",");k(p,f,E,b)}}),c.darkMode.addEventListener("change",async()=>{let p=c.darkMode.value,f=window.matchMedia("(prefers-color-scheme: dark)");if(p==="system"&&!y.getModule()?.initialOptions.noforceddarkmode&&f.matches){let E="CONF_GENERAL_DARK_MODE_SYSTEM_MSG_"+(Se?"WIN":"UNIX");if(!await Te(a.CONF_GENERAL_DARK_MODE_SYSTEM,a[E])){c.darkMode.value=localStorage.wmpotifyDarkMode||"follow_scheme";return}}if(localStorage.wmpotifyDarkMode=p,p==="always"||p==="follow_scheme"&&Spicetify.Config.color_scheme==="dark"||p==="system"&&f.matches?document.documentElement.dataset.wmpotifyDarkMode="true":delete document.documentElement.dataset.wmpotifyDarkMode,p==="system"?D.addSystemDarkModeListener():D.removeSystemDarkModeListener(),p==="follow_scheme"?D.addMarketplaceSchemeObserver():D.removeMarketplaceSchemeObserver(),localStorage.wmpotifyTintColor){let[E,b,T,_]=localStorage.wmpotifyTintColor.split(",");k(E,b,T,_)}}),c.fontSelector.addEventListener("change",async()=>{if(delete localStorage.wmpotifyExternalFont,c.fontSelector.value==="custom"){let p=await B(a.CONF_GENERAL_CUSTOM_FONT_DLG_TITLE,a.CONF_GENERAL_CUSTOM_FONT_MSG,"",localStorage.wmpotifyFont||"Segoe UI");if(!p){Re();return}c.fontCustom.textContent=p,localStorage.wmpotifyFont=p}else if(c.fontSelector.value==="external"){let p=await B(a.CONF_GENERAL_EXTERNAL_FONT_DLG_TITLE,a.CONF_GENERAL_EXTERNAL_FONT_URL_MSG,"","");if(!p){Re();return}let f=p.match(/family=([^:@&]+)/)?.[1].replaceAll("+"," "),E=await B(a.CONF_GENERAL_EXTERNAL_FONT_DLG_TITLE,a.CONF_GENERAL_EXTERNAL_FONT_NAME_MSG,f||"",f||"");if(!E){Re();return}Kt(p),c.fontCustom.textContent=E,c.fontSelector.value="custom",localStorage.wmpotifyFont=E,localStorage.wmpotifyExternalFont=p}else if(c.fontCustom.textContent=a.UI_CUSTOM,c.fontSelector.value==="reload"||c.fontSelector.value==="loadsys"){let p;if(c.fontSelector.value==="loadsys"&&globalThis.documentPictureInPicture&&(p=await window.queryLocalFonts(),p.length===0)){Mo(),Re();return}delete localStorage.wmpotifyFontCache;let f=c.fontSelector.options.length-Q;for(let E=0;E<f;E++)c.fontSelector.options[Q].remove();c.fontSelector.value==="loadsys"?Co(p):Ut()}else c.fontSelector.value==="default"?delete localStorage.wmpotifyFont:localStorage.wmpotifyFont=c.fontSelector.value;localStorage.wmpotifyFont?document.documentElement.style.setProperty("--ui-font",localStorage.wmpotifyFont):document.documentElement.style.removeProperty("--ui-font")}),c.pbLeftBtn.addEventListener("change",()=>{switch(c.pbLeftBtn.value){case"hide":localStorage.wmpotifyHidePbLeftBtn="true",document.body.dataset.hidePbLeftBtn="true",delete localStorage.wmpotifyRightAlignPbLeftBtn,delete document.body.dataset.rightAlignPbLeftBtn;break;case"left":delete localStorage.wmpotifyHidePbLeftBtn,delete document.body.dataset.hidePbLeftBtn,delete localStorage.wmpotifyRightAlignPbLeftBtn,delete document.body.dataset.rightAlignPbLeftBtn;break;case"right":delete localStorage.wmpotifyHidePbLeftBtn,delete document.body.dataset.hidePbLeftBtn,localStorage.wmpotifyRightAlignPbLeftBtn="true",document.body.dataset.rightAlignPbLeftBtn="true"}}),c.showLibX.addEventListener("change",()=>{c.showLibX.checked?(localStorage.wmpotifyShowLibX="true",delete document.body.dataset.hideLibx):(delete localStorage.wmpotifyShowLibX,document.body.dataset.hideLibx="true",Spicetify.Platform.LocalStorageAPI.setItem(`${C}-sidebar-state`,1))}),c.close.addEventListener("click",rt),c.apply.addEventListener("click",Yt),c.autoUpdates.addEventListener("change",()=>{c.autoUpdates.checked?(delete localStorage.wmpotifyNoUpdateCheck,ue()):localStorage.wmpotifyNoUpdateCheck=!0}),c.showDiag.addEventListener("click",()=>{Me()}),ke=!!t?.speedModSupported,c.speed.addEventListener("pointerup",vo);let r=Spicetify.Player.origin.getState().speed||1;c.speedValue.textContent=(Number.isInteger(r)?r+".0":r).toString(),c.speedValue.addEventListener("click",async()=>{let p=await B(a.CONF_SPEED_CUSTOM_DLG_TITLE,a.CONF_SPEED_CUSTOM_MSG,r.toString(),"1.0");p&&Vt(p)});let i=Se&&Spicetify.Platform.PlatformData.os_version.split(".")[2]>=22e3&&(y.getModule()?.initialOptions.showframe!==!1||document.documentElement.dataset.wmpotifyStyle==="aero");t&&(c.topmost.disabled=!1,c.topmost.value=localStorage.wmpotifyTopMost||"never",c.topmost.addEventListener("change",()=>{localStorage.wmpotifyTopMost=c.topmost.value,c.topmost.value==="always"||c.topmost.value==="minimode"&&$.isMiniMode()?y.setTopMost(!0):y.setTopMost(!1)}),c.lockTitle.disabled=!1,c.lockTitle.checked=localStorage.wmpotifyLockTitle,c.lockTitle.addEventListener("change",async()=>{if(y.lockTitle(c.lockTitle.checked),c.lockTitle.checked)y.setTitle(await Spicetify.AppTitle.get()),localStorage.wmpotifyLockTitle=!0;else{delete localStorage.wmpotifyLockTitle;let p=Spicetify.Player.data?.item.metadata;p&&Spicetify.Player.isPlaying()&&y.setTitle(p.artist_name+" - "+p.title)}}),i&&(c.backdrop.disabled=!1,c.backdrop.value=localStorage.wmpotifyBackdrop||"mica",c.backdrop.addEventListener("change",()=>{localStorage.wmpotifyBackdrop=c.backdrop.value,y.setBackdrop(c.backdrop.value)})),c.whMessage.style.display="none",c.whVer.textContent=", "+a.getString("CONF_ABOUT_CTEWH_VERSION",y.module?.version)),i||(c.backdrop.style.display="none",c.backdropLabel.style.display="none"),Se||(c.topmost.style.display="none",c.topmostLabel.style.display="none",c.backdropBr.style.display="none",c.lockTitle.style.display="none",c.lockTitleLabel.style.display="none",c.whMessage.style.display="none"),c.hue.addEventListener("input",Ne),c.sat.addEventListener("input",Ne),c.tintPb.addEventListener("change",Ne),c.tintMore.addEventListener("change",Ne),c.resetColor.addEventListener("click",To),c.prev.addEventListener("click",$t),c.next.addEventListener("click",qt),Ut(),localStorage.wmpotifyStyle&&(localStorage.wmpotifyStyle==="basic"&&localStorage.wmpotifyBasicActiveColor&&localStorage.wmpotifyBasicInactiveColor&&localStorage.wmpotifyBasicTextColor?(Ie=localStorage.wmpotifyBasicActiveColor,Ae=localStorage.wmpotifyBasicInactiveColor,xe=localStorage.wmpotifyBasicTextColor,c.style.value="basic_custom"):c.style.value=localStorage.wmpotifyStyle),Se||c.titleStyle.querySelector("option[value=keepmenu]")?.remove(),navigator.userAgent.includes("Linux")&&c.titleStyle.querySelector("option[value=spotify]")?.remove(),localStorage.wmpotifyTitleStyle&&(c.titleStyle.value=localStorage.wmpotifyTitleStyle),o.matches||(localStorage.wmpotifyControlStyle&&(c.controlStyle.value=localStorage.wmpotifyControlStyle),["follow_scheme","system","always","never"].includes(localStorage.wmpotifyDarkMode)?c.darkMode.value=localStorage.wmpotifyDarkMode:y.getModule()?.initialOptions.noforceddarkmode&&(c.darkMode.value="system")),localStorage.wmpotifyHidePbLeftBtn?c.pbLeftBtn.value="hide":localStorage.wmpotifyRightAlignPbLeftBtn&&(c.pbLeftBtn.value="right"),localStorage.wmpotifyShowLibX&&(c.showLibX.checked=!0),localStorage.wmpotifyNoUpdateCheck&&(c.autoUpdates.checked=!1);let s=0,u=!1;c.topborder.addEventListener("pointerdown",function(){u=!0,s=h.getBoundingClientRect().bottom,document.body.style.cursor="ns-resize"},!0),document.addEventListener("pointerup",function(){u&&(u=!1,document.body.style.cursor="",h.offsetHeight<24&&(h.style.height="24px"),localStorage.wmpotifyConfigHeight=h.style.height)},!0),document.addEventListener("pointermove",function(p){u&&h.offsetHeight>=24&&(h.style.height=s-p.clientY+"px")},!0),e.appendChild(h);let m=setInterval(()=>{try{new Spicetify.Menu.Item(a.MENU_CONF,!1,zt.open).register(),clearInterval(m)}catch{}},100)}function Lo(){if(I){if(document.body.dataset.wmpotifyLibPageOpen||document.querySelector(".QdB2YtfEq0ks5O4QbtwX"))Spicetify.Config.custom_apps.includes("wmpvis")?Spicetify.Platform.History.push({pathname:"/wmpvis"}):Spicetify.Platform.History.push({pathname:"/"});else if(h.style.display==="block"){rt();return}if(h.style.display="block",localStorage.wmpotifyTintColor){let[t,e,o,n]=localStorage.wmpotifyTintColor.split(",");c.hue.value=(parseInt(t)+180).toString(),c.sat.value=(parseInt(e)*121/100).toString(),o&&(c.tintPb.checked=!0),n&&(c.tintMore.checked=!0)}}}function rt(){h.style.display="none"}function at(t){if(I){for(let e=0;e<I.length;e++){let o=I[e];o.style.display=e===t?"block":"none"}it=t,c.title.textContent=I[t].dataset.tabTitle||""}}function $t(){if(!I)return;let t=(it-1+I.length)%I.length;I[t].dataset.whSpeedmodRequired&&!ke&&!document.querySelector('button[data-testid="control-button-playback-speed"]')&&t--,at(t)}function qt(){if(!I)return;let t=(it+1)%I.length;I[t].dataset.whSpeedmodRequired&&!ke&&!document.querySelector('button[data-testid="control-button-playback-speed"]')&&t++,at(t)}function Ne(){let t=parseInt(c.hue.value)-180,e=parseInt(c.sat.value)*100/121;k(t,e,c.tintPb.checked,c.tintMore.checked),localStorage.wmpotifyTintColor=t+","+e+","+(c.tintPb.checked?"1":"")+","+(c.tintMore.checked?"1":"")}function To(){c.hue.value="180",c.sat.value="121",k(),delete localStorage.wmpotifyTintColor}function vo(){c.speedValue.textContent=Number.isInteger(parseFloat(c.speed.value))?c.speed.value+".0":c.speed.value,Oe&&clearTimeout(Oe),Oe=setTimeout(()=>{Vt(c.speed.value),Oe=null},500)}function Vt(t){let e=document.querySelector('button[data-testid="control-button-playback-speed"]');if(!ke&&!e){Spicetify.showNotification(a["CONF_SPEED_UNSUPPORTED_MSG_"+(Se?"WIN":"UNIX")]);return}if(Spicetify.Platform.ConnectAPI.state.connectionStatus==="connected"&&!e){Spicetify.showNotification(a.CONF_SPEED_NO_CONNECT_MSG);return}t=parseFloat(t);let o=Spicetify.Player.origin.getState().speed||1;if(t!==o){if(t<=0||t>5){Spicetify.showNotification(a.CONF_SPEED_OUT_OF_RANGE_MSG);return}c.speed.value=t,c.speedValue.textContent=Number.isInteger(t)?t+".0":t;try{e?Spicetify.Player.origin.setSpeed(t):y.setPlaybackSpeed(t)}catch(n){n instanceof Error?Spicetify.showNotification(n.message):Spicetify.showNotification(String(n))}}}function Yt(){let t=c.style.value,e=c.titleStyle.value;t!=="auto"?(t!=="basic_custom"||!Ie||!Ae||!xe?(delete localStorage.wmpotifyBasicActiveColor,delete localStorage.wmpotifyBasicInactiveColor,delete localStorage.wmpotifyBasicTextColor):(localStorage.wmpotifyBasicActiveColor=Ie,localStorage.wmpotifyBasicInactiveColor=Ae,localStorage.wmpotifyBasicTextColor=xe),localStorage.wmpotifyStyle=t==="basic_custom"?"basic":t):delete localStorage.wmpotifyStyle,e!=="auto"?localStorage.wmpotifyTitleStyle=e:delete localStorage.wmpotifyTitleStyle,location.reload()}function Ut(){let t=localStorage.wmpotifyFontCache?.split(",")||[];t.length?(t.forEach(e=>{let o=document.createElement("option");o.textContent=e,o.value=e,e===localStorage.wmpotifyFont&&(o.selected=!0),e==="Segoe UI"?c.fontSelector.insertBefore(o,c.fontSelector.options[Q]):c.fontSelector.appendChild(o)}),t.includes(localStorage.wmpotifyFont)||(localStorage.wmpotifyFont?(c.fontSelector.value="custom",c.fontCustom.textContent=localStorage.wmpotifyFont):c.fontSelector.value="default")):(je.each(e=>{let o=document.createElement("option");o.textContent=e.name,o.value=e.name,e.name===localStorage.wmpotifyFont&&(o.selected=!0),e.name==="Segoe UI"?c.fontSelector.insertBefore(o,c.fontSelector.options[Q]):c.fontSelector.appendChild(o),t.push(e.name)}),je.all(()=>{t.includes(localStorage.wmpotifyFont)||(localStorage.wmpotifyFont?(c.fontSelector.value="custom",c.fontCustom.textContent=localStorage.wmpotifyFont):c.fontSelector.value="default"),localStorage.wmpotifyFontCache=t.join(","),c.fontReload.remove(),Q--}))}async function Co(t){let e=[...new Set(t.map(o=>o.family))];for(let o of e){let n=document.createElement("option");n.textContent=o,n.value=o,o===localStorage.wmpotifyFont&&(n.selected=!0),o==="Segoe UI"?c.fontSelector.insertBefore(n,c.fontSelector.options[Q]):c.fontSelector.appendChild(n)}e.includes(localStorage.wmpotifyFont)||(localStorage.wmpotifyFont?(c.fontSelector.value="custom",c.fontCustom.textContent=localStorage.wmpotifyFont):c.fontSelector.value="default"),localStorage.wmpotifyFontCache=e.join(",")}function Kt(t){let e=document.getElementById("wmpotify-external-font");e||(e=document.createElement("link"),e.rel="stylesheet",document.body.appendChild(e)),e.href=t}async function Mo(){if(window.documentPictureInPicture){let t=await window.documentPictureInPicture.requestWindow({width:1e3,height:650});t&&(t.document.body.innerHTML=`
                <style>
                    html { background-color: white }
                    body { color: black; margin: 8px !important }
                    * { font-family: sans-serif }
                    p { max-width: calc(100% - 20px); -webkit-app-region: drag }
                    a { color: LinkText; text-decoration: none }
                    a:hover { text-decoration: underline }
                    button { color: black; position: fixed; top: 5px; right: 5px; padding-inline: 6px }
                    @media (prefers-color-scheme: dark) {
                        html { background-color: black }
                        body { color: white }
                        a { color: dodgerblue }
                    }
                </style>
                <button onclick="window.popup?.close();window.close()">X</button>
                <p>${a.CONF_GENERAL_FONT_PERM_RECOVERY_DESC}</p>
                <div style="display: flex">
                    <img src="https://raw.githubusercontent.com/Ingan121/WMPotify/refs/heads/master/screenshots/fonts_perm_recovery.png">
                    <div style="margin-left: 5px">
                        1. <a href="javascript:window.popup=open('https://xpui.app.spotify.com/', 'popup', 'width=700,height=650,top=0,left='+screen.width)">${a.CONF_GENERAL_FONT_PERM_RECOVERY_STEP1}</a><br>
                        2. ${a.CONF_GENERAL_FONT_PERM_RECOVERY_STEP2}<br>
                        3. ${a.CONF_GENERAL_FONT_PERM_RECOVERY_STEP3}<br>
                        4. <a href="javascript:window.popup?.close();window.close();">${a.CONF_GENERAL_FONT_PERM_RECOVERY_STEP4}</a><br>
                        5. ${a.CONF_GENERAL_FONT_PERM_RECOVERY_STEP5}<br>
                    </div>
                </div>
            `)}}function Re(){let t=localStorage.wmpotifyFont;if(!t){c.fontSelector.value="default";return}for(let e of c.fontSelector.options)if(e.value===t){c.fontSelector.value=t;return}c.fontSelector.value="custom"}function Wt(t){if(t.matches){if(c.controlStyle.innerHTML=`
            <option value="classic">${a.CONF_GENERAL_CONTROL_STYLE_HC}</option>
            <option value="custom">${a.CONF_GENERAL_CONTROL_STYLE_CUSTOM}</option>
        `,localStorage.wmpotifyControlStyle!=="custom"?(c.controlStyle.value="classic",document.documentElement.dataset.wmpotifyControlStyle="classic"):c.controlStyle.value="custom",c.darkMode.innerHTML=`
            <option value="never">${a.CONF_GENERAL_CONTROL_STYLE_HC}</option>
        `,c.darkMode.value="never",c.darkMode.disabled=!0,c.tintPb.disabled=!0,c.tintMore.disabled=!0,localStorage.wmpotifyTintColor){let[e,o,n,r]=localStorage.wmpotifyTintColor.split(",");k(e,o,!1,!1)}}else{c.controlStyle.innerHTML=`
            <option value="classic">${a.CONF_GENERAL_CONTROL_STYLE_CLASSIC}</option>
            <option value="standard">${a.CONF_GENERAL_CONTROL_STYLE_STANDARD}</option>
            <option value="xp">Windows XP</option>
            <option value="aero" selected>Windows Aero</option>
            <option value="10">Windows 10</option>
            <option value="custom">${a.CONF_GENERAL_CONTROL_STYLE_CUSTOM}</option>
        `,c.controlStyle.value=localStorage.wmpotifyControlStyle||"aero",document.documentElement.dataset.wmpotifyControlStyle=c.controlStyle.value,c.darkMode.innerHTML=`
            <option value="follow_scheme" selected>${a.CONF_GENERAL_DARK_MODE_FOLLOW_SCHEME}</option>
            <option value="system">${a.CONF_GENERAL_DARK_MODE_SYSTEM}</option>
            <option value="always">${a.CONF_GENERAL_DARK_MODE_ALWAYS}</option>
            <option value="never">${a.CONF_GENERAL_DARK_MODE_NEVER}</option>
        `,c.darkMode.disabled=!1;let e=y.getModule()?.initialOptions.noforceddarkmode?"system":"follow_scheme";if(c.darkMode.value=localStorage.wmpotifyDarkMode||e,c.tintPb.disabled=!1,c.tintMore.disabled=!1,localStorage.wmpotifyTintColor){let[o,n,r,l]=localStorage.wmpotifyTintColor.split(",");k(o,n,r,l)}}}var zt={init:wo,open:Lo,close:rt,openTab:at,prevTab:$t,nextTab:qt,apply:Yt,isOpen:()=>h.style.display==="block",applyExternalFont:Kt,elements:c},ne=zt;var lt=null,st=class{static toggleMiniMode(){if(y.available())if(ct()){let e=localStorage.wmpotifyPreMiniModeSize?.split(",");e&&e.length===2&&window.resizeTo(parseInt(e[0]),parseInt(e[1]))}else document.fullscreenElement&&document.exitFullscreen(),y.query().isMaximized&&y.maximizeRestore(),localStorage.wmpotifyPreMiniModeSize=[window.outerWidth,window.outerHeight],y.resizeTo(358,60)}static toggleFullscreen(){if(document.fullscreenElement)document.exitFullscreen(),Fe();else{if(Spicetify.Config.custom_apps.includes("wmpvis"))Spicetify.Platform.History.push({pathname:"/wmpvis"});else{let e=document.querySelector('.main-nowPlayingBar-extraControls button[data-testid="lyrics-button"]');e&&e instanceof HTMLButtonElement&&e.click()}ne.close(),document.documentElement.requestFullscreen(),document.body.classList.add("wmpotify-playerbar-visible"),setTimeout(()=>{document.addEventListener("pointermove",dt),dt()},200)}document.addEventListener("fullscreenchange",()=>{document.fullscreenElement||Fe()},{once:!0}),document.addEventListener("resize",()=>{Fe()},{once:!0})}static isMiniMode=ct};function ct(){let t=!!document.querySelector("#wmpotify-title-bar");return window.innerWidth<360&&window.innerHeight<(t?92:62)}function dt(){if(!document.fullscreenElement){Fe();return}document.body.classList.add("wmpotify-playerbar-visible"),lt&&clearTimeout(lt),lt=setTimeout(()=>{document.body.classList.remove("wmpotify-playerbar-visible")},2e3)}function Fe(){document.body.classList.remove("wmpotify-playerbar-visible"),document.removeEventListener("pointermove",dt)}window.addEventListener("resize",()=>{localStorage.wmpotifyTopMost==="minimode"&&y.setTopMost(ct())});var $=st;var ut=class{constructor(){this.playerBar=document.querySelector(".main-nowPlayingBar-nowPlayingBar"),this.setupTrackInfoWidget(),new MutationObserver(this.setupTrackInfoWidget.bind(this)).observe(document.querySelector(".main-nowPlayingBar-left"),{childList:!0});let e=document.querySelector(".player-controls__left"),o=document.createElement("button"),n=["playback-control.enable-repeat","playback-control.enable-repeat-one","playback-control.disable-repeat"],r=Spicetify.Player.getRepeat(),l=Spicetify.Platform.Translations[n[r]];o.setAttribute("aria-label",l),o.setAttribute("aria-checked",!!r),o.id="wmpotify-repeat-button",o.addEventListener("click",()=>{Spicetify.Player.toggleRepeat()}),Spicetify.Tippy(o,{...Spicetify.TippyProps,content:l}),Spicetify.Platform.PlayerAPI._events.addListener("update",({data:_})=>{o.setAttribute("aria-checked",!!_.repeat);let M=Spicetify.Platform.Translations[n[_.repeat]];o.setAttribute("aria-label",M),o._tippy.setContent(M)}),e.appendChild(o);let i=y.query(),s=document.querySelector('.player-controls__buttons button[data-testid="control-button-skip-back"]'),u=document.querySelector('.player-controls__buttons button[data-testid="control-button-skip-forward"]');s&&(s.addEventListener("contextmenu",_=>{Spicetify.Player.seek(Spicetify.Player.getProgress()-15e3),_.preventDefault()}),Spicetify.Platform.Translations["playback-control.skip-back"]+=`
`+a.PB_TOOLTIP_SEEK_BK),u&&(u.addEventListener("contextmenu",_=>{Spicetify.Player.seek(Spicetify.Player.getProgress()+15e3),_.preventDefault()}),Spicetify.Platform.Translations["playback-control.skip-forward"]+=`
`+a.PB_TOOLTIP_SEEK_FWD,i?.speedModSupported&&i.immediateSpeedChange&&(u.addEventListener("pointerdown",()=>{u.disabled||Spicetify.Platform.ConnectAPI.state.connectionStatus==="connected"||(this.longPressTimer=setTimeout(()=>{u.dataset.fastForward=!0,y.setPlaybackSpeed(5),Spicetify.Player.play()},1e3))}),document.addEventListener("pointerup",_=>{clearTimeout(this.longPressTimer),u.dataset.fastForward&&(delete u.dataset.fastForward,y.setPlaybackSpeed(1),_.preventDefault(),_.stopPropagation())}),Spicetify.Platform.Translations["playback-control.skip-forward"]+=`
`+a.PB_TOOLTIP_FF));let m=document.createElement("button");m.setAttribute("aria-label",a.PB_TOOLTIP_STOP),m.id="wmpotify-stop-button",m.addEventListener("click",()=>{Spicetify.Platform.PlayerAPI.clearQueue(),Spicetify.Player.playUri("")}),Spicetify.Tippy(m,{...Spicetify.TippyProps,content:a.PB_TOOLTIP_STOP}),e.appendChild(m);let p=document.querySelector(".player-controls__right"),f=document.querySelector(".volume-bar");this.volumeButton=f.querySelector(".volume-bar__icon-button"),this.volumeBarProgress=f.querySelector(".progress-bar"),this.updateVolumeIcon(),new MutationObserver(this.updateVolumeIcon.bind(this)).observe(this.volumeBarProgress,{attributes:!0,attributeFilter:["style"]}),p.appendChild(f);let E=document.querySelector(".volume-bar__slider-container"),b=E.children[0];if(E.addEventListener("click",()=>{if(window.innerWidth<750){b.dataset.visible=!0;let _=setTimeout(()=>{delete b.dataset.visible},5e3);b.addEventListener("pointerup",()=>{clearTimeout(_),setTimeout(()=>{delete b.dataset.visible},100)},{once:!0})}}),this.timeTexts=document.querySelectorAll(".playback-bar [class*=encore-text]"),this.timeTextContainer=document.createElement("div"),this.timeTextContainer.classList.add("wmpotify-time-text-container"),this.timeText=document.createElement("span"),this.timeText.classList.add("wmpotify-time-text"),this.timeTextMode=parseInt(localStorage.wmpotifyTimeTextMode||0),this.updateTimeText(),this.timeText.dataset.mode=this.timeTextMode,this.timeText.addEventListener("click",()=>{this.timeTextMode=(this.timeTextMode+1)%3,this.timeText.dataset.mode=this.timeTextMode,localStorage.wmpotifyTimeTextMode=this.timeTextMode}),this.timeTextContainer.appendChild(this.timeText),this.playerBar.insertAdjacentElement("afterbegin",this.timeTextContainer),Spicetify.Player.addEventListener("onprogress",this.updateTimeText.bind(this)),this.titlebar=document.querySelector("#wmpotify-title-bar"),this.titleButtons=document.querySelector("#wmpotify-title-buttons"),this.titlebar&&(this.updateTimeTextMiniMode(),window.addEventListener("resize",this.updateTimeTextMiniMode.bind(this))),i){let _=new Spicetify.Playbar.Button(a.PB_BTN_MINI_MODE,"",()=>$.toggleMiniMode());_.element.id="wmpotify-mini-mode-button"}let T=new Spicetify.Playbar.Button(a.PB_BTN_FULLSCREEN,"",()=>$.toggleFullscreen());T.element.id="wmpotify-fullscreen-button"}async setupTrackInfoWidget(){let e=!!document.querySelector("#wmpotify-title-bar"),o=y.available(),n=await Spicetify.AppTitle.get(),r=document.querySelector("#wmpotify-title-text"),l=document.querySelector(".main-nowPlayingWidget-trackInfo");if(!l||document.querySelector(".wmpotify-track-info"))return;let i=document.createElement("p");i.classList.add("wmpotify-track-info"),i.textContent=document.querySelector(".main-trackInfo-name")?.textContent||"",l.appendChild(i),window.innerWidth<420&&window.innerHeight<(e?92:62)&&(e?r.textContent=i.textContent:o&&y.setTitle(i.textContent),this.titleSet=!0);let s=1;setInterval(()=>{if(!Spicetify.Player.isPlaying())return;let u=Spicetify.Player.data?.item.metadata;u&&(s===0?i.textContent=u.title:s===1?i.textContent=u.artist_name:s===2&&(i.textContent=u.album_title),s=(s+1)%3,window.innerWidth<420&&window.innerHeight<(e?92:62)?(e?r.textContent=i.textContent:o&&(y.lockTitle(!0),y.setTitle(i.textContent)),this.titleSet=!0):this.titleSet&&(this.titleSet=!1,e&&(r.textContent=n),localStorage.wmpotifyLockTitle||y.lockTitle(!1),Spicetify.Player.isPlaying()&&!localStorage.wmpotifyLockTitle?y.setTitle(u.artist_name+" - "+u.title):y.setTitle(n)))},3e3),Spicetify.Player.addEventListener("songchange",()=>{s=0,i.textContent=Spicetify.Player.data?.item.metadata.title,window.innerWidth<420&&window.innerHeight<(e?92:62)&&(e?r.textContent=i.textContent:o&&y.setTitle(i.textContent),this.titleSet=!0)})}updateTimeTextMiniMode(){window.innerWidth<800?this.titlebar.contains(this.timeText)||(this.titleButtons?this.titlebar.insertBefore(this.timeText,this.titleButtons):this.titlebar.appendChild(this.timeText)):this.playerBar.contains(this.timeText)||this.timeTextContainer.appendChild(this.timeText)}updateVolumeIcon(){let e=getComputedStyle(this.volumeBarProgress).getPropertyValue("--progress-bar-transform").replace("%","")/100;e===0?this.volumeButton.dataset.vol="muted":e<=.3?this.volumeButton.dataset.vol="low":e<=.6?this.volumeButton.dataset.vol="mid":this.volumeButton.dataset.vol="high"}updateTimeText(){switch(this.timeTextMode){case 0:try{let e=Spicetify.Player.data?.item?.metadata?.duration-Spicetify.Player.getProgress();this.timeText.textContent=Pe(e,!0)}catch(e){console.error("WMPotify: Error getting remaining time:",e),this.timeText.textContent="00:00"}break;case 1:{let e=this.timeTexts[0].textContent;(e.length===4||e.length===7)&&(e="0"+e),this.timeText.textContent=e}break;case 2:{let e=this.timeTexts[0].textContent;(e.length===4||e.length===7)&&(e="0"+e);let o=this.timeTexts[1].textContent;(o.length===4||o.length===7)&&(o="0"+o),this.timeText.textContent=`${e} / ${o}`}break}}},Xt=ut;var be=new MutationObserver(ie.bind(null,!1)),Po=new ResizeObserver(ie.bind(null,!0)),Oo=new MutationObserver(jt),mt=class{constructor(){be.observe(document.documentElement,{attributes:!0,attributeFilter:["style"]}),Po.observe(document.querySelector(".Root__right-sidebar")),Oo.observe(document.querySelector("#Desktop_LeftSidebar_Id"),{attributes:!0,attributeFilter:["style"]}),window.addEventListener("resize",ie.bind(null,!1)),window.addEventListener("load",ie.bind(null,!1)),ie(!0),jt()}static updateSidebarWidth=ie};function ie(t=!1){if(!Spicetify.Platform.History.location.pathname.startsWith("/wmpotify-standalone-libx")&&!t){let n=getComputedStyle(document.documentElement).getPropertyValue("--right-sidebar-width");n&&(be.disconnect(),document.documentElement.style.setProperty("--panel-width",n),be.observe(document.documentElement,{attributes:!0,attributeFilter:["style"]}));return}be.disconnect();let e=document.querySelector(".Root__right-sidebar");if(!e||!(e instanceof HTMLElement))return;document.documentElement.style.setProperty("--panel-width",(e?e.offsetWidth:8).toString()),getComputedStyle(document.documentElement).getPropertyValue("--right-sidebar-width")&&document.documentElement.style.setProperty("--right-sidebar-width",(e?e.offsetWidth:8).toString()),e.querySelector("aside")?(document.body.classList.add("sidebar-open"),document.querySelector(".QdB2YtfEq0ks5O4QbtwX")&&!e.querySelector("aside.NowPlayingView")?document.body.classList.add("sidebar-open-in-cinema"):document.body.classList.remove("sidebar-open-in-cinema")):(document.body.classList.remove("sidebar-open"),document.body.classList.remove("sidebar-open-in-cinema")),be.observe(document.documentElement,{attributes:!0,attributeFilter:["style"]})}function jt(){let t=document.querySelector("#Desktop_LeftSidebar_Id");if(!t||!(t instanceof HTMLElement))return;let e=t.style.getPropertyValue("--left-sidebar-width");e&&document.documentElement.style.setProperty("--wmpotify-left-sidebar-width",e)}var re=mt;var pt=null;function He(){console.log("WMPotify: Trying to initialize queue panel"),re.updateSidebarWidth(!0);let t=document.querySelector(".Root__right-sidebar > div > div > div:has(aside)");if(t&&!pt&&(pt=new MutationObserver(He),pt.observe(t,{childList:!0})),document.querySelector('[data-testid*="buddy-feed"]')?document.documentElement.dataset.buddyFeedOpen="true":delete document.documentElement.dataset.buddyFeedOpen,!document.querySelector("#queue-panel")||document.querySelector("#wmpotify-queue-toolbar")||document.querySelectorAll('div[data-encore-id="tabPanel"]').length>2)return;let e=document.querySelector("#Desktop_PanelContainer_Id:has(#queue-panel)"),o=document.querySelector("#Desktop_PanelContainer_Id:not(:has(#queue-panel))");e&&(o&&(o.style.display="none"),e.dataset.identifier="spotify-queue-panel");let n=document.querySelector("#Desktop_PanelContainer_Id:has(#queue-panel) > div > div:first-child > div:first-child"),r=document.querySelector("#Desktop_PanelContainer_Id:has(#queue-panel) > div > div:nth-child(2)");r&&(r.id="spotify-queue-panel-content");let l=document.createElement("div");l.id="wmpotify-queue-toolbar";let i=document.createElement("button");i.id="wmpotify-queue-playlist-button",i.classList.add("wmpotify-toolbar-button"),i.addEventListener("click",()=>{let L=Spicetify.Player.data?.context?.uri;L&&window.open(L)}),i.textContent=document.querySelector('#queue-panel div[data-flip-id*="section-header-"] a')?.textContent||a.QUEUE_CURRENT_PLAYLIST_PLACEHOLDER,i.innerHTML+='<span class="expandMark">\u23F7</span>',l.appendChild(i);let s=document.createElement("button");s.id="wmpotify-queue-clear-button",s.classList.add("wmpotify-toolbar-button"),s.addEventListener("click",()=>{Spicetify.Platform.PlayerAPI.clearQueue(),Spicetify.Player.playUri("")}),l.appendChild(s),r&&r.insertAdjacentElement("afterbegin",l);let u=getComputedStyle(document.documentElement).getPropertyValue("--album-art-placeholder").trim().slice(5,-2),m=document.createElement("div");m.id="wmpotify-queue-npv";let p=document.createElement("img");p.id="wmpotify-queue-album-art";let f=document.querySelector(".main-nowPlayingWidget-coverArt .cover-art img");p.src=f?.src||u,m.appendChild(p);let E=document.createElement("div");E.id="wmpotify-queue-song-title",E.textContent=document.querySelector(".main-trackInfo-name")?.textContent||"No items",m.appendChild(E),n?.insertAdjacentElement("afterbegin",m),Qt(),new MutationObserver(Qt).observe(document.querySelector("#queue-panel"),{childList:!0});let b=document.querySelectorAll('#Desktop_PanelContainer_Id:has(#queue-panel) div[role="tablist"] button'),T=[],_;for(let L of b)T.push({text:L.textContent,click:function(le){if(_.menuItems){for(let g of _.menuItems)g.classList.remove("activeStyle");this.classList.add("activeStyle"),L.click()}}});T[0].classList=["activeStyle"],document.querySelector("#wmpotifyQueueTabMenuBg")?.remove(),_=K("wmpotifyQueueTab",T);let M=new W(["wmpotifyQueueTab"]);e&&e.addEventListener("contextmenu",L=>{L.preventDefault(),M.openMenu("wmpotifyQueueTab",{left:L.clientX+"px",top:L.clientY+"px"})}),Spicetify.Player.addEventListener("songchange",()=>{i.textContent=Spicetify.Player.data?.context?.metadata?.context_description||a.QUEUE_CURRENT_PLAYLIST_PLACEHOLDER,i.innerHTML+='<span class="expandMark">\u23F7</span>',p.src=Spicetify.Player.data?.item?.album?.images?.[0]?.url||u,E.textContent=Spicetify.Player.data?.item?.name||a.QUEUE_CURRENT_PLAYLIST_PLACEHOLDER})}function Qt(){let t=document.querySelector("#queue-panel > div:first-child");if(!t)return;let e=t?.querySelectorAll("#queue-panel ul")[1];e?(delete t.dataset.nothingInQueue,Zt(),new MutationObserver(Zt).observe(e,{childList:!0})):document.querySelector("#queue-panel > div:first-child > svg:first-child")?t.dataset.nothingInQueue="true":delete t.dataset.nothingInQueue}function Zt(){if(!document.querySelector("#queue-panel")||!Spicetify.Queue)return;let t=document.querySelectorAll("#queue-panel li .HeaderArea");for(let e=0;e<t.length;e++){let o=t[e];if(o.querySelector(".wmpotify-queue-duration"))continue;let n=e===0?Spicetify.Queue.track?.contextTrack?.metadata?.duration:Spicetify.Queue.nextTracks?.[e-1]?.contextTrack?.metadata?.duration;if(!n)continue;let r=document.createElement("span");r.classList.add("wmpotify-queue-duration"),r.textContent=Pe(n),o.appendChild(r)}}async function Be(t){let e=document.querySelector('section[data-test-uri^="spotify:artist:"]');if(!e){t&&(await ge.waitForPageRender(),Be(!1));return}await Jt(e);let o=e.querySelector(".artist-artistDiscography-topBar")||e.querySelector("section div:has(> .x-sortBox-sortDropdown)");if(o){o.dataset.identifier="discography-topbar",document.querySelector(".main-topBar-topbarContent")?.appendChild(o);let p=e.removeChild;e.removeChild=function(f){return f===o?(o?.remove(),f):p.call(e,f)}}else o=document.querySelector('[data-identifier="discography-topbar"]');if(!o)return;e.querySelector(".artist-artistDiscography-cardGrid")&&await Jt(e,!0);let n=o.querySelector("a")?.textContent,r=e.dataset.testUri,l=e.querySelectorAll(".artist-artistDiscography-headerContainer");for(let p of l){if(p.querySelector(".artist-artistDiscography-headerTitle + div a"))continue;let f=p.querySelector(".main-entityHeader-image");if(!f)continue;f.addEventListener("dblclick",()=>{p.querySelector(".artist-artistDiscography-headerButtons div button")?.click()}),f.addEventListener("contextmenu",async b=>{p.querySelector(".artist-artistDiscography-headerButtons > button:last-child")?.click(),b.preventDefault(),b.stopPropagation(),await No();let _=document.querySelector("[data-tippy-root]");if(_){_.dataset.wmpotifyForceTransform="true";let M=b;_.style.setProperty("--tippy-force-transform",`translate(${M.clientX}px, ${M.clientY}px)`)}});let E=document.createElement("a");E.href=r||"",E.textContent=n||"",p.querySelector(".artist-artistDiscography-headerTitle + div")?.appendChild(E)}let i=e.querySelectorAll(".artist-artistDiscography-tracklist");for(let p of i){if(p.querySelector(".wmpotify-discography-trackList-header"))continue;let f=p.querySelector('[role="grid"]');if(!f)continue;let E=f.getAttribute("aria-label")||"",b=document.createElement("div");b.className="wmpotify-discography-trackList-header",b.textContent=E,p.insertAdjacentElement("afterbegin",b)}let s=new MutationObserver(()=>{Be(!1),s.disconnect()}),u=!1,m=e.querySelector('[data-testid="infinite-scroll-list"]');m||(m=e.querySelector("section"),u=!0),s.observe(m,{childList:!0,subtree:u})}function Jt(t,e=!1){if(!t.querySelector(".artist-artistDiscography-tracklist")&&(e||!t.querySelector(".artist-artistDiscography-cardGrid")))return new Promise(o=>{let n=new MutationObserver(()=>{(t.querySelector(".artist-artistDiscography-tracklist")||!e&&t.querySelector(".artist-artistDiscography-cardGrid"))&&(n.disconnect(),o())});n.observe(t,{childList:!0,subtree:!0})})}function No(){return new Promise(t=>{let e=new MutationObserver(()=>{document.querySelector("[data-tippy-root]")&&(e.disconnect(),t())});e.observe(document.body,{childList:!0})})}var De=null;async function ft(){let t=document.querySelector("main [role=presentation]");if(!t)return;let e=t.querySelector(".main-actionBar-ActionBarRow > div:last-child"),o=document.querySelector(".main-topBar-topbarContent");if(!e||!o)return;console.log("WMPotify: Initializing playlist page"),e.id="playlist-search-box-container";let n=e.parentElement;De&&De.disconnect(),De=new MutationObserver(l=>{for(let i of l)if(i.type==="attributes"&&i.attributeName==="class"){let s=i.target;s&&s.classList.contains("main-entityHeader-topbarContentFadeIn")?s.appendChild(e):n?.appendChild(e)}}),De.observe(o,{attributes:!0,attributeFilter:["class"]});let r=t.querySelector(".main-trackList-trackListHeaderRow");if(r){for(let l of r.querySelectorAll(":scope > div"))if(l.querySelector("button")){l.classList.add("has-button"),(l.querySelector('svg:has(path[d="m14 6-6 6-6-6h12z"])')||l.querySelector('svg:has(path[d="M14 10 8 4l-6 6h12z"])'))&&l.classList.add("selected");let i=new MutationObserver(()=>{i.disconnect(),l.querySelector('svg:has(path[d="m14 6-6 6-6-6h12z"])')||l.querySelector('svg:has(path[d="M14 10 8 4l-6 6h12z"])')?l.classList.add("selected"):l.classList.remove("selected"),i.observe(l,{childList:!0,subtree:!0})});i.observe(l,{childList:!0,subtree:!0})}}}var yt=0,Ge=null,ae={waitForPageRender(){return new Promise(t=>{let e=new MutationObserver(()=>{document.querySelector(".main-loadingPage-container")||(t(void 0),e.disconnect())});e.observe(document.querySelector(".main-view-container__scroll-node-child main"),{childList:!0})})},async onLocChange(t){if(t?.pathname&&!(yt&&Date.now()-yt<2e3)){if(document.documentElement.dataset.page=t.pathname,re.updateSidebarWidth(!0),t.pathname.startsWith("/wmpotify-standalone-libx")){document.body.dataset.wmpotifyLibPageOpen="true";let e=F.getItem(`${C}-sidebar-state`),o=F.getItem(j);Spicetify.Platform.LocalStorageAPI.setItem(`${C}-sidebar-state`,2),Spicetify.Platform.LocalStorageAPI.setItem(j,0),F.setItem(`${C}-sidebar-state`,e),F.setItem(j,o),await oe.init()||Spicetify.Platform.History.action==="POP"&&oe.go()}else if(document.body.dataset.wmpotifyLibPageOpen==="true")if(delete document.body.dataset.wmpotifyLibPageOpen,oe.uninit(),localStorage.wmpotifyShowLibX){let e=F.getItem(`${C}-sidebar-state`);F.removeItem(`${C}-sidebar-state`);let o=F.getItem(j);F.removeItem(j),Spicetify.Platform.LocalStorageAPI.setItem(`${C}-sidebar-state`,parseInt(e.toString())),Spicetify.Platform.LocalStorageAPI.setItem(j,parseInt(o.toString()))}else Spicetify.Platform.LocalStorageAPI.setItem(`${C}-sidebar-state`,1);t.pathname.match("/artist/.*/discography.*")&&Be(!0)}},async onMainContentMount(){console.debug("WMPotify: onMainContentMount"),ft(),Ge&&Ge.disconnect();let t=document.querySelector('div[data-testid="topbar-content-wrapper"]');t&&(Ge=new MutationObserver(ae.onMainContentMount),Ge.observe(t,{childList:!0}))},init(){ae.onLocChange(Spicetify.Platform.History.location),yt=Date.now(),Spicetify.Platform.History.listen(t=>ae.onLocChange(t)),new MutationObserver(ae.onMainContentMount).observe(document.querySelector("main"),{childList:!0}),new MutationObserver(ae.onMainContentMount).observe(document.querySelector(".Root__main-view"),{childList:!0})},initPlaylistPage:ft},ge=ae;var eo=[".Root__globalNav",".main-globalNav-historyButtons",".main-globalNav-searchSection",".main-globalNav-searchContainer > button",".main-globalNav-searchContainer div form button",'.main-globalNav-searchContainer div form input[type="search"]',".main-topBar-topbarContentRight > .main-actionButtons > button",".main-topBar-topbarContentRight > button:last-child",".Root__main-view",".main-view-container__scroll-node-child main",".main-nowPlayingBar-nowPlayingBar",".player-controls__left",'.player-controls__buttons button[data-testid="control-button-playpause"]',".player-controls__right",".playback-bar [class*=encore-text]",".volume-bar",".volume-bar__icon-button",".volume-bar .progress-bar",".main-nowPlayingBar-left"],Ro=performance.now(),q="xp",A="spotify";function Io(){localStorage.wmpotifyShowLibX||(document.body.dataset.hideLibx="true"),y.init();let t=y.query(),e=y.module?.initialOptions;t&&(localStorage.wmpotifyTopMost==="always"||localStorage.wmpotifyTopMost==="minimode"&&$.isMiniMode()?y.setTopMost(!0):y.setTopMost(!1)),localStorage.wmpotifyTitleStyle&&["native","custom","spotify","keepmenu"].includes(localStorage.wmpotifyTitleStyle)?A=localStorage.wmpotifyTitleStyle:(console.log("WMPotify EarlyInit:",window.SpotEx,t),window.outerHeight-window.innerHeight>0||e.showframe||navigator.userAgent.includes("Linux")?A="native":(window.SpotEx||t)&&(A="custom")),A==="keepmenu"&&!navigator.userAgent.includes("Windows")&&(A="spotify"),A==="spotify"&&navigator.userAgent.includes("Linux")&&(A="native"),document.documentElement.dataset.wmpotifyTitleStyle=A,A!=="native"&&Ve.earlyInit();let o=window.matchMedia("(forced-colors: active)");switch(!localStorage.wmpotifyStyle&&A==="native"&&(o.matches?q="basic":t&&t.isThemingEnabled&&(e.transparentrendering&&t.isDwmEnabled?q="aero":t.isDwmEnabled||(q="basic"))),localStorage.wmpotifyStyle&&["xp","aero","basic"].includes(localStorage.wmpotifyStyle)&&(q=localStorage.wmpotifyStyle),y.setMinSize(358,A==="native"?60:90),q){case"xp":y.extendFrame(0,0,0,0),e.showframe===!1&&y.setTransparent(!0);break;case"aero":y.extendFrame(0,0,e.showframe===!1?24:0,60);break;case"basic":y.extendFrame(0,0,0,0),e.showframe===!1&&y.setTransparent(!0),localStorage.wmpotifyBasicTextColor&&document.body.style.setProperty("--basic-pb-text",localStorage.wmpotifyBasicTextColor),localStorage.wmpotifyBasicActiveColor&&document.body.style.setProperty("--basic-pb-active-bg",localStorage.wmpotifyBasicActiveColor),localStorage.wmpotifyBasicInactiveColor&&document.body.style.setProperty("--basic-pb-inactive-bg",localStorage.wmpotifyBasicInactiveColor),document.hasFocus()?document.body.style.backgroundColor="var(--basic-pb-active-bg, #b9d1ea)":document.body.style.backgroundColor="var(--basic-pb-inactive-bg, #d7e4f2)",window.addEventListener("focus",()=>{document.body.style.backgroundColor="var(--basic-pb-active-bg, #b9d1ea)"}),window.addEventListener("blur",()=>{document.body.style.backgroundColor="var(--basic-pb-inactive-bg, #d7e4f2)"});break}document.documentElement.dataset.wmpotifyStyle=q,document.documentElement.dataset.wmpotifyControlStyle=localStorage.wmpotifyControlStyle||"aero",localStorage.wmpotifyCustomScheme&&he(localStorage.wmpotifyCustomScheme),window.addEventListener("resize",()=>{q==="aero"?window.innerHeight<62?y.extendFrame(-1,-1,-1,-1):y.extendFrame(0,0,e.showframe===!1?24:0,60):e.showframe===!1&&y.setTransparent(!0),y.setMinSize(358,A==="native"?60:90)}),localStorage.wmpotifyExternalFont&&ne.applyExternalFont(localStorage.wmpotifyExternalFont),localStorage.wmpotifyFont&&document.documentElement.style.setProperty("--ui-font",localStorage.wmpotifyFont),localStorage.wmpotifyHidePbLeftBtn&&(document.body.dataset.hidePbLeftBtn="true"),localStorage.wmpotifyRightAlignPbLeftBtn&&(document.body.dataset.rightAlignPbLeftBtn="true"),t&&localStorage.wmpotifyLockTitle&&y.lockTitle(!0);let n="follow_scheme";["follow_scheme","system","always","never"].includes(localStorage.wmpotifyDarkMode)?n=localStorage.wmpotifyDarkMode:e.noforceddarkmode&&(n="system");let r=window.matchMedia("(prefers-color-scheme: dark)");(n==="always"||n==="follow_scheme"&&Spicetify.Config.color_scheme==="dark"||n==="system"&&r.matches)&&(document.documentElement.dataset.wmpotifyDarkMode="true"),n==="system"?D.addSystemDarkModeListener():n==="follow_scheme"&&D.addMarketplaceSchemeObserver(),oo("WMPotify: earlyInit end")}Io();globalThis.WMPotify={ver:P,Strings:a,Config:ne,WindowManager:$,ThemeManager:D,PageManager:ge,WindhawkComm:y,CustomLibX:oe,Dialog:{openUpdateDialog:me,openWmpvisInstallDialog:ve,errorDialog:Ce,diagDialog:Me,promptModal:B,confirmModal:Te},MadMenu:{createMadMenu:K,MadMenu:W},MadVersion:J,setTintColor:k,checkUpdates:ue};async function Ao(){if(await Ve.init(A),y.available()&&localStorage.wmpotifyLockTitle&&y.setTitle(await Spicetify.AppTitle.get()),localStorage.wmpotifyShowLibX||Spicetify.Platform.LocalStorageAPI.setItem(`${C}-sidebar-state`,1),Spicetify.Platform.PlatformData.os_version?.split(".")[2]>=22e3&&(y.getModule()?.initialOptions?.showframe!==!1||q==="aero"))try{y.setBackdrop(localStorage.wmpotifyBackdrop||"mica")}catch(o){console.error(o)}ge.init(),new re,ne.init(),globalThis.WMPotify.topbar=new vt,globalThis.WMPotify.playerBar=new Xt,He();let e=document.querySelector(".oXO9_yYs6JyOwkBn8E4a")||document.querySelector(".XOawmCGZcQx4cesyNfVO")||document.querySelector(".Root__right-sidebar > div > div[class]:first-child")||document.querySelector(".Root__right-sidebar div[class]");e&&new MutationObserver(He).observe(e,{childList:!0}),(!localStorage.wmpotifyLastVer||P.compare(localStorage.wmpotifyLastVer)<0)&&me(!0,P.toString(0)),localStorage.wmpotifyLastVer=P.toString(0),localStorage.wmpotifyNoUpdateCheck||ue()}async function Et(){try{await Ao(),oo("WMPotify: Theme loaded"),document.documentElement.dataset.wmpotifyInitComplete="true"}catch(t){console.error("WMPotify: Error during init:",t);let e=t instanceof Error?t.stack:String(t);Ce(a.getString("ERRDLG_DETAIL_EXCEPTION",e)),document.documentElement.dataset.wmpotifyJsFail="true"}}function ht(){return Spicetify.Platform?.PlayerAPI&&Spicetify.AppTitle&&Spicetify.Menu&&Spicetify.Platform.History?.listen&&Spicetify.Platform.LocalStorageAPI&&Spicetify.Platform.Translations&&Spicetify.Platform.PlatformData&&Spicetify.Player.origin?._state?.repeat!=null?!!eo.every(t=>document.querySelector(t)):null}document.readyState==="complete"&&to();window.addEventListener("load",()=>{to()});function to(){let t=0;ht()?Et():Spicetify.Events.platformLoaded.on(()=>{if(ht())Et();else{let e=setInterval(()=>{let o=ht();o?(clearInterval(e),Et()):t++>80&&(x("1.2.45")<0?(Spicetify.showNotification||window.alert)("[WMPotify] "+a.MAIN_MSG_ERROR_OLD_SPOTIFY):x("1.2.45")===0&&!document.querySelector(".Root__globalNav")?window.confirm("[WMPotify] "+a.MAIN_MSG_ERROR_LOAD_FAIL_GLOBALNAV)&&window.location.reload():Ce(a[o===!1?"ERRDLG_DETAIL_MISSING_ELEMENTS":"ERRDLG_DETAIL_MISSING_API"],eo.filter(n=>!document.querySelector(n))),document.querySelector(".Root__globalNav")||(document.documentElement.dataset.wmpotifyNoGlobalNav="true",delete document.body.dataset.hideLibx,console.error("WMPotify: Global nav not found")),clearInterval(e))},100)}})}document.addEventListener("scroll",function(){document.documentElement.scrollTo(0,0)});function oo(t){let e=performance.now()-Ro;console.log(`[${e.toFixed(6)}ms] ${t}`)}})();
